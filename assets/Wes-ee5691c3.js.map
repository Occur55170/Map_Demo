{"version":3,"file":"Wes-ee5691c3.js","sources":["../../src/view/Wes.vue"],"sourcesContent":["<script>\r\nimport { onMounted, ref, nextTick } from 'vue'\r\n\r\nimport { Map, View } from 'ol'\r\nimport 'ol/ol.css'\r\nimport { OSM } from 'ol/source.js'\r\nimport { Tile, Tile as TileLayer, Image as ImageLayer, Vector, Vector as VectorLayer } from 'ol/layer.js'\r\n\r\nimport baseMapList, { getBaseMapAll }  from '@/config/baseMapList'\r\nimport { toPng } from \"html-to-image\";\r\n\r\nexport default {\r\n    props: {\r\n        // cord: {\r\n        //     type: Array,\r\n        //     default: []\r\n        // },\r\n    },\r\n    setup(props, { emit }) {\r\n        const imgSrc = ''\r\n        let map\r\n        onMounted(async () => {\r\n            console.log(1)\r\n            map = new Map({\r\n                target: 'imgMap',\r\n                layers: [\r\n                    new TileLayer({\r\n                        preload: Infinity,\r\n                        source: new OSM(),\r\n                    }),\r\n                ],\r\n                view: new View({\r\n                    projection: 'EPSG:4326',\r\n                    center: [121.326776, 24.655499],\r\n                    zoom: 14,\r\n                }),\r\n            })\r\n            console.log(2)\r\n            nextTick(()=>{\r\n                console.log(3)\r\n                map.once('rendercomplete', function () {\r\n                    console.log('444')\r\n                    toPng(map.getTargetElement()).then(function (dataURL) {\r\n                        console.log(dataURL)\r\n                        imgSrc = dataURL\r\n                    })\r\n                })\r\n            })\r\n        })\r\n\r\n\r\n        return {\r\n            imgSrc,\r\n            map,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div>\r\n        <div id=\"imgMap\"></div>\r\n        <img :src=\"imgSrc\" alt=\"\">\r\n    </div>\r\n</template>\r\n\r\n<style lang=\"sass\" scoped>\r\n#imgMap\r\n    // position: fixed\r\n    // top: -99999px\r\n    // left: -99999px\r\n    width: 600px\r\n    height: 600px\r\n</style>\r\n"],"names":["_sfc_main","props","emit","onMounted","OSM","map","dataURL","imgSrc","$setup"],"mappings":"gMAWA,MAAAA,EAAA,CACI,MAAA,GAMA,MAAAC,EAAA,CAAA,KAAAC,GAAA,kBAGI,OAAAC,EAAA,SAAA,yBAGQ,OAAA,SACA,OAAA,QAEQ,QAAA,IACA,OAAA,IAAAC,CACJ,CAAA,oEAKA,KAAA,EACJ,CAAA,yCAKAC,EAAA,KAAA,iBAAA,UAAA,CACI,QAAA,IAAA,KAAA,2CAEI,QAAA,IAAAC,CAAA,cAQhB,CACI,OAAAC,EACA,IAAAF,CACJ,CACJ,CACJ,wJAMc,IAAAG,EAAA,OAAa,IAAA"}