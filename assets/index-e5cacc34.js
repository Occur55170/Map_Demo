(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function Yh(i,e){const t=Object.create(null),n=i.split(",");for(let s=0;s<n.length;s++)t[n[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}function _c(i){if(Fe(i)){const e={};for(let t=0;t<i.length;t++){const n=i[t],s=Dt(n)?Xv(n):_c(n);if(s)for(const r in s)e[r]=s[r]}return e}else{if(Dt(i))return i;if(yt(i))return i}}const Hv=/;(?![^(]*\))/g,Yv=/:([^]+)/,Uv=/\/\*.*?\*\//gs;function Xv(i){const e={};return i.replace(Uv,"").split(Hv).forEach(t=>{if(t){const n=t.split(Yv);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ei(i){let e="";if(Dt(i))e=i;else if(Fe(i))for(let t=0;t<i.length;t++){const n=Ei(i[t]);n&&(e+=n+" ")}else if(yt(i))for(const t in i)i[t]&&(e+=t+" ");return e.trim()}function Kv(i){if(!i)return null;let{class:e,style:t}=i;return e&&!Dt(e)&&(i.class=Ei(e)),t&&(i.style=_c(t)),i}const qv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zv=Yh(qv);function Rm(i){return!!i||i===""}function Jv(i,e){if(i.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<i.length;n++)t=yc(i[n],e[n]);return t}function yc(i,e){if(i===e)return!0;let t=fg(i),n=fg(e);if(t||n)return t&&n?i.getTime()===e.getTime():!1;if(t=ea(i),n=ea(e),t||n)return i===e;if(t=Fe(i),n=Fe(e),t||n)return t&&n?Jv(i,e):!1;if(t=yt(i),n=yt(e),t||n){if(!t||!n)return!1;const s=Object.keys(i).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in i){const a=i.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!yc(i[o],e[o]))return!1}}return String(i)===String(e)}function Qv(i,e){return i.findIndex(t=>yc(t,e))}const jr=i=>Dt(i)?i:i==null?"":Fe(i)||yt(i)&&(i.toString===Lm||!He(i.toString))?JSON.stringify(i,Am,2):String(i),Am=(i,e)=>e&&e.__v_isRef?Am(i,e.value):Vr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,s])=>(t[`${n} =>`]=s,t),{})}:Cc(e)?{[`Set(${e.size})`]:[...e.values()]}:yt(e)&&!Fe(e)&&!Om(e)?String(e):e,_t={},$r=[],Ui=()=>{},eC=()=>!1,tC=/^on[^a-z]/,vc=i=>tC.test(i),Uh=i=>i.startsWith("onUpdate:"),ni=Object.assign,Xh=(i,e)=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)},iC=Object.prototype.hasOwnProperty,Qe=(i,e)=>iC.call(i,e),Fe=Array.isArray,Vr=i=>ba(i)==="[object Map]",Cc=i=>ba(i)==="[object Set]",fg=i=>ba(i)==="[object Date]",He=i=>typeof i=="function",Dt=i=>typeof i=="string",ea=i=>typeof i=="symbol",yt=i=>i!==null&&typeof i=="object",Im=i=>yt(i)&&He(i.then)&&He(i.catch),Lm=Object.prototype.toString,ba=i=>Lm.call(i),nC=i=>ba(i).slice(8,-1),Om=i=>ba(i)==="[object Object]",Kh=i=>Dt(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Al=Yh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ec=i=>{const e=Object.create(null);return t=>e[t]||(e[t]=i(t))},sC=/-(\w)/g,Xr=Ec(i=>i.replace(sC,(e,t)=>t?t.toUpperCase():"")),rC=/\B([A-Z])/g,ho=Ec(i=>i.replace(rC,"-$1").toLowerCase()),Pm=Ec(i=>i.charAt(0).toUpperCase()+i.slice(1)),bu=Ec(i=>i?`on${Pm(i)}`:""),ta=(i,e)=>!Object.is(i,e),Il=(i,e)=>{for(let t=0;t<i.length;t++)i[t](e)},Gl=(i,e,t)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value:t})},qh=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let gg;const oC=()=>gg||(gg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let sn;class aC{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=sn,!e&&sn&&(this.index=(sn.scopes||(sn.scopes=[])).push(this)-1)}run(e){if(this.active){const t=sn;try{return sn=this,e()}finally{sn=t}}}on(){sn=this}off(){sn=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}}}function lC(i,e=sn){e&&e.active&&e.effects.push(i)}const Zh=i=>{const e=new Set(i);return e.w=0,e.n=0,e},Mm=i=>(i.w&ms)>0,Dm=i=>(i.n&ms)>0,cC=({deps:i})=>{if(i.length)for(let e=0;e<i.length;e++)i[e].w|=ms},uC=i=>{const{deps:e}=i;if(e.length){let t=0;for(let n=0;n<e.length;n++){const s=e[n];Mm(s)&&!Dm(s)?s.delete(i):e[t++]=s,s.w&=~ms,s.n&=~ms}e.length=t}},ah=new WeakMap;let jo=0,ms=1;const lh=30;let Wi;const Js=Symbol(""),ch=Symbol("");class Jh{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,lC(this,n)}run(){if(!this.active)return this.fn();let e=Wi,t=us;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Wi,Wi=this,us=!0,ms=1<<++jo,jo<=lh?cC(this):pg(this),this.fn()}finally{jo<=lh&&uC(this),ms=1<<--jo,Wi=this.parent,us=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Wi===this?this.deferStop=!0:this.active&&(pg(this),this.onStop&&this.onStop(),this.active=!1)}}function pg(i){const{deps:e}=i;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(i);e.length=0}}let us=!0;const Fm=[];function fo(){Fm.push(us),us=!1}function go(){const i=Fm.pop();us=i===void 0?!0:i}function Ti(i,e,t){if(us&&Wi){let n=ah.get(i);n||ah.set(i,n=new Map);let s=n.get(t);s||n.set(t,s=Zh()),Nm(s)}}function Nm(i,e){let t=!1;jo<=lh?Dm(i)||(i.n|=ms,t=!Mm(i)):t=!i.has(Wi),t&&(i.add(Wi),Wi.deps.push(i))}function Nn(i,e,t,n,s,r){const o=ah.get(i);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&Fe(i)){const l=qh(n);o.forEach((u,h)=>{(h==="length"||h>=l)&&a.push(u)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":Fe(i)?Kh(t)&&a.push(o.get("length")):(a.push(o.get(Js)),Vr(i)&&a.push(o.get(ch)));break;case"delete":Fe(i)||(a.push(o.get(Js)),Vr(i)&&a.push(o.get(ch)));break;case"set":Vr(i)&&a.push(o.get(Js));break}if(a.length===1)a[0]&&uh(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);uh(Zh(l))}}function uh(i,e){const t=Fe(i)?i:[...i];for(const n of t)n.computed&&mg(n);for(const n of t)n.computed||mg(n)}function mg(i,e){(i!==Wi||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const hC=Yh("__proto__,__v_isRef,__isVue"),km=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(ea)),dC=Qh(),fC=Qh(!1,!0),gC=Qh(!0),_g=pC();function pC(){const i={};return["includes","indexOf","lastIndexOf"].forEach(e=>{i[e]=function(...t){const n=at(this);for(let r=0,o=this.length;r<o;r++)Ti(n,"get",r+"");const s=n[e](...t);return s===-1||s===!1?n[e](...t.map(at)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{i[e]=function(...t){fo();const n=at(this)[e].apply(this,t);return go(),n}}),i}function Qh(i=!1,e=!1){return function(n,s,r){if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&r===(i?e?OC:Wm:e?Vm:$m).get(n))return n;const o=Fe(n);if(!i&&o&&Qe(_g,s))return Reflect.get(_g,s,r);const a=Reflect.get(n,s,r);return(ea(s)?km.has(s):hC(s))||(i||Ti(n,"get",s),e)?a:Zt(a)?o&&Kh(s)?a:a.value:yt(a)?i?Bm(a):pn(a):a}}const mC=Gm(),_C=Gm(!0);function Gm(i=!1){return function(t,n,s,r){let o=t[n];if(Kr(o)&&Zt(o)&&!Zt(s))return!1;if(!i&&(!jl(s)&&!Kr(s)&&(o=at(o),s=at(s)),!Fe(t)&&Zt(o)&&!Zt(s)))return o.value=s,!0;const a=Fe(t)&&Kh(n)?Number(n)<t.length:Qe(t,n),l=Reflect.set(t,n,s,r);return t===at(r)&&(a?ta(s,o)&&Nn(t,"set",n,s):Nn(t,"add",n,s)),l}}function yC(i,e){const t=Qe(i,e);i[e];const n=Reflect.deleteProperty(i,e);return n&&t&&Nn(i,"delete",e,void 0),n}function vC(i,e){const t=Reflect.has(i,e);return(!ea(e)||!km.has(e))&&Ti(i,"has",e),t}function CC(i){return Ti(i,"iterate",Fe(i)?"length":Js),Reflect.ownKeys(i)}const jm={get:dC,set:mC,deleteProperty:yC,has:vC,ownKeys:CC},EC={get:gC,set(i,e){return!0},deleteProperty(i,e){return!0}},xC=ni({},jm,{get:fC,set:_C}),ed=i=>i,xc=i=>Reflect.getPrototypeOf(i);function il(i,e,t=!1,n=!1){i=i.__v_raw;const s=at(i),r=at(e);t||(e!==r&&Ti(s,"get",e),Ti(s,"get",r));const{has:o}=xc(s),a=n?ed:t?nd:ia;if(o.call(s,e))return a(i.get(e));if(o.call(s,r))return a(i.get(r));i!==s&&i.get(e)}function nl(i,e=!1){const t=this.__v_raw,n=at(t),s=at(i);return e||(i!==s&&Ti(n,"has",i),Ti(n,"has",s)),i===s?t.has(i):t.has(i)||t.has(s)}function sl(i,e=!1){return i=i.__v_raw,!e&&Ti(at(i),"iterate",Js),Reflect.get(i,"size",i)}function yg(i){i=at(i);const e=at(this);return xc(e).has.call(e,i)||(e.add(i),Nn(e,"add",i,i)),this}function vg(i,e){e=at(e);const t=at(this),{has:n,get:s}=xc(t);let r=n.call(t,i);r||(i=at(i),r=n.call(t,i));const o=s.call(t,i);return t.set(i,e),r?ta(e,o)&&Nn(t,"set",i,e):Nn(t,"add",i,e),this}function Cg(i){const e=at(this),{has:t,get:n}=xc(e);let s=t.call(e,i);s||(i=at(i),s=t.call(e,i)),n&&n.call(e,i);const r=e.delete(i);return s&&Nn(e,"delete",i,void 0),r}function Eg(){const i=at(this),e=i.size!==0,t=i.clear();return e&&Nn(i,"clear",void 0,void 0),t}function rl(i,e){return function(n,s){const r=this,o=r.__v_raw,a=at(o),l=e?ed:i?nd:ia;return!i&&Ti(a,"iterate",Js),o.forEach((u,h)=>n.call(s,l(u),l(h),r))}}function al(i,e,t){return function(...n){const s=this.__v_raw,r=at(s),o=Vr(r),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,u=s[i](...n),h=t?ed:e?nd:ia;return!e&&Ti(r,"iterate",l?ch:Js),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:a?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function Yn(i){return function(...e){return i==="delete"?!1:this}}function TC(){const i={get(r){return il(this,r)},get size(){return sl(this)},has:nl,add:yg,set:vg,delete:Cg,clear:Eg,forEach:rl(!1,!1)},e={get(r){return il(this,r,!1,!0)},get size(){return sl(this)},has:nl,add:yg,set:vg,delete:Cg,clear:Eg,forEach:rl(!1,!0)},t={get(r){return il(this,r,!0)},get size(){return sl(this,!0)},has(r){return nl.call(this,r,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:rl(!0,!1)},n={get(r){return il(this,r,!0,!0)},get size(){return sl(this,!0)},has(r){return nl.call(this,r,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:rl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=al(r,!1,!1),t[r]=al(r,!0,!1),e[r]=al(r,!1,!0),n[r]=al(r,!0,!0)}),[i,t,e,n]}const[wC,bC,SC,RC]=TC();function td(i,e){const t=e?i?RC:SC:i?bC:wC;return(n,s,r)=>s==="__v_isReactive"?!i:s==="__v_isReadonly"?i:s==="__v_raw"?n:Reflect.get(Qe(t,s)&&s in n?t:n,s,r)}const AC={get:td(!1,!1)},IC={get:td(!1,!0)},LC={get:td(!0,!1)},$m=new WeakMap,Vm=new WeakMap,Wm=new WeakMap,OC=new WeakMap;function PC(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function MC(i){return i.__v_skip||!Object.isExtensible(i)?0:PC(nC(i))}function pn(i){return Kr(i)?i:id(i,!1,jm,AC,$m)}function DC(i){return id(i,!1,xC,IC,Vm)}function Bm(i){return id(i,!0,EC,LC,Wm)}function id(i,e,t,n,s){if(!yt(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const r=s.get(i);if(r)return r;const o=MC(i);if(o===0)return i;const a=new Proxy(i,o===2?n:t);return s.set(i,a),a}function Wr(i){return Kr(i)?Wr(i.__v_raw):!!(i&&i.__v_isReactive)}function Kr(i){return!!(i&&i.__v_isReadonly)}function jl(i){return!!(i&&i.__v_isShallow)}function zm(i){return Wr(i)||Kr(i)}function at(i){const e=i&&i.__v_raw;return e?at(e):i}function Hm(i){return Gl(i,"__v_skip",!0),i}const ia=i=>yt(i)?pn(i):i,nd=i=>yt(i)?Bm(i):i;function Ym(i){us&&Wi&&(i=at(i),Nm(i.dep||(i.dep=Zh())))}function Um(i,e){i=at(i),i.dep&&uh(i.dep)}function Zt(i){return!!(i&&i.__v_isRef===!0)}function Bo(i){return FC(i,!1)}function FC(i,e){return Zt(i)?i:new NC(i,e)}class NC{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:at(e),this._value=t?e:ia(e)}get value(){return Ym(this),this._value}set value(e){const t=this.__v_isShallow||jl(e)||Kr(e);e=t?e:at(e),ta(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:ia(e),Um(this))}}function kC(i){return Zt(i)?i.value:i}const GC={get:(i,e,t)=>kC(Reflect.get(i,e,t)),set:(i,e,t,n)=>{const s=i[e];return Zt(s)&&!Zt(t)?(s.value=t,!0):Reflect.set(i,e,t,n)}};function Xm(i){return Wr(i)?i:new Proxy(i,GC)}var Km;class jC{constructor(e,t,n,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Km]=!1,this._dirty=!0,this.effect=new Jh(e,()=>{this._dirty||(this._dirty=!0,Um(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=at(this);return Ym(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Km="__v_isReadonly";function $C(i,e,t=!1){let n,s;const r=He(i);return r?(n=i,s=Ui):(n=i.get,s=i.set),new jC(n,s,r||!s,t)}function hs(i,e,t,n){let s;try{s=n?i(...n):i()}catch(r){Sa(r,e,t)}return s}function Xi(i,e,t,n){if(He(i)){const r=hs(i,e,t,n);return r&&Im(r)&&r.catch(o=>{Sa(o,e,t)}),r}const s=[];for(let r=0;r<i.length;r++)s.push(Xi(i[r],e,t,n));return s}function Sa(i,e,t,n=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=t;for(;r;){const u=r.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](i,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){hs(l,null,10,[i,o,a]);return}}VC(i,t,s,n)}function VC(i,e,t,n=!0){console.error(i)}let na=!1,hh=!1;const qt=[];let an=0;const Br=[];let bn=null,zs=0;const qm=Promise.resolve();let sd=null;function Zm(i){const e=sd||qm;return i?e.then(this?i.bind(this):i):e}function WC(i){let e=an+1,t=qt.length;for(;e<t;){const n=e+t>>>1;sa(qt[n])<i?e=n+1:t=n}return e}function Tc(i){(!qt.length||!qt.includes(i,na&&i.allowRecurse?an+1:an))&&(i.id==null?qt.push(i):qt.splice(WC(i.id),0,i),Jm())}function Jm(){!na&&!hh&&(hh=!0,sd=qm.then(e_))}function BC(i){const e=qt.indexOf(i);e>an&&qt.splice(e,1)}function zC(i){Fe(i)?Br.push(...i):(!bn||!bn.includes(i,i.allowRecurse?zs+1:zs))&&Br.push(i),Jm()}function xg(i,e=na?an+1:0){for(;e<qt.length;e++){const t=qt[e];t&&t.pre&&(qt.splice(e,1),e--,t())}}function Qm(i){if(Br.length){const e=[...new Set(Br)];if(Br.length=0,bn){bn.push(...e);return}for(bn=e,bn.sort((t,n)=>sa(t)-sa(n)),zs=0;zs<bn.length;zs++)bn[zs]();bn=null,zs=0}}const sa=i=>i.id==null?1/0:i.id,HC=(i,e)=>{const t=sa(i)-sa(e);if(t===0){if(i.pre&&!e.pre)return-1;if(e.pre&&!i.pre)return 1}return t};function e_(i){hh=!1,na=!0,qt.sort(HC);const e=Ui;try{for(an=0;an<qt.length;an++){const t=qt[an];t&&t.active!==!1&&hs(t,null,14)}}finally{an=0,qt.length=0,Qm(),na=!1,sd=null,(qt.length||Br.length)&&e_()}}function YC(i,e,...t){if(i.isUnmounted)return;const n=i.vnode.props||_t;let s=t;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in n){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:m}=n[h]||_t;m&&(s=t.map(y=>Dt(y)?y.trim():y)),f&&(s=t.map(qh))}let a,l=n[a=bu(e)]||n[a=bu(Xr(e))];!l&&r&&(l=n[a=bu(ho(e))]),l&&Xi(l,i,6,s);const u=n[a+"Once"];if(u){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,Xi(u,i,6,s)}}function t_(i,e,t=!1){const n=e.emitsCache,s=n.get(i);if(s!==void 0)return s;const r=i.emits;let o={},a=!1;if(!He(i)){const l=u=>{const h=t_(u,e,!0);h&&(a=!0,ni(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!r&&!a?(yt(i)&&n.set(i,null),null):(Fe(r)?r.forEach(l=>o[l]=null):ni(o,r),yt(i)&&n.set(i,o),o)}function wc(i,e){return!i||!vc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Qe(i,e[0].toLowerCase()+e.slice(1))||Qe(i,ho(e))||Qe(i,e))}let Bi=null,bc=null;function $l(i){const e=Bi;return Bi=i,bc=i&&i.type.__scopeId||null,e}function rd(i){bc=i}function od(){bc=null}function UC(i,e=Bi,t){if(!e||i._n)return i;const n=(...s)=>{n._d&&Lg(-1);const r=$l(e);let o;try{o=i(...s)}finally{$l(r),n._d&&Lg(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Su(i){const{type:e,vnode:t,proxy:n,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:u,render:h,renderCache:f,data:m,setupState:y,ctx:v,inheritAttrs:E}=i;let b,S;const A=$l(i);try{if(t.shapeFlag&4){const R=s||n;b=on(h.call(R,R,f,r,y,m,v)),S=l}else{const R=e;b=on(R.length>1?R(r,{attrs:l,slots:a,emit:u}):R(r,null)),S=e.props?l:XC(l)}}catch(R){Yo.length=0,Sa(R,i,1),b=Pt(ir)}let I=b;if(S&&E!==!1){const R=Object.keys(S),{shapeFlag:M}=I;R.length&&M&7&&(o&&R.some(Uh)&&(S=KC(S,o)),I=qr(I,S))}return t.dirs&&(I=qr(I),I.dirs=I.dirs?I.dirs.concat(t.dirs):t.dirs),t.transition&&(I.transition=t.transition),b=I,$l(A),b}const XC=i=>{let e;for(const t in i)(t==="class"||t==="style"||vc(t))&&((e||(e={}))[t]=i[t]);return e},KC=(i,e)=>{const t={};for(const n in i)(!Uh(n)||!(n.slice(9)in e))&&(t[n]=i[n]);return t};function qC(i,e,t){const{props:n,children:s,component:r}=i,{props:o,children:a,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?Tg(n,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==n[m]&&!wc(u,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Tg(n,o,u):!0:!!o;return!1}function Tg(i,e,t){const n=Object.keys(e);if(n.length!==Object.keys(i).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==i[r]&&!wc(t,r))return!0}return!1}function ZC({vnode:i,parent:e},t){for(;e&&e.subTree===i;)(i=e.vnode).el=t,e=e.parent}const JC=i=>i.__isSuspense;function QC(i,e){e&&e.pendingBranch?Fe(i)?e.effects.push(...i):e.effects.push(i):zC(i)}function eE(i,e){if(zt){let t=zt.provides;const n=zt.parent&&zt.parent.provides;n===t&&(t=zt.provides=Object.create(n)),t[i]=e}}function Ll(i,e,t=!1){const n=zt||Bi;if(n){const s=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&i in s)return s[i];if(arguments.length>1)return t&&He(e)?e.call(n.proxy):e}}const ll={};function Ru(i,e,t){return i_(i,e,t)}function i_(i,e,{immediate:t,deep:n,flush:s,onTrack:r,onTrigger:o}=_t){const a=zt;let l,u=!1,h=!1;if(Zt(i)?(l=()=>i.value,u=jl(i)):Wr(i)?(l=()=>i,n=!0):Fe(i)?(h=!0,u=i.some(I=>Wr(I)||jl(I)),l=()=>i.map(I=>{if(Zt(I))return I.value;if(Wr(I))return Ys(I);if(He(I))return hs(I,a,2)})):He(i)?e?l=()=>hs(i,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Xi(i,a,3,[m])}:l=Ui,e&&n){const I=l;l=()=>Ys(I())}let f,m=I=>{f=S.onStop=()=>{hs(I,a,4)}},y;if(Jr)if(m=Ui,e?t&&Xi(e,a,3,[l(),h?[]:void 0,m]):l(),s==="sync"){const I=UE();y=I.__watcherHandles||(I.__watcherHandles=[])}else return Ui;let v=h?new Array(i.length).fill(ll):ll;const E=()=>{if(S.active)if(e){const I=S.run();(n||u||(h?I.some((R,M)=>ta(R,v[M])):ta(I,v)))&&(f&&f(),Xi(e,a,3,[I,v===ll?void 0:h&&v[0]===ll?[]:v,m]),v=I)}else S.run()};E.allowRecurse=!!e;let b;s==="sync"?b=E:s==="post"?b=()=>hi(E,a&&a.suspense):(E.pre=!0,a&&(E.id=a.uid),b=()=>Tc(E));const S=new Jh(l,b);e?t?E():v=S.run():s==="post"?hi(S.run.bind(S),a&&a.suspense):S.run();const A=()=>{S.stop(),a&&a.scope&&Xh(a.scope.effects,S)};return y&&y.push(A),A}function tE(i,e,t){const n=this.proxy,s=Dt(i)?i.includes(".")?n_(n,i):()=>n[i]:i.bind(n,n);let r;He(e)?r=e:(r=e.handler,t=e);const o=zt;Zr(this);const a=i_(s,r.bind(n),t);return o?Zr(o):Qs(),a}function n_(i,e){const t=e.split(".");return()=>{let n=i;for(let s=0;s<t.length&&n;s++)n=n[t[s]];return n}}function Ys(i,e){if(!yt(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),Zt(i))Ys(i.value,e);else if(Fe(i))for(let t=0;t<i.length;t++)Ys(i[t],e);else if(Cc(i)||Vr(i))i.forEach(t=>{Ys(t,e)});else if(Om(i))for(const t in i)Ys(i[t],e);return i}function iE(i){return He(i)?{setup:i,name:i.name}:i}const Ol=i=>!!i.type.__asyncLoader;function nE(i){He(i)&&(i={loader:i});const{loader:e,loadingComponent:t,errorComponent:n,delay:s=200,timeout:r,suspensible:o=!0,onError:a}=i;let l=null,u,h=0;const f=()=>(h++,l=null,m()),m=()=>{let y;return l||(y=l=e().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),a)return new Promise((E,b)=>{a(v,()=>E(f()),()=>b(v),h+1)});throw v}).then(v=>y!==l&&l?l:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),u=v,v)))};return iE({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return u},setup(){const y=zt;if(u)return()=>Au(u,y);const v=A=>{l=null,Sa(A,y,13,!n)};if(o&&y.suspense||Jr)return m().then(A=>()=>Au(A,y)).catch(A=>(v(A),()=>n?Pt(n,{error:A}):null));const E=Bo(!1),b=Bo(),S=Bo(!!s);return s&&setTimeout(()=>{S.value=!1},s),r!=null&&setTimeout(()=>{if(!E.value&&!b.value){const A=new Error(`Async component timed out after ${r}ms.`);v(A),b.value=A}},r),m().then(()=>{E.value=!0,y.parent&&ad(y.parent.vnode)&&Tc(y.parent.update)}).catch(A=>{v(A),b.value=A}),()=>{if(E.value&&u)return Au(u,y);if(b.value&&n)return Pt(n,{error:b.value});if(t&&!S.value)return Pt(t)}}})}function Au(i,e){const{ref:t,props:n,children:s,ce:r}=e.vnode,o=Pt(i,n,s);return o.ref=t,o.ce=r,delete e.vnode.ce,o}const ad=i=>i.type.__isKeepAlive;function sE(i,e){s_(i,"a",e)}function rE(i,e){s_(i,"da",e)}function s_(i,e,t=zt){const n=i.__wdc||(i.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return i()});if(Sc(e,n,t),t){let s=t.parent;for(;s&&s.parent;)ad(s.parent.vnode)&&oE(n,e,t,s),s=s.parent}}function oE(i,e,t,n){const s=Sc(e,i,n,!0);o_(()=>{Xh(n[e],s)},t)}function Sc(i,e,t=zt,n=!1){if(t){const s=t[i]||(t[i]=[]),r=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;fo(),Zr(t);const a=Xi(e,t,i,o);return Qs(),go(),a});return n?s.unshift(r):s.push(r),r}}const Gn=i=>(e,t=zt)=>(!Jr||i==="sp")&&Sc(i,(...n)=>e(...n),t),aE=Gn("bm"),r_=Gn("m"),lE=Gn("bu"),cE=Gn("u"),uE=Gn("bum"),o_=Gn("um"),hE=Gn("sp"),dE=Gn("rtg"),fE=Gn("rtc");function gE(i,e=zt){Sc("ec",i,e)}function pE(i,e){const t=Bi;if(t===null)return i;const n=Ic(t)||t.proxy,s=i.dirs||(i.dirs=[]);for(let r=0;r<e.length;r++){let[o,a,l,u=_t]=e[r];o&&(He(o)&&(o={mounted:o,updated:o}),o.deep&&Ys(a),s.push({dir:o,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return i}function Gs(i,e,t,n){const s=i.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(fo(),Xi(l,t,8,[i.el,a,i,e]),go())}}const mE=Symbol();function zo(i,e,t,n){let s;const r=t&&t[n];if(Fe(i)||Dt(i)){s=new Array(i.length);for(let o=0,a=i.length;o<a;o++)s[o]=e(i[o],o,void 0,r&&r[o])}else if(typeof i=="number"){s=new Array(i);for(let o=0;o<i;o++)s[o]=e(o+1,o,void 0,r&&r[o])}else if(yt(i))if(i[Symbol.iterator])s=Array.from(i,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(i);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];s[a]=e(i[u],u,a,r&&r[a])}}else s=[];return t&&(t[n]=s),s}const dh=i=>i?v_(i)?Ic(i)||i.proxy:dh(i.parent):null,Ho=ni(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>dh(i.parent),$root:i=>dh(i.root),$emit:i=>i.emit,$options:i=>ld(i),$forceUpdate:i=>i.f||(i.f=()=>Tc(i.update)),$nextTick:i=>i.n||(i.n=Zm.bind(i.proxy)),$watch:i=>tE.bind(i)}),Iu=(i,e)=>i!==_t&&!i.__isScriptSetup&&Qe(i,e),_E={get({_:i},e){const{ctx:t,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=i;let u;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return n[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(Iu(n,e))return o[e]=1,n[e];if(s!==_t&&Qe(s,e))return o[e]=2,s[e];if((u=i.propsOptions[0])&&Qe(u,e))return o[e]=3,r[e];if(t!==_t&&Qe(t,e))return o[e]=4,t[e];fh&&(o[e]=0)}}const h=Ho[e];let f,m;if(h)return e==="$attrs"&&Ti(i,"get",e),h(i);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==_t&&Qe(t,e))return o[e]=4,t[e];if(m=l.config.globalProperties,Qe(m,e))return m[e]},set({_:i},e,t){const{data:n,setupState:s,ctx:r}=i;return Iu(s,e)?(s[e]=t,!0):n!==_t&&Qe(n,e)?(n[e]=t,!0):Qe(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(r[e]=t,!0)},has({_:{data:i,setupState:e,accessCache:t,ctx:n,appContext:s,propsOptions:r}},o){let a;return!!t[o]||i!==_t&&Qe(i,o)||Iu(e,o)||(a=r[0])&&Qe(a,o)||Qe(n,o)||Qe(Ho,o)||Qe(s.config.globalProperties,o)},defineProperty(i,e,t){return t.get!=null?i._.accessCache[e]=0:Qe(t,"value")&&this.set(i,e,t.value,null),Reflect.defineProperty(i,e,t)}};let fh=!0;function yE(i){const e=ld(i),t=i.proxy,n=i.ctx;fh=!1,e.beforeCreate&&wg(e.beforeCreate,i,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:m,beforeUpdate:y,updated:v,activated:E,deactivated:b,beforeDestroy:S,beforeUnmount:A,destroyed:I,unmounted:R,render:M,renderTracked:p,renderTriggered:k,errorCaptured:W,serverPrefetch:H,expose:se,inheritAttrs:ce,components:pe,directives:ve,filters:Me}=e;if(u&&vE(u,n,null,i.appContext.config.unwrapInjectedRef),o)for(const X in o){const Z=o[X];He(Z)&&(n[X]=Z.bind(t))}if(s){const X=s.call(t,t);yt(X)&&(i.data=pn(X))}if(fh=!0,r)for(const X in r){const Z=r[X],we=He(Z)?Z.bind(t,t):He(Z.get)?Z.get.bind(t,t):Ui,De=!He(Z)&&He(Z.set)?Z.set.bind(t):Ui,We=Ml({get:we,set:De});Object.defineProperty(n,X,{enumerable:!0,configurable:!0,get:()=>We.value,set:J=>We.value=J})}if(a)for(const X in a)a_(a[X],n,t,X);if(l){const X=He(l)?l.call(t):l;Reflect.ownKeys(X).forEach(Z=>{eE(Z,X[Z])})}h&&wg(h,i,"c");function le(X,Z){Fe(Z)?Z.forEach(we=>X(we.bind(t))):Z&&X(Z.bind(t))}if(le(aE,f),le(r_,m),le(lE,y),le(cE,v),le(sE,E),le(rE,b),le(gE,W),le(fE,p),le(dE,k),le(uE,A),le(o_,R),le(hE,H),Fe(se))if(se.length){const X=i.exposed||(i.exposed={});se.forEach(Z=>{Object.defineProperty(X,Z,{get:()=>t[Z],set:we=>t[Z]=we})})}else i.exposed||(i.exposed={});M&&i.render===Ui&&(i.render=M),ce!=null&&(i.inheritAttrs=ce),pe&&(i.components=pe),ve&&(i.directives=ve)}function vE(i,e,t=Ui,n=!1){Fe(i)&&(i=gh(i));for(const s in i){const r=i[s];let o;yt(r)?"default"in r?o=Ll(r.from||s,r.default,!0):o=Ll(r.from||s):o=Ll(r),Zt(o)&&n?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function wg(i,e,t){Xi(Fe(i)?i.map(n=>n.bind(e.proxy)):i.bind(e.proxy),e,t)}function a_(i,e,t,n){const s=n.includes(".")?n_(t,n):()=>t[n];if(Dt(i)){const r=e[i];He(r)&&Ru(s,r)}else if(He(i))Ru(s,i.bind(t));else if(yt(i))if(Fe(i))i.forEach(r=>a_(r,e,t,n));else{const r=He(i.handler)?i.handler.bind(t):e[i.handler];He(r)&&Ru(s,r,i)}}function ld(i){const e=i.type,{mixins:t,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!n?l=e:(l={},s.length&&s.forEach(u=>Vl(l,u,o,!0)),Vl(l,e,o)),yt(e)&&r.set(e,l),l}function Vl(i,e,t,n=!1){const{mixins:s,extends:r}=e;r&&Vl(i,r,t,!0),s&&s.forEach(o=>Vl(i,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=CE[o]||t&&t[o];i[o]=a?a(i[o],e[o]):e[o]}return i}const CE={data:bg,props:Ws,emits:Ws,methods:Ws,computed:Ws,beforeCreate:ei,created:ei,beforeMount:ei,mounted:ei,beforeUpdate:ei,updated:ei,beforeDestroy:ei,beforeUnmount:ei,destroyed:ei,unmounted:ei,activated:ei,deactivated:ei,errorCaptured:ei,serverPrefetch:ei,components:Ws,directives:Ws,watch:xE,provide:bg,inject:EE};function bg(i,e){return e?i?function(){return ni(He(i)?i.call(this,this):i,He(e)?e.call(this,this):e)}:e:i}function EE(i,e){return Ws(gh(i),gh(e))}function gh(i){if(Fe(i)){const e={};for(let t=0;t<i.length;t++)e[i[t]]=i[t];return e}return i}function ei(i,e){return i?[...new Set([].concat(i,e))]:e}function Ws(i,e){return i?ni(ni(Object.create(null),i),e):e}function xE(i,e){if(!i)return e;if(!e)return i;const t=ni(Object.create(null),i);for(const n in e)t[n]=ei(i[n],e[n]);return t}function TE(i,e,t,n=!1){const s={},r={};Gl(r,Ac,1),i.propsDefaults=Object.create(null),l_(i,e,s,r);for(const o in i.propsOptions[0])o in s||(s[o]=void 0);t?i.props=n?s:DC(s):i.type.props?i.props=s:i.props=r,i.attrs=r}function wE(i,e,t,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=i,a=at(s),[l]=i.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=i.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(wc(i.emitsOptions,m))continue;const y=e[m];if(l)if(Qe(r,m))y!==r[m]&&(r[m]=y,u=!0);else{const v=Xr(m);s[v]=ph(l,a,v,y,i,!1)}else y!==r[m]&&(r[m]=y,u=!0)}}}else{l_(i,e,s,r)&&(u=!0);let h;for(const f in a)(!e||!Qe(e,f)&&((h=ho(f))===f||!Qe(e,h)))&&(l?t&&(t[f]!==void 0||t[h]!==void 0)&&(s[f]=ph(l,a,f,void 0,i,!0)):delete s[f]);if(r!==a)for(const f in r)(!e||!Qe(e,f))&&(delete r[f],u=!0)}u&&Nn(i,"set","$attrs")}function l_(i,e,t,n){const[s,r]=i.propsOptions;let o=!1,a;if(e)for(let l in e){if(Al(l))continue;const u=e[l];let h;s&&Qe(s,h=Xr(l))?!r||!r.includes(h)?t[h]=u:(a||(a={}))[h]=u:wc(i.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(r){const l=at(t),u=a||_t;for(let h=0;h<r.length;h++){const f=r[h];t[f]=ph(s,l,f,u[f],i,!Qe(u,f))}}return o}function ph(i,e,t,n,s,r){const o=i[t];if(o!=null){const a=Qe(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&He(l)){const{propsDefaults:u}=s;t in u?n=u[t]:(Zr(s),n=u[t]=l.call(null,e),Qs())}else n=l}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===ho(t))&&(n=!0))}return n}function c_(i,e,t=!1){const n=e.propsCache,s=n.get(i);if(s)return s;const r=i.props,o={},a=[];let l=!1;if(!He(i)){const h=f=>{l=!0;const[m,y]=c_(f,e,!0);ni(o,m),y&&a.push(...y)};!t&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}if(!r&&!l)return yt(i)&&n.set(i,$r),$r;if(Fe(r))for(let h=0;h<r.length;h++){const f=Xr(r[h]);Sg(f)&&(o[f]=_t)}else if(r)for(const h in r){const f=Xr(h);if(Sg(f)){const m=r[h],y=o[f]=Fe(m)||He(m)?{type:m}:Object.assign({},m);if(y){const v=Ig(Boolean,y.type),E=Ig(String,y.type);y[0]=v>-1,y[1]=E<0||v<E,(v>-1||Qe(y,"default"))&&a.push(f)}}}const u=[o,a];return yt(i)&&n.set(i,u),u}function Sg(i){return i[0]!=="$"}function Rg(i){const e=i&&i.toString().match(/^\s*function (\w+)/);return e?e[1]:i===null?"null":""}function Ag(i,e){return Rg(i)===Rg(e)}function Ig(i,e){return Fe(e)?e.findIndex(t=>Ag(t,i)):He(e)&&Ag(e,i)?0:-1}const u_=i=>i[0]==="_"||i==="$stable",cd=i=>Fe(i)?i.map(on):[on(i)],bE=(i,e,t)=>{if(e._n)return e;const n=UC((...s)=>cd(e(...s)),t);return n._c=!1,n},h_=(i,e,t)=>{const n=i._ctx;for(const s in i){if(u_(s))continue;const r=i[s];if(He(r))e[s]=bE(s,r,n);else if(r!=null){const o=cd(r);e[s]=()=>o}}},d_=(i,e)=>{const t=cd(e);i.slots.default=()=>t},SE=(i,e)=>{if(i.vnode.shapeFlag&32){const t=e._;t?(i.slots=at(e),Gl(e,"_",t)):h_(e,i.slots={})}else i.slots={},e&&d_(i,e);Gl(i.slots,Ac,1)},RE=(i,e,t)=>{const{vnode:n,slots:s}=i;let r=!0,o=_t;if(n.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:(ni(s,e),!t&&a===1&&delete s._):(r=!e.$stable,h_(e,s)),o=e}else e&&(d_(i,e),o={default:1});if(r)for(const a in s)!u_(a)&&!(a in o)&&delete s[a]};function f_(){return{app:null,config:{isNativeTag:eC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let AE=0;function IE(i,e){return function(n,s=null){He(n)||(n=Object.assign({},n)),s!=null&&!yt(s)&&(s=null);const r=f_(),o=new Set;let a=!1;const l=r.app={_uid:AE++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:XE,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&He(u.install)?(o.add(u),u.install(l,...h)):He(u)&&(o.add(u),u(l,...h))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,h){return h?(r.components[u]=h,l):r.components[u]},directive(u,h){return h?(r.directives[u]=h,l):r.directives[u]},mount(u,h,f){if(!a){const m=Pt(n,s);return m.appContext=r,h&&e?e(m,u):i(m,u,f),a=!0,l._container=u,u.__vue_app__=l,Ic(m.component)||m.component.proxy}},unmount(){a&&(i(null,l._container),delete l._container.__vue_app__)},provide(u,h){return r.provides[u]=h,l}};return l}}function mh(i,e,t,n,s=!1){if(Fe(i)){i.forEach((m,y)=>mh(m,e&&(Fe(e)?e[y]:e),t,n,s));return}if(Ol(n)&&!s)return;const r=n.shapeFlag&4?Ic(n.component)||n.component.proxy:n.el,o=s?null:r,{i:a,r:l}=i,u=e&&e.r,h=a.refs===_t?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Dt(u)?(h[u]=null,Qe(f,u)&&(f[u]=null)):Zt(u)&&(u.value=null)),He(l))hs(l,a,12,[o,h]);else{const m=Dt(l),y=Zt(l);if(m||y){const v=()=>{if(i.f){const E=m?Qe(f,l)?f[l]:h[l]:l.value;s?Fe(E)&&Xh(E,r):Fe(E)?E.includes(r)||E.push(r):m?(h[l]=[r],Qe(f,l)&&(f[l]=h[l])):(l.value=[r],i.k&&(h[i.k]=l.value))}else m?(h[l]=o,Qe(f,l)&&(f[l]=o)):y&&(l.value=o,i.k&&(h[i.k]=o))};o?(v.id=-1,hi(v,t)):v()}}}const hi=QC;function LE(i){return OE(i)}function OE(i,e){const t=oC();t.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:m,setScopeId:y=Ui,insertStaticContent:v}=i,E=(P,F,z,q=null,$=null,te=null,de=!1,ae=null,oe=!!F.dynamicChildren)=>{if(P===F)return;P&&!Po(P,F)&&(q=vt(P),J(P,$,te,!0),P=null),F.patchFlag===-2&&(oe=!1,F.dynamicChildren=null);const{type:Q,ref:me,shapeFlag:ue}=F;switch(Q){case Rc:b(P,F,z,q);break;case ir:S(P,F,z,q);break;case Lu:P==null&&A(F,z,q,de);break;case di:pe(P,F,z,q,$,te,de,ae,oe);break;default:ue&1?M(P,F,z,q,$,te,de,ae,oe):ue&6?ve(P,F,z,q,$,te,de,ae,oe):(ue&64||ue&128)&&Q.process(P,F,z,q,$,te,de,ae,oe,st)}me!=null&&$&&mh(me,P&&P.ref,te,F||P,!F)},b=(P,F,z,q)=>{if(P==null)n(F.el=a(F.children),z,q);else{const $=F.el=P.el;F.children!==P.children&&u($,F.children)}},S=(P,F,z,q)=>{P==null?n(F.el=l(F.children||""),z,q):F.el=P.el},A=(P,F,z,q)=>{[P.el,P.anchor]=v(P.children,F,z,q,P.el,P.anchor)},I=({el:P,anchor:F},z,q)=>{let $;for(;P&&P!==F;)$=m(P),n(P,z,q),P=$;n(F,z,q)},R=({el:P,anchor:F})=>{let z;for(;P&&P!==F;)z=m(P),s(P),P=z;s(F)},M=(P,F,z,q,$,te,de,ae,oe)=>{de=de||F.type==="svg",P==null?p(F,z,q,$,te,de,ae,oe):H(P,F,$,te,de,ae,oe)},p=(P,F,z,q,$,te,de,ae)=>{let oe,Q;const{type:me,props:ue,shapeFlag:fe,transition:Ce,dirs:Se}=P;if(oe=P.el=o(P.type,te,ue&&ue.is,ue),fe&8?h(oe,P.children):fe&16&&W(P.children,oe,null,q,$,te&&me!=="foreignObject",de,ae),Se&&Gs(P,null,q,"created"),ue){for(const Ne in ue)Ne!=="value"&&!Al(Ne)&&r(oe,Ne,null,ue[Ne],te,P.children,q,$,pt);"value"in ue&&r(oe,"value",null,ue.value),(Q=ue.onVnodeBeforeMount)&&nn(Q,q,P)}k(oe,P,P.scopeId,de,q),Se&&Gs(P,null,q,"beforeMount");const Xe=(!$||$&&!$.pendingBranch)&&Ce&&!Ce.persisted;Xe&&Ce.beforeEnter(oe),n(oe,F,z),((Q=ue&&ue.onVnodeMounted)||Xe||Se)&&hi(()=>{Q&&nn(Q,q,P),Xe&&Ce.enter(oe),Se&&Gs(P,null,q,"mounted")},$)},k=(P,F,z,q,$)=>{if(z&&y(P,z),q)for(let te=0;te<q.length;te++)y(P,q[te]);if($){let te=$.subTree;if(F===te){const de=$.vnode;k(P,de,de.scopeId,de.slotScopeIds,$.parent)}}},W=(P,F,z,q,$,te,de,ae,oe=0)=>{for(let Q=oe;Q<P.length;Q++){const me=P[Q]=ae?es(P[Q]):on(P[Q]);E(null,me,F,z,q,$,te,de,ae)}},H=(P,F,z,q,$,te,de)=>{const ae=F.el=P.el;let{patchFlag:oe,dynamicChildren:Q,dirs:me}=F;oe|=P.patchFlag&16;const ue=P.props||_t,fe=F.props||_t;let Ce;z&&js(z,!1),(Ce=fe.onVnodeBeforeUpdate)&&nn(Ce,z,F,P),me&&Gs(F,P,z,"beforeUpdate"),z&&js(z,!0);const Se=$&&F.type!=="foreignObject";if(Q?se(P.dynamicChildren,Q,ae,z,q,Se,te):de||Z(P,F,ae,null,z,q,Se,te,!1),oe>0){if(oe&16)ce(ae,F,ue,fe,z,q,$);else if(oe&2&&ue.class!==fe.class&&r(ae,"class",null,fe.class,$),oe&4&&r(ae,"style",ue.style,fe.style,$),oe&8){const Xe=F.dynamicProps;for(let Ne=0;Ne<Xe.length;Ne++){const rt=Xe[Ne],Ft=ue[rt],Ct=fe[rt];(Ct!==Ft||rt==="value")&&r(ae,rt,Ft,Ct,$,P.children,z,q,pt)}}oe&1&&P.children!==F.children&&h(ae,F.children)}else!de&&Q==null&&ce(ae,F,ue,fe,z,q,$);((Ce=fe.onVnodeUpdated)||me)&&hi(()=>{Ce&&nn(Ce,z,F,P),me&&Gs(F,P,z,"updated")},q)},se=(P,F,z,q,$,te,de)=>{for(let ae=0;ae<F.length;ae++){const oe=P[ae],Q=F[ae],me=oe.el&&(oe.type===di||!Po(oe,Q)||oe.shapeFlag&70)?f(oe.el):z;E(oe,Q,me,null,q,$,te,de,!0)}},ce=(P,F,z,q,$,te,de)=>{if(z!==q){if(z!==_t)for(const ae in z)!Al(ae)&&!(ae in q)&&r(P,ae,z[ae],null,de,F.children,$,te,pt);for(const ae in q){if(Al(ae))continue;const oe=q[ae],Q=z[ae];oe!==Q&&ae!=="value"&&r(P,ae,Q,oe,de,F.children,$,te,pt)}"value"in q&&r(P,"value",z.value,q.value)}},pe=(P,F,z,q,$,te,de,ae,oe)=>{const Q=F.el=P?P.el:a(""),me=F.anchor=P?P.anchor:a("");let{patchFlag:ue,dynamicChildren:fe,slotScopeIds:Ce}=F;Ce&&(ae=ae?ae.concat(Ce):Ce),P==null?(n(Q,z,q),n(me,z,q),W(F.children,z,me,$,te,de,ae,oe)):ue>0&&ue&64&&fe&&P.dynamicChildren?(se(P.dynamicChildren,fe,z,$,te,de,ae),(F.key!=null||$&&F===$.subTree)&&g_(P,F,!0)):Z(P,F,z,me,$,te,de,ae,oe)},ve=(P,F,z,q,$,te,de,ae,oe)=>{F.slotScopeIds=ae,P==null?F.shapeFlag&512?$.ctx.activate(F,z,q,de,oe):Me(F,z,q,$,te,de,oe):ye(P,F,oe)},Me=(P,F,z,q,$,te,de)=>{const ae=P.component=$E(P,q,$);if(ad(P)&&(ae.ctx.renderer=st),VE(ae),ae.asyncDep){if($&&$.registerDep(ae,le),!P.el){const oe=ae.subTree=Pt(ir);S(null,oe,F,z)}return}le(ae,P,F,z,$,te,de)},ye=(P,F,z)=>{const q=F.component=P.component;if(qC(P,F,z))if(q.asyncDep&&!q.asyncResolved){X(q,F,z);return}else q.next=F,BC(q.update),q.update();else F.el=P.el,q.vnode=F},le=(P,F,z,q,$,te,de)=>{const ae=()=>{if(P.isMounted){let{next:me,bu:ue,u:fe,parent:Ce,vnode:Se}=P,Xe=me,Ne;js(P,!1),me?(me.el=Se.el,X(P,me,de)):me=Se,ue&&Il(ue),(Ne=me.props&&me.props.onVnodeBeforeUpdate)&&nn(Ne,Ce,me,Se),js(P,!0);const rt=Su(P),Ft=P.subTree;P.subTree=rt,E(Ft,rt,f(Ft.el),vt(Ft),P,$,te),me.el=rt.el,Xe===null&&ZC(P,rt.el),fe&&hi(fe,$),(Ne=me.props&&me.props.onVnodeUpdated)&&hi(()=>nn(Ne,Ce,me,Se),$)}else{let me;const{el:ue,props:fe}=F,{bm:Ce,m:Se,parent:Xe}=P,Ne=Ol(F);if(js(P,!1),Ce&&Il(Ce),!Ne&&(me=fe&&fe.onVnodeBeforeMount)&&nn(me,Xe,F),js(P,!0),ue&&oi){const rt=()=>{P.subTree=Su(P),oi(ue,P.subTree,P,$,null)};Ne?F.type.__asyncLoader().then(()=>!P.isUnmounted&&rt()):rt()}else{const rt=P.subTree=Su(P);E(null,rt,z,q,P,$,te),F.el=rt.el}if(Se&&hi(Se,$),!Ne&&(me=fe&&fe.onVnodeMounted)){const rt=F;hi(()=>nn(me,Xe,rt),$)}(F.shapeFlag&256||Xe&&Ol(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&P.a&&hi(P.a,$),P.isMounted=!0,F=z=q=null}},oe=P.effect=new Jh(ae,()=>Tc(Q),P.scope),Q=P.update=()=>oe.run();Q.id=P.uid,js(P,!0),Q()},X=(P,F,z)=>{F.component=P;const q=P.vnode.props;P.vnode=F,P.next=null,wE(P,F.props,q,z),RE(P,F.children,z),fo(),xg(),go()},Z=(P,F,z,q,$,te,de,ae,oe=!1)=>{const Q=P&&P.children,me=P?P.shapeFlag:0,ue=F.children,{patchFlag:fe,shapeFlag:Ce}=F;if(fe>0){if(fe&128){De(Q,ue,z,q,$,te,de,ae,oe);return}else if(fe&256){we(Q,ue,z,q,$,te,de,ae,oe);return}}Ce&8?(me&16&&pt(Q,$,te),ue!==Q&&h(z,ue)):me&16?Ce&16?De(Q,ue,z,q,$,te,de,ae,oe):pt(Q,$,te,!0):(me&8&&h(z,""),Ce&16&&W(ue,z,q,$,te,de,ae,oe))},we=(P,F,z,q,$,te,de,ae,oe)=>{P=P||$r,F=F||$r;const Q=P.length,me=F.length,ue=Math.min(Q,me);let fe;for(fe=0;fe<ue;fe++){const Ce=F[fe]=oe?es(F[fe]):on(F[fe]);E(P[fe],Ce,z,null,$,te,de,ae,oe)}Q>me?pt(P,$,te,!0,!1,ue):W(F,z,q,$,te,de,ae,oe,ue)},De=(P,F,z,q,$,te,de,ae,oe)=>{let Q=0;const me=F.length;let ue=P.length-1,fe=me-1;for(;Q<=ue&&Q<=fe;){const Ce=P[Q],Se=F[Q]=oe?es(F[Q]):on(F[Q]);if(Po(Ce,Se))E(Ce,Se,z,null,$,te,de,ae,oe);else break;Q++}for(;Q<=ue&&Q<=fe;){const Ce=P[ue],Se=F[fe]=oe?es(F[fe]):on(F[fe]);if(Po(Ce,Se))E(Ce,Se,z,null,$,te,de,ae,oe);else break;ue--,fe--}if(Q>ue){if(Q<=fe){const Ce=fe+1,Se=Ce<me?F[Ce].el:q;for(;Q<=fe;)E(null,F[Q]=oe?es(F[Q]):on(F[Q]),z,Se,$,te,de,ae,oe),Q++}}else if(Q>fe)for(;Q<=ue;)J(P[Q],$,te,!0),Q++;else{const Ce=Q,Se=Q,Xe=new Map;for(Q=Se;Q<=fe;Q++){const Nt=F[Q]=oe?es(F[Q]):on(F[Q]);Nt.key!=null&&Xe.set(Nt.key,Q)}let Ne,rt=0;const Ft=fe-Se+1;let Ct=!1,gi=0;const pi=new Array(Ft);for(Q=0;Q<Ft;Q++)pi[Q]=0;for(Q=Ce;Q<=ue;Q++){const Nt=P[Q];if(rt>=Ft){J(Nt,$,te,!0);continue}let mt;if(Nt.key!=null)mt=Xe.get(Nt.key);else for(Ne=Se;Ne<=fe;Ne++)if(pi[Ne-Se]===0&&Po(Nt,F[Ne])){mt=Ne;break}mt===void 0?J(Nt,$,te,!0):(pi[mt-Se]=Q+1,mt>=gi?gi=mt:Ct=!0,E(Nt,F[mt],z,null,$,te,de,ae,oe),rt++)}const Is=Ct?PE(pi):$r;for(Ne=Is.length-1,Q=Ft-1;Q>=0;Q--){const Nt=Se+Q,mt=F[Nt],At=Nt+1<me?F[Nt+1].el:q;pi[Q]===0?E(null,mt,z,At,$,te,de,ae,oe):Ct&&(Ne<0||Q!==Is[Ne]?We(mt,z,At,2):Ne--)}}},We=(P,F,z,q,$=null)=>{const{el:te,type:de,transition:ae,children:oe,shapeFlag:Q}=P;if(Q&6){We(P.component.subTree,F,z,q);return}if(Q&128){P.suspense.move(F,z,q);return}if(Q&64){de.move(P,F,z,st);return}if(de===di){n(te,F,z);for(let ue=0;ue<oe.length;ue++)We(oe[ue],F,z,q);n(P.anchor,F,z);return}if(de===Lu){I(P,F,z);return}if(q!==2&&Q&1&&ae)if(q===0)ae.beforeEnter(te),n(te,F,z),hi(()=>ae.enter(te),$);else{const{leave:ue,delayLeave:fe,afterLeave:Ce}=ae,Se=()=>n(te,F,z),Xe=()=>{ue(te,()=>{Se(),Ce&&Ce()})};fe?fe(te,Se,Xe):Xe()}else n(te,F,z)},J=(P,F,z,q=!1,$=!1)=>{const{type:te,props:de,ref:ae,children:oe,dynamicChildren:Q,shapeFlag:me,patchFlag:ue,dirs:fe}=P;if(ae!=null&&mh(ae,null,z,P,!0),me&256){F.ctx.deactivate(P);return}const Ce=me&1&&fe,Se=!Ol(P);let Xe;if(Se&&(Xe=de&&de.onVnodeBeforeUnmount)&&nn(Xe,F,P),me&6)Be(P.component,z,q);else{if(me&128){P.suspense.unmount(z,q);return}Ce&&Gs(P,null,F,"beforeUnmount"),me&64?P.type.remove(P,F,z,$,st,q):Q&&(te!==di||ue>0&&ue&64)?pt(Q,F,z,!1,!0):(te===di&&ue&384||!$&&me&16)&&pt(oe,F,z),q&&ut(P)}(Se&&(Xe=de&&de.onVnodeUnmounted)||Ce)&&hi(()=>{Xe&&nn(Xe,F,P),Ce&&Gs(P,null,F,"unmounted")},z)},ut=P=>{const{type:F,el:z,anchor:q,transition:$}=P;if(F===di){je(z,q);return}if(F===Lu){R(P);return}const te=()=>{s(z),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(P.shapeFlag&1&&$&&!$.persisted){const{leave:de,delayLeave:ae}=$,oe=()=>de(z,te);ae?ae(P.el,te,oe):oe()}else te()},je=(P,F)=>{let z;for(;P!==F;)z=m(P),s(P),P=z;s(F)},Be=(P,F,z)=>{const{bum:q,scope:$,update:te,subTree:de,um:ae}=P;q&&Il(q),$.stop(),te&&(te.active=!1,J(de,P,F,z)),ae&&hi(ae,F),hi(()=>{P.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},pt=(P,F,z,q=!1,$=!1,te=0)=>{for(let de=te;de<P.length;de++)J(P[de],F,z,q,$)},vt=P=>P.shapeFlag&6?vt(P.component.subTree):P.shapeFlag&128?P.suspense.next():m(P.anchor||P.el),Ze=(P,F,z)=>{P==null?F._vnode&&J(F._vnode,null,null,!0):E(F._vnode||null,P,F,null,null,null,z),xg(),Qm(),F._vnode=P},st={p:E,um:J,m:We,r:ut,mt:Me,mc:W,pc:Z,pbc:se,n:vt,o:i};let ri,oi;return e&&([ri,oi]=e(st)),{render:Ze,hydrate:ri,createApp:IE(Ze,ri)}}function js({effect:i,update:e},t){i.allowRecurse=e.allowRecurse=t}function g_(i,e,t=!1){const n=i.children,s=e.children;if(Fe(n)&&Fe(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=es(s[r]),a.el=o.el),t||g_(o,a)),a.type===Rc&&(a.el=o.el)}}function PE(i){const e=i.slice(),t=[0];let n,s,r,o,a;const l=i.length;for(n=0;n<l;n++){const u=i[n];if(u!==0){if(s=t[t.length-1],i[s]<u){e[n]=s,t.push(n);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,i[t[a]]<u?r=a+1:o=a;u<i[t[r]]&&(r>0&&(e[n]=t[r-1]),t[r]=n)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}const ME=i=>i.__isTeleport,di=Symbol(void 0),Rc=Symbol(void 0),ir=Symbol(void 0),Lu=Symbol(void 0),Yo=[];let zi=null;function et(i=!1){Yo.push(zi=i?null:[])}function DE(){Yo.pop(),zi=Yo[Yo.length-1]||null}let ra=1;function Lg(i){ra+=i}function p_(i){return i.dynamicChildren=ra>0?zi||$r:null,DE(),ra>0&&zi&&zi.push(i),i}function nt(i,e,t,n,s,r){return p_(ee(i,e,t,n,s,r,!0))}function FE(i,e,t,n,s){return p_(Pt(i,e,t,n,s,!0))}function NE(i){return i?i.__v_isVNode===!0:!1}function Po(i,e){return i.type===e.type&&i.key===e.key}const Ac="__vInternal",m_=({key:i})=>i??null,Pl=({ref:i,ref_key:e,ref_for:t})=>i!=null?Dt(i)||Zt(i)||He(i)?{i:Bi,r:i,k:e,f:!!t}:i:null;function ee(i,e=null,t=null,n=0,s=null,r=i===di?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&m_(e),ref:e&&Pl(e),scopeId:bc,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Bi};return a?(ud(l,t),r&128&&i.normalize(l)):t&&(l.shapeFlag|=Dt(t)?8:16),ra>0&&!o&&zi&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&zi.push(l),l}const Pt=kE;function kE(i,e=null,t=null,n=0,s=null,r=!1){if((!i||i===mE)&&(i=ir),NE(i)){const a=qr(i,e,!0);return t&&ud(a,t),ra>0&&!r&&zi&&(a.shapeFlag&6?zi[zi.indexOf(i)]=a:zi.push(a)),a.patchFlag|=-2,a}if(HE(i)&&(i=i.__vccOpts),e){e=__(e);let{class:a,style:l}=e;a&&!Dt(a)&&(e.class=Ei(a)),yt(l)&&(zm(l)&&!Fe(l)&&(l=ni({},l)),e.style=_c(l))}const o=Dt(i)?1:JC(i)?128:ME(i)?64:yt(i)?4:He(i)?2:0;return ee(i,e,t,n,s,o,r,!0)}function __(i){return i?zm(i)||Ac in i?ni({},i):i:null}function qr(i,e,t=!1){const{props:n,ref:s,patchFlag:r,children:o}=i,a=e?y_(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:a,key:a&&m_(a),ref:e&&e.ref?t&&s?Fe(s)?s.concat(Pl(e)):[s,Pl(e)]:Pl(e):s,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==di?r===-1?16:r|16:r,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&qr(i.ssContent),ssFallback:i.ssFallback&&qr(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx}}function oa(i=" ",e=0){return Pt(Rc,null,i,e)}function rn(i="",e=!1){return e?(et(),FE(ir,null,i)):Pt(ir,null,i)}function on(i){return i==null||typeof i=="boolean"?Pt(ir):Fe(i)?Pt(di,null,i.slice()):typeof i=="object"?es(i):Pt(Rc,null,String(i))}function es(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:qr(i)}function ud(i,e){let t=0;const{shapeFlag:n}=i;if(e==null)e=null;else if(Fe(e))t=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),ud(i,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(Ac in e)?e._ctx=Bi:s===3&&Bi&&(Bi.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else He(e)?(e={default:e,_ctx:Bi},t=32):(e=String(e),n&64?(t=16,e=[oa(e)]):t=8);i.children=e,i.shapeFlag|=t}function y_(...i){const e={};for(let t=0;t<i.length;t++){const n=i[t];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Ei([e.class,n.class]));else if(s==="style")e.style=_c([e.style,n.style]);else if(vc(s)){const r=e[s],o=n[s];o&&r!==o&&!(Fe(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=n[s])}return e}function nn(i,e,t,n=null){Xi(i,e,7,[t,n])}const GE=f_();let jE=0;function $E(i,e,t){const n=i.type,s=(e?e.appContext:i.appContext)||GE,r={uid:jE++,vnode:i,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new aC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:c_(n,s),emitsOptions:t_(n,s),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:n.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=YC.bind(null,r),i.ce&&i.ce(r),r}let zt=null;const Zr=i=>{zt=i,i.scope.on()},Qs=()=>{zt&&zt.scope.off(),zt=null};function v_(i){return i.vnode.shapeFlag&4}let Jr=!1;function VE(i,e=!1){Jr=e;const{props:t,children:n}=i.vnode,s=v_(i);TE(i,t,s,e),SE(i,n);const r=s?WE(i,e):void 0;return Jr=!1,r}function WE(i,e){const t=i.type;i.accessCache=Object.create(null),i.proxy=Hm(new Proxy(i.ctx,_E));const{setup:n}=t;if(n){const s=i.setupContext=n.length>1?zE(i):null;Zr(i),fo();const r=hs(n,i,0,[i.props,s]);if(go(),Qs(),Im(r)){if(r.then(Qs,Qs),e)return r.then(o=>{Og(i,o,e)}).catch(o=>{Sa(o,i,0)});i.asyncDep=r}else Og(i,r,e)}else C_(i,e)}function Og(i,e,t){He(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:yt(e)&&(i.setupState=Xm(e)),C_(i,t)}let Pg;function C_(i,e,t){const n=i.type;if(!i.render){if(!e&&Pg&&!n.render){const s=n.template||ld(i).template;if(s){const{isCustomElement:r,compilerOptions:o}=i.appContext.config,{delimiters:a,compilerOptions:l}=n,u=ni(ni({isCustomElement:r,delimiters:a},o),l);n.render=Pg(s,u)}}i.render=n.render||Ui}Zr(i),fo(),yE(i),go(),Qs()}function BE(i){return new Proxy(i.attrs,{get(e,t){return Ti(i,"get","$attrs"),e[t]}})}function zE(i){const e=n=>{i.exposed=n||{}};let t;return{get attrs(){return t||(t=BE(i))},slots:i.slots,emit:i.emit,expose:e}}function Ic(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(Xm(Hm(i.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ho)return Ho[t](i)},has(e,t){return t in e||t in Ho}}))}function HE(i){return He(i)&&"__vccOpts"in i}const Ml=(i,e)=>$C(i,e,Jr),YE=Symbol(""),UE=()=>Ll(YE),XE="3.2.45",KE="http://www.w3.org/2000/svg",Hs=typeof document<"u"?document:null,Mg=Hs&&Hs.createElement("template"),qE={insert:(i,e,t)=>{e.insertBefore(i,t||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,t,n)=>{const s=e?Hs.createElementNS(KE,i):Hs.createElement(i,t?{is:t}:void 0);return i==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:i=>Hs.createTextNode(i),createComment:i=>Hs.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Hs.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,t,n,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{Mg.innerHTML=n?`<svg>${i}</svg>`:i;const a=Mg.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function ZE(i,e,t){const n=i._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?i.removeAttribute("class"):t?i.setAttribute("class",e):i.className=e}function JE(i,e,t){const n=i.style,s=Dt(t);if(t&&!s){for(const r in t)_h(n,r,t[r]);if(e&&!Dt(e))for(const r in e)t[r]==null&&_h(n,r,"")}else{const r=n.display;s?e!==t&&(n.cssText=t):e&&i.removeAttribute("style"),"_vod"in i&&(n.display=r)}}const Dg=/\s*!important$/;function _h(i,e,t){if(Fe(t))t.forEach(n=>_h(i,e,n));else if(t==null&&(t=""),e.startsWith("--"))i.setProperty(e,t);else{const n=QE(i,e);Dg.test(t)?i.setProperty(ho(n),t.replace(Dg,""),"important"):i[n]=t}}const Fg=["Webkit","Moz","ms"],Ou={};function QE(i,e){const t=Ou[e];if(t)return t;let n=Xr(e);if(n!=="filter"&&n in i)return Ou[e]=n;n=Pm(n);for(let s=0;s<Fg.length;s++){const r=Fg[s]+n;if(r in i)return Ou[e]=r}return e}const Ng="http://www.w3.org/1999/xlink";function ex(i,e,t,n,s){if(n&&e.startsWith("xlink:"))t==null?i.removeAttributeNS(Ng,e.slice(6,e.length)):i.setAttributeNS(Ng,e,t);else{const r=Zv(e);t==null||r&&!Rm(t)?i.removeAttribute(e):i.setAttribute(e,r?"":t)}}function tx(i,e,t,n,s,r,o){if(e==="innerHTML"||e==="textContent"){n&&o(n,s,r),i[e]=t??"";return}if(e==="value"&&i.tagName!=="PROGRESS"&&!i.tagName.includes("-")){i._value=t;const l=t??"";(i.value!==l||i.tagName==="OPTION")&&(i.value=l),t==null&&i.removeAttribute(e);return}let a=!1;if(t===""||t==null){const l=typeof i[e];l==="boolean"?t=Rm(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{i[e]=t}catch{}a&&i.removeAttribute(e)}function E_(i,e,t,n){i.addEventListener(e,t,n)}function ix(i,e,t,n){i.removeEventListener(e,t,n)}function nx(i,e,t,n,s=null){const r=i._vei||(i._vei={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=sx(e);if(n){const u=r[e]=ax(n,s);E_(i,a,u,l)}else o&&(ix(i,a,o,l),r[e]=void 0)}}const kg=/(?:Once|Passive|Capture)$/;function sx(i){let e;if(kg.test(i)){e={};let n;for(;n=i.match(kg);)i=i.slice(0,i.length-n[0].length),e[n[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):ho(i.slice(2)),e]}let Pu=0;const rx=Promise.resolve(),ox=()=>Pu||(rx.then(()=>Pu=0),Pu=Date.now());function ax(i,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Xi(lx(n,t.value),e,5,[n])};return t.value=i,t.attached=ox(),t}function lx(i,e){if(Fe(e)){const t=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{t.call(i),i._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Gg=/^on[a-z]/,cx=(i,e,t,n,s=!1,r,o,a,l)=>{e==="class"?ZE(i,n,s):e==="style"?JE(i,t,n):vc(e)?Uh(e)||nx(i,e,t,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ux(i,e,n,s))?tx(i,e,n,r,o,a,l):(e==="true-value"?i._trueValue=n:e==="false-value"&&(i._falseValue=n),ex(i,e,n,s))};function ux(i,e,t,n){return n?!!(e==="innerHTML"||e==="textContent"||e in i&&Gg.test(e)&&He(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA"||Gg.test(e)&&Dt(t)?!1:e in i}const jg=i=>{const e=i.props["onUpdate:modelValue"]||!1;return Fe(e)?t=>Il(e,t):e},hx={deep:!0,created(i,{value:e,modifiers:{number:t}},n){const s=Cc(e);E_(i,"change",()=>{const r=Array.prototype.filter.call(i.options,o=>o.selected).map(o=>t?qh(Wl(o)):Wl(o));i._assign(i.multiple?s?new Set(r):r:r[0])}),i._assign=jg(n)},mounted(i,{value:e}){$g(i,e)},beforeUpdate(i,e,t){i._assign=jg(t)},updated(i,{value:e}){$g(i,e)}};function $g(i,e){const t=i.multiple;if(!(t&&!Fe(e)&&!Cc(e))){for(let n=0,s=i.options.length;n<s;n++){const r=i.options[n],o=Wl(r);if(t)Fe(e)?r.selected=Qv(e,o)>-1:r.selected=e.has(o);else if(yc(Wl(r),e)){i.selectedIndex!==n&&(i.selectedIndex=n);return}}!t&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function Wl(i){return"_value"in i?i._value:i.value}const dx=["ctrl","shift","alt","meta"],fx={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>dx.some(t=>i[`${t}Key`]&&!e.includes(t))},jt=(i,e)=>(t,...n)=>{for(let s=0;s<e.length;s++){const r=fx[e[s]];if(r&&r(t,e))return}return i(t,...n)},gx=ni({patchProp:cx},qE);let Vg;function px(){return Vg||(Vg=LE(gx))}const mx=(...i)=>{const e=px().createApp(...i),{mount:t}=e;return e.mount=n=>{const s=_x(n);if(!s)return;const r=e._component;!He(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function _x(i){return Dt(i)?document.querySelector(i):i}var yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yh={},vx={get exports(){return yh},set exports(i){yh=i}};/*!
 * jQuery JavaScript Library v3.6.3
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-12-20T21:28Z
 */(function(i){(function(e,t){i.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:yx,function(e,t){var n=[],s=Object.getPrototypeOf,r=n.slice,o=n.flat?function(c){return n.flat.call(c)}:function(c){return n.concat.apply([],c)},a=n.push,l=n.indexOf,u={},h=u.toString,f=u.hasOwnProperty,m=f.toString,y=m.call(Object),v={},E=function(d){return typeof d=="function"&&typeof d.nodeType!="number"&&typeof d.item!="function"},b=function(d){return d!=null&&d===d.window},S=e.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function I(c,d,g){g=g||S;var _,C,x=g.createElement("script");if(x.text=c,d)for(_ in A)C=d[_]||d.getAttribute&&d.getAttribute(_),C&&x.setAttribute(_,C);g.head.appendChild(x).parentNode.removeChild(x)}function R(c){return c==null?c+"":typeof c=="object"||typeof c=="function"?u[h.call(c)]||"object":typeof c}var M="3.6.3",p=function(c,d){return new p.fn.init(c,d)};p.fn=p.prototype={jquery:M,constructor:p,length:0,toArray:function(){return r.call(this)},get:function(c){return c==null?r.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var d=p.merge(this.constructor(),c);return d.prevObject=this,d},each:function(c){return p.each(this,c)},map:function(c){return this.pushStack(p.map(this,function(d,g){return c.call(d,g,d)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(c,d){return(d+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(c,d){return d%2}))},eq:function(c){var d=this.length,g=+c+(c<0?d:0);return this.pushStack(g>=0&&g<d?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var c,d,g,_,C,x,T=arguments[0]||{},D=1,L=arguments.length,j=!1;for(typeof T=="boolean"&&(j=T,T=arguments[D]||{},D++),typeof T!="object"&&!E(T)&&(T={}),D===L&&(T=this,D--);D<L;D++)if((c=arguments[D])!=null)for(d in c)_=c[d],!(d==="__proto__"||T===_)&&(j&&_&&(p.isPlainObject(_)||(C=Array.isArray(_)))?(g=T[d],C&&!Array.isArray(g)?x=[]:!C&&!p.isPlainObject(g)?x={}:x=g,C=!1,T[d]=p.extend(j,x,_)):_!==void 0&&(T[d]=_));return T},p.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var d,g;return!c||h.call(c)!=="[object Object]"?!1:(d=s(c),d?(g=f.call(d,"constructor")&&d.constructor,typeof g=="function"&&m.call(g)===y):!0)},isEmptyObject:function(c){var d;for(d in c)return!1;return!0},globalEval:function(c,d,g){I(c,{nonce:d&&d.nonce},g)},each:function(c,d){var g,_=0;if(k(c))for(g=c.length;_<g&&d.call(c[_],_,c[_])!==!1;_++);else for(_ in c)if(d.call(c[_],_,c[_])===!1)break;return c},makeArray:function(c,d){var g=d||[];return c!=null&&(k(Object(c))?p.merge(g,typeof c=="string"?[c]:c):a.call(g,c)),g},inArray:function(c,d,g){return d==null?-1:l.call(d,c,g)},merge:function(c,d){for(var g=+d.length,_=0,C=c.length;_<g;_++)c[C++]=d[_];return c.length=C,c},grep:function(c,d,g){for(var _,C=[],x=0,T=c.length,D=!g;x<T;x++)_=!d(c[x],x),_!==D&&C.push(c[x]);return C},map:function(c,d,g){var _,C,x=0,T=[];if(k(c))for(_=c.length;x<_;x++)C=d(c[x],x,g),C!=null&&T.push(C);else for(x in c)C=d(c[x],x,g),C!=null&&T.push(C);return o(T)},guid:1,support:v}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,d){u["[object "+d+"]"]=d.toLowerCase()});function k(c){var d=!!c&&"length"in c&&c.length,g=R(c);return E(c)||b(c)?!1:g==="array"||d===0||typeof d=="number"&&d>0&&d-1 in c}var W=function(c){var d,g,_,C,x,T,D,L,j,B,ie,V,Y,Te,$e,xe,kt,Lt,mi,ht="sizzle"+1*new Date,ke=c.document,ci=0,Je=0,wt=Ja(),Ao=Ja(),Ka=Ja(),_i=Ja(),Ms=function(w,O){return w===O&&(ie=!0),0},Ds={}.hasOwnProperty,ui=[],zn=ui.pop,Ii=ui.push,Hn=ui.push,sg=ui.slice,Fs=function(w,O){for(var N=0,U=w.length;N<U;N++)if(w[N]===O)return N;return-1},_u="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ot="[\\x20\\t\\r\\n\\f]",Ns="(?:\\\\[\\da-fA-F]{1,6}"+ot+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",rg="\\["+ot+"*("+Ns+")(?:"+ot+"*([*^$|!~]?=)"+ot+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ns+"))|)"+ot+"*\\]",yu=":("+Ns+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+rg+")*)|.*)\\)|)",Ov=new RegExp(ot+"+","g"),qa=new RegExp("^"+ot+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ot+"+$","g"),Pv=new RegExp("^"+ot+"*,"+ot+"*"),og=new RegExp("^"+ot+"*([>+~]|"+ot+")"+ot+"*"),Mv=new RegExp(ot+"|>"),Dv=new RegExp(yu),Fv=new RegExp("^"+Ns+"$"),Za={ID:new RegExp("^#("+Ns+")"),CLASS:new RegExp("^\\.("+Ns+")"),TAG:new RegExp("^("+Ns+"|[*])"),ATTR:new RegExp("^"+rg),PSEUDO:new RegExp("^"+yu),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ot+"*(even|odd|(([+-]|)(\\d*)n|)"+ot+"*(?:([+-]|)"+ot+"*(\\d+)|))"+ot+"*\\)|)","i"),bool:new RegExp("^(?:"+_u+")$","i"),needsContext:new RegExp("^"+ot+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ot+"*((?:-\\d)?\\d*)"+ot+"*\\)|)(?=[^-]|$)","i")},Nv=/HTML$/i,kv=/^(?:input|select|textarea|button)$/i,Gv=/^h\d$/i,Io=/^[^{]+\{\s*\[native \w/,jv=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vu=/[+~]/,yn=new RegExp("\\\\[\\da-fA-F]{1,6}"+ot+"?|\\\\([^\\r\\n\\f])","g"),vn=function(w,O){var N="0x"+w.slice(1)-65536;return O||(N<0?String.fromCharCode(N+65536):String.fromCharCode(N>>10|55296,N&1023|56320))},ag=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,lg=function(w,O){return O?w==="\0"?"�":w.slice(0,-1)+"\\"+w.charCodeAt(w.length-1).toString(16)+" ":"\\"+w},cg=function(){V()},$v=el(function(w){return w.disabled===!0&&w.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Hn.apply(ui=sg.call(ke.childNodes),ke.childNodes),ui[ke.childNodes.length].nodeType}catch{Hn={apply:ui.length?function(O,N){Ii.apply(O,sg.call(N))}:function(O,N){for(var U=O.length,G=0;O[U++]=N[G++];);O.length=U-1}}}function dt(w,O,N,U){var G,K,ne,he,_e,Re,be,Ie=O&&O.ownerDocument,Ke=O?O.nodeType:9;if(N=N||[],typeof w!="string"||!w||Ke!==1&&Ke!==9&&Ke!==11)return N;if(!U&&(V(O),O=O||Y,$e)){if(Ke!==11&&(_e=jv.exec(w)))if(G=_e[1]){if(Ke===9)if(ne=O.getElementById(G)){if(ne.id===G)return N.push(ne),N}else return N;else if(Ie&&(ne=Ie.getElementById(G))&&mi(O,ne)&&ne.id===G)return N.push(ne),N}else{if(_e[2])return Hn.apply(N,O.getElementsByTagName(w)),N;if((G=_e[3])&&g.getElementsByClassName&&O.getElementsByClassName)return Hn.apply(N,O.getElementsByClassName(G)),N}if(g.qsa&&!_i[w+" "]&&(!xe||!xe.test(w))&&(Ke!==1||O.nodeName.toLowerCase()!=="object")){if(be=w,Ie=O,Ke===1&&(Mv.test(w)||og.test(w))){for(Ie=vu.test(w)&&Eu(O.parentNode)||O,(Ie!==O||!g.scope)&&((he=O.getAttribute("id"))?he=he.replace(ag,lg):O.setAttribute("id",he=ht)),Re=T(w),K=Re.length;K--;)Re[K]=(he?"#"+he:":scope")+" "+Qa(Re[K]);be=Re.join(",")}try{if(g.cssSupportsSelector&&!CSS.supports("selector(:is("+be+"))"))throw new Error;return Hn.apply(N,Ie.querySelectorAll(be)),N}catch{_i(w,!0)}finally{he===ht&&O.removeAttribute("id")}}}return L(w.replace(qa,"$1"),O,N,U)}function Ja(){var w=[];function O(N,U){return w.push(N+" ")>_.cacheLength&&delete O[w.shift()],O[N+" "]=U}return O}function ji(w){return w[ht]=!0,w}function Li(w){var O=Y.createElement("fieldset");try{return!!w(O)}catch{return!1}finally{O.parentNode&&O.parentNode.removeChild(O),O=null}}function Cu(w,O){for(var N=w.split("|"),U=N.length;U--;)_.attrHandle[N[U]]=O}function ug(w,O){var N=O&&w,U=N&&w.nodeType===1&&O.nodeType===1&&w.sourceIndex-O.sourceIndex;if(U)return U;if(N){for(;N=N.nextSibling;)if(N===O)return-1}return w?1:-1}function Vv(w){return function(O){var N=O.nodeName.toLowerCase();return N==="input"&&O.type===w}}function Wv(w){return function(O){var N=O.nodeName.toLowerCase();return(N==="input"||N==="button")&&O.type===w}}function hg(w){return function(O){return"form"in O?O.parentNode&&O.disabled===!1?"label"in O?"label"in O.parentNode?O.parentNode.disabled===w:O.disabled===w:O.isDisabled===w||O.isDisabled!==!w&&$v(O)===w:O.disabled===w:"label"in O?O.disabled===w:!1}}function ks(w){return ji(function(O){return O=+O,ji(function(N,U){for(var G,K=w([],N.length,O),ne=K.length;ne--;)N[G=K[ne]]&&(N[G]=!(U[G]=N[G]))})})}function Eu(w){return w&&typeof w.getElementsByTagName<"u"&&w}g=dt.support={},x=dt.isXML=function(w){var O=w&&w.namespaceURI,N=w&&(w.ownerDocument||w).documentElement;return!Nv.test(O||N&&N.nodeName||"HTML")},V=dt.setDocument=function(w){var O,N,U=w?w.ownerDocument||w:ke;return U==Y||U.nodeType!==9||!U.documentElement||(Y=U,Te=Y.documentElement,$e=!x(Y),ke!=Y&&(N=Y.defaultView)&&N.top!==N&&(N.addEventListener?N.addEventListener("unload",cg,!1):N.attachEvent&&N.attachEvent("onunload",cg)),g.scope=Li(function(G){return Te.appendChild(G).appendChild(Y.createElement("div")),typeof G.querySelectorAll<"u"&&!G.querySelectorAll(":scope fieldset div").length}),g.cssSupportsSelector=Li(function(){return CSS.supports("selector(*)")&&Y.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),g.attributes=Li(function(G){return G.className="i",!G.getAttribute("className")}),g.getElementsByTagName=Li(function(G){return G.appendChild(Y.createComment("")),!G.getElementsByTagName("*").length}),g.getElementsByClassName=Io.test(Y.getElementsByClassName),g.getById=Li(function(G){return Te.appendChild(G).id=ht,!Y.getElementsByName||!Y.getElementsByName(ht).length}),g.getById?(_.filter.ID=function(G){var K=G.replace(yn,vn);return function(ne){return ne.getAttribute("id")===K}},_.find.ID=function(G,K){if(typeof K.getElementById<"u"&&$e){var ne=K.getElementById(G);return ne?[ne]:[]}}):(_.filter.ID=function(G){var K=G.replace(yn,vn);return function(ne){var he=typeof ne.getAttributeNode<"u"&&ne.getAttributeNode("id");return he&&he.value===K}},_.find.ID=function(G,K){if(typeof K.getElementById<"u"&&$e){var ne,he,_e,Re=K.getElementById(G);if(Re){if(ne=Re.getAttributeNode("id"),ne&&ne.value===G)return[Re];for(_e=K.getElementsByName(G),he=0;Re=_e[he++];)if(ne=Re.getAttributeNode("id"),ne&&ne.value===G)return[Re]}return[]}}),_.find.TAG=g.getElementsByTagName?function(G,K){if(typeof K.getElementsByTagName<"u")return K.getElementsByTagName(G);if(g.qsa)return K.querySelectorAll(G)}:function(G,K){var ne,he=[],_e=0,Re=K.getElementsByTagName(G);if(G==="*"){for(;ne=Re[_e++];)ne.nodeType===1&&he.push(ne);return he}return Re},_.find.CLASS=g.getElementsByClassName&&function(G,K){if(typeof K.getElementsByClassName<"u"&&$e)return K.getElementsByClassName(G)},kt=[],xe=[],(g.qsa=Io.test(Y.querySelectorAll))&&(Li(function(G){var K;Te.appendChild(G).innerHTML="<a id='"+ht+"'></a><select id='"+ht+"-\r\\' msallowcapture=''><option selected=''></option></select>",G.querySelectorAll("[msallowcapture^='']").length&&xe.push("[*^$]="+ot+`*(?:''|"")`),G.querySelectorAll("[selected]").length||xe.push("\\["+ot+"*(?:value|"+_u+")"),G.querySelectorAll("[id~="+ht+"-]").length||xe.push("~="),K=Y.createElement("input"),K.setAttribute("name",""),G.appendChild(K),G.querySelectorAll("[name='']").length||xe.push("\\["+ot+"*name"+ot+"*="+ot+`*(?:''|"")`),G.querySelectorAll(":checked").length||xe.push(":checked"),G.querySelectorAll("a#"+ht+"+*").length||xe.push(".#.+[+~]"),G.querySelectorAll("\\\f"),xe.push("[\\r\\n\\f]")}),Li(function(G){G.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var K=Y.createElement("input");K.setAttribute("type","hidden"),G.appendChild(K).setAttribute("name","D"),G.querySelectorAll("[name=d]").length&&xe.push("name"+ot+"*[*^$|!~]?="),G.querySelectorAll(":enabled").length!==2&&xe.push(":enabled",":disabled"),Te.appendChild(G).disabled=!0,G.querySelectorAll(":disabled").length!==2&&xe.push(":enabled",":disabled"),G.querySelectorAll("*,:x"),xe.push(",.*:")})),(g.matchesSelector=Io.test(Lt=Te.matches||Te.webkitMatchesSelector||Te.mozMatchesSelector||Te.oMatchesSelector||Te.msMatchesSelector))&&Li(function(G){g.disconnectedMatch=Lt.call(G,"*"),Lt.call(G,"[s!='']:x"),kt.push("!=",yu)}),g.cssSupportsSelector||xe.push(":has"),xe=xe.length&&new RegExp(xe.join("|")),kt=kt.length&&new RegExp(kt.join("|")),O=Io.test(Te.compareDocumentPosition),mi=O||Io.test(Te.contains)?function(G,K){var ne=G.nodeType===9&&G.documentElement||G,he=K&&K.parentNode;return G===he||!!(he&&he.nodeType===1&&(ne.contains?ne.contains(he):G.compareDocumentPosition&&G.compareDocumentPosition(he)&16))}:function(G,K){if(K){for(;K=K.parentNode;)if(K===G)return!0}return!1},Ms=O?function(G,K){if(G===K)return ie=!0,0;var ne=!G.compareDocumentPosition-!K.compareDocumentPosition;return ne||(ne=(G.ownerDocument||G)==(K.ownerDocument||K)?G.compareDocumentPosition(K):1,ne&1||!g.sortDetached&&K.compareDocumentPosition(G)===ne?G==Y||G.ownerDocument==ke&&mi(ke,G)?-1:K==Y||K.ownerDocument==ke&&mi(ke,K)?1:B?Fs(B,G)-Fs(B,K):0:ne&4?-1:1)}:function(G,K){if(G===K)return ie=!0,0;var ne,he=0,_e=G.parentNode,Re=K.parentNode,be=[G],Ie=[K];if(!_e||!Re)return G==Y?-1:K==Y?1:_e?-1:Re?1:B?Fs(B,G)-Fs(B,K):0;if(_e===Re)return ug(G,K);for(ne=G;ne=ne.parentNode;)be.unshift(ne);for(ne=K;ne=ne.parentNode;)Ie.unshift(ne);for(;be[he]===Ie[he];)he++;return he?ug(be[he],Ie[he]):be[he]==ke?-1:Ie[he]==ke?1:0}),Y},dt.matches=function(w,O){return dt(w,null,null,O)},dt.matchesSelector=function(w,O){if(V(w),g.matchesSelector&&$e&&!_i[O+" "]&&(!kt||!kt.test(O))&&(!xe||!xe.test(O)))try{var N=Lt.call(w,O);if(N||g.disconnectedMatch||w.document&&w.document.nodeType!==11)return N}catch{_i(O,!0)}return dt(O,Y,null,[w]).length>0},dt.contains=function(w,O){return(w.ownerDocument||w)!=Y&&V(w),mi(w,O)},dt.attr=function(w,O){(w.ownerDocument||w)!=Y&&V(w);var N=_.attrHandle[O.toLowerCase()],U=N&&Ds.call(_.attrHandle,O.toLowerCase())?N(w,O,!$e):void 0;return U!==void 0?U:g.attributes||!$e?w.getAttribute(O):(U=w.getAttributeNode(O))&&U.specified?U.value:null},dt.escape=function(w){return(w+"").replace(ag,lg)},dt.error=function(w){throw new Error("Syntax error, unrecognized expression: "+w)},dt.uniqueSort=function(w){var O,N=[],U=0,G=0;if(ie=!g.detectDuplicates,B=!g.sortStable&&w.slice(0),w.sort(Ms),ie){for(;O=w[G++];)O===w[G]&&(U=N.push(G));for(;U--;)w.splice(N[U],1)}return B=null,w},C=dt.getText=function(w){var O,N="",U=0,G=w.nodeType;if(G){if(G===1||G===9||G===11){if(typeof w.textContent=="string")return w.textContent;for(w=w.firstChild;w;w=w.nextSibling)N+=C(w)}else if(G===3||G===4)return w.nodeValue}else for(;O=w[U++];)N+=C(O);return N},_=dt.selectors={cacheLength:50,createPseudo:ji,match:Za,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(w){return w[1]=w[1].replace(yn,vn),w[3]=(w[3]||w[4]||w[5]||"").replace(yn,vn),w[2]==="~="&&(w[3]=" "+w[3]+" "),w.slice(0,4)},CHILD:function(w){return w[1]=w[1].toLowerCase(),w[1].slice(0,3)==="nth"?(w[3]||dt.error(w[0]),w[4]=+(w[4]?w[5]+(w[6]||1):2*(w[3]==="even"||w[3]==="odd")),w[5]=+(w[7]+w[8]||w[3]==="odd")):w[3]&&dt.error(w[0]),w},PSEUDO:function(w){var O,N=!w[6]&&w[2];return Za.CHILD.test(w[0])?null:(w[3]?w[2]=w[4]||w[5]||"":N&&Dv.test(N)&&(O=T(N,!0))&&(O=N.indexOf(")",N.length-O)-N.length)&&(w[0]=w[0].slice(0,O),w[2]=N.slice(0,O)),w.slice(0,3))}},filter:{TAG:function(w){var O=w.replace(yn,vn).toLowerCase();return w==="*"?function(){return!0}:function(N){return N.nodeName&&N.nodeName.toLowerCase()===O}},CLASS:function(w){var O=wt[w+" "];return O||(O=new RegExp("(^|"+ot+")"+w+"("+ot+"|$)"))&&wt(w,function(N){return O.test(typeof N.className=="string"&&N.className||typeof N.getAttribute<"u"&&N.getAttribute("class")||"")})},ATTR:function(w,O,N){return function(U){var G=dt.attr(U,w);return G==null?O==="!=":O?(G+="",O==="="?G===N:O==="!="?G!==N:O==="^="?N&&G.indexOf(N)===0:O==="*="?N&&G.indexOf(N)>-1:O==="$="?N&&G.slice(-N.length)===N:O==="~="?(" "+G.replace(Ov," ")+" ").indexOf(N)>-1:O==="|="?G===N||G.slice(0,N.length+1)===N+"-":!1):!0}},CHILD:function(w,O,N,U,G){var K=w.slice(0,3)!=="nth",ne=w.slice(-4)!=="last",he=O==="of-type";return U===1&&G===0?function(_e){return!!_e.parentNode}:function(_e,Re,be){var Ie,Ke,ft,Ae,Gt,Ut,yi=K!==ne?"nextSibling":"previousSibling",Et=_e.parentNode,Lo=he&&_e.nodeName.toLowerCase(),Oo=!be&&!he,vi=!1;if(Et){if(K){for(;yi;){for(Ae=_e;Ae=Ae[yi];)if(he?Ae.nodeName.toLowerCase()===Lo:Ae.nodeType===1)return!1;Ut=yi=w==="only"&&!Ut&&"nextSibling"}return!0}if(Ut=[ne?Et.firstChild:Et.lastChild],ne&&Oo){for(Ae=Et,ft=Ae[ht]||(Ae[ht]={}),Ke=ft[Ae.uniqueID]||(ft[Ae.uniqueID]={}),Ie=Ke[w]||[],Gt=Ie[0]===ci&&Ie[1],vi=Gt&&Ie[2],Ae=Gt&&Et.childNodes[Gt];Ae=++Gt&&Ae&&Ae[yi]||(vi=Gt=0)||Ut.pop();)if(Ae.nodeType===1&&++vi&&Ae===_e){Ke[w]=[ci,Gt,vi];break}}else if(Oo&&(Ae=_e,ft=Ae[ht]||(Ae[ht]={}),Ke=ft[Ae.uniqueID]||(ft[Ae.uniqueID]={}),Ie=Ke[w]||[],Gt=Ie[0]===ci&&Ie[1],vi=Gt),vi===!1)for(;(Ae=++Gt&&Ae&&Ae[yi]||(vi=Gt=0)||Ut.pop())&&!((he?Ae.nodeName.toLowerCase()===Lo:Ae.nodeType===1)&&++vi&&(Oo&&(ft=Ae[ht]||(Ae[ht]={}),Ke=ft[Ae.uniqueID]||(ft[Ae.uniqueID]={}),Ke[w]=[ci,vi]),Ae===_e)););return vi-=G,vi===U||vi%U===0&&vi/U>=0}}},PSEUDO:function(w,O){var N,U=_.pseudos[w]||_.setFilters[w.toLowerCase()]||dt.error("unsupported pseudo: "+w);return U[ht]?U(O):U.length>1?(N=[w,w,"",O],_.setFilters.hasOwnProperty(w.toLowerCase())?ji(function(G,K){for(var ne,he=U(G,O),_e=he.length;_e--;)ne=Fs(G,he[_e]),G[ne]=!(K[ne]=he[_e])}):function(G){return U(G,0,N)}):U}},pseudos:{not:ji(function(w){var O=[],N=[],U=D(w.replace(qa,"$1"));return U[ht]?ji(function(G,K,ne,he){for(var _e,Re=U(G,null,he,[]),be=G.length;be--;)(_e=Re[be])&&(G[be]=!(K[be]=_e))}):function(G,K,ne){return O[0]=G,U(O,null,ne,N),O[0]=null,!N.pop()}}),has:ji(function(w){return function(O){return dt(w,O).length>0}}),contains:ji(function(w){return w=w.replace(yn,vn),function(O){return(O.textContent||C(O)).indexOf(w)>-1}}),lang:ji(function(w){return Fv.test(w||"")||dt.error("unsupported lang: "+w),w=w.replace(yn,vn).toLowerCase(),function(O){var N;do if(N=$e?O.lang:O.getAttribute("xml:lang")||O.getAttribute("lang"))return N=N.toLowerCase(),N===w||N.indexOf(w+"-")===0;while((O=O.parentNode)&&O.nodeType===1);return!1}}),target:function(w){var O=c.location&&c.location.hash;return O&&O.slice(1)===w.id},root:function(w){return w===Te},focus:function(w){return w===Y.activeElement&&(!Y.hasFocus||Y.hasFocus())&&!!(w.type||w.href||~w.tabIndex)},enabled:hg(!1),disabled:hg(!0),checked:function(w){var O=w.nodeName.toLowerCase();return O==="input"&&!!w.checked||O==="option"&&!!w.selected},selected:function(w){return w.parentNode&&w.parentNode.selectedIndex,w.selected===!0},empty:function(w){for(w=w.firstChild;w;w=w.nextSibling)if(w.nodeType<6)return!1;return!0},parent:function(w){return!_.pseudos.empty(w)},header:function(w){return Gv.test(w.nodeName)},input:function(w){return kv.test(w.nodeName)},button:function(w){var O=w.nodeName.toLowerCase();return O==="input"&&w.type==="button"||O==="button"},text:function(w){var O;return w.nodeName.toLowerCase()==="input"&&w.type==="text"&&((O=w.getAttribute("type"))==null||O.toLowerCase()==="text")},first:ks(function(){return[0]}),last:ks(function(w,O){return[O-1]}),eq:ks(function(w,O,N){return[N<0?N+O:N]}),even:ks(function(w,O){for(var N=0;N<O;N+=2)w.push(N);return w}),odd:ks(function(w,O){for(var N=1;N<O;N+=2)w.push(N);return w}),lt:ks(function(w,O,N){for(var U=N<0?N+O:N>O?O:N;--U>=0;)w.push(U);return w}),gt:ks(function(w,O,N){for(var U=N<0?N+O:N;++U<O;)w.push(U);return w})}},_.pseudos.nth=_.pseudos.eq;for(d in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[d]=Vv(d);for(d in{submit:!0,reset:!0})_.pseudos[d]=Wv(d);function dg(){}dg.prototype=_.filters=_.pseudos,_.setFilters=new dg,T=dt.tokenize=function(w,O){var N,U,G,K,ne,he,_e,Re=Ao[w+" "];if(Re)return O?0:Re.slice(0);for(ne=w,he=[],_e=_.preFilter;ne;){(!N||(U=Pv.exec(ne)))&&(U&&(ne=ne.slice(U[0].length)||ne),he.push(G=[])),N=!1,(U=og.exec(ne))&&(N=U.shift(),G.push({value:N,type:U[0].replace(qa," ")}),ne=ne.slice(N.length));for(K in _.filter)(U=Za[K].exec(ne))&&(!_e[K]||(U=_e[K](U)))&&(N=U.shift(),G.push({value:N,type:K,matches:U}),ne=ne.slice(N.length));if(!N)break}return O?ne.length:ne?dt.error(w):Ao(w,he).slice(0)};function Qa(w){for(var O=0,N=w.length,U="";O<N;O++)U+=w[O].value;return U}function el(w,O,N){var U=O.dir,G=O.next,K=G||U,ne=N&&K==="parentNode",he=Je++;return O.first?function(_e,Re,be){for(;_e=_e[U];)if(_e.nodeType===1||ne)return w(_e,Re,be);return!1}:function(_e,Re,be){var Ie,Ke,ft,Ae=[ci,he];if(be){for(;_e=_e[U];)if((_e.nodeType===1||ne)&&w(_e,Re,be))return!0}else for(;_e=_e[U];)if(_e.nodeType===1||ne)if(ft=_e[ht]||(_e[ht]={}),Ke=ft[_e.uniqueID]||(ft[_e.uniqueID]={}),G&&G===_e.nodeName.toLowerCase())_e=_e[U]||_e;else{if((Ie=Ke[K])&&Ie[0]===ci&&Ie[1]===he)return Ae[2]=Ie[2];if(Ke[K]=Ae,Ae[2]=w(_e,Re,be))return!0}return!1}}function xu(w){return w.length>1?function(O,N,U){for(var G=w.length;G--;)if(!w[G](O,N,U))return!1;return!0}:w[0]}function Bv(w,O,N){for(var U=0,G=O.length;U<G;U++)dt(w,O[U],N);return N}function tl(w,O,N,U,G){for(var K,ne=[],he=0,_e=w.length,Re=O!=null;he<_e;he++)(K=w[he])&&(!N||N(K,U,G))&&(ne.push(K),Re&&O.push(he));return ne}function Tu(w,O,N,U,G,K){return U&&!U[ht]&&(U=Tu(U)),G&&!G[ht]&&(G=Tu(G,K)),ji(function(ne,he,_e,Re){var be,Ie,Ke,ft=[],Ae=[],Gt=he.length,Ut=ne||Bv(O||"*",_e.nodeType?[_e]:_e,[]),yi=w&&(ne||!O)?tl(Ut,ft,w,_e,Re):Ut,Et=N?G||(ne?w:Gt||U)?[]:he:yi;if(N&&N(yi,Et,_e,Re),U)for(be=tl(Et,Ae),U(be,[],_e,Re),Ie=be.length;Ie--;)(Ke=be[Ie])&&(Et[Ae[Ie]]=!(yi[Ae[Ie]]=Ke));if(ne){if(G||w){if(G){for(be=[],Ie=Et.length;Ie--;)(Ke=Et[Ie])&&be.push(yi[Ie]=Ke);G(null,Et=[],be,Re)}for(Ie=Et.length;Ie--;)(Ke=Et[Ie])&&(be=G?Fs(ne,Ke):ft[Ie])>-1&&(ne[be]=!(he[be]=Ke))}}else Et=tl(Et===he?Et.splice(Gt,Et.length):Et),G?G(null,he,Et,Re):Hn.apply(he,Et)})}function wu(w){for(var O,N,U,G=w.length,K=_.relative[w[0].type],ne=K||_.relative[" "],he=K?1:0,_e=el(function(Ie){return Ie===O},ne,!0),Re=el(function(Ie){return Fs(O,Ie)>-1},ne,!0),be=[function(Ie,Ke,ft){var Ae=!K&&(ft||Ke!==j)||((O=Ke).nodeType?_e(Ie,Ke,ft):Re(Ie,Ke,ft));return O=null,Ae}];he<G;he++)if(N=_.relative[w[he].type])be=[el(xu(be),N)];else{if(N=_.filter[w[he].type].apply(null,w[he].matches),N[ht]){for(U=++he;U<G&&!_.relative[w[U].type];U++);return Tu(he>1&&xu(be),he>1&&Qa(w.slice(0,he-1).concat({value:w[he-2].type===" "?"*":""})).replace(qa,"$1"),N,he<U&&wu(w.slice(he,U)),U<G&&wu(w=w.slice(U)),U<G&&Qa(w))}be.push(N)}return xu(be)}function zv(w,O){var N=O.length>0,U=w.length>0,G=function(K,ne,he,_e,Re){var be,Ie,Ke,ft=0,Ae="0",Gt=K&&[],Ut=[],yi=j,Et=K||U&&_.find.TAG("*",Re),Lo=ci+=yi==null?1:Math.random()||.1,Oo=Et.length;for(Re&&(j=ne==Y||ne||Re);Ae!==Oo&&(be=Et[Ae])!=null;Ae++){if(U&&be){for(Ie=0,!ne&&be.ownerDocument!=Y&&(V(be),he=!$e);Ke=w[Ie++];)if(Ke(be,ne||Y,he)){_e.push(be);break}Re&&(ci=Lo)}N&&((be=!Ke&&be)&&ft--,K&&Gt.push(be))}if(ft+=Ae,N&&Ae!==ft){for(Ie=0;Ke=O[Ie++];)Ke(Gt,Ut,ne,he);if(K){if(ft>0)for(;Ae--;)Gt[Ae]||Ut[Ae]||(Ut[Ae]=zn.call(_e));Ut=tl(Ut)}Hn.apply(_e,Ut),Re&&!K&&Ut.length>0&&ft+O.length>1&&dt.uniqueSort(_e)}return Re&&(ci=Lo,j=yi),Gt};return N?ji(G):G}return D=dt.compile=function(w,O){var N,U=[],G=[],K=Ka[w+" "];if(!K){for(O||(O=T(w)),N=O.length;N--;)K=wu(O[N]),K[ht]?U.push(K):G.push(K);K=Ka(w,zv(G,U)),K.selector=w}return K},L=dt.select=function(w,O,N,U){var G,K,ne,he,_e,Re=typeof w=="function"&&w,be=!U&&T(w=Re.selector||w);if(N=N||[],be.length===1){if(K=be[0]=be[0].slice(0),K.length>2&&(ne=K[0]).type==="ID"&&O.nodeType===9&&$e&&_.relative[K[1].type]){if(O=(_.find.ID(ne.matches[0].replace(yn,vn),O)||[])[0],O)Re&&(O=O.parentNode);else return N;w=w.slice(K.shift().value.length)}for(G=Za.needsContext.test(w)?0:K.length;G--&&(ne=K[G],!_.relative[he=ne.type]);)if((_e=_.find[he])&&(U=_e(ne.matches[0].replace(yn,vn),vu.test(K[0].type)&&Eu(O.parentNode)||O))){if(K.splice(G,1),w=U.length&&Qa(K),!w)return Hn.apply(N,U),N;break}}return(Re||D(w,be))(U,O,!$e,N,!O||vu.test(w)&&Eu(O.parentNode)||O),N},g.sortStable=ht.split("").sort(Ms).join("")===ht,g.detectDuplicates=!!ie,V(),g.sortDetached=Li(function(w){return w.compareDocumentPosition(Y.createElement("fieldset"))&1}),Li(function(w){return w.innerHTML="<a href='#'></a>",w.firstChild.getAttribute("href")==="#"})||Cu("type|href|height|width",function(w,O,N){if(!N)return w.getAttribute(O,O.toLowerCase()==="type"?1:2)}),(!g.attributes||!Li(function(w){return w.innerHTML="<input/>",w.firstChild.setAttribute("value",""),w.firstChild.getAttribute("value")===""}))&&Cu("value",function(w,O,N){if(!N&&w.nodeName.toLowerCase()==="input")return w.defaultValue}),Li(function(w){return w.getAttribute("disabled")==null})||Cu(_u,function(w,O,N){var U;if(!N)return w[O]===!0?O.toLowerCase():(U=w.getAttributeNode(O))&&U.specified?U.value:null}),dt}(e);p.find=W,p.expr=W.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=W.uniqueSort,p.text=W.getText,p.isXMLDoc=W.isXML,p.contains=W.contains,p.escapeSelector=W.escape;var H=function(c,d,g){for(var _=[],C=g!==void 0;(c=c[d])&&c.nodeType!==9;)if(c.nodeType===1){if(C&&p(c).is(g))break;_.push(c)}return _},se=function(c,d){for(var g=[];c;c=c.nextSibling)c.nodeType===1&&c!==d&&g.push(c);return g},ce=p.expr.match.needsContext;function pe(c,d){return c.nodeName&&c.nodeName.toLowerCase()===d.toLowerCase()}var ve=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Me(c,d,g){return E(d)?p.grep(c,function(_,C){return!!d.call(_,C,_)!==g}):d.nodeType?p.grep(c,function(_){return _===d!==g}):typeof d!="string"?p.grep(c,function(_){return l.call(d,_)>-1!==g}):p.filter(d,c,g)}p.filter=function(c,d,g){var _=d[0];return g&&(c=":not("+c+")"),d.length===1&&_.nodeType===1?p.find.matchesSelector(_,c)?[_]:[]:p.find.matches(c,p.grep(d,function(C){return C.nodeType===1}))},p.fn.extend({find:function(c){var d,g,_=this.length,C=this;if(typeof c!="string")return this.pushStack(p(c).filter(function(){for(d=0;d<_;d++)if(p.contains(C[d],this))return!0}));for(g=this.pushStack([]),d=0;d<_;d++)p.find(c,C[d],g);return _>1?p.uniqueSort(g):g},filter:function(c){return this.pushStack(Me(this,c||[],!1))},not:function(c){return this.pushStack(Me(this,c||[],!0))},is:function(c){return!!Me(this,typeof c=="string"&&ce.test(c)?p(c):c||[],!1).length}});var ye,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,X=p.fn.init=function(c,d,g){var _,C;if(!c)return this;if(g=g||ye,typeof c=="string")if(c[0]==="<"&&c[c.length-1]===">"&&c.length>=3?_=[null,c,null]:_=le.exec(c),_&&(_[1]||!d))if(_[1]){if(d=d instanceof p?d[0]:d,p.merge(this,p.parseHTML(_[1],d&&d.nodeType?d.ownerDocument||d:S,!0)),ve.test(_[1])&&p.isPlainObject(d))for(_ in d)E(this[_])?this[_](d[_]):this.attr(_,d[_]);return this}else return C=S.getElementById(_[2]),C&&(this[0]=C,this.length=1),this;else return!d||d.jquery?(d||g).find(c):this.constructor(d).find(c);else{if(c.nodeType)return this[0]=c,this.length=1,this;if(E(c))return g.ready!==void 0?g.ready(c):c(p)}return p.makeArray(c,this)};X.prototype=p.fn,ye=p(S);var Z=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(c){var d=p(c,this),g=d.length;return this.filter(function(){for(var _=0;_<g;_++)if(p.contains(this,d[_]))return!0})},closest:function(c,d){var g,_=0,C=this.length,x=[],T=typeof c!="string"&&p(c);if(!ce.test(c)){for(;_<C;_++)for(g=this[_];g&&g!==d;g=g.parentNode)if(g.nodeType<11&&(T?T.index(g)>-1:g.nodeType===1&&p.find.matchesSelector(g,c))){x.push(g);break}}return this.pushStack(x.length>1?p.uniqueSort(x):x)},index:function(c){return c?typeof c=="string"?l.call(p(c),this[0]):l.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,d){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(c,d))))},addBack:function(c){return this.add(c==null?this.prevObject:this.prevObject.filter(c))}});function De(c,d){for(;(c=c[d])&&c.nodeType!==1;);return c}p.each({parent:function(c){var d=c.parentNode;return d&&d.nodeType!==11?d:null},parents:function(c){return H(c,"parentNode")},parentsUntil:function(c,d,g){return H(c,"parentNode",g)},next:function(c){return De(c,"nextSibling")},prev:function(c){return De(c,"previousSibling")},nextAll:function(c){return H(c,"nextSibling")},prevAll:function(c){return H(c,"previousSibling")},nextUntil:function(c,d,g){return H(c,"nextSibling",g)},prevUntil:function(c,d,g){return H(c,"previousSibling",g)},siblings:function(c){return se((c.parentNode||{}).firstChild,c)},children:function(c){return se(c.firstChild)},contents:function(c){return c.contentDocument!=null&&s(c.contentDocument)?c.contentDocument:(pe(c,"template")&&(c=c.content||c),p.merge([],c.childNodes))}},function(c,d){p.fn[c]=function(g,_){var C=p.map(this,d,g);return c.slice(-5)!=="Until"&&(_=g),_&&typeof _=="string"&&(C=p.filter(_,C)),this.length>1&&(we[c]||p.uniqueSort(C),Z.test(c)&&C.reverse()),this.pushStack(C)}});var We=/[^\x20\t\r\n\f]+/g;function J(c){var d={};return p.each(c.match(We)||[],function(g,_){d[_]=!0}),d}p.Callbacks=function(c){c=typeof c=="string"?J(c):p.extend({},c);var d,g,_,C,x=[],T=[],D=-1,L=function(){for(C=C||c.once,_=d=!0;T.length;D=-1)for(g=T.shift();++D<x.length;)x[D].apply(g[0],g[1])===!1&&c.stopOnFalse&&(D=x.length,g=!1);c.memory||(g=!1),d=!1,C&&(g?x=[]:x="")},j={add:function(){return x&&(g&&!d&&(D=x.length-1,T.push(g)),function B(ie){p.each(ie,function(V,Y){E(Y)?(!c.unique||!j.has(Y))&&x.push(Y):Y&&Y.length&&R(Y)!=="string"&&B(Y)})}(arguments),g&&!d&&L()),this},remove:function(){return p.each(arguments,function(B,ie){for(var V;(V=p.inArray(ie,x,V))>-1;)x.splice(V,1),V<=D&&D--}),this},has:function(B){return B?p.inArray(B,x)>-1:x.length>0},empty:function(){return x&&(x=[]),this},disable:function(){return C=T=[],x=g="",this},disabled:function(){return!x},lock:function(){return C=T=[],!g&&!d&&(x=g=""),this},locked:function(){return!!C},fireWith:function(B,ie){return C||(ie=ie||[],ie=[B,ie.slice?ie.slice():ie],T.push(ie),d||L()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!_}};return j};function ut(c){return c}function je(c){throw c}function Be(c,d,g,_){var C;try{c&&E(C=c.promise)?C.call(c).done(d).fail(g):c&&E(C=c.then)?C.call(c,d,g):d.apply(void 0,[c].slice(_))}catch(x){g.apply(void 0,[x])}}p.extend({Deferred:function(c){var d=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],g="pending",_={state:function(){return g},always:function(){return C.done(arguments).fail(arguments),this},catch:function(x){return _.then(null,x)},pipe:function(){var x=arguments;return p.Deferred(function(T){p.each(d,function(D,L){var j=E(x[L[4]])&&x[L[4]];C[L[1]](function(){var B=j&&j.apply(this,arguments);B&&E(B.promise)?B.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[L[0]+"With"](this,j?[B]:arguments)})}),x=null}).promise()},then:function(x,T,D){var L=0;function j(B,ie,V,Y){return function(){var Te=this,$e=arguments,xe=function(){var Lt,mi;if(!(B<L)){if(Lt=V.apply(Te,$e),Lt===ie.promise())throw new TypeError("Thenable self-resolution");mi=Lt&&(typeof Lt=="object"||typeof Lt=="function")&&Lt.then,E(mi)?Y?mi.call(Lt,j(L,ie,ut,Y),j(L,ie,je,Y)):(L++,mi.call(Lt,j(L,ie,ut,Y),j(L,ie,je,Y),j(L,ie,ut,ie.notifyWith))):(V!==ut&&(Te=void 0,$e=[Lt]),(Y||ie.resolveWith)(Te,$e))}},kt=Y?xe:function(){try{xe()}catch(Lt){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Lt,kt.stackTrace),B+1>=L&&(V!==je&&(Te=void 0,$e=[Lt]),ie.rejectWith(Te,$e))}};B?kt():(p.Deferred.getStackHook&&(kt.stackTrace=p.Deferred.getStackHook()),e.setTimeout(kt))}}return p.Deferred(function(B){d[0][3].add(j(0,B,E(D)?D:ut,B.notifyWith)),d[1][3].add(j(0,B,E(x)?x:ut)),d[2][3].add(j(0,B,E(T)?T:je))}).promise()},promise:function(x){return x!=null?p.extend(x,_):_}},C={};return p.each(d,function(x,T){var D=T[2],L=T[5];_[T[1]]=D.add,L&&D.add(function(){g=L},d[3-x][2].disable,d[3-x][3].disable,d[0][2].lock,d[0][3].lock),D.add(T[3].fire),C[T[0]]=function(){return C[T[0]+"With"](this===C?void 0:this,arguments),this},C[T[0]+"With"]=D.fireWith}),_.promise(C),c&&c.call(C,C),C},when:function(c){var d=arguments.length,g=d,_=Array(g),C=r.call(arguments),x=p.Deferred(),T=function(D){return function(L){_[D]=this,C[D]=arguments.length>1?r.call(arguments):L,--d||x.resolveWith(_,C)}};if(d<=1&&(Be(c,x.done(T(g)).resolve,x.reject,!d),x.state()==="pending"||E(C[g]&&C[g].then)))return x.then();for(;g--;)Be(C[g],T(g),x.reject);return x.promise()}});var pt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(c,d){e.console&&e.console.warn&&c&&pt.test(c.name)&&e.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)},p.readyException=function(c){e.setTimeout(function(){throw c})};var vt=p.Deferred();p.fn.ready=function(c){return vt.then(c).catch(function(d){p.readyException(d)}),this},p.extend({isReady:!1,readyWait:1,ready:function(c){(c===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(c!==!0&&--p.readyWait>0)&&vt.resolveWith(S,[p]))}}),p.ready.then=vt.then;function Ze(){S.removeEventListener("DOMContentLoaded",Ze),e.removeEventListener("load",Ze),p.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?e.setTimeout(p.ready):(S.addEventListener("DOMContentLoaded",Ze),e.addEventListener("load",Ze));var st=function(c,d,g,_,C,x,T){var D=0,L=c.length,j=g==null;if(R(g)==="object"){C=!0;for(D in g)st(c,d,D,g[D],!0,x,T)}else if(_!==void 0&&(C=!0,E(_)||(T=!0),j&&(T?(d.call(c,_),d=null):(j=d,d=function(B,ie,V){return j.call(p(B),V)})),d))for(;D<L;D++)d(c[D],g,T?_:_.call(c[D],D,d(c[D],g)));return C?c:j?d.call(c):L?d(c[0],g):x},ri=/^-ms-/,oi=/-([a-z])/g;function P(c,d){return d.toUpperCase()}function F(c){return c.replace(ri,"ms-").replace(oi,P)}var z=function(c){return c.nodeType===1||c.nodeType===9||!+c.nodeType};function q(){this.expando=p.expando+q.uid++}q.uid=1,q.prototype={cache:function(c){var d=c[this.expando];return d||(d={},z(c)&&(c.nodeType?c[this.expando]=d:Object.defineProperty(c,this.expando,{value:d,configurable:!0}))),d},set:function(c,d,g){var _,C=this.cache(c);if(typeof d=="string")C[F(d)]=g;else for(_ in d)C[F(_)]=d[_];return C},get:function(c,d){return d===void 0?this.cache(c):c[this.expando]&&c[this.expando][F(d)]},access:function(c,d,g){return d===void 0||d&&typeof d=="string"&&g===void 0?this.get(c,d):(this.set(c,d,g),g!==void 0?g:d)},remove:function(c,d){var g,_=c[this.expando];if(_!==void 0){if(d!==void 0)for(Array.isArray(d)?d=d.map(F):(d=F(d),d=d in _?[d]:d.match(We)||[]),g=d.length;g--;)delete _[d[g]];(d===void 0||p.isEmptyObject(_))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var d=c[this.expando];return d!==void 0&&!p.isEmptyObject(d)}};var $=new q,te=new q,de=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ae=/[A-Z]/g;function oe(c){return c==="true"?!0:c==="false"?!1:c==="null"?null:c===+c+""?+c:de.test(c)?JSON.parse(c):c}function Q(c,d,g){var _;if(g===void 0&&c.nodeType===1)if(_="data-"+d.replace(ae,"-$&").toLowerCase(),g=c.getAttribute(_),typeof g=="string"){try{g=oe(g)}catch{}te.set(c,d,g)}else g=void 0;return g}p.extend({hasData:function(c){return te.hasData(c)||$.hasData(c)},data:function(c,d,g){return te.access(c,d,g)},removeData:function(c,d){te.remove(c,d)},_data:function(c,d,g){return $.access(c,d,g)},_removeData:function(c,d){$.remove(c,d)}}),p.fn.extend({data:function(c,d){var g,_,C,x=this[0],T=x&&x.attributes;if(c===void 0){if(this.length&&(C=te.get(x),x.nodeType===1&&!$.get(x,"hasDataAttrs"))){for(g=T.length;g--;)T[g]&&(_=T[g].name,_.indexOf("data-")===0&&(_=F(_.slice(5)),Q(x,_,C[_])));$.set(x,"hasDataAttrs",!0)}return C}return typeof c=="object"?this.each(function(){te.set(this,c)}):st(this,function(D){var L;if(x&&D===void 0)return L=te.get(x,c),L!==void 0||(L=Q(x,c),L!==void 0)?L:void 0;this.each(function(){te.set(this,c,D)})},null,d,arguments.length>1,null,!0)},removeData:function(c){return this.each(function(){te.remove(this,c)})}}),p.extend({queue:function(c,d,g){var _;if(c)return d=(d||"fx")+"queue",_=$.get(c,d),g&&(!_||Array.isArray(g)?_=$.access(c,d,p.makeArray(g)):_.push(g)),_||[]},dequeue:function(c,d){d=d||"fx";var g=p.queue(c,d),_=g.length,C=g.shift(),x=p._queueHooks(c,d),T=function(){p.dequeue(c,d)};C==="inprogress"&&(C=g.shift(),_--),C&&(d==="fx"&&g.unshift("inprogress"),delete x.stop,C.call(c,T,x)),!_&&x&&x.empty.fire()},_queueHooks:function(c,d){var g=d+"queueHooks";return $.get(c,g)||$.access(c,g,{empty:p.Callbacks("once memory").add(function(){$.remove(c,[d+"queue",g])})})}}),p.fn.extend({queue:function(c,d){var g=2;return typeof c!="string"&&(d=c,c="fx",g--),arguments.length<g?p.queue(this[0],c):d===void 0?this:this.each(function(){var _=p.queue(this,c,d);p._queueHooks(this,c),c==="fx"&&_[0]!=="inprogress"&&p.dequeue(this,c)})},dequeue:function(c){return this.each(function(){p.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,d){var g,_=1,C=p.Deferred(),x=this,T=this.length,D=function(){--_||C.resolveWith(x,[x])};for(typeof c!="string"&&(d=c,c=void 0),c=c||"fx";T--;)g=$.get(x[T],c+"queueHooks"),g&&g.empty&&(_++,g.empty.add(D));return D(),C.promise(d)}});var me=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ue=new RegExp("^(?:([+-])=|)("+me+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],Ce=S.documentElement,Se=function(c){return p.contains(c.ownerDocument,c)},Xe={composed:!0};Ce.getRootNode&&(Se=function(c){return p.contains(c.ownerDocument,c)||c.getRootNode(Xe)===c.ownerDocument});var Ne=function(c,d){return c=d||c,c.style.display==="none"||c.style.display===""&&Se(c)&&p.css(c,"display")==="none"};function rt(c,d,g,_){var C,x,T=20,D=_?function(){return _.cur()}:function(){return p.css(c,d,"")},L=D(),j=g&&g[3]||(p.cssNumber[d]?"":"px"),B=c.nodeType&&(p.cssNumber[d]||j!=="px"&&+L)&&ue.exec(p.css(c,d));if(B&&B[3]!==j){for(L=L/2,j=j||B[3],B=+L||1;T--;)p.style(c,d,B+j),(1-x)*(1-(x=D()/L||.5))<=0&&(T=0),B=B/x;B=B*2,p.style(c,d,B+j),g=g||[]}return g&&(B=+B||+L||0,C=g[1]?B+(g[1]+1)*g[2]:+g[2],_&&(_.unit=j,_.start=B,_.end=C)),C}var Ft={};function Ct(c){var d,g=c.ownerDocument,_=c.nodeName,C=Ft[_];return C||(d=g.body.appendChild(g.createElement(_)),C=p.css(d,"display"),d.parentNode.removeChild(d),C==="none"&&(C="block"),Ft[_]=C,C)}function gi(c,d){for(var g,_,C=[],x=0,T=c.length;x<T;x++)_=c[x],_.style&&(g=_.style.display,d?(g==="none"&&(C[x]=$.get(_,"display")||null,C[x]||(_.style.display="")),_.style.display===""&&Ne(_)&&(C[x]=Ct(_))):g!=="none"&&(C[x]="none",$.set(_,"display",g)));for(x=0;x<T;x++)C[x]!=null&&(c[x].style.display=C[x]);return c}p.fn.extend({show:function(){return gi(this,!0)},hide:function(){return gi(this)},toggle:function(c){return typeof c=="boolean"?c?this.show():this.hide():this.each(function(){Ne(this)?p(this).show():p(this).hide()})}});var pi=/^(?:checkbox|radio)$/i,Is=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Nt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var c=S.createDocumentFragment(),d=c.appendChild(S.createElement("div")),g=S.createElement("input");g.setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),d.appendChild(g),v.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",v.option=!!d.lastChild})();var mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td,v.option||(mt.optgroup=mt.option=[1,"<select multiple='multiple'>","</select>"]);function At(c,d){var g;return typeof c.getElementsByTagName<"u"?g=c.getElementsByTagName(d||"*"):typeof c.querySelectorAll<"u"?g=c.querySelectorAll(d||"*"):g=[],d===void 0||d&&pe(c,d)?p.merge([c],g):g}function gr(c,d){for(var g=0,_=c.length;g<_;g++)$.set(c[g],"globalEval",!d||$.get(d[g],"globalEval"))}var To=/<|&#?\w+;/;function Wn(c,d,g,_,C){for(var x,T,D,L,j,B,ie=d.createDocumentFragment(),V=[],Y=0,Te=c.length;Y<Te;Y++)if(x=c[Y],x||x===0)if(R(x)==="object")p.merge(V,x.nodeType?[x]:x);else if(!To.test(x))V.push(d.createTextNode(x));else{for(T=T||ie.appendChild(d.createElement("div")),D=(Is.exec(x)||["",""])[1].toLowerCase(),L=mt[D]||mt._default,T.innerHTML=L[1]+p.htmlPrefilter(x)+L[2],B=L[0];B--;)T=T.lastChild;p.merge(V,T.childNodes),T=ie.firstChild,T.textContent=""}for(ie.textContent="",Y=0;x=V[Y++];){if(_&&p.inArray(x,_)>-1){C&&C.push(x);continue}if(j=Se(x),T=At(ie.appendChild(x),"script"),j&&gr(T),g)for(B=0;x=T[B++];)Nt.test(x.type||"")&&g.push(x)}return ie}var Bn=/^([^.]*)(?:\.(.+)|)/;function Ri(){return!0}function _n(){return!1}function Ha(c,d){return c===Jt()==(d==="focus")}function Jt(){try{return S.activeElement}catch{}}function tn(c,d,g,_,C,x){var T,D;if(typeof d=="object"){typeof g!="string"&&(_=_||g,g=void 0);for(D in d)tn(c,D,g,_,d[D],x);return c}if(_==null&&C==null?(C=g,_=g=void 0):C==null&&(typeof g=="string"?(C=_,_=void 0):(C=_,_=g,g=void 0)),C===!1)C=_n;else if(!C)return c;return x===1&&(T=C,C=function(L){return p().off(L),T.apply(this,arguments)},C.guid=T.guid||(T.guid=p.guid++)),c.each(function(){p.event.add(this,d,C,_,g)})}p.event={global:{},add:function(c,d,g,_,C){var x,T,D,L,j,B,ie,V,Y,Te,$e,xe=$.get(c);if(z(c))for(g.handler&&(x=g,g=x.handler,C=x.selector),C&&p.find.matchesSelector(Ce,C),g.guid||(g.guid=p.guid++),(L=xe.events)||(L=xe.events=Object.create(null)),(T=xe.handle)||(T=xe.handle=function(kt){return typeof p<"u"&&p.event.triggered!==kt.type?p.event.dispatch.apply(c,arguments):void 0}),d=(d||"").match(We)||[""],j=d.length;j--;)D=Bn.exec(d[j])||[],Y=$e=D[1],Te=(D[2]||"").split(".").sort(),Y&&(ie=p.event.special[Y]||{},Y=(C?ie.delegateType:ie.bindType)||Y,ie=p.event.special[Y]||{},B=p.extend({type:Y,origType:$e,data:_,handler:g,guid:g.guid,selector:C,needsContext:C&&p.expr.match.needsContext.test(C),namespace:Te.join(".")},x),(V=L[Y])||(V=L[Y]=[],V.delegateCount=0,(!ie.setup||ie.setup.call(c,_,Te,T)===!1)&&c.addEventListener&&c.addEventListener(Y,T)),ie.add&&(ie.add.call(c,B),B.handler.guid||(B.handler.guid=g.guid)),C?V.splice(V.delegateCount++,0,B):V.push(B),p.event.global[Y]=!0)},remove:function(c,d,g,_,C){var x,T,D,L,j,B,ie,V,Y,Te,$e,xe=$.hasData(c)&&$.get(c);if(!(!xe||!(L=xe.events))){for(d=(d||"").match(We)||[""],j=d.length;j--;){if(D=Bn.exec(d[j])||[],Y=$e=D[1],Te=(D[2]||"").split(".").sort(),!Y){for(Y in L)p.event.remove(c,Y+d[j],g,_,!0);continue}for(ie=p.event.special[Y]||{},Y=(_?ie.delegateType:ie.bindType)||Y,V=L[Y]||[],D=D[2]&&new RegExp("(^|\\.)"+Te.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=x=V.length;x--;)B=V[x],(C||$e===B.origType)&&(!g||g.guid===B.guid)&&(!D||D.test(B.namespace))&&(!_||_===B.selector||_==="**"&&B.selector)&&(V.splice(x,1),B.selector&&V.delegateCount--,ie.remove&&ie.remove.call(c,B));T&&!V.length&&((!ie.teardown||ie.teardown.call(c,Te,xe.handle)===!1)&&p.removeEvent(c,Y,xe.handle),delete L[Y])}p.isEmptyObject(L)&&$.remove(c,"handle events")}},dispatch:function(c){var d,g,_,C,x,T,D=new Array(arguments.length),L=p.event.fix(c),j=($.get(this,"events")||Object.create(null))[L.type]||[],B=p.event.special[L.type]||{};for(D[0]=L,d=1;d<arguments.length;d++)D[d]=arguments[d];if(L.delegateTarget=this,!(B.preDispatch&&B.preDispatch.call(this,L)===!1)){for(T=p.event.handlers.call(this,L,j),d=0;(C=T[d++])&&!L.isPropagationStopped();)for(L.currentTarget=C.elem,g=0;(x=C.handlers[g++])&&!L.isImmediatePropagationStopped();)(!L.rnamespace||x.namespace===!1||L.rnamespace.test(x.namespace))&&(L.handleObj=x,L.data=x.data,_=((p.event.special[x.origType]||{}).handle||x.handler).apply(C.elem,D),_!==void 0&&(L.result=_)===!1&&(L.preventDefault(),L.stopPropagation()));return B.postDispatch&&B.postDispatch.call(this,L),L.result}},handlers:function(c,d){var g,_,C,x,T,D=[],L=d.delegateCount,j=c.target;if(L&&j.nodeType&&!(c.type==="click"&&c.button>=1)){for(;j!==this;j=j.parentNode||this)if(j.nodeType===1&&!(c.type==="click"&&j.disabled===!0)){for(x=[],T={},g=0;g<L;g++)_=d[g],C=_.selector+" ",T[C]===void 0&&(T[C]=_.needsContext?p(C,this).index(j)>-1:p.find(C,this,null,[j]).length),T[C]&&x.push(_);x.length&&D.push({elem:j,handlers:x})}}return j=this,L<d.length&&D.push({elem:j,handlers:d.slice(L)}),D},addProp:function(c,d){Object.defineProperty(p.Event.prototype,c,{enumerable:!0,configurable:!0,get:E(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(g){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(c){return c[p.expando]?c:new p.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var d=this||c;return pi.test(d.type)&&d.click&&pe(d,"input")&&Bt(d,"click",Ri),!1},trigger:function(c){var d=this||c;return pi.test(d.type)&&d.click&&pe(d,"input")&&Bt(d,"click"),!0},_default:function(c){var d=c.target;return pi.test(d.type)&&d.click&&pe(d,"input")&&$.get(d,"click")||pe(d,"a")}},beforeunload:{postDispatch:function(c){c.result!==void 0&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}};function Bt(c,d,g){if(!g){$.get(c,d)===void 0&&p.event.add(c,d,Ri);return}$.set(c,d,!1),p.event.add(c,d,{namespace:!1,handler:function(_){var C,x,T=$.get(this,d);if(_.isTrigger&1&&this[d]){if(T.length)(p.event.special[d]||{}).delegateType&&_.stopPropagation();else if(T=r.call(arguments),$.set(this,d,T),C=g(this,d),this[d](),x=$.get(this,d),T!==x||C?$.set(this,d,!1):x={},T!==x)return _.stopImmediatePropagation(),_.preventDefault(),x&&x.value}else T.length&&($.set(this,d,{value:p.event.trigger(p.extend(T[0],p.Event.prototype),T.slice(1),this)}),_.stopImmediatePropagation())}})}p.removeEvent=function(c,d,g){c.removeEventListener&&c.removeEventListener(d,g)},p.Event=function(c,d){if(!(this instanceof p.Event))return new p.Event(c,d);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||c.defaultPrevented===void 0&&c.returnValue===!1?Ri:_n,this.target=c.target&&c.target.nodeType===3?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,d&&p.extend(this,d),this.timeStamp=c&&c.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:_n,isPropagationStopped:_n,isImmediatePropagationStopped:_n,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=Ri,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=Ri,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=Ri,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(c,d){p.event.special[c]={setup:function(){return Bt(this,c,Ha),!1},trigger:function(){return Bt(this,c),!0},_default:function(g){return $.get(g.target,c)},delegateType:d}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,d){p.event.special[c]={delegateType:d,bindType:d,handle:function(g){var _,C=this,x=g.relatedTarget,T=g.handleObj;return(!x||x!==C&&!p.contains(C,x))&&(g.type=T.origType,_=T.handler.apply(this,arguments),g.type=d),_}}}),p.fn.extend({on:function(c,d,g,_){return tn(this,c,d,g,_)},one:function(c,d,g,_){return tn(this,c,d,g,_,1)},off:function(c,d,g){var _,C;if(c&&c.preventDefault&&c.handleObj)return _=c.handleObj,p(c.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if(typeof c=="object"){for(C in c)this.off(C,d,c[C]);return this}return(d===!1||typeof d=="function")&&(g=d,d=void 0),g===!1&&(g=_n),this.each(function(){p.event.remove(this,c,g,d)})}});var ki=/<script|<style|<link/i,Qt=/checked\s*(?:[^=]|=\s*.checked.)/i,pr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ls(c,d){return pe(c,"table")&&pe(d.nodeType!==11?d:d.firstChild,"tr")&&p(c).children("tbody")[0]||c}function Yt(c){return c.type=(c.getAttribute("type")!==null)+"/"+c.type,c}function ai(c){return(c.type||"").slice(0,5)==="true/"?c.type=c.type.slice(5):c.removeAttribute("type"),c}function Ai(c,d){var g,_,C,x,T,D,L;if(d.nodeType===1){if($.hasData(c)&&(x=$.get(c),L=x.events,L)){$.remove(d,"handle events");for(C in L)for(g=0,_=L[C].length;g<_;g++)p.event.add(d,C,L[C][g])}te.hasData(c)&&(T=te.access(c),D=p.extend({},T),te.set(d,D))}}function su(c,d){var g=d.nodeName.toLowerCase();g==="input"&&pi.test(c.type)?d.checked=c.checked:(g==="input"||g==="textarea")&&(d.defaultValue=c.defaultValue)}function mr(c,d,g,_){d=o(d);var C,x,T,D,L,j,B=0,ie=c.length,V=ie-1,Y=d[0],Te=E(Y);if(Te||ie>1&&typeof Y=="string"&&!v.checkClone&&Qt.test(Y))return c.each(function($e){var xe=c.eq($e);Te&&(d[0]=Y.call(this,$e,xe.html())),mr(xe,d,g,_)});if(ie&&(C=Wn(d,c[0].ownerDocument,!1,c,_),x=C.firstChild,C.childNodes.length===1&&(C=x),x||_)){for(T=p.map(At(C,"script"),Yt),D=T.length;B<ie;B++)L=C,B!==V&&(L=p.clone(L,!0,!0),D&&p.merge(T,At(L,"script"))),g.call(c[B],L,B);if(D)for(j=T[T.length-1].ownerDocument,p.map(T,ai),B=0;B<D;B++)L=T[B],Nt.test(L.type||"")&&!$.access(L,"globalEval")&&p.contains(j,L)&&(L.src&&(L.type||"").toLowerCase()!=="module"?p._evalUrl&&!L.noModule&&p._evalUrl(L.src,{nonce:L.nonce||L.getAttribute("nonce")},j):I(L.textContent.replace(pr,""),L,j))}return c}function Nf(c,d,g){for(var _,C=d?p.filter(d,c):c,x=0;(_=C[x])!=null;x++)!g&&_.nodeType===1&&p.cleanData(At(_)),_.parentNode&&(g&&Se(_)&&gr(At(_,"script")),_.parentNode.removeChild(_));return c}p.extend({htmlPrefilter:function(c){return c},clone:function(c,d,g){var _,C,x,T,D=c.cloneNode(!0),L=Se(c);if(!v.noCloneChecked&&(c.nodeType===1||c.nodeType===11)&&!p.isXMLDoc(c))for(T=At(D),x=At(c),_=0,C=x.length;_<C;_++)su(x[_],T[_]);if(d)if(g)for(x=x||At(c),T=T||At(D),_=0,C=x.length;_<C;_++)Ai(x[_],T[_]);else Ai(c,D);return T=At(D,"script"),T.length>0&&gr(T,!L&&At(c,"script")),D},cleanData:function(c){for(var d,g,_,C=p.event.special,x=0;(g=c[x])!==void 0;x++)if(z(g)){if(d=g[$.expando]){if(d.events)for(_ in d.events)C[_]?p.event.remove(g,_):p.removeEvent(g,_,d.handle);g[$.expando]=void 0}g[te.expando]&&(g[te.expando]=void 0)}}}),p.fn.extend({detach:function(c){return Nf(this,c,!0)},remove:function(c){return Nf(this,c)},text:function(c){return st(this,function(d){return d===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=d)})},null,c,arguments.length)},append:function(){return mr(this,arguments,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Ls(this,c);d.appendChild(c)}})},prepend:function(){return mr(this,arguments,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Ls(this,c);d.insertBefore(c,d.firstChild)}})},before:function(){return mr(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return mr(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,d=0;(c=this[d])!=null;d++)c.nodeType===1&&(p.cleanData(At(c,!1)),c.textContent="");return this},clone:function(c,d){return c=c??!1,d=d??c,this.map(function(){return p.clone(this,c,d)})},html:function(c){return st(this,function(d){var g=this[0]||{},_=0,C=this.length;if(d===void 0&&g.nodeType===1)return g.innerHTML;if(typeof d=="string"&&!ki.test(d)&&!mt[(Is.exec(d)||["",""])[1].toLowerCase()]){d=p.htmlPrefilter(d);try{for(;_<C;_++)g=this[_]||{},g.nodeType===1&&(p.cleanData(At(g,!1)),g.innerHTML=d);g=0}catch{}}g&&this.empty().append(d)},null,c,arguments.length)},replaceWith:function(){var c=[];return mr(this,arguments,function(d){var g=this.parentNode;p.inArray(this,c)<0&&(p.cleanData(At(this)),g&&g.replaceChild(d,this))},c)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,d){p.fn[c]=function(g){for(var _,C=[],x=p(g),T=x.length-1,D=0;D<=T;D++)_=D===T?this:this.clone(!0),p(x[D])[d](_),a.apply(C,_.get());return this.pushStack(C)}});var ru=new RegExp("^("+me+")(?!px)[a-z%]+$","i"),ou=/^--/,Ya=function(c){var d=c.ownerDocument.defaultView;return(!d||!d.opener)&&(d=e),d.getComputedStyle(c)},kf=function(c,d,g){var _,C,x={};for(C in d)x[C]=c.style[C],c.style[C]=d[C];_=g.call(c);for(C in d)c.style[C]=x[C];return _},nv=new RegExp(fe.join("|"),"i"),Gf="[\\x20\\t\\r\\n\\f]",sv=new RegExp("^"+Gf+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Gf+"+$","g");(function(){function c(){if(j){L.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",j.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ce.appendChild(L).appendChild(j);var B=e.getComputedStyle(j);g=B.top!=="1%",D=d(B.marginLeft)===12,j.style.right="60%",x=d(B.right)===36,_=d(B.width)===36,j.style.position="absolute",C=d(j.offsetWidth/3)===12,Ce.removeChild(L),j=null}}function d(B){return Math.round(parseFloat(B))}var g,_,C,x,T,D,L=S.createElement("div"),j=S.createElement("div");j.style&&(j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle=j.style.backgroundClip==="content-box",p.extend(v,{boxSizingReliable:function(){return c(),_},pixelBoxStyles:function(){return c(),x},pixelPosition:function(){return c(),g},reliableMarginLeft:function(){return c(),D},scrollboxSize:function(){return c(),C},reliableTrDimensions:function(){var B,ie,V,Y;return T==null&&(B=S.createElement("table"),ie=S.createElement("tr"),V=S.createElement("div"),B.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ie.style.cssText="border:1px solid",ie.style.height="1px",V.style.height="9px",V.style.display="block",Ce.appendChild(B).appendChild(ie).appendChild(V),Y=e.getComputedStyle(ie),T=parseInt(Y.height,10)+parseInt(Y.borderTopWidth,10)+parseInt(Y.borderBottomWidth,10)===ie.offsetHeight,Ce.removeChild(B)),T}}))})();function wo(c,d,g){var _,C,x,T,D=ou.test(d),L=c.style;return g=g||Ya(c),g&&(T=g.getPropertyValue(d)||g[d],D&&T&&(T=T.replace(sv,"$1")||void 0),T===""&&!Se(c)&&(T=p.style(c,d)),!v.pixelBoxStyles()&&ru.test(T)&&nv.test(d)&&(_=L.width,C=L.minWidth,x=L.maxWidth,L.minWidth=L.maxWidth=L.width=T,T=g.width,L.width=_,L.minWidth=C,L.maxWidth=x)),T!==void 0?T+"":T}function jf(c,d){return{get:function(){if(c()){delete this.get;return}return(this.get=d).apply(this,arguments)}}}var $f=["Webkit","Moz","ms"],Vf=S.createElement("div").style,Wf={};function rv(c){for(var d=c[0].toUpperCase()+c.slice(1),g=$f.length;g--;)if(c=$f[g]+d,c in Vf)return c}function au(c){var d=p.cssProps[c]||Wf[c];return d||(c in Vf?c:Wf[c]=rv(c)||c)}var ov=/^(none|table(?!-c[ea]).+)/,av={position:"absolute",visibility:"hidden",display:"block"},Bf={letterSpacing:"0",fontWeight:"400"};function zf(c,d,g){var _=ue.exec(d);return _?Math.max(0,_[2]-(g||0))+(_[3]||"px"):d}function lu(c,d,g,_,C,x){var T=d==="width"?1:0,D=0,L=0;if(g===(_?"border":"content"))return 0;for(;T<4;T+=2)g==="margin"&&(L+=p.css(c,g+fe[T],!0,C)),_?(g==="content"&&(L-=p.css(c,"padding"+fe[T],!0,C)),g!=="margin"&&(L-=p.css(c,"border"+fe[T]+"Width",!0,C))):(L+=p.css(c,"padding"+fe[T],!0,C),g!=="padding"?L+=p.css(c,"border"+fe[T]+"Width",!0,C):D+=p.css(c,"border"+fe[T]+"Width",!0,C));return!_&&x>=0&&(L+=Math.max(0,Math.ceil(c["offset"+d[0].toUpperCase()+d.slice(1)]-x-L-D-.5))||0),L}function Hf(c,d,g){var _=Ya(c),C=!v.boxSizingReliable()||g,x=C&&p.css(c,"boxSizing",!1,_)==="border-box",T=x,D=wo(c,d,_),L="offset"+d[0].toUpperCase()+d.slice(1);if(ru.test(D)){if(!g)return D;D="auto"}return(!v.boxSizingReliable()&&x||!v.reliableTrDimensions()&&pe(c,"tr")||D==="auto"||!parseFloat(D)&&p.css(c,"display",!1,_)==="inline")&&c.getClientRects().length&&(x=p.css(c,"boxSizing",!1,_)==="border-box",T=L in c,T&&(D=c[L])),D=parseFloat(D)||0,D+lu(c,d,g||(x?"border":"content"),T,_,D)+"px"}p.extend({cssHooks:{opacity:{get:function(c,d){if(d){var g=wo(c,"opacity");return g===""?"1":g}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(c,d,g,_){if(!(!c||c.nodeType===3||c.nodeType===8||!c.style)){var C,x,T,D=F(d),L=ou.test(d),j=c.style;if(L||(d=au(D)),T=p.cssHooks[d]||p.cssHooks[D],g!==void 0){if(x=typeof g,x==="string"&&(C=ue.exec(g))&&C[1]&&(g=rt(c,d,C),x="number"),g==null||g!==g)return;x==="number"&&!L&&(g+=C&&C[3]||(p.cssNumber[D]?"":"px")),!v.clearCloneStyle&&g===""&&d.indexOf("background")===0&&(j[d]="inherit"),(!T||!("set"in T)||(g=T.set(c,g,_))!==void 0)&&(L?j.setProperty(d,g):j[d]=g)}else return T&&"get"in T&&(C=T.get(c,!1,_))!==void 0?C:j[d]}},css:function(c,d,g,_){var C,x,T,D=F(d),L=ou.test(d);return L||(d=au(D)),T=p.cssHooks[d]||p.cssHooks[D],T&&"get"in T&&(C=T.get(c,!0,g)),C===void 0&&(C=wo(c,d,_)),C==="normal"&&d in Bf&&(C=Bf[d]),g===""||g?(x=parseFloat(C),g===!0||isFinite(x)?x||0:C):C}}),p.each(["height","width"],function(c,d){p.cssHooks[d]={get:function(g,_,C){if(_)return ov.test(p.css(g,"display"))&&(!g.getClientRects().length||!g.getBoundingClientRect().width)?kf(g,av,function(){return Hf(g,d,C)}):Hf(g,d,C)},set:function(g,_,C){var x,T=Ya(g),D=!v.scrollboxSize()&&T.position==="absolute",L=D||C,j=L&&p.css(g,"boxSizing",!1,T)==="border-box",B=C?lu(g,d,C,j,T):0;return j&&D&&(B-=Math.ceil(g["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(T[d])-lu(g,d,"border",!1,T)-.5)),B&&(x=ue.exec(_))&&(x[3]||"px")!=="px"&&(g.style[d]=_,_=p.css(g,d)),zf(g,_,B)}}}),p.cssHooks.marginLeft=jf(v.reliableMarginLeft,function(c,d){if(d)return(parseFloat(wo(c,"marginLeft"))||c.getBoundingClientRect().left-kf(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(c,d){p.cssHooks[c+d]={expand:function(g){for(var _=0,C={},x=typeof g=="string"?g.split(" "):[g];_<4;_++)C[c+fe[_]+d]=x[_]||x[_-2]||x[0];return C}},c!=="margin"&&(p.cssHooks[c+d].set=zf)}),p.fn.extend({css:function(c,d){return st(this,function(g,_,C){var x,T,D={},L=0;if(Array.isArray(_)){for(x=Ya(g),T=_.length;L<T;L++)D[_[L]]=p.css(g,_[L],!1,x);return D}return C!==void 0?p.style(g,_,C):p.css(g,_)},c,d,arguments.length>1)}});function li(c,d,g,_,C){return new li.prototype.init(c,d,g,_,C)}p.Tween=li,li.prototype={constructor:li,init:function(c,d,g,_,C,x){this.elem=c,this.prop=g,this.easing=C||p.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=_,this.unit=x||(p.cssNumber[g]?"":"px")},cur:function(){var c=li.propHooks[this.prop];return c&&c.get?c.get(this):li.propHooks._default.get(this)},run:function(c){var d,g=li.propHooks[this.prop];return this.options.duration?this.pos=d=p.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):this.pos=d=c,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):li.propHooks._default.set(this),this}},li.prototype.init.prototype=li.prototype,li.propHooks={_default:{get:function(c){var d;return c.elem.nodeType!==1||c.elem[c.prop]!=null&&c.elem.style[c.prop]==null?c.elem[c.prop]:(d=p.css(c.elem,c.prop,""),!d||d==="auto"?0:d)},set:function(c){p.fx.step[c.prop]?p.fx.step[c.prop](c):c.elem.nodeType===1&&(p.cssHooks[c.prop]||c.elem.style[au(c.prop)]!=null)?p.style(c.elem,c.prop,c.now+c.unit):c.elem[c.prop]=c.now}}},li.propHooks.scrollTop=li.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},p.easing={linear:function(c){return c},swing:function(c){return .5-Math.cos(c*Math.PI)/2},_default:"swing"},p.fx=li.prototype.init,p.fx.step={};var _r,Ua,lv=/^(?:toggle|show|hide)$/,cv=/queueHooks$/;function cu(){Ua&&(S.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(cu):e.setTimeout(cu,p.fx.interval),p.fx.tick())}function Yf(){return e.setTimeout(function(){_r=void 0}),_r=Date.now()}function Xa(c,d){var g,_=0,C={height:c};for(d=d?1:0;_<4;_+=2-d)g=fe[_],C["margin"+g]=C["padding"+g]=c;return d&&(C.opacity=C.width=c),C}function Uf(c,d,g){for(var _,C=(Gi.tweeners[d]||[]).concat(Gi.tweeners["*"]),x=0,T=C.length;x<T;x++)if(_=C[x].call(g,d,c))return _}function uv(c,d,g){var _,C,x,T,D,L,j,B,ie="width"in d||"height"in d,V=this,Y={},Te=c.style,$e=c.nodeType&&Ne(c),xe=$.get(c,"fxshow");g.queue||(T=p._queueHooks(c,"fx"),T.unqueued==null&&(T.unqueued=0,D=T.empty.fire,T.empty.fire=function(){T.unqueued||D()}),T.unqueued++,V.always(function(){V.always(function(){T.unqueued--,p.queue(c,"fx").length||T.empty.fire()})}));for(_ in d)if(C=d[_],lv.test(C)){if(delete d[_],x=x||C==="toggle",C===($e?"hide":"show"))if(C==="show"&&xe&&xe[_]!==void 0)$e=!0;else continue;Y[_]=xe&&xe[_]||p.style(c,_)}if(L=!p.isEmptyObject(d),!(!L&&p.isEmptyObject(Y))){ie&&c.nodeType===1&&(g.overflow=[Te.overflow,Te.overflowX,Te.overflowY],j=xe&&xe.display,j==null&&(j=$.get(c,"display")),B=p.css(c,"display"),B==="none"&&(j?B=j:(gi([c],!0),j=c.style.display||j,B=p.css(c,"display"),gi([c]))),(B==="inline"||B==="inline-block"&&j!=null)&&p.css(c,"float")==="none"&&(L||(V.done(function(){Te.display=j}),j==null&&(B=Te.display,j=B==="none"?"":B)),Te.display="inline-block")),g.overflow&&(Te.overflow="hidden",V.always(function(){Te.overflow=g.overflow[0],Te.overflowX=g.overflow[1],Te.overflowY=g.overflow[2]})),L=!1;for(_ in Y)L||(xe?"hidden"in xe&&($e=xe.hidden):xe=$.access(c,"fxshow",{display:j}),x&&(xe.hidden=!$e),$e&&gi([c],!0),V.done(function(){$e||gi([c]),$.remove(c,"fxshow");for(_ in Y)p.style(c,_,Y[_])})),L=Uf($e?xe[_]:0,_,V),_ in xe||(xe[_]=L.start,$e&&(L.end=L.start,L.start=0))}}function hv(c,d){var g,_,C,x,T;for(g in c)if(_=F(g),C=d[_],x=c[g],Array.isArray(x)&&(C=x[1],x=c[g]=x[0]),g!==_&&(c[_]=x,delete c[g]),T=p.cssHooks[_],T&&"expand"in T){x=T.expand(x),delete c[_];for(g in x)g in c||(c[g]=x[g],d[g]=C)}else d[_]=C}function Gi(c,d,g){var _,C,x=0,T=Gi.prefilters.length,D=p.Deferred().always(function(){delete L.elem}),L=function(){if(C)return!1;for(var ie=_r||Yf(),V=Math.max(0,j.startTime+j.duration-ie),Y=V/j.duration||0,Te=1-Y,$e=0,xe=j.tweens.length;$e<xe;$e++)j.tweens[$e].run(Te);return D.notifyWith(c,[j,Te,V]),Te<1&&xe?V:(xe||D.notifyWith(c,[j,1,0]),D.resolveWith(c,[j]),!1)},j=D.promise({elem:c,props:p.extend({},d),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},g),originalProperties:d,originalOptions:g,startTime:_r||Yf(),duration:g.duration,tweens:[],createTween:function(ie,V){var Y=p.Tween(c,j.opts,ie,V,j.opts.specialEasing[ie]||j.opts.easing);return j.tweens.push(Y),Y},stop:function(ie){var V=0,Y=ie?j.tweens.length:0;if(C)return this;for(C=!0;V<Y;V++)j.tweens[V].run(1);return ie?(D.notifyWith(c,[j,1,0]),D.resolveWith(c,[j,ie])):D.rejectWith(c,[j,ie]),this}}),B=j.props;for(hv(B,j.opts.specialEasing);x<T;x++)if(_=Gi.prefilters[x].call(j,c,B,j.opts),_)return E(_.stop)&&(p._queueHooks(j.elem,j.opts.queue).stop=_.stop.bind(_)),_;return p.map(B,Uf,j),E(j.opts.start)&&j.opts.start.call(c,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),p.fx.timer(p.extend(L,{elem:c,anim:j,queue:j.opts.queue})),j}p.Animation=p.extend(Gi,{tweeners:{"*":[function(c,d){var g=this.createTween(c,d);return rt(g.elem,c,ue.exec(d),g),g}]},tweener:function(c,d){E(c)?(d=c,c=["*"]):c=c.match(We);for(var g,_=0,C=c.length;_<C;_++)g=c[_],Gi.tweeners[g]=Gi.tweeners[g]||[],Gi.tweeners[g].unshift(d)},prefilters:[uv],prefilter:function(c,d){d?Gi.prefilters.unshift(c):Gi.prefilters.push(c)}}),p.speed=function(c,d,g){var _=c&&typeof c=="object"?p.extend({},c):{complete:g||!g&&d||E(c)&&c,duration:c,easing:g&&d||d&&!E(d)&&d};return p.fx.off?_.duration=0:typeof _.duration!="number"&&(_.duration in p.fx.speeds?_.duration=p.fx.speeds[_.duration]:_.duration=p.fx.speeds._default),(_.queue==null||_.queue===!0)&&(_.queue="fx"),_.old=_.complete,_.complete=function(){E(_.old)&&_.old.call(this),_.queue&&p.dequeue(this,_.queue)},_},p.fn.extend({fadeTo:function(c,d,g,_){return this.filter(Ne).css("opacity",0).show().end().animate({opacity:d},c,g,_)},animate:function(c,d,g,_){var C=p.isEmptyObject(c),x=p.speed(d,g,_),T=function(){var D=Gi(this,p.extend({},c),x);(C||$.get(this,"finish"))&&D.stop(!0)};return T.finish=T,C||x.queue===!1?this.each(T):this.queue(x.queue,T)},stop:function(c,d,g){var _=function(C){var x=C.stop;delete C.stop,x(g)};return typeof c!="string"&&(g=d,d=c,c=void 0),d&&this.queue(c||"fx",[]),this.each(function(){var C=!0,x=c!=null&&c+"queueHooks",T=p.timers,D=$.get(this);if(x)D[x]&&D[x].stop&&_(D[x]);else for(x in D)D[x]&&D[x].stop&&cv.test(x)&&_(D[x]);for(x=T.length;x--;)T[x].elem===this&&(c==null||T[x].queue===c)&&(T[x].anim.stop(g),C=!1,T.splice(x,1));(C||!g)&&p.dequeue(this,c)})},finish:function(c){return c!==!1&&(c=c||"fx"),this.each(function(){var d,g=$.get(this),_=g[c+"queue"],C=g[c+"queueHooks"],x=p.timers,T=_?_.length:0;for(g.finish=!0,p.queue(this,c,[]),C&&C.stop&&C.stop.call(this,!0),d=x.length;d--;)x[d].elem===this&&x[d].queue===c&&(x[d].anim.stop(!0),x.splice(d,1));for(d=0;d<T;d++)_[d]&&_[d].finish&&_[d].finish.call(this);delete g.finish})}}),p.each(["toggle","show","hide"],function(c,d){var g=p.fn[d];p.fn[d]=function(_,C,x){return _==null||typeof _=="boolean"?g.apply(this,arguments):this.animate(Xa(d,!0),_,C,x)}}),p.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,d){p.fn[c]=function(g,_,C){return this.animate(d,g,_,C)}}),p.timers=[],p.fx.tick=function(){var c,d=0,g=p.timers;for(_r=Date.now();d<g.length;d++)c=g[d],!c()&&g[d]===c&&g.splice(d--,1);g.length||p.fx.stop(),_r=void 0},p.fx.timer=function(c){p.timers.push(c),p.fx.start()},p.fx.interval=13,p.fx.start=function(){Ua||(Ua=!0,cu())},p.fx.stop=function(){Ua=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(c,d){return c=p.fx&&p.fx.speeds[c]||c,d=d||"fx",this.queue(d,function(g,_){var C=e.setTimeout(g,c);_.stop=function(){e.clearTimeout(C)}})},function(){var c=S.createElement("input"),d=S.createElement("select"),g=d.appendChild(S.createElement("option"));c.type="checkbox",v.checkOn=c.value!=="",v.optSelected=g.selected,c=S.createElement("input"),c.value="t",c.type="radio",v.radioValue=c.value==="t"}();var Xf,bo=p.expr.attrHandle;p.fn.extend({attr:function(c,d){return st(this,p.attr,c,d,arguments.length>1)},removeAttr:function(c){return this.each(function(){p.removeAttr(this,c)})}}),p.extend({attr:function(c,d,g){var _,C,x=c.nodeType;if(!(x===3||x===8||x===2)){if(typeof c.getAttribute>"u")return p.prop(c,d,g);if((x!==1||!p.isXMLDoc(c))&&(C=p.attrHooks[d.toLowerCase()]||(p.expr.match.bool.test(d)?Xf:void 0)),g!==void 0){if(g===null){p.removeAttr(c,d);return}return C&&"set"in C&&(_=C.set(c,g,d))!==void 0?_:(c.setAttribute(d,g+""),g)}return C&&"get"in C&&(_=C.get(c,d))!==null?_:(_=p.find.attr(c,d),_??void 0)}},attrHooks:{type:{set:function(c,d){if(!v.radioValue&&d==="radio"&&pe(c,"input")){var g=c.value;return c.setAttribute("type",d),g&&(c.value=g),d}}}},removeAttr:function(c,d){var g,_=0,C=d&&d.match(We);if(C&&c.nodeType===1)for(;g=C[_++];)c.removeAttribute(g)}}),Xf={set:function(c,d,g){return d===!1?p.removeAttr(c,g):c.setAttribute(g,g),g}},p.each(p.expr.match.bool.source.match(/\w+/g),function(c,d){var g=bo[d]||p.find.attr;bo[d]=function(_,C,x){var T,D,L=C.toLowerCase();return x||(D=bo[L],bo[L]=T,T=g(_,C,x)!=null?L:null,bo[L]=D),T}});var dv=/^(?:input|select|textarea|button)$/i,fv=/^(?:a|area)$/i;p.fn.extend({prop:function(c,d){return st(this,p.prop,c,d,arguments.length>1)},removeProp:function(c){return this.each(function(){delete this[p.propFix[c]||c]})}}),p.extend({prop:function(c,d,g){var _,C,x=c.nodeType;if(!(x===3||x===8||x===2))return(x!==1||!p.isXMLDoc(c))&&(d=p.propFix[d]||d,C=p.propHooks[d]),g!==void 0?C&&"set"in C&&(_=C.set(c,g,d))!==void 0?_:c[d]=g:C&&"get"in C&&(_=C.get(c,d))!==null?_:c[d]},propHooks:{tabIndex:{get:function(c){var d=p.find.attr(c,"tabindex");return d?parseInt(d,10):dv.test(c.nodeName)||fv.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(p.propHooks.selected={get:function(c){var d=c.parentNode;return d&&d.parentNode&&d.parentNode.selectedIndex,null},set:function(c){var d=c.parentNode;d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Os(c){var d=c.match(We)||[];return d.join(" ")}function Ps(c){return c.getAttribute&&c.getAttribute("class")||""}function uu(c){return Array.isArray(c)?c:typeof c=="string"?c.match(We)||[]:[]}p.fn.extend({addClass:function(c){var d,g,_,C,x,T;return E(c)?this.each(function(D){p(this).addClass(c.call(this,D,Ps(this)))}):(d=uu(c),d.length?this.each(function(){if(_=Ps(this),g=this.nodeType===1&&" "+Os(_)+" ",g){for(x=0;x<d.length;x++)C=d[x],g.indexOf(" "+C+" ")<0&&(g+=C+" ");T=Os(g),_!==T&&this.setAttribute("class",T)}}):this)},removeClass:function(c){var d,g,_,C,x,T;return E(c)?this.each(function(D){p(this).removeClass(c.call(this,D,Ps(this)))}):arguments.length?(d=uu(c),d.length?this.each(function(){if(_=Ps(this),g=this.nodeType===1&&" "+Os(_)+" ",g){for(x=0;x<d.length;x++)for(C=d[x];g.indexOf(" "+C+" ")>-1;)g=g.replace(" "+C+" "," ");T=Os(g),_!==T&&this.setAttribute("class",T)}}):this):this.attr("class","")},toggleClass:function(c,d){var g,_,C,x,T=typeof c,D=T==="string"||Array.isArray(c);return E(c)?this.each(function(L){p(this).toggleClass(c.call(this,L,Ps(this),d),d)}):typeof d=="boolean"&&D?d?this.addClass(c):this.removeClass(c):(g=uu(c),this.each(function(){if(D)for(x=p(this),C=0;C<g.length;C++)_=g[C],x.hasClass(_)?x.removeClass(_):x.addClass(_);else(c===void 0||T==="boolean")&&(_=Ps(this),_&&$.set(this,"__className__",_),this.setAttribute&&this.setAttribute("class",_||c===!1?"":$.get(this,"__className__")||""))}))},hasClass:function(c){var d,g,_=0;for(d=" "+c+" ";g=this[_++];)if(g.nodeType===1&&(" "+Os(Ps(g))+" ").indexOf(d)>-1)return!0;return!1}});var gv=/\r/g;p.fn.extend({val:function(c){var d,g,_,C=this[0];return arguments.length?(_=E(c),this.each(function(x){var T;this.nodeType===1&&(_?T=c.call(this,x,p(this).val()):T=c,T==null?T="":typeof T=="number"?T+="":Array.isArray(T)&&(T=p.map(T,function(D){return D==null?"":D+""})),d=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!d||!("set"in d)||d.set(this,T,"value")===void 0)&&(this.value=T))})):C?(d=p.valHooks[C.type]||p.valHooks[C.nodeName.toLowerCase()],d&&"get"in d&&(g=d.get(C,"value"))!==void 0?g:(g=C.value,typeof g=="string"?g.replace(gv,""):g??"")):void 0}}),p.extend({valHooks:{option:{get:function(c){var d=p.find.attr(c,"value");return d??Os(p.text(c))}},select:{get:function(c){var d,g,_,C=c.options,x=c.selectedIndex,T=c.type==="select-one",D=T?null:[],L=T?x+1:C.length;for(x<0?_=L:_=T?x:0;_<L;_++)if(g=C[_],(g.selected||_===x)&&!g.disabled&&(!g.parentNode.disabled||!pe(g.parentNode,"optgroup"))){if(d=p(g).val(),T)return d;D.push(d)}return D},set:function(c,d){for(var g,_,C=c.options,x=p.makeArray(d),T=C.length;T--;)_=C[T],(_.selected=p.inArray(p.valHooks.option.get(_),x)>-1)&&(g=!0);return g||(c.selectedIndex=-1),x}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(c,d){if(Array.isArray(d))return c.checked=p.inArray(p(c).val(),d)>-1}},v.checkOn||(p.valHooks[this].get=function(c){return c.getAttribute("value")===null?"on":c.value})}),v.focusin="onfocusin"in e;var Kf=/^(?:focusinfocus|focusoutblur)$/,qf=function(c){c.stopPropagation()};p.extend(p.event,{trigger:function(c,d,g,_){var C,x,T,D,L,j,B,ie,V=[g||S],Y=f.call(c,"type")?c.type:c,Te=f.call(c,"namespace")?c.namespace.split("."):[];if(x=ie=T=g=g||S,!(g.nodeType===3||g.nodeType===8)&&!Kf.test(Y+p.event.triggered)&&(Y.indexOf(".")>-1&&(Te=Y.split("."),Y=Te.shift(),Te.sort()),L=Y.indexOf(":")<0&&"on"+Y,c=c[p.expando]?c:new p.Event(Y,typeof c=="object"&&c),c.isTrigger=_?2:3,c.namespace=Te.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+Te.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=g),d=d==null?[c]:p.makeArray(d,[c]),B=p.event.special[Y]||{},!(!_&&B.trigger&&B.trigger.apply(g,d)===!1))){if(!_&&!B.noBubble&&!b(g)){for(D=B.delegateType||Y,Kf.test(D+Y)||(x=x.parentNode);x;x=x.parentNode)V.push(x),T=x;T===(g.ownerDocument||S)&&V.push(T.defaultView||T.parentWindow||e)}for(C=0;(x=V[C++])&&!c.isPropagationStopped();)ie=x,c.type=C>1?D:B.bindType||Y,j=($.get(x,"events")||Object.create(null))[c.type]&&$.get(x,"handle"),j&&j.apply(x,d),j=L&&x[L],j&&j.apply&&z(x)&&(c.result=j.apply(x,d),c.result===!1&&c.preventDefault());return c.type=Y,!_&&!c.isDefaultPrevented()&&(!B._default||B._default.apply(V.pop(),d)===!1)&&z(g)&&L&&E(g[Y])&&!b(g)&&(T=g[L],T&&(g[L]=null),p.event.triggered=Y,c.isPropagationStopped()&&ie.addEventListener(Y,qf),g[Y](),c.isPropagationStopped()&&ie.removeEventListener(Y,qf),p.event.triggered=void 0,T&&(g[L]=T)),c.result}},simulate:function(c,d,g){var _=p.extend(new p.Event,g,{type:c,isSimulated:!0});p.event.trigger(_,null,d)}}),p.fn.extend({trigger:function(c,d){return this.each(function(){p.event.trigger(c,d,this)})},triggerHandler:function(c,d){var g=this[0];if(g)return p.event.trigger(c,d,g,!0)}}),v.focusin||p.each({focus:"focusin",blur:"focusout"},function(c,d){var g=function(_){p.event.simulate(d,_.target,p.event.fix(_))};p.event.special[d]={setup:function(){var _=this.ownerDocument||this.document||this,C=$.access(_,d);C||_.addEventListener(c,g,!0),$.access(_,d,(C||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,C=$.access(_,d)-1;C?$.access(_,d,C):(_.removeEventListener(c,g,!0),$.remove(_,d))}}});var So=e.location,Zf={guid:Date.now()},hu=/\?/;p.parseXML=function(c){var d,g;if(!c||typeof c!="string")return null;try{d=new e.DOMParser().parseFromString(c,"text/xml")}catch{}return g=d&&d.getElementsByTagName("parsererror")[0],(!d||g)&&p.error("Invalid XML: "+(g?p.map(g.childNodes,function(_){return _.textContent}).join(`
`):c)),d};var pv=/\[\]$/,Jf=/\r?\n/g,mv=/^(?:submit|button|image|reset|file)$/i,_v=/^(?:input|select|textarea|keygen)/i;function du(c,d,g,_){var C;if(Array.isArray(d))p.each(d,function(x,T){g||pv.test(c)?_(c,T):du(c+"["+(typeof T=="object"&&T!=null?x:"")+"]",T,g,_)});else if(!g&&R(d)==="object")for(C in d)du(c+"["+C+"]",d[C],g,_);else _(c,d)}p.param=function(c,d){var g,_=[],C=function(x,T){var D=E(T)?T():T;_[_.length]=encodeURIComponent(x)+"="+encodeURIComponent(D??"")};if(c==null)return"";if(Array.isArray(c)||c.jquery&&!p.isPlainObject(c))p.each(c,function(){C(this.name,this.value)});else for(g in c)du(g,c[g],d,C);return _.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=p.prop(this,"elements");return c?p.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!p(this).is(":disabled")&&_v.test(this.nodeName)&&!mv.test(c)&&(this.checked||!pi.test(c))}).map(function(c,d){var g=p(this).val();return g==null?null:Array.isArray(g)?p.map(g,function(_){return{name:d.name,value:_.replace(Jf,`\r
`)}}):{name:d.name,value:g.replace(Jf,`\r
`)}}).get()}});var yv=/%20/g,vv=/#.*$/,Cv=/([?&])_=[^&]*/,Ev=/^(.*?):[ \t]*([^\r\n]*)$/mg,xv=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tv=/^(?:GET|HEAD)$/,wv=/^\/\//,Qf={},fu={},eg="*/".concat("*"),gu=S.createElement("a");gu.href=So.href;function tg(c){return function(d,g){typeof d!="string"&&(g=d,d="*");var _,C=0,x=d.toLowerCase().match(We)||[];if(E(g))for(;_=x[C++];)_[0]==="+"?(_=_.slice(1)||"*",(c[_]=c[_]||[]).unshift(g)):(c[_]=c[_]||[]).push(g)}}function ig(c,d,g,_){var C={},x=c===fu;function T(D){var L;return C[D]=!0,p.each(c[D]||[],function(j,B){var ie=B(d,g,_);if(typeof ie=="string"&&!x&&!C[ie])return d.dataTypes.unshift(ie),T(ie),!1;if(x)return!(L=ie)}),L}return T(d.dataTypes[0])||!C["*"]&&T("*")}function pu(c,d){var g,_,C=p.ajaxSettings.flatOptions||{};for(g in d)d[g]!==void 0&&((C[g]?c:_||(_={}))[g]=d[g]);return _&&p.extend(!0,c,_),c}function bv(c,d,g){for(var _,C,x,T,D=c.contents,L=c.dataTypes;L[0]==="*";)L.shift(),_===void 0&&(_=c.mimeType||d.getResponseHeader("Content-Type"));if(_){for(C in D)if(D[C]&&D[C].test(_)){L.unshift(C);break}}if(L[0]in g)x=L[0];else{for(C in g){if(!L[0]||c.converters[C+" "+L[0]]){x=C;break}T||(T=C)}x=x||T}if(x)return x!==L[0]&&L.unshift(x),g[x]}function Sv(c,d,g,_){var C,x,T,D,L,j={},B=c.dataTypes.slice();if(B[1])for(T in c.converters)j[T.toLowerCase()]=c.converters[T];for(x=B.shift();x;)if(c.responseFields[x]&&(g[c.responseFields[x]]=d),!L&&_&&c.dataFilter&&(d=c.dataFilter(d,c.dataType)),L=x,x=B.shift(),x){if(x==="*")x=L;else if(L!=="*"&&L!==x){if(T=j[L+" "+x]||j["* "+x],!T){for(C in j)if(D=C.split(" "),D[1]===x&&(T=j[L+" "+D[0]]||j["* "+D[0]],T)){T===!0?T=j[C]:j[C]!==!0&&(x=D[0],B.unshift(D[1]));break}}if(T!==!0)if(T&&c.throws)d=T(d);else try{d=T(d)}catch(ie){return{state:"parsererror",error:T?ie:"No conversion from "+L+" to "+x}}}}return{state:"success",data:d}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:So.href,type:"GET",isLocal:xv.test(So.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":eg,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,d){return d?pu(pu(c,p.ajaxSettings),d):pu(p.ajaxSettings,c)},ajaxPrefilter:tg(Qf),ajaxTransport:tg(fu),ajax:function(c,d){typeof c=="object"&&(d=c,c=void 0),d=d||{};var g,_,C,x,T,D,L,j,B,ie,V=p.ajaxSetup({},d),Y=V.context||V,Te=V.context&&(Y.nodeType||Y.jquery)?p(Y):p.event,$e=p.Deferred(),xe=p.Callbacks("once memory"),kt=V.statusCode||{},Lt={},mi={},ht="canceled",ke={readyState:0,getResponseHeader:function(Je){var wt;if(L){if(!x)for(x={};wt=Ev.exec(C);)x[wt[1].toLowerCase()+" "]=(x[wt[1].toLowerCase()+" "]||[]).concat(wt[2]);wt=x[Je.toLowerCase()+" "]}return wt==null?null:wt.join(", ")},getAllResponseHeaders:function(){return L?C:null},setRequestHeader:function(Je,wt){return L==null&&(Je=mi[Je.toLowerCase()]=mi[Je.toLowerCase()]||Je,Lt[Je]=wt),this},overrideMimeType:function(Je){return L==null&&(V.mimeType=Je),this},statusCode:function(Je){var wt;if(Je)if(L)ke.always(Je[ke.status]);else for(wt in Je)kt[wt]=[kt[wt],Je[wt]];return this},abort:function(Je){var wt=Je||ht;return g&&g.abort(wt),ci(0,wt),this}};if($e.promise(ke),V.url=((c||V.url||So.href)+"").replace(wv,So.protocol+"//"),V.type=d.method||d.type||V.method||V.type,V.dataTypes=(V.dataType||"*").toLowerCase().match(We)||[""],V.crossDomain==null){D=S.createElement("a");try{D.href=V.url,D.href=D.href,V.crossDomain=gu.protocol+"//"+gu.host!=D.protocol+"//"+D.host}catch{V.crossDomain=!0}}if(V.data&&V.processData&&typeof V.data!="string"&&(V.data=p.param(V.data,V.traditional)),ig(Qf,V,d,ke),L)return ke;j=p.event&&V.global,j&&p.active++===0&&p.event.trigger("ajaxStart"),V.type=V.type.toUpperCase(),V.hasContent=!Tv.test(V.type),_=V.url.replace(vv,""),V.hasContent?V.data&&V.processData&&(V.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(V.data=V.data.replace(yv,"+")):(ie=V.url.slice(_.length),V.data&&(V.processData||typeof V.data=="string")&&(_+=(hu.test(_)?"&":"?")+V.data,delete V.data),V.cache===!1&&(_=_.replace(Cv,"$1"),ie=(hu.test(_)?"&":"?")+"_="+Zf.guid+++ie),V.url=_+ie),V.ifModified&&(p.lastModified[_]&&ke.setRequestHeader("If-Modified-Since",p.lastModified[_]),p.etag[_]&&ke.setRequestHeader("If-None-Match",p.etag[_])),(V.data&&V.hasContent&&V.contentType!==!1||d.contentType)&&ke.setRequestHeader("Content-Type",V.contentType),ke.setRequestHeader("Accept",V.dataTypes[0]&&V.accepts[V.dataTypes[0]]?V.accepts[V.dataTypes[0]]+(V.dataTypes[0]!=="*"?", "+eg+"; q=0.01":""):V.accepts["*"]);for(B in V.headers)ke.setRequestHeader(B,V.headers[B]);if(V.beforeSend&&(V.beforeSend.call(Y,ke,V)===!1||L))return ke.abort();if(ht="abort",xe.add(V.complete),ke.done(V.success),ke.fail(V.error),g=ig(fu,V,d,ke),!g)ci(-1,"No Transport");else{if(ke.readyState=1,j&&Te.trigger("ajaxSend",[ke,V]),L)return ke;V.async&&V.timeout>0&&(T=e.setTimeout(function(){ke.abort("timeout")},V.timeout));try{L=!1,g.send(Lt,ci)}catch(Je){if(L)throw Je;ci(-1,Je)}}function ci(Je,wt,Ao,Ka){var _i,Ms,Ds,ui,zn,Ii=wt;L||(L=!0,T&&e.clearTimeout(T),g=void 0,C=Ka||"",ke.readyState=Je>0?4:0,_i=Je>=200&&Je<300||Je===304,Ao&&(ui=bv(V,ke,Ao)),!_i&&p.inArray("script",V.dataTypes)>-1&&p.inArray("json",V.dataTypes)<0&&(V.converters["text script"]=function(){}),ui=Sv(V,ui,ke,_i),_i?(V.ifModified&&(zn=ke.getResponseHeader("Last-Modified"),zn&&(p.lastModified[_]=zn),zn=ke.getResponseHeader("etag"),zn&&(p.etag[_]=zn)),Je===204||V.type==="HEAD"?Ii="nocontent":Je===304?Ii="notmodified":(Ii=ui.state,Ms=ui.data,Ds=ui.error,_i=!Ds)):(Ds=Ii,(Je||!Ii)&&(Ii="error",Je<0&&(Je=0))),ke.status=Je,ke.statusText=(wt||Ii)+"",_i?$e.resolveWith(Y,[Ms,Ii,ke]):$e.rejectWith(Y,[ke,Ii,Ds]),ke.statusCode(kt),kt=void 0,j&&Te.trigger(_i?"ajaxSuccess":"ajaxError",[ke,V,_i?Ms:Ds]),xe.fireWith(Y,[ke,Ii]),j&&(Te.trigger("ajaxComplete",[ke,V]),--p.active||p.event.trigger("ajaxStop")))}return ke},getJSON:function(c,d,g){return p.get(c,d,g,"json")},getScript:function(c,d){return p.get(c,void 0,d,"script")}}),p.each(["get","post"],function(c,d){p[d]=function(g,_,C,x){return E(_)&&(x=x||C,C=_,_=void 0),p.ajax(p.extend({url:g,type:d,dataType:x,data:_,success:C},p.isPlainObject(g)&&g))}}),p.ajaxPrefilter(function(c){var d;for(d in c.headers)d.toLowerCase()==="content-type"&&(c.contentType=c.headers[d]||"")}),p._evalUrl=function(c,d,g){return p.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){p.globalEval(_,d,g)}})},p.fn.extend({wrapAll:function(c){var d;return this[0]&&(E(c)&&(c=c.call(this[0])),d=p(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(c){return E(c)?this.each(function(d){p(this).wrapInner(c.call(this,d))}):this.each(function(){var d=p(this),g=d.contents();g.length?g.wrapAll(c):d.append(c)})},wrap:function(c){var d=E(c);return this.each(function(g){p(this).wrapAll(d?c.call(this,g):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(c){return!p.expr.pseudos.visible(c)},p.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Rv={0:200,1223:204},Ro=p.ajaxSettings.xhr();v.cors=!!Ro&&"withCredentials"in Ro,v.ajax=Ro=!!Ro,p.ajaxTransport(function(c){var d,g;if(v.cors||Ro&&!c.crossDomain)return{send:function(_,C){var x,T=c.xhr();if(T.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(x in c.xhrFields)T[x]=c.xhrFields[x];c.mimeType&&T.overrideMimeType&&T.overrideMimeType(c.mimeType),!c.crossDomain&&!_["X-Requested-With"]&&(_["X-Requested-With"]="XMLHttpRequest");for(x in _)T.setRequestHeader(x,_[x]);d=function(D){return function(){d&&(d=g=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,D==="abort"?T.abort():D==="error"?typeof T.status!="number"?C(0,"error"):C(T.status,T.statusText):C(Rv[T.status]||T.status,T.statusText,(T.responseType||"text")!=="text"||typeof T.responseText!="string"?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=d(),g=T.onerror=T.ontimeout=d("error"),T.onabort!==void 0?T.onabort=g:T.onreadystatechange=function(){T.readyState===4&&e.setTimeout(function(){d&&g()})},d=d("abort");try{T.send(c.hasContent&&c.data||null)}catch(D){if(d)throw D}},abort:function(){d&&d()}}}),p.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return p.globalEval(c),c}}}),p.ajaxPrefilter("script",function(c){c.cache===void 0&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),p.ajaxTransport("script",function(c){if(c.crossDomain||c.scriptAttrs){var d,g;return{send:function(_,C){d=p("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",g=function(x){d.remove(),g=null,x&&C(x.type==="error"?404:200,x.type)}),S.head.appendChild(d[0])},abort:function(){g&&g()}}}});var ng=[],mu=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=ng.pop()||p.expando+"_"+Zf.guid++;return this[c]=!0,c}}),p.ajaxPrefilter("json jsonp",function(c,d,g){var _,C,x,T=c.jsonp!==!1&&(mu.test(c.url)?"url":typeof c.data=="string"&&(c.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&mu.test(c.data)&&"data");if(T||c.dataTypes[0]==="jsonp")return _=c.jsonpCallback=E(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,T?c[T]=c[T].replace(mu,"$1"+_):c.jsonp!==!1&&(c.url+=(hu.test(c.url)?"&":"?")+c.jsonp+"="+_),c.converters["script json"]=function(){return x||p.error(_+" was not called"),x[0]},c.dataTypes[0]="json",C=e[_],e[_]=function(){x=arguments},g.always(function(){C===void 0?p(e).removeProp(_):e[_]=C,c[_]&&(c.jsonpCallback=d.jsonpCallback,ng.push(_)),x&&E(C)&&C(x[0]),x=C=void 0}),"script"}),v.createHTMLDocument=function(){var c=S.implementation.createHTMLDocument("").body;return c.innerHTML="<form></form><form></form>",c.childNodes.length===2}(),p.parseHTML=function(c,d,g){if(typeof c!="string")return[];typeof d=="boolean"&&(g=d,d=!1);var _,C,x;return d||(v.createHTMLDocument?(d=S.implementation.createHTMLDocument(""),_=d.createElement("base"),_.href=S.location.href,d.head.appendChild(_)):d=S),C=ve.exec(c),x=!g&&[],C?[d.createElement(C[1])]:(C=Wn([c],d,x),x&&x.length&&p(x).remove(),p.merge([],C.childNodes))},p.fn.load=function(c,d,g){var _,C,x,T=this,D=c.indexOf(" ");return D>-1&&(_=Os(c.slice(D)),c=c.slice(0,D)),E(d)?(g=d,d=void 0):d&&typeof d=="object"&&(C="POST"),T.length>0&&p.ajax({url:c,type:C||"GET",dataType:"html",data:d}).done(function(L){x=arguments,T.html(_?p("<div>").append(p.parseHTML(L)).find(_):L)}).always(g&&function(L,j){T.each(function(){g.apply(this,x||[L.responseText,j,L])})}),this},p.expr.pseudos.animated=function(c){return p.grep(p.timers,function(d){return c===d.elem}).length},p.offset={setOffset:function(c,d,g){var _,C,x,T,D,L,j,B=p.css(c,"position"),ie=p(c),V={};B==="static"&&(c.style.position="relative"),D=ie.offset(),x=p.css(c,"top"),L=p.css(c,"left"),j=(B==="absolute"||B==="fixed")&&(x+L).indexOf("auto")>-1,j?(_=ie.position(),T=_.top,C=_.left):(T=parseFloat(x)||0,C=parseFloat(L)||0),E(d)&&(d=d.call(c,g,p.extend({},D))),d.top!=null&&(V.top=d.top-D.top+T),d.left!=null&&(V.left=d.left-D.left+C),"using"in d?d.using.call(c,V):ie.css(V)}},p.fn.extend({offset:function(c){if(arguments.length)return c===void 0?this:this.each(function(C){p.offset.setOffset(this,c,C)});var d,g,_=this[0];if(_)return _.getClientRects().length?(d=_.getBoundingClientRect(),g=_.ownerDocument.defaultView,{top:d.top+g.pageYOffset,left:d.left+g.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var c,d,g,_=this[0],C={top:0,left:0};if(p.css(_,"position")==="fixed")d=_.getBoundingClientRect();else{for(d=this.offset(),g=_.ownerDocument,c=_.offsetParent||g.documentElement;c&&(c===g.body||c===g.documentElement)&&p.css(c,"position")==="static";)c=c.parentNode;c&&c!==_&&c.nodeType===1&&(C=p(c).offset(),C.top+=p.css(c,"borderTopWidth",!0),C.left+=p.css(c,"borderLeftWidth",!0))}return{top:d.top-C.top-p.css(_,"marginTop",!0),left:d.left-C.left-p.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&p.css(c,"position")==="static";)c=c.offsetParent;return c||Ce})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,d){var g=d==="pageYOffset";p.fn[c]=function(_){return st(this,function(C,x,T){var D;if(b(C)?D=C:C.nodeType===9&&(D=C.defaultView),T===void 0)return D?D[d]:C[x];D?D.scrollTo(g?D.pageXOffset:T,g?T:D.pageYOffset):C[x]=T},c,_,arguments.length)}}),p.each(["top","left"],function(c,d){p.cssHooks[d]=jf(v.pixelPosition,function(g,_){if(_)return _=wo(g,d),ru.test(_)?p(g).position()[d]+"px":_})}),p.each({Height:"height",Width:"width"},function(c,d){p.each({padding:"inner"+c,content:d,"":"outer"+c},function(g,_){p.fn[_]=function(C,x){var T=arguments.length&&(g||typeof C!="boolean"),D=g||(C===!0||x===!0?"margin":"border");return st(this,function(L,j,B){var ie;return b(L)?_.indexOf("outer")===0?L["inner"+c]:L.document.documentElement["client"+c]:L.nodeType===9?(ie=L.documentElement,Math.max(L.body["scroll"+c],ie["scroll"+c],L.body["offset"+c],ie["offset"+c],ie["client"+c])):B===void 0?p.css(L,j,D):p.style(L,j,B,D)},d,T?C:void 0,T)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,d){p.fn[d]=function(g){return this.on(d,g)}}),p.fn.extend({bind:function(c,d,g){return this.on(c,null,d,g)},unbind:function(c,d){return this.off(c,null,d)},delegate:function(c,d,g,_){return this.on(d,c,g,_)},undelegate:function(c,d,g){return arguments.length===1?this.off(c,"**"):this.off(d,c||"**",g)},hover:function(c,d){return this.mouseenter(c).mouseleave(d||c)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,d){p.fn[d]=function(g,_){return arguments.length>0?this.on(d,null,g,_):this.trigger(d)}});var Av=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(c,d){var g,_,C;if(typeof d=="string"&&(g=c[d],d=c,c=g),!!E(c))return _=r.call(arguments,2),C=function(){return c.apply(d||this,_.concat(r.call(arguments)))},C.guid=c.guid=c.guid||p.guid++,C},p.holdReady=function(c){c?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=pe,p.isFunction=E,p.isWindow=b,p.camelCase=F,p.type=R,p.now=Date.now,p.isNumeric=function(c){var d=p.type(c);return(d==="number"||d==="string")&&!isNaN(c-parseFloat(c))},p.trim=function(c){return c==null?"":(c+"").replace(Av,"$1")};var Iv=e.jQuery,Lv=e.$;return p.noConflict=function(c){return e.$===p&&(e.$=Lv),c&&e.jQuery===p&&(e.jQuery=Iv),p},typeof t>"u"&&(e.jQuery=e.$=p),p})})(vx);const x_=yh,Cx="/Map_Demo/assets/example-AddressData-2d340b55.jpg";const Ts=(i,e)=>{const t=i.__vccOpts||i;for(const[n,s]of e)t[n]=s;return t},Ex={props:{id:{Type:String,default:0},closeMapData:{Type:Function,default:()=>{}}},setup(i,{emit:e}){const t=pn({});return{props:i,state:t}}},ur=i=>(rd("data-v-2d14893e"),i=i(),od(),i),xx={class:"bg-white rounded py-2"},Tx=ur(()=>ee("div",{class:"row mx-0 align-items-center flex-nowrap text-center p-2 fw-bold"},[ee("p",null,"詳細資訊")],-1)),wx=ur(()=>ee("img",{src:Cx,class:"w-100",alt:""},null,-1)),bx={class:"row mx-0 align-items-center p-2 position-relative"},Sx=ur(()=>ee("p",null,"subtitle:副標題副標題副標題",-1)),Rx=ur(()=>ee("div",{class:"position-absolute w-auto top-0 end-0 mt-2"},"更多資訊",-1)),Ax=ur(()=>ee("p",null,"address300 新竹市東區大學路1001號",-1)),Ix=ur(()=>ee("a",{href:""},"24.791781619336316, 120.9984423386347",-1)),Lx={class:"border-bottom d-flex justify-content-around p-2 mt-3"},Ox=ur(()=>ee("div",{class:"py-2 px-4"},[ee("div",null,"相片相片相片相片相片相片"),ee("div",null,"影片影片影片影片影片影片")],-1));function Px(i,e,t,n,s,r){var o;return et(),nt("div",xx,[Tx,wx,ee("div",bx,[ee("p",null,"title:"+jr((o=n.props)==null?void 0:o.id),1),Sx,Rx,Ax,Ix]),ee("div",null,[ee("div",Lx,[ee("div",{onClick:e[0]||(e[0]=()=>{})},"相片"),ee("div",{onClick:e[1]||(e[1]=()=>{})},"影片")]),Ox])])}const Mx=Ts(Ex,[["render",Px],["__scopeId","data-v-2d14893e"]]),Dx={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class Fx extends Error{constructor(e){const t=Dx[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const T_=Fx;class Nx{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const mn=Nx,Qr={PROPERTYCHANGE:"propertychange"};class kx{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const hd=kx;function Gx(i,e,t){let n,s;t=t||nr;let r=0,o=i.length,a=!1;for(;r<o;)n=r+(o-r>>1),s=+t(i[n],e),s<0?r=n+1:(o=n,a=!s);return a?r:~r}function nr(i,e){return i>e?1:i<e?-1:0}function Lc(i,e,t){const n=i.length;if(i[0]<=e)return 0;if(e<=i[n-1])return n-1;let s;if(t>0){for(s=1;s<n;++s)if(i[s]<e)return s-1}else if(t<0){for(s=1;s<n;++s)if(i[s]<=e)return s}else for(s=1;s<n;++s){if(i[s]==e)return s;if(i[s]<e)return typeof t=="function"?t(e,i[s-1],i[s])>0?s-1:s:i[s-1]-e<e-i[s]?s-1:s}return n-1}function jx(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function Ki(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)i[i.length]=t[s]}function ws(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function $x(i,e,t){const n=e||nr;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||t&&o===0)})}function aa(){return!0}function Oc(){return!1}function sr(){}function Vx(i){let e=!1,t,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!ws(r,n))&&(e=!0,s=this,n=r,t=i.apply(this,arguments)),t}}function Ra(i){for(const e in i)delete i[e]}function _s(i){let e;for(e in i)return!1;return!e}class Wx extends hd{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=t?new mn(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let u=0,h=s.length;u<h;++u)if("handleEvent"in s[u]?l=s[u].handleEvent(r):l=s[u].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let u=a[n];for(delete a[n];u--;)this.removeEventListener(n,sr);delete o[n]}return l}disposeInternal(){this.listeners_&&Ra(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const n=this.listeners_&&this.listeners_[e];if(n){const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=sr,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}}const Aa=Wx,Pe={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function qe(i,e,t,n,s){if(n&&n!==i&&(t=t.bind(n)),s){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const r={target:i,type:e,listener:t};return i.addEventListener(e,t),r}function Bl(i,e,t,n){return qe(i,e,t,n,!0)}function gt(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Ra(i))}class Pc extends Aa{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Pe.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=qe(this,e[r],t);return s}return qe(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=Bl(this,e[r],t)}else n=Bl(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)An(n);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}Pc.prototype.on;Pc.prototype.once;Pc.prototype.un;function An(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)gt(i[e]);else gt(i)}const w_=Pc;function Le(){throw new Error("Unimplemented abstract method.")}let Bx=0;function Ve(i){return i.ol_uid||(i.ol_uid=String(++Bx))}class Wg extends mn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class zx extends w_{constructor(e){super(),this.on,this.once,this.un,Ve(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Wg(n,e,t)),n=Qr.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Wg(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],_s(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const Di=zx,fi={ADD:"add",REMOVE:"remove"},Bg={LENGTH:"length"};class cl extends mn{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Hx extends Di{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Bg.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new cl(fi.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new cl(fi.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new cl(fi.REMOVE,s,e)),this.dispatchEvent(new cl(fi.ADD,t,e))}updateLength_(){this.set(Bg.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new T_(58)}}const cn=Hx,ds={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};function Ge(i,e){if(!i)throw new T_(e)}class dd extends Di{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new dd(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(gt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=qe(e,Pe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Yx(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Yx(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(Ge(typeof i.getZIndex=="function",41),e=[i]),function(){return e}}const eo=dd;class fd{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new fd({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const fs=fd,ys=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ux=ys.includes("firefox"),Xx=ys.includes("safari")&&!ys.includes("chrom");Xx&&(ys.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ys));const Kx=ys.includes("webkit")&&!ys.includes("edge"),qx=ys.includes("macintosh"),gd=typeof devicePixelRatio<"u"?devicePixelRatio:1,pd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Zx=typeof Image<"u"&&Image.prototype.decode,b_=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}(),S_=new Array(6);function xi(){return[1,0,0,1,0,0]}function zg(i){return Mc(i,1,0,0,1,0,0)}function md(i,e){const t=i[0],n=i[1],s=i[2],r=i[3],o=i[4],a=i[5],l=e[0],u=e[1],h=e[2],f=e[3],m=e[4],y=e[5];return i[0]=t*l+s*u,i[1]=n*l+r*u,i[2]=t*h+s*f,i[3]=n*h+r*f,i[4]=t*m+s*y+o,i[5]=n*m+r*y+a,i}function Mc(i,e,t,n,s,r,o){return i[0]=e,i[1]=t,i[2]=n,i[3]=s,i[4]=r,i[5]=o,i}function Jx(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Ot(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function Dl(i,e,t){return md(i,Mc(S_,e,0,0,t,0,0))}function Qx(i,e,t){return Mc(i,e,0,0,t,0,0)}function e1(i,e,t){return md(i,Mc(S_,1,0,0,1,e,t))}function Zi(i,e,t,n,s,r,o,a){const l=Math.sin(r),u=Math.cos(r);return i[0]=n*u,i[1]=s*l,i[2]=-n*l,i[3]=s*u,i[4]=o*n*u-a*n*l+e,i[5]=o*s*l+a*s*u+t,i}function Dc(i,e){const t=t1(e);Ge(t!==0,32);const n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-s/t,i[2]=-r/t,i[3]=n/t,i[4]=(r*l-o*a)/t,i[5]=-(n*l-s*a)/t,i}function t1(i){return i[0]*i[3]-i[1]*i[2]}let Hg;function _d(i){const e="matrix("+i.join(", ")+")";if(pd)return e;const t=Hg||(Hg=document.createElement("div"));return t.style.transform=e,t.style.transform}const Vt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function zl(i){const e=si();for(let t=0,n=i.length;t<n;++t)Uo(e,i[t]);return e}function i1(i,e,t){const n=Math.min.apply(null,i),s=Math.min.apply(null,e),r=Math.max.apply(null,i),o=Math.max.apply(null,e);return Ji(n,s,r,o,t)}function qi(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function R_(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function hr(i,e,t){let n,s;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?s=i[1]-t:i[3]<t?s=t-i[3]:s=0,n*n+s*s}function Ia(i,e){return yd(i,e[0],e[1])}function Hi(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function yd(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function vh(i,e){const t=i[0],n=i[1],s=i[2],r=i[3],o=e[0],a=e[1];let l=Vt.UNKNOWN;return o<t?l=l|Vt.LEFT:o>s&&(l=l|Vt.RIGHT),a<n?l=l|Vt.BELOW:a>r&&(l=l|Vt.ABOVE),l===Vt.UNKNOWN&&(l=Vt.INTERSECTING),l}function si(){return[1/0,1/0,-1/0,-1/0]}function Ji(i,e,t,n,s){return s?(s[0]=i,s[1]=e,s[2]=t,s[3]=n,s):[i,e,t,n]}function La(i){return Ji(1/0,1/0,-1/0,-1/0,i)}function vd(i,e){const t=i[0],n=i[1];return Ji(t,n,t,n,e)}function Cd(i,e,t,n,s){const r=La(s);return I_(r,i,e,t,n)}function rr(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function A_(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function Uo(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function I_(i,e,t,n,s){for(;t<n;t+=s)n1(i,e[t],e[t+1]);return i}function n1(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function Ed(i,e){let t;return t=e(Fc(i)),t||(t=e(Nc(i)),t)||(t=e(kc(i)),t)||(t=e(bs(i)),t)?t:!1}function Ch(i){let e=0;return Gc(i)||(e=tt(i)*It(i)),e}function Fc(i){return[i[0],i[1]]}function Nc(i){return[i[2],i[1]]}function wi(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function s1(i,e){let t;return e==="bottom-left"?t=Fc(i):e==="bottom-right"?t=Nc(i):e==="top-left"?t=bs(i):e==="top-right"?t=kc(i):Ge(!1,13),t}function zr(i,e,t,n,s){const[r,o,a,l,u,h,f,m]=Eh(i,e,t,n);return Ji(Math.min(r,a,u,f),Math.min(o,l,h,m),Math.max(r,a,u,f),Math.max(o,l,h,m),s)}function Eh(i,e,t,n){const s=e*n[0]/2,r=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=s*o,u=s*a,h=r*o,f=r*a,m=i[0],y=i[1];return[m-l+f,y-u-h,m-l-f,y-u+h,m+l-f,y+u+h,m+l+f,y+u-h,m-l+f,y-u-h]}function It(i){return i[3]-i[1]}function On(i,e,t){const n=t||si();return St(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):La(n),n}function bs(i){return[i[0],i[3]]}function kc(i){return[i[2],i[3]]}function tt(i){return i[2]-i[0]}function St(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Gc(i){return i[2]<i[0]||i[3]<i[1]}function r1(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function o1(i,e,t){let n=!1;const s=vh(i,e),r=vh(i,t);if(s===Vt.INTERSECTING||r===Vt.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],u=i[3],h=e[0],f=e[1],m=t[0],y=t[1],v=(y-f)/(m-h);let E,b;r&Vt.ABOVE&&!(s&Vt.ABOVE)&&(E=m-(y-u)/v,n=E>=o&&E<=l),!n&&r&Vt.RIGHT&&!(s&Vt.RIGHT)&&(b=y-(m-l)*v,n=b>=a&&b<=u),!n&&r&Vt.BELOW&&!(s&Vt.BELOW)&&(E=m-(y-a)/v,n=E>=o&&E<=l),!n&&r&Vt.LEFT&&!(s&Vt.LEFT)&&(b=y-(m-o)*v,n=b>=a&&b<=u)}return n}function a1(i,e,t,n){let s=[];if(n>1){const a=i[2]-i[0],l=i[3]-i[1];for(let u=0;u<n;++u)s.push(i[0]+a*u/n,i[1],i[2],i[1]+l*u/n,i[2]-a*u/n,i[3],i[0],i[3]-l*u/n)}else s=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];e(s,s,2);const r=[],o=[];for(let a=0,l=s.length;a<l;a+=2)r.push(s[a]),o.push(s[a+1]);return i1(r,o,t)}function L_(i,e){const t=e.getExtent(),n=wi(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=tt(t),o=Math.floor((n[0]-t[0])/s)*s;i[0]-=o,i[2]-=o}return i}function l1(i,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[t[0],i[1],t[2],i[3]]];L_(i,e);const n=tt(t);if(tt(i)>n)return[[t[0],i[1],t[2],i[3]]];if(i[0]<t[0])return[[i[0]+n,i[1],t[2],i[3]],[t[0],i[1],i[2],i[3]]];if(i[2]>t[2])return[[i[0],i[1],t[2],i[3]],[t[0],i[1],i[2]-n,i[3]]]}return[i]}const la={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class c1{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||la[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const xd=c1,Oa=6378137,Dr=Math.PI*Oa,u1=[-Dr,-Dr,Dr,Dr],h1=[-180,-85,180,85],ul=Oa*Math.log(Math.tan(Math.PI/2));class yr extends xd{constructor(e){super({code:e,units:"m",extent:u1,global:!0,worldExtent:h1,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Oa)}})}}const Yg=[new yr("EPSG:3857"),new yr("EPSG:102100"),new yr("EPSG:102113"),new yr("EPSG:900913"),new yr("http://www.opengis.net/def/crs/EPSG/0/3857"),new yr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function d1(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t){e[s]=Dr*i[s]/180;let r=Oa*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));r>ul?r=ul:r<-ul&&(r=-ul),e[s+1]=r}return e}function f1(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t)e[s]=180*i[s]/Dr,e[s+1]=360*Math.atan(Math.exp(i[s+1]/Oa))/Math.PI-90;return e}const g1=6378137,Ug=[-180,-90,180,90],p1=Math.PI*g1/180;class $s extends xd{constructor(e,t){super({code:e,units:"degrees",extent:Ug,axisOrientation:t,global:!0,metersPerUnit:p1,worldExtent:Ug})}}const Xg=[new $s("CRS:84"),new $s("EPSG:4326","neu"),new $s("urn:ogc:def:crs:OGC:1.3:CRS84"),new $s("urn:ogc:def:crs:OGC:2:84"),new $s("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $s("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $s("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let xh={};function m1(i){return xh[i]||xh[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function _1(i,e){xh[i]=e}let Hr={};function Hl(i,e,t){const n=i.getCode(),s=e.getCode();n in Hr||(Hr[n]={}),Hr[n][s]=t}function y1(i,e){let t;return i in Hr&&e in Hr[i]&&(t=Hr[i][e]),t}function Mt(i,e,t){return Math.min(Math.max(i,e),t)}function v1(i,e,t,n,s,r){const o=s-t,a=r-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=s,n=r):l>0&&(t+=o*l,n+=a*l)}return er(i,e,t,n)}function er(i,e,t,n){const s=t-i,r=n-e;return s*s+r*r}function C1(i){const e=i.length;for(let n=0;n<e;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let u=n;u<e+1;u++)n==u?i[a][u]=0:i[a][u]+=l*i[n][u]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let s=n-1;s>=0;s--)i[s][e]-=i[s][n]*t[n]}return t}function Kg(i){return i*180/Math.PI}function Yr(i){return i*Math.PI/180}function gs(i,e){const t=i%e;return t*e<0?t+e:t}function Rn(i,e,t){return i+t*(e-i)}function jc(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function qg(i,e){return Math.round(jc(i,e))}function Fr(i,e){return Math.floor(jc(i,e))}function rs(i,e){return Math.ceil(jc(i,e))}function O_(i,e){const t=(""+i).split("."),n=(""+e).split(".");for(let s=0;s<Math.max(t.length,n.length);s++){const r=parseInt(t[s]||"0",10),o=parseInt(n[s]||"0",10);if(r>o)return 1;if(o>r)return-1}return 0}function P_(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function Yl(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function Td(i,e){const t=Math.cos(e),n=Math.sin(e),s=i[0]*t-i[1]*n,r=i[1]*t+i[0]*n;return i[0]=s,i[1]=r,i}function M_(i,e){return i[0]*=e,i[1]*=e,i}function wd(i,e){if(e.canWrapX()){const t=tt(e.getExtent()),n=E1(i,e,t);n&&(i[0]-=n*t)}return i}function E1(i,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||tt(n),s=Math.floor((i[0]-n[0])/t)),s}const D_=63710088e-1;function Zg(i,e,t){t=t||D_;const n=Yr(i[1]),s=Yr(e[1]),r=(s-n)/2,o=Yr(e[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function x1(i,e,t,n){n=n||D_;const s=Yr(i[1]),r=Yr(i[0]),o=e/n,a=Math.asin(Math.sin(s)*Math.cos(o)+Math.cos(s)*Math.sin(o)*Math.cos(t)),l=r+Math.atan2(Math.sin(t)*Math.sin(o)*Math.cos(s),Math.cos(o)-Math.sin(s)*Math.sin(a));return[Kg(l),Kg(a)]}const F_={info:1,warn:2,error:3,none:4};let T1=F_.info;function N_(...i){T1>F_.warn||console.warn(...i)}let Th=!0;function w1(i){Th=!(i===void 0?!0:i)}function bd(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function k_(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function b1(i){_1(i.getCode(),i),Hl(i,i,bd)}function S1(i){i.forEach(b1)}function ct(i){return typeof i=="string"?m1(i):i||null}function Jg(i,e,t,n){i=ct(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(e,t),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/la[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=e;else{const a=Rd(i,ct("EPSG:4326"));if(a===k_&&o!=="degrees")s=e*i.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const h=Zg(u.slice(0,2),u.slice(2,4)),f=Zg(u.slice(4,6),u.slice(6,8));s=(h+f)/2}const l=n?la[n]:i.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Qg(i){S1(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Hl(e,t,bd)})})}function R1(i,e,t,n){i.forEach(function(s){e.forEach(function(r){Hl(s,r,t),Hl(r,s,n)})})}function Sd(i,e){if(i){if(typeof i=="string")return ct(i)}else return ct(e);return i}function In(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Rd(i,e)===bd)&&t}function Rd(i,e){const t=i.getCode(),n=e.getCode();let s=y1(t,n);return s||(s=k_),s}function vs(i,e){const t=ct(i),n=ct(e);return Rd(t,n)}function $c(i,e,t){return vs(e,t)(i,void 0,i.length)}function G_(i,e,t,n){const s=vs(e,t);return a1(i,s,void 0,n)}function wh(i,e){return i}function Tn(i,e){return Th&&!Yl(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Th=!1,N_("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Ad(i,e){return i}function un(i,e){return i}function A1(i,e){return i}function I1(){Qg(Yg),Qg(Xg),R1(Xg,Yg,d1,f1)}I1();function ps(i,e,t,n,s,r){r=r||[];let o=0;for(let a=e;a<t;a+=n){const l=i[a],u=i[a+1];r[o++]=s[0]*l+s[2]*u+s[4],r[o++]=s[1]*l+s[3]*u+s[5]}return r&&r.length!=o&&(r.length=o),r}function Id(i,e,t,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),u=r[0],h=r[1];let f=0;for(let m=e;m<t;m+=n){const y=i[m]-u,v=i[m+1]-h;o[f++]=u+y*a-v*l,o[f++]=h+y*l+v*a;for(let E=m+2;E<m+n;++E)o[f++]=i[E]}return o&&o.length!=f&&(o.length=f),o}function L1(i,e,t,n,s,r,o,a){a=a||[];const l=o[0],u=o[1];let h=0;for(let f=e;f<t;f+=n){const m=i[f]-l,y=i[f+1]-u;a[h++]=l+s*m,a[h++]=u+r*y;for(let v=f+2;v<f+n;++v)a[h++]=i[v]}return a&&a.length!=h&&(a.length=h),a}function j_(i,e,t,n,s,r,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let u=l+2;u<l+n;++u)o[a++]=i[u]}return o&&o.length!=a&&(o.length=a),o}const ep=xi();class O1 extends Di{constructor(){super(),this.extent_=si(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vx(function(e,t,n){if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Le()}closestPointXY(e,t,n,s){return Le()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Le()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&La(t),this.extentRevision_=this.getRevision()}return r1(this.extent_,e)}rotate(e,t){Le()}scale(e,t,n){Le()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Le()}getType(){return Le()}applyTransform(e){Le()}intersectsExtent(e){return Le()}translate(e,t){Le()}transform(e,t){const n=ct(e),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),u=n.getWorldExtent(),h=It(u)/It(l);return Zi(ep,u[0],u[3],h,-h,0,0,0),ps(r,0,r.length,a,ep,o),vs(n,t)(r,o,a)}:vs(n,t);return this.applyTransform(s),this}}const Ul=O1;class P1 extends Ul{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Cd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Le()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=tp(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Le()}setLayout(e,t,n){let s;if(e)s=tp(e);else{for(let r=0;r<n;++r){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=M1(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Id(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=wi(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();L1(s,0,s.length,r,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();j_(n,0,n.length,s,e,t,n),this.changed()}}}function M1(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function tp(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function D1(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return ps(n,0,n.length,s,e,t)}const jn=P1;function ip(i,e,t,n,s,r,o){const a=i[e],l=i[e+1],u=i[t]-a,h=i[t+1]-l;let f;if(u===0&&h===0)f=e;else{const m=((s-a)*u+(r-l)*h)/(u*u+h*h);if(m>1)f=t;else if(m>0){for(let y=0;y<n;++y)o[y]=Rn(i[e+y],i[t+y],m);o.length=n;return}else f=e}for(let m=0;m<n;++m)o[m]=i[f+m];o.length=n}function Ld(i,e,t,n,s){let r=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],u=er(r,o,a,l);u>s&&(s=u),r=a,o=l}return s}function Od(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=Ld(i,e,a,n,s),e=a}return s}function F1(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=Od(i,e,a,n,s),e=a[a.length-1]}return s}function Pd(i,e,t,n,s,r,o,a,l,u,h){if(e==t)return u;let f,m;if(s===0){if(m=er(o,a,i[e],i[e+1]),m<u){for(f=0;f<n;++f)l[f]=i[e+f];return l.length=n,m}return u}h=h||[NaN,NaN];let y=e+n;for(;y<t;)if(ip(i,y-n,y,n,o,a,h),m=er(o,a,h[0],h[1]),m<u){for(u=m,f=0;f<n;++f)l[f]=h[f];l.length=n,y+=n}else y+=n*Math.max((Math.sqrt(m)-Math.sqrt(u))/s|0,1);if(r&&(ip(i,t-n,e,n,o,a,h),m=er(o,a,h[0],h[1]),m<u)){for(u=m,f=0;f<n;++f)l[f]=h[f];l.length=n}return u}function Md(i,e,t,n,s,r,o,a,l,u,h){h=h||[NaN,NaN];for(let f=0,m=t.length;f<m;++f){const y=t[f];u=Pd(i,e,y,n,s,r,o,a,l,u,h),e=y}return u}function N1(i,e,t,n,s,r,o,a,l,u,h){h=h||[NaN,NaN];for(let f=0,m=t.length;f<m;++f){const y=t[f];u=Md(i,e,y,n,s,r,o,a,l,u,h),e=y[y.length-1]}return u}function $_(i,e,t,n){for(let s=0,r=t.length;s<r;++s)i[e++]=t[s];return e}function Pa(i,e,t,n){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function Dd(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=Pa(i,e,t[o],n);s[r++]=l,e=l}return s.length=r,s}function k1(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=Dd(i,e,t[o],n,s[r]);l.length===0&&(l[0]=e),s[r++]=l,e=l[l.length-1]}return s.length=r,s}function Fd(i,e,t,n,s,r,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)r[o++]=i[e],r[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,t-n];let h=0;for(;u.length>0;){const f=u.pop(),m=u.pop();let y=0;const v=i[m],E=i[m+1],b=i[f],S=i[f+1];for(let A=m+n;A<f;A+=n){const I=i[A],R=i[A+1],M=v1(I,R,v,E,b,S);M>y&&(h=A,y=M)}y>s&&(l[(h-e)/n]=1,m+n<h&&u.push(m,h),h+n<f&&u.push(h,f))}for(let f=0;f<a;++f)l[f]&&(r[o++]=i[e+f*n],r[o++]=i[e+f*n+1]);return o}function G1(i,e,t,n,s,r,o,a){for(let l=0,u=t.length;l<u;++l){const h=t[l];o=Fd(i,e,h,n,s,r,o),a.push(o),e=h}return o}function Bs(i,e){return e*Math.round(i/e)}function j1(i,e,t,n,s,r,o){if(e==t)return o;let a=Bs(i[e],s),l=Bs(i[e+1],s);e+=n,r[o++]=a,r[o++]=l;let u,h;do if(u=Bs(i[e],s),h=Bs(i[e+1],s),e+=n,e==t)return r[o++]=u,r[o++]=h,o;while(u==a&&h==l);for(;e<t;){const f=Bs(i[e],s),m=Bs(i[e+1],s);if(e+=n,f==u&&m==h)continue;const y=u-a,v=h-l,E=f-a,b=m-l;if(y*b==v*E&&(y<0&&E<y||y==E||y>0&&E>y)&&(v<0&&b<v||v==b||v>0&&b>v)){u=f,h=m;continue}r[o++]=u,r[o++]=h,a=u,l=h,u=f,h=m}return r[o++]=u,r[o++]=h,o}function V_(i,e,t,n,s,r,o,a){for(let l=0,u=t.length;l<u;++l){const h=t[l];o=j1(i,e,h,n,s,r,o),a.push(o),e=h}return o}function $1(i,e,t,n,s,r,o,a){for(let l=0,u=t.length;l<u;++l){const h=t[l],f=[];o=V_(i,e,h,n,s,r,o,f),a.push(f),e=h[h.length-1]}return o}function W_(i,e,t,n,s){let r;for(e+=n;e<t;e+=n)if(r=s(i.slice(e-n,e),i.slice(e,e+n)),r)return r;return!1}function os(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=e;o<t;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function ca(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=os(i,e,l,n,s[r]),e=l}return s.length=r,s}function bh(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=l.length===1&&l[0]===e?[]:ca(i,e,l,n,s[r]),e=l[l.length-1]}return s.length=r,s}function Xl(i,e,t,n,s,r,o){let a,l;const u=(t-e)/n;if(u===1)a=e;else if(u===2)a=e,l=s;else if(u!==0){let h=i[e],f=i[e+1],m=0;const y=[0];for(let b=e+n;b<t;b+=n){const S=i[b],A=i[b+1];m+=Math.sqrt((S-h)*(S-h)+(A-f)*(A-f)),y.push(m),h=S,f=A}const v=s*m,E=Gx(y,v);E<0?(l=(v-y[-E-2])/(y[-E-1]-y[-E-2]),a=e+(-E-2)*n):a=e+E*n}o=o>1?o:2,r=r||new Array(o);for(let h=0;h<o;++h)r[h]=a===void 0?NaN:l===void 0?i[a+h]:Rn(i[a+h],i[a+n+h],l);return r}function Sh(i,e,t,n,s,r){if(t==e)return null;let o;if(s<i[e+n-1])return r?(o=i.slice(e,e+n),o[n-1]=s,o):null;if(i[t-1]<s)return r?(o=i.slice(t-n,t),o[n-1]=s,o):null;if(s==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const m=a+l>>1;s<i[(m+1)*n-1]?l=m:a=m+1}const u=i[a*n-1];if(s==u)return i.slice((a-1)*n,(a-1)*n+n);const h=i[(a+1)*n-1],f=(s-u)/(h-u);o=[];for(let m=0;m<n-1;++m)o.push(Rn(i[(a-1)*n+m],i[a*n+m],f));return o.push(s),o}function V1(i,e,t,n,s,r,o){if(o)return Sh(i,e,t[t.length-1],n,s,r);let a;if(s<i[n-1])return r?(a=i.slice(0,n),a[n-1]=s,a):null;if(i[i.length-1]<s)return r?(a=i.slice(i.length-n),a[n-1]=s,a):null;for(let l=0,u=t.length;l<u;++l){const h=t[l];if(e!=h){if(s<i[e+n-1])return null;if(s<=i[h-1])return Sh(i,e,h,n,s,!1);e=h}}return null}function W1(i,e,t,n,s){return!Ed(s,function(o){return!Us(i,e,t,n,o[0],o[1])})}function Us(i,e,t,n,s,r){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const u=i[e],h=i[e+1];l<=r?h>r&&(u-a)*(r-l)-(s-a)*(h-l)>0&&o++:h<=r&&(u-a)*(r-l)-(s-a)*(h-l)<0&&o--,a=u,l=h}return o!==0}function Nd(i,e,t,n,s,r){if(t.length===0||!Us(i,e,t[0],n,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(Us(i,t[o-1],t[o],n,s,r))return!1;return!0}function B1(i,e,t,n,s,r){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(Nd(i,e,l,n,s,r))return!0;e=l[l.length-1]}return!1}function Vc(i,e,t,n,s){const r=I_(si(),i,e,t,n);return St(s,r)?Hi(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:W_(i,e,t,n,function(o,a){return o1(s,o,a)}):!1}function z1(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){if(Vc(i,e,t[r],n,s))return!0;e=t[r]}return!1}function B_(i,e,t,n,s){return!!(Vc(i,e,t,n,s)||Us(i,e,t,n,s[0],s[1])||Us(i,e,t,n,s[0],s[3])||Us(i,e,t,n,s[2],s[1])||Us(i,e,t,n,s[2],s[3]))}function z_(i,e,t,n,s){if(!B_(i,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let r=1,o=t.length;r<o;++r)if(W1(i,t[r-1],t[r],n,s)&&!Vc(i,t[r-1],t[r],n,s))return!1;return!0}function H1(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(z_(i,e,a,n,s))return!0;e=a[a.length-1]}return!1}function H_(i,e,t,n){let s=i[e],r=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],u=i[a+1];o+=Math.sqrt((l-s)*(l-s)+(u-r)*(u-r)),s=l,r=u}return o}class Kl extends jn{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?Ki(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new Kl(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<hr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ld(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,s))}forEachSegment(e){return W_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Sh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return os(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Xl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return H_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Kl(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Vc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pa(this.flatCoordinates,0,e,this.stride),this.changed()}}const ua=Kl;class kd extends jn{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new kd(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=er(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return vd(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return yd(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$_(this.flatCoordinates,0,e,this.stride),this.changed()}}const Oi=kd;class Gd{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Gd({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const to=Gd,ze={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function np(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]+2*e,t[1]=i[1]+2*e,t}function sp(i){return i[0]>0&&i[1]>0}function jd(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Wt(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class $d{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Wt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new $d({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Le()}getImage(e){return Le()}getHitDetectionImage(){return Le()}getPixelRatio(e){return 1}getImageState(){return Le()}getImageSize(){return Le()}getOrigin(){return Le()}getSize(){return Le()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Wt(e)}listenImageChange(e){Le()}load(){Le()}unlistenImageChange(e){Le()}}const Y_=$d,Y1=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,U1=/^([a-z]*)$|^hsla?\(.*\)$/i;function U_(i){return typeof i=="string"?i:X_(i)}function X1(i){const e=document.createElement("div");if(e.style.color=i,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const K1=function(){const e={};let t=0;return function(n){let s;if(e.hasOwnProperty(n))s=e[n];else{if(t>=1024){let r=0;for(const o in e)r++&3||(delete e[o],--t)}s=q1(n),e[n]=s,++t}return s}}();function ql(i){return Array.isArray(i)?i:K1(i)}function q1(i){let e,t,n,s,r;if(U1.exec(i)&&(i=X1(i)),Y1.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(i.substr(1+0*a,a),16),t=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),l?s=parseInt(i.substr(1+3*a,a),16):s=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,l&&(s=(s<<4)+s)),r=[e,t,n,s/255]}else i.startsWith("rgba(")?(r=i.slice(5,-1).split(",").map(Number),rp(r)):i.startsWith("rgb(")?(r=i.slice(4,-1).split(",").map(Number),r.push(1),rp(r)):Ge(!1,14);return r}function rp(i){return i[0]=Mt(i[0]+.5|0,0,255),i[1]=Mt(i[1]+.5|0,0,255),i[2]=Mt(i[2]+.5|0,0,255),i[3]=Mt(i[3],0,1),i}function X_(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+e+","+t+","+n+","+s+")"}function hn(i){return Array.isArray(i)?X_(i):i}function Ht(i,e,t,n){let s;return t&&t.length?s=t.shift():pd?s=new OffscreenCanvas(i||300,e||300):s=document.createElement("canvas"),i&&(s.width=i),e&&(s.height=e),s.getContext("2d",n)}function Ma(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function Z1(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function J1(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function op(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function Zl(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function K_(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function Q1(i,e){const t=i.childNodes;for(let n=0;;++n){const s=t[n],r=e[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}const hl="ol-hidden",eT="ol-selectable",Wc="ol-unselectable",Vd="ol-control",ap="ol-collapsed",tT=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),lp=["style","variant","weight","size","lineHeight","family"],q_=function(i){const e=i.match(tT);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=lp.length;n<s;++n){const r=e[n+1];r!==void 0&&(t[lp[n]]=r)}return t.families=t.family.split(/,\s?/),t},Z_="10px sans-serif",Pn="#000",Jl="round",ha=[],da=0,io="round",fa=10,ga="#000",pa="center",Ql="middle",Xs=[0,0,0,0],ma=1,wn=new Di;let Rr=null,Rh;const Ah={},iT=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(u,h,f){let m=!0;for(let y=0;y<n;++y){const v=t[y];if(o=ec(u+" "+h+" "+e+v,s),f!=v){const E=ec(u+" "+h+" "+e+f+","+v,s);m=m&&E!=o}}return!!m}function l(){let u=!0;const h=wn.getKeys();for(let f=0,m=h.length;f<m;++f){const y=h[f];wn.get(y)<100&&(a.apply(this,y.split(`
`))?(Ra(Ah),Rr=null,Rh=void 0,wn.set(y,100)):(wn.set(y,wn.get(y)+1,!0),u=!1))}u&&(clearInterval(r),r=void 0)}return function(u){const h=q_(u);if(!h)return;const f=h.families;for(let m=0,y=f.length;m<y;++m){const v=f[m],E=h.style+`
`+h.weight+`
`+v;wn.get(E)===void 0&&(wn.set(E,100,!0),a(h.style,h.weight,v)||(wn.set(E,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),nT=function(){let i;return function(e){let t=Ah[e];if(t==null){if(pd){const n=q_(e),s=J_(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);Ah[e]=t}return t}}();function J_(i,e){return Rr||(Rr=Ht(1,1)),i!=Rh&&(Rr.font=i,Rh=Rr.font),Rr.measureText(e)}function ec(i,e){return J_(i,e).width}function cp(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,r)=>Math.max(s,ec(i,r)),0);return t[e]=n,n}function sT(i,e){const t=[],n=[],s=[];let r=0,o=0,a=0,l=0;for(let u=0,h=e.length;u<=h;u+=2){const f=e[u];if(f===`
`||u===h){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const m=e[u+1]||i.font,y=ec(m,f);t.push(y),o+=y;const v=nT(m);n.push(v),l=Math.max(l,v)}return{width:r,height:a,widths:t,heights:n,lineWidths:s}}function rT(i,e,t,n,s,r,o,a,l,u,h){i.save(),t!==1&&(i.globalAlpha*=t),e&&i.setTransform.apply(i,e),n.contextInstructions?(i.translate(l,u),i.scale(h[0],h[1]),oT(n,i)):h[0]<0||h[1]<0?(i.translate(l,u),i.scale(h[0],h[1]),i.drawImage(n,s,r,o,a,0,0,o,a)):i.drawImage(n,s,r,o,a,l,u,o*h[0],a*h[1]),i.restore()}function oT(i,e){const t=i.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class Wd extends Y_{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new Wd({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const n=this.renderOptions_,s=Ht(n.size*e,n.size*e);this.draw_(n,s,e),t=s.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ze.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const p=s;s=r,r=p}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),u=Math.sqrt(r*r-l*l),h=s-u,f=Math.sqrt(l*l+h*h),m=f/l;if(e==="miter"&&m<=n)return m*t;const y=t/2/m,v=t/2*(h/f),b=Math.sqrt((s+y)*(s+y)+v*v)-s;if(this.radius2_===void 0||e==="bevel")return b*2;const S=s*Math.sin(a),A=Math.sqrt(s*s-S*S),I=r-A,M=Math.sqrt(S*S+I*I)/S;if(M<=n){const p=M*t/2-r-s;return 2*Math.max(b,p)}return b*2}createRenderOptions(){let e=io,t=0,n=null,s=0,r,o=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=ga),r=hn(r),o=this.stroke_.getWidth(),o===void 0&&(o=ma),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=io),t=this.stroke_.getMiterLimit(),t===void 0&&(t=fa));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*l+a);return{strokeStyle:r,strokeWidth:o,size:u,lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Pn),t.fillStyle=hn(s),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),n=0;if(typeof t=="string"&&(t=ql(t)),t===null?n=1:Array.isArray(t)&&(n=t.length===4?t[3]:1),n===0){const s=Ht(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=r+a*o,u=a%2===0?n:s;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Pn,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const Q_=Wd;class Bd extends Q_{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Bd({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const ey=Bd;class Bc{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=up,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Bc({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=up,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function aT(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(Ge(typeof i.getZIndex=="function",41),t=[i]),e=function(){return t}}return e}let Mu=null;function lT(i,e){if(!Mu){const t=new fs({color:"rgba(255,255,255,0.4)"}),n=new to({color:"#3399CC",width:1.25});Mu=[new Bc({image:new ey({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Mu}function up(i){return i.getGeometry()}const Yi=Bc,cT="#333";class zd{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Wt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new fs({color:cT}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new zd({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Wt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const uT=zd,lt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class hT extends Di{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[lt.OPACITY]=e.opacity!==void 0?e.opacity:1,Ge(typeof t[lt.OPACITY]=="number",64),t[lt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[lt.Z_INDEX]=e.zIndex,t[lt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[lt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[lt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[lt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Mt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Le()}getLayerStatesArray(e){return Le()}getExtent(){return this.get(lt.EXTENT)}getMaxResolution(){return this.get(lt.MAX_RESOLUTION)}getMinResolution(){return this.get(lt.MIN_RESOLUTION)}getMinZoom(){return this.get(lt.MIN_ZOOM)}getMaxZoom(){return this.get(lt.MAX_ZOOM)}getOpacity(){return this.get(lt.OPACITY)}getSourceState(){return Le()}getVisible(){return this.get(lt.VISIBLE)}getZIndex(){return this.get(lt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(lt.EXTENT,e)}setMaxResolution(e){this.set(lt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(lt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(lt.MAX_ZOOM,e)}setMinZoom(e){this.set(lt.MIN_ZOOM,e)}setOpacity(e){Ge(typeof e=="number",64),this.set(lt.OPACITY,e)}setVisible(e){this.set(lt.VISIBLE,e)}setZIndex(e){this.set(lt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const ty=hT;class dT extends ty{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(lt.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(lt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(gt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=qe(e,Pe.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}render(e,t){const n=this.getRenderer();if(n.prepareFrame(e))return this.rendered=!0,n.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(lt.MAP,e)}getMapInternal(){return this.get(lt.MAP)}setMap(e){this.mapPrecomposeKey_&&(gt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(gt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=qe(e,ds.PRECOMPOSE,function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);Ge(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=qe(this,Pe.CHANGE,e.render,e),this.changed())}setSource(e){this.set(lt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Hd(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}const po=dT;function fT(i,e,t,n,s){iy(i,e,t||0,n||i.length-1,s||gT)}function iy(i,e,t,n,s){for(;n>t;){if(n-t>600){var r=n-t+1,o=e-t+1,a=Math.log(r),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),h=Math.max(t,Math.floor(e-o*l/r+u)),f=Math.min(n,Math.floor(e+(r-o)*l/r+u));iy(i,e,h,f,s)}var m=i[e],y=t,v=n;for(Mo(i,t,e),s(i[n],m)>0&&Mo(i,t,n);y<v;){for(Mo(i,y,v),y++,v--;s(i[y],m)<0;)y++;for(;s(i[v],m)>0;)v--}s(i[t],m)===0?Mo(i,t,v):(v++,Mo(i,v,n)),v<=e&&(t=v+1),e<=v&&(n=v-1)}}function Mo(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}function gT(i,e){return i<e?-1:i>e?1:0}let ny=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!fl(e,t))return n;const s=this.toBBox,r=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;fl(e,l)&&(t.leaf?n.push(a):Fu(e,l)?this._all(a,n):r.push(a))}t=r.pop()}return n}collides(e){let t=this.data;if(!fl(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const r=t.children[s],o=t.leaf?this.toBBox(r):r;if(fl(e,o)){if(t.leaf||Fu(e,o))return!0;n.push(r)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Ar([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),r=[],o=[];let a,l,u;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],a=o.pop(),u=!0),n.leaf){const h=pT(e,n.children,t);if(h!==-1)return n.children.splice(h,1),r.push(n),this._condense(r),this}!u&&!n.leaf&&Fu(n,s)?(r.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],u=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const r=n-t+1;let o=this._maxEntries,a;if(r<=o)return a=Ar(e.slice(t,n+1)),vr(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=Ar([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),u=l*Math.ceil(Math.sqrt(o));hp(e,t,n,u,this.compareMinX);for(let h=t;h<=n;h+=u){const f=Math.min(h+u-1,n);hp(e,h,f,l,this.compareMinY);for(let m=h;m<=f;m+=l){const y=Math.min(m+l-1,f);a.children.push(this._build(e,m,y,s-1))}}return vr(a,this.toBBox),a}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let r=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const u=t.children[l],h=Du(u),f=yT(e,u)-h;f<o?(o=f,r=h<r?h:r,a=u):f===o&&h<r&&(r=h,a=u)}t=a||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,t,r);for(o.children.push(e),Vo(o,s);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(s,r,t)}_split(e,t){const n=e[t],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),a=Ar(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,vr(n,this.toBBox),vr(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=Ar([e,t]),this.data.height=e.height+1,this.data.leaf=!1,vr(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,r=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=$o(e,0,a,this.toBBox),u=$o(e,a,n,this.toBBox),h=vT(l,u),f=Du(l)+Du(u);h<r?(r=h,s=a,o=f<o?f:o):h===r&&f<o&&(o=f,s=a)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:mT,r=e.leaf?this.compareMinY:_T,o=this._allDistMargin(e,t,n,s),a=this._allDistMargin(e,t,n,r);o<a&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const r=this.toBBox,o=$o(e,0,t,r),a=$o(e,n-t,n,r);let l=dl(o)+dl(a);for(let u=t;u<n-t;u++){const h=e.children[u];Vo(o,e.leaf?r(h):h),l+=dl(o)}for(let u=n-t-1;u>=t;u--){const h=e.children[u];Vo(a,e.leaf?r(h):h),l+=dl(a)}return l}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)Vo(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():vr(e[t],this.toBBox)}};function pT(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function vr(i,e){$o(i,0,i.children.length,e,i)}function $o(i,e,t,n,s){s||(s=Ar(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<t;r++){const o=i.children[r];Vo(s,i.leaf?n(o):o)}return s}function Vo(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function mT(i,e){return i.minX-e.minX}function _T(i,e){return i.minY-e.minY}function Du(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function dl(i){return i.maxX-i.minX+(i.maxY-i.minY)}function yT(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function vT(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),s=Math.min(i.maxX,e.maxX),r=Math.min(i.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,r-n)}function Fu(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function fl(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function Ar(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hp(i,e,t,n,s){const r=[e,t];for(;r.length;){if(t=r.pop(),e=r.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;fT(i,o,e,t,s),r.push(e,o,o,t)}}class CT{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,n){const s=dp(e,t,n);return s in this.cache_?this.cache_[s]:null}set(e,t,n,s){const r=dp(e,t,n);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function dp(i,e,t){const n=t?U_(t):"null";return e+":"+i+":"+n}const tc=new CT;class ET extends Aa{constructor(e,t,n,s){super(),this.extent=e,this.pixelRatio_=n,this.resolution=t,this.state=s}changed(){this.dispatchEvent(Pe.CHANGE)}getExtent(){return this.extent}getImage(){return Le()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){Le()}}const sy=ET;class ry extends sy{constructor(e,t,n,s,r,o){super(e,t,n,ze.IDLE),this.src_=s,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.state=ze.IDLE,this.imageLoadFunction_=o}getImage(){return this.image_}handleImageError_(){this.state=ze.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){this.resolution===void 0&&(this.resolution=It(this.extent)/this.image_.height),this.state=ze.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==ze.IDLE||this.state==ze.ERROR)&&(this.state=ze.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Yd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(e){this.image_=e,this.resolution=It(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Yd(i,e,t){const n=i;let s=!0,r=!1,o=!1;const a=[Bl(n,Pe.LOAD,function(){o=!0,r||e()})];return n.src&&Zx?(r=!0,n.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():t())})):a.push(Bl(n,Pe.ERROR,t)),function(){s=!1,a.forEach(gt)}}let Do=null;class xT extends Aa{constructor(e,t,n,s,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ze.LOADED){Do||(Do=Ht(1,1,void 0,{willReadFrequently:!0})),Do.drawImage(this.image_,0,0);try{Do.getImageData(0,0,1,1),this.tainted_=!1}catch{Do=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Pe.CHANGE)}handleImageError_(){this.imageState_=ze.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ze.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=Ht(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ze.IDLE){this.image_||this.initializeImage_(),this.imageState_=ze.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Yd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ze.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const s=n.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=U_(this.color_),s.fillRect(0,0,n.width/e,n.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function TT(i,e,t,n,s,r){let o=tc.get(e,n,r);return o||(o=new xT(i,e,t,n,s,r),tc.set(e,n,r,o)),o}class Ud extends Y_{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Ge(!(a!==void 0&&o),4),Ge(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||Ve(o)),Ge(a!==void 0&&a.length>0,6),Ge(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const l=e.src!==void 0?ze.IDLE:ze.LOADED;if(this.color_=e.color!==void 0?ql(e.color):null,this.iconImage_=TT(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.width_=e.width,this.height_=e.height,this.width_!==void 0||this.height_!==void 0){const u=this.getImage(1),h=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};u.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):u.addEventListener("load",h)}}clone(){const e=this.getScale();return new Ud({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,t){const n=this.getImage(1);e!==void 0&&t!==void 0?super.setScale([e/n.width,t/n.height]):e!==void 0?super.setScale([e/n.width,e/n.width]):t!==void 0?super.setScale([t/n.height,t/n.height]):super.setScale([1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const t=this.getImage(1);if(t){const n=Array.isArray(e)?e[0]:e;n!==void 0&&(this.width_=n*t.width);const s=Array.isArray(e)?e[1]:e;s!==void 0&&(this.height_=s*t.height)}}listenImageChange(e){this.iconImage_.addEventListener(Pe.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Pe.CHANGE,e)}}const _a=Ud;function fp(i){return new Yi({fill:ya(i,""),stroke:va(i,""),text:wT(i),image:bT(i)})}function ya(i,e){const t=i[e+"fill-color"];if(t)return new fs({color:t})}function va(i,e){const t=i[e+"stroke-width"],n=i[e+"stroke-color"];if(!(!t&&!n))return new to({width:t,color:n,lineCap:i[e+"stroke-line-cap"],lineJoin:i[e+"stroke-line-join"],lineDash:i[e+"stroke-line-dash"],lineDashOffset:i[e+"stroke-line-dash-offset"],miterLimit:i[e+"stroke-miter-limit"]})}function wT(i){const e=i["text-value"];return e?new uT({text:e,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:ya(i,"text-"),backgroundFill:ya(i,"text-background-"),stroke:va(i,"text-"),backgroundStroke:va(i,"text-background-")}):void 0}function bT(i){const e=i["icon-src"],t=i["icon-img"];if(e||t)return new _a({src:e,img:t,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const n=i["shape-points"];if(n){const r="shape-";return new Q_({points:n,fill:ya(i,r),stroke:va(i,r),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const s=i["circle-radius"];if(s){const r="circle-";return new ey({radius:s,fill:ya(i,r),stroke:va(i,r),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const gp={RENDER_ORDER:"renderOrder"};class ST extends po{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(gp.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new ny(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(gp.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=lT;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof Yi)t=e;else if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r){const o=e[r];o instanceof Yi?s[r]=o:s[r]=fp(o)}t=s}else t=fp(e);this.style_=t,this.styleFunction_=e===null?void 0:aT(this.style_),this.changed()}}const oy=ST,Da={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},gl=[Da.FILL],as=[Da.STROKE],Ks=[Da.BEGIN_PATH],pp=[Da.CLOSE_PATH],Oe=Da;class RT{drawCustom(e,t,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const ay=RT;class AT extends ay{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=t)s[0]=e[a],s[1]=e[a+1],Ia(n,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,n,s,r,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(t+=s);let h=e[t],f=e[t+1];const m=this.tmpCoordinate_;let y=!0,v,E,b;for(v=t+s;v<n;v+=s)m[0]=e[v],m[1]=e[v+1],b=vh(u,m),b!==E?(y&&(a[l++]=h,a[l++]=f,y=!1),a[l++]=m[0],a[l++]=m[1]):b===Vt.INTERSECTING?(a[l++]=m[0],a[l++]=m[1],y=!1):y=!0,h=m[0],f=m[1],E=b;return(r&&y||v===t+s)&&(a[l++]=h,a[l++]=f),l}drawCustomCoordinates_(e,t,n,s,r){for(let o=0,a=n.length;o<a;++o){const l=n[o],u=this.appendFlatLineCoordinates(e,t,l,s,!1,!1);r.push(u),t=l}return t}drawCustom(e,t,n,s){this.beginGeometry(e,t);const r=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,u,h,f,m;switch(r){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),f=[];const y=e.getEndss();m=0;for(let v=0,E=y.length;v<E;++v){const b=[];m=this.drawCustomCoordinates_(l,m,y[v],o,b),f.push(b)}this.instructions.push([Oe.CUSTOM,a,f,e,n,bh]),this.hitDetectionInstructions.push([Oe.CUSTOM,a,f,e,s||n,bh]);break;case"Polygon":case"MultiLineString":h=[],l=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),m=this.drawCustomCoordinates_(l,0,e.getEnds(),o,h),this.instructions.push([Oe.CUSTOM,a,h,e,n,ca]),this.hitDetectionInstructions.push([Oe.CUSTOM,a,h,e,s||n,ca]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Oe.CUSTOM,a,u,e,n,os]),this.hitDetectionInstructions.push([Oe.CUSTOM,a,u,e,s||n,os]);break;case"MultiPoint":l=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,o),u>a&&(this.instructions.push([Oe.CUSTOM,a,u,e,n,os]),this.hitDetectionInstructions.push([Oe.CUSTOM,a,u,e,s||n,os]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([Oe.CUSTOM,a,u,e,n]),this.hitDetectionInstructions.push([Oe.CUSTOM,a,u,e,s||n]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Oe.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Oe.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,r,o=-1;for(t=0;t<n;++t)s=e[t],r=s[0],r==Oe.END_GEOMETRY?o=t:r==Oe.BEGIN_GEOMETRY&&(s[2]=t,jx(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillStyle=hn(s||Pn)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=hn(s||ga);const r=t.getLineCap();n.lineCap=r!==void 0?r:Jl;const o=t.getLineDash();n.lineDash=o?o.slice():ha;const a=t.getLineDashOffset();n.lineDashOffset=a||da;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:io;const u=t.getWidth();n.lineWidth=u!==void 0?u:ma;const h=t.getMiterLimit();n.miterLimit=h!==void 0?h:fa,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[Oe.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(!0),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Oe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||r!=e.currentLineDash&&!ws(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Oe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=R_(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;qi(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Fa=AT;class IT extends Fa{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([Oe.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Oe.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([Oe.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Oe.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const LT=IT;class OT extends Fa{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),a=[Oe.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,ha,da],Ks);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(as),this.endGeometry(t)}drawMultiLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Ks);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let u=0;for(let h=0,f=o.length;h<f;++h)u=this.drawFlatCoordinates_(a,u,o[h],l);this.hitDetectionInstructions.push(as),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(as),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(as),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ks)}}const PT=OT;class MT extends Fa{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=n.length;this.instructions.push(Ks),this.hitDetectionInstructions.push(Ks);for(let u=0;u<l;++u){const h=n[u],f=this.coordinates.length,m=this.appendFlatLineCoordinates(e,t,h,s,!0,!a),y=[Oe.MOVE_TO_LINE_TO,f,m];this.instructions.push(y),this.hitDetectionInstructions.push(y),a&&(this.instructions.push(pp),this.hitDetectionInstructions.push(pp)),t=h}return o&&(this.instructions.push(gl),this.hitDetectionInstructions.push(gl)),a&&(this.instructions.push(as),this.hitDetectionInstructions.push(as)),t}drawCircle(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_FILL_STYLE,Pn]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const u=[Oe.CIRCLE,l];this.instructions.push(Ks,u),this.hitDetectionInstructions.push(Ks,u),n.fillStyle!==void 0&&(this.instructions.push(gl),this.hitDetectionInstructions.push(gl)),n.strokeStyle!==void 0&&(this.instructions.push(as),this.hitDetectionInstructions.push(as)),this.endGeometry(t)}drawPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_FILL_STYLE,Pn]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_FILL_STYLE,Pn]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Oe.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let u=0;for(let h=0,f=o.length;h<f;++h)u=this.drawFlatCoordinatess_(a,u,o[h],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=Bs(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const mp=MT;function DT(i,e,t,n,s){let r=t,o=t,a=0,l=0,u=t,h,f,m,y,v,E,b,S,A,I;for(f=t;f<n;f+=s){const R=e[f],M=e[f+1];v!==void 0&&(A=R-v,I=M-E,y=Math.sqrt(A*A+I*I),b!==void 0&&(l+=m,h=Math.acos((b*A+S*I)/(m*y)),h>i&&(l>a&&(a=l,r=u,o=f),l=0,u=f-s)),m=y,b=A,S=I),v=R,E=M}return l+=y,l>a?[u,f]:[r,o]}const Xo={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class FT extends Fa{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const o=this.coordinates;let a=o.length;const l=e.getType();let u=null,h=e.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!St(this.getBufferedMaxExtent(),e.getExtent()))return;let f;if(u=e.getFlatCoordinates(),l=="LineString")f=[u.length];else if(l=="MultiLineString")f=e.getEnds();else if(l=="Polygon")f=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const E=e.getEndss();f=[];for(let b=0,S=E.length;b<S;++b)f.push(E[b][0])}this.beginGeometry(e,t);const m=r.textAlign;let y=0,v;for(let E=0,b=f.length;E<b;++E){if(m==null){const A=DT(r.maxAngle,u,y,f[E],h);y=A[0],v=A[1]}else v=f[E];for(let A=y;A<v;A+=h)o.push(u[A],u[A+1]);const S=o.length;y=f[E],this.drawChars_(a,S),a=S}this.endGeometry(t)}else{let f=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),h=2;break;case"Polygon":u=e.getFlatInteriorPoint(),r.overflow||f.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const b=e.getFlatInteriorPoints();u=[];for(let S=0,A=b.length;S<A;S+=3)r.overflow||f.push(b[S+2]/this.resolution),u.push(b[S],b[S+1]);if(u.length===0)return;h=2;break}const m=this.appendFlatPointCoordinates(u,h);if(m===a)return;if(f&&(m-a)/2!==u.length/h){let b=a/2;f=f.filter((S,A)=>{const I=o[(b+A)*2]===u[A*h]&&o[(b+A)*2+1]===u[A*h+1];return I||--b,I})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let y=r.padding;if(y!=Xs&&(r.scale[0]<0||r.scale[1]<0)){let b=r.padding[0],S=r.padding[1],A=r.padding[2],I=r.padding[3];r.scale[0]<0&&(S=-S,I=-I),r.scale[1]<0&&(b=-b,A=-A),y=[b,S,A,I]}const v=this.pixelRatio;this.instructions.push([Oe.DRAW_IMAGE,a,m,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,y==Xs?Xs:y.map(function(b){return b*v}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const E=1/v;this.hitDetectionInstructions.push([Oe.DRAW_IMAGE,a,m,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[E,E],NaN,void 0,this.declutterImageWithText_,y,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||pa,justify:t.justify,textBaseline:t.textBaseline||Ql,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Xo[s.textBaseline],h=this.textOffsetY_*l,f=this.text_,m=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([Oe.DRAW_CHARS,e,t,u,s.overflow,a,s.maxAngle,l,h,r,m*l,f,o,1]),this.hitDetectionInstructions.push([Oe.DRAW_CHARS,e,t,u,s.overflow,a,s.maxAngle,1,h,r,m,f,o,1/l])}setTextStyle(e,t){let n,s,r;if(!e)this.text_="";else{const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=hn(o.getColor()||Pn)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const v=a.getLineDash(),E=a.getLineDashOffset(),b=a.getWidth(),S=a.getMiterLimit();r.lineCap=a.getLineCap()||Jl,r.lineDash=v?v.slice():ha,r.lineDashOffset=E===void 0?da:E,r.lineJoin=a.getLineJoin()||io,r.lineWidth=b===void 0?ma:b,r.miterLimit=S===void 0?fa:S,r.strokeStyle=hn(a.getColor()||ga)}n=this.textState_;const l=e.getFont()||Z_;iT(l);const u=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Ql,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Xs,n.scale=u===void 0?[1,1]:u;const h=e.getOffsetX(),f=e.getOffsetY(),m=e.getRotateWithView(),y=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=m===void 0?!1:m,this.textRotation_=y===void 0?0:y,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Ve(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+Ve(s.fillStyle):""}this.declutterImageWithText_=t}}const NT={Circle:mp,Default:Fa,Image:LT,LineString:PT,Polygon:mp,Text:FT};class kT{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const r=n[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let r=s[t];if(r===void 0){const o=NT[t];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r}return r}}const ic=kT;class GT extends w_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Le()}getData(e){return null}prepareFrame(e){return Le()}renderFrame(e,t){return Le()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(s,r)=>{const o=this.loadedTileCallback.bind(this,n,s);return e.forEachLoadedTile(t,s,r,o)}}forEachFeatureAtCoordinate(e,t,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===ze.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ze.LOADED&&t!=ze.ERROR&&e.addEventListener(Pe.CHANGE,this.boundHandleImageChange_),t==ze.IDLE&&(e.load(),t=e.getState()),t==ze.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const jT=GT;class $T extends mn{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}const ly=$T,_p=[];let Ir=null;function VT(){Ir=Ht(1,1,void 0,{willReadFrequently:!0})}class WT extends jT{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=xi(),this.pixelTransform=xi(),this.inversePixelTransform=xi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){Ir||VT(),Ir.clearRect(0,0,1,1);let s;try{Ir.drawImage(e,t,n,1,1,0,0,1,1),s=Ir.getImageData(0,0,1,1).data}catch{return Ir=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&ws(ql(e.style.backgroundColor),ql(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Ht();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=bs(n),r=kc(n),o=Nc(n),a=Fc(n);Ot(t.coordinateToPixelTransform,s),Ot(t.coordinateToPixelTransform,r),Ot(t.coordinateToPixelTransform,o),Ot(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ot(l,s),Ot(l,r),Ot(l,o),Ot(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const r=new ly(e,this.inversePixelTransform,n,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(ds.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(ds.POSTRENDER,e,t)}getRenderTransform(e,t,n,s,r,o,a){const l=r/2,u=o/2,h=s/t,f=-h,m=-e[0]+a,y=-e[1];return Zi(this.tempTransform,l,u,h,f,-n,m,y)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const Xd=WT;function BT(i,e,t,n,s,r,o,a,l,u,h,f){let m=i[e],y=i[e+1],v=0,E=0,b=0,S=0;function A(){v=m,E=y,e+=n,m=i[e],y=i[e+1],S+=b,b=Math.sqrt((m-v)*(m-v)+(y-E)*(y-E))}do A();while(e<t-n&&S+b<r);let I=b===0?0:(r-S)/b;const R=Rn(v,m,I),M=Rn(E,y,I),p=e-n,k=S,W=r+a*l(u,s,h);for(;e<t-n&&S+b<W;)A();I=b===0?0:(W-S)/b;const H=Rn(v,m,I),se=Rn(E,y,I);let ce;if(f){const le=[R,M,H,se];Id(le,0,4,2,f,le,le),ce=le[0]>le[2]}else ce=R>H;const pe=Math.PI,ve=[],Me=p+n===e;e=p,b=0,S=k,m=i[e],y=i[e+1];let ye;if(Me){A(),ye=Math.atan2(y-E,m-v),ce&&(ye+=ye>0?-pe:pe);const le=(H+R)/2,X=(se+M)/2;return ve[0]=[le,X,(W-r)/2,ye,s],ve}s=s.replace(/\n/g," ");for(let le=0,X=s.length;le<X;){A();let Z=Math.atan2(y-E,m-v);if(ce&&(Z+=Z>0?-pe:pe),ye!==void 0){let je=Z-ye;if(je+=je>pe?-2*pe:je<-pe?2*pe:0,Math.abs(je)>o)return null}ye=Z;const we=le;let De=0;for(;le<X;++le){const je=ce?X-le-1:le,Be=a*l(u,s[je],h);if(e+n<t&&S+b<r+De+Be/2)break;De+=Be}if(le===we)continue;const We=ce?s.substring(X-we,X-le):s.substring(we,le);I=b===0?0:(r+De/2-S)/b;const J=Rn(v,m,I),ut=Rn(E,y,I);ve.push([J,ut,De/2,Z,We]),r+=De}return ve}const Cr=si(),Un=[],Cn=[],En=[],Xn=[];function yp(i){return i[3].declutterBox}const zT=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function vp(i,e){return(e==="start"||e==="end")&&!zT.test(i)&&(e=e==="start"?"left":"right"),Xo[e]}function HT(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class YT{constructor(e,t,n,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=xi(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,n,s){const r=e+t+n+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],f=Array.isArray(e),m=l.justify?Xo[l.justify]:vp(Array.isArray(e)?e[0]:e,l.textAlign||pa),y=s&&o.lineWidth?o.lineWidth:0,v=f?e:e.split(`
`).reduce(HT,[]),{width:E,height:b,widths:S,heights:A,lineWidths:I}=sT(l,v),R=E+y,M=[],p=(R+2)*h[0],k=(b+y)*h[1],W={width:p<0?Math.floor(p):Math.ceil(p),height:k<0?Math.floor(k):Math.ceil(k),contextInstructions:M};(h[0]!=1||h[1]!=1)&&M.push("scale",h),s&&(M.push("strokeStyle",o.strokeStyle),M.push("lineWidth",y),M.push("lineCap",o.lineCap),M.push("lineJoin",o.lineJoin),M.push("miterLimit",o.miterLimit),M.push("setLineDash",[o.lineDash]),M.push("lineDashOffset",o.lineDashOffset)),n&&M.push("fillStyle",a.fillStyle),M.push("textBaseline","middle"),M.push("textAlign","center");const H=.5-m;let se=m*R+H*y;const ce=[],pe=[];let ve=0,Me=0,ye=0,le=0,X;for(let Z=0,we=v.length;Z<we;Z+=2){const De=v[Z];if(De===`
`){Me+=ve,ve=0,se=m*R+H*y,++le;continue}const We=v[Z+1]||l.font;We!==X&&(s&&ce.push("font",We),n&&pe.push("font",We),X=We),ve=Math.max(ve,A[ye]);const J=[De,se+H*S[ye]+m*(S[ye]-I[le]),.5*(y+ve)+Me];se+=S[ye],s&&ce.push("strokeText",J),n&&pe.push("fillText",J),++ye}return Array.prototype.push.apply(M,ce),Array.prototype.push.apply(M,pe),this.labels_[r]=W,W}replayTextBackground_(e,t,n,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,r,o,a,l,u,h,f,m,y,v,E,b){a*=m[0],l*=m[1];let S=n-a,A=s-l;const I=r+u>e?e-u:r,R=o+h>t?t-h:o,M=v[3]+I*m[0]+v[1],p=v[0]+R*m[1]+v[2],k=S-v[3],W=A-v[0];(E||f!==0)&&(Un[0]=k,Xn[0]=k,Un[1]=W,Cn[1]=W,Cn[0]=k+M,En[0]=Cn[0],En[1]=W+p,Xn[1]=En[1]);let H;return f!==0?(H=Zi(xi(),n,s,1,1,f,-n,-s),Ot(H,Un),Ot(H,Cn),Ot(H,En),Ot(H,Xn),Ji(Math.min(Un[0],Cn[0],En[0],Xn[0]),Math.min(Un[1],Cn[1],En[1],Xn[1]),Math.max(Un[0],Cn[0],En[0],Xn[0]),Math.max(Un[1],Cn[1],En[1],Xn[1]),Cr)):Ji(Math.min(k,k+M),Math.min(W,W+p),Math.max(k,k+M),Math.max(W,W+p),Cr),y&&(S=Math.round(S),A=Math.round(A)),{drawImageX:S,drawImageY:A,drawImageW:I,drawImageH:R,originX:u,originY:h,declutterBox:{minX:Cr[0],minY:Cr[1],maxX:Cr[2],maxY:Cr[3],value:b},canvasTransform:H,scale:m}}replayImageOrLabel_(e,t,n,s,r,o,a){const l=!!(o||a),u=s.declutterBox,h=e.canvas,f=a?a[2]*s.scale[0]/2:0;return u.minX-f<=h.width/t&&u.maxX+f>=0&&u.minY-f<=h.height/t&&u.maxY+f>=0&&(l&&this.replayTextBackground_(e,Un,Cn,En,Xn,o,a),rT(e,s.canvasTransform,r,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const t=Ot(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const r=this.textStates[t],o=this.createLabel(e,t,s,n),a=this.strokeStates[n],l=this.pixelRatio,u=vp(Array.isArray(e)?e[0]:e,r.textAlign||pa),h=Xo[r.textBaseline||Ql],f=a&&a.lineWidth?a.lineWidth:0,m=o.width/l-2*r.scale[0],y=u*m+2*(.5-u)*f,v=h*o.height/l+2*(.5-h)*f;return{label:o,anchorX:y,anchorY:v}}execute_(e,t,n,s,r,o,a,l){let u;this.pixelCoordinates_&&ws(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=ps(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Jx(this.renderedTransform_,n));let h=0;const f=s.length;let m=0,y,v,E,b,S,A,I,R,M,p,k,W,H=0,se=0,ce=null,pe=null;const ve=this.coordinateCache_,Me=this.viewRotation_,ye=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,le={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Me},X=this.instructions!=s||this.overlaps?0:200;let Z,we,De,We;for(;h<f;){const J=s[h];switch(J[0]){case Oe.BEGIN_GEOMETRY:Z=J[1],We=J[3],Z.getGeometry()?a!==void 0&&!St(a,We.getExtent())?h=J[2]+1:++h:h=J[2];break;case Oe.BEGIN_PATH:H>X&&(this.fill_(e),H=0),se>X&&(e.stroke(),se=0),!H&&!se&&(e.beginPath(),b=NaN,S=NaN),++h;break;case Oe.CIRCLE:m=J[1];const je=u[m],Be=u[m+1],pt=u[m+2],vt=u[m+3],Ze=pt-je,st=vt-Be,ri=Math.sqrt(Ze*Ze+st*st);e.moveTo(je+ri,Be),e.arc(je,Be,ri,0,2*Math.PI,!0),++h;break;case Oe.CLOSE_PATH:e.closePath(),++h;break;case Oe.CUSTOM:m=J[1],y=J[2];const oi=J[3],P=J[4],F=J.length==6?J[5]:void 0;le.geometry=oi,le.feature=Z,h in ve||(ve[h]=[]);const z=ve[h];F?F(u,m,y,2,z):(z[0]=u[m],z[1]=u[m+1],z.length=2),P(z,le),++h;break;case Oe.DRAW_IMAGE:m=J[1],y=J[2],R=J[3],v=J[4],E=J[5];let q=J[6];const $=J[7],te=J[8],de=J[9],ae=J[10];let oe=J[11];const Q=J[12];let me=J[13];const ue=J[14],fe=J[15];if(!R&&J.length>=20){M=J[19],p=J[20],k=J[21],W=J[22];const Jt=this.drawLabelWithPointPlacement_(M,p,k,W);R=Jt.label,J[3]=R;const tn=J[23];v=(Jt.anchorX-tn)*this.pixelRatio,J[4]=v;const Bt=J[24];E=(Jt.anchorY-Bt)*this.pixelRatio,J[5]=E,q=R.height,J[6]=q,me=R.width,J[13]=me}let Ce;J.length>25&&(Ce=J[25]);let Se,Xe,Ne;J.length>17?(Se=J[16],Xe=J[17],Ne=J[18]):(Se=Xs,Xe=!1,Ne=!1),ae&&ye?oe+=Me:!ae&&!ye&&(oe-=Me);let rt=0;for(;m<y;m+=2){if(Ce&&Ce[rt++]<me/this.pixelRatio)continue;const Jt=this.calculateImageOrLabelDimensions_(R.width,R.height,u[m],u[m+1],me,q,v,E,te,de,oe,Q,r,Se,Xe||Ne,Z),tn=[e,t,R,Jt,$,Xe?ce:null,Ne?pe:null];if(l){if(ue==="none")continue;if(ue==="obstacle"){l.insert(Jt.declutterBox);continue}else{let Bt,ki;if(fe){const Qt=y-m;if(!fe[Qt]){fe[Qt]=tn;continue}if(Bt=fe[Qt],delete fe[Qt],ki=yp(Bt),l.collides(ki))continue}if(l.collides(Jt.declutterBox))continue;Bt&&(l.insert(ki),this.replayImageOrLabel_.apply(this,Bt)),l.insert(Jt.declutterBox)}}this.replayImageOrLabel_.apply(this,tn)}++h;break;case Oe.DRAW_CHARS:const Ft=J[1],Ct=J[2],gi=J[3],pi=J[4];W=J[5];const Is=J[6],Nt=J[7],mt=J[8];k=J[9];const At=J[10];M=J[11],p=J[12];const gr=[J[13],J[13]],To=this.textStates[p],Wn=To.font,Bn=[To.scale[0]*Nt,To.scale[1]*Nt];let Ri;Wn in this.widths_?Ri=this.widths_[Wn]:(Ri={},this.widths_[Wn]=Ri);const _n=H_(u,Ft,Ct,2),Ha=Math.abs(Bn[0])*cp(Wn,M,Ri);if(pi||Ha<=_n){const Jt=this.textStates[p].textAlign,tn=(_n-Ha)*Xo[Jt],Bt=BT(u,Ft,Ct,2,M,tn,Is,Math.abs(Bn[0]),cp,Wn,Ri,ye?0:this.viewRotation_);e:if(Bt){const ki=[];let Qt,pr,Ls,Yt,ai;if(k)for(Qt=0,pr=Bt.length;Qt<pr;++Qt){ai=Bt[Qt],Ls=ai[4],Yt=this.createLabel(Ls,p,"",k),v=ai[2]+(Bn[0]<0?-At:At),E=gi*Yt.height+(.5-gi)*2*At*Bn[1]/Bn[0]-mt;const Ai=this.calculateImageOrLabelDimensions_(Yt.width,Yt.height,ai[0],ai[1],Yt.width,Yt.height,v,E,0,0,ai[3],gr,!1,Xs,!1,Z);if(l&&l.collides(Ai.declutterBox))break e;ki.push([e,t,Yt,Ai,1,null,null])}if(W)for(Qt=0,pr=Bt.length;Qt<pr;++Qt){ai=Bt[Qt],Ls=ai[4],Yt=this.createLabel(Ls,p,W,""),v=ai[2],E=gi*Yt.height-mt;const Ai=this.calculateImageOrLabelDimensions_(Yt.width,Yt.height,ai[0],ai[1],Yt.width,Yt.height,v,E,0,0,ai[3],gr,!1,Xs,!1,Z);if(l&&l.collides(Ai.declutterBox))break e;ki.push([e,t,Yt,Ai,1,null,null])}l&&l.load(ki.map(yp));for(let Ai=0,su=ki.length;Ai<su;++Ai)this.replayImageOrLabel_.apply(this,ki[Ai])}}++h;break;case Oe.END_GEOMETRY:if(o!==void 0){Z=J[1];const Jt=o(Z,We);if(Jt)return Jt}++h;break;case Oe.FILL:X?H++:this.fill_(e),++h;break;case Oe.MOVE_TO_LINE_TO:for(m=J[1],y=J[2],we=u[m],De=u[m+1],A=we+.5|0,I=De+.5|0,(A!==b||I!==S)&&(e.moveTo(we,De),b=A,S=I),m+=2;m<y;m+=2)we=u[m],De=u[m+1],A=we+.5|0,I=De+.5|0,(m==y-2||A!==b||I!==S)&&(e.lineTo(we,De),b=A,S=I);++h;break;case Oe.SET_FILL_STYLE:ce=J,this.alignFill_=J[2],H&&(this.fill_(e),H=0,se&&(e.stroke(),se=0)),e.fillStyle=J[1],++h;break;case Oe.SET_STROKE_STYLE:pe=J,se&&(e.stroke(),se=0),this.setStrokeStyle_(e,J),++h;break;case Oe.STROKE:X?se++:e.stroke(),++h;break;default:++h;break}}H&&this.fill_(e),se&&e.stroke()}execute(e,t,n,s,r,o){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,n,s,r){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,s,r)}}const UT=YT,Nu=["Polygon","Circle","LineString","Image","Text","Default"];class XT{constructor(e,t,n,s,r,o){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=xi(),this.createExecutors_(r)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e){for(const t in e){let n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);const s=e[t];for(const r in s){const o=s[r];n[r]=new UT(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,r,o){s=Math.round(s);const a=s*2+1,l=Zi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Ht(a,a,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):u||h.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=si(),Uo(f,e),qi(f,t*(this.renderBuffer_+s),f));const m=KT(s);let y;function v(M,p){const k=h.getImageData(0,0,a,a).data;for(let W=0,H=m.length;W<H;W++)if(k[m[W]]>0){if(!o||y!=="Image"&&y!=="Text"||o.includes(M)){const se=(m[W]-3)/4,ce=s-se%a,pe=s-(se/a|0),ve=r(M,p,ce*ce+pe*pe);if(ve)return ve}h.clearRect(0,0,a,a);break}}const E=Object.keys(this.executorsByZIndex_).map(Number);E.sort(nr);let b,S,A,I,R;for(b=E.length-1;b>=0;--b){const M=E[b].toString();for(A=this.executorsByZIndex_[M],S=Nu.length-1;S>=0;--S)if(y=Nu[S],I=A[y],I!==void 0&&(R=I.executeHitDetection(h,l,n,v,f),R))return R}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],r=t[2],o=t[3],a=[n,s,n,o,r,o,r,s];return ps(a,0,8,2,e,a),a}isEmpty(){return _s(this.executorsByZIndex_)}execute(e,t,n,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(nr),this.maxExtent_&&(e.save(),this.clip(e,n)),o=o||Nu;let u,h,f,m,y,v;for(a&&l.reverse(),u=0,h=l.length;u<h;++u){const E=l[u].toString();for(y=this.executorsByZIndex_[E],f=0,m=o.length;f<m;++f){const b=o[f];v=y[b],v!==void 0&&v.execute(e,t,n,s,r,a)}}this.maxExtent_&&e.restore()}}const ku={};function KT(i){if(ku[i]!==void 0)return ku[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let r=0;r<=i;++r)for(let o=0;o<=i;++o){const a=r*r+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+r)*e+(i+o))*4+3),r>0&&l.push(((i-r)*e+(i+o))*4+3),o>0&&(l.push(((i+r)*e+(i-o))*4+3),r>0&&l.push(((i-r)*e+(i-o))*4+3))}const s=[];for(let r=0,o=n.length;r<o;++r)n[r]&&s.push(...n[r]);return ku[i]=s,s}const nc=XT,xt={ANIMATING:0,INTERACTING:1};class qT extends ay{constructor(e,t,n,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?jc(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=xi()}drawImages_(e,t,n,s){if(!this.image_)return;const r=ps(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let h=0,f=r.length;h<f;h+=2){const m=r[h]-this.imageAnchorX_,y=r[h+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=m+this.imageAnchorX_,E=y+this.imageAnchorY_;Zi(a,v,E,1,1,u,-v,-E),o.setTransform.apply(o,a),o.translate(v,E),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,m,y,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=ps(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=s){const l=r[t]+this.textOffsetX_,u=r[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,t,n,s,r){const o=this.context_,a=ps(e,t,n,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return r&&o.closePath(),n}drawRings_(e,t,n,s){for(let r=0,o=n.length;r<o;++r)t=this.moveToLineTo_(e,t,n[r],s,!0);return t}drawCircle(e){if(St(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=D1(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(n*n+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);!n||!St(this.extent_,n.getExtent())||(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!St(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(St(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,u=o.length;l<u;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!St(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!St(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=r.length;a<l;++a){const u=r[a];s=this.drawRings_(n,s,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),ws(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:pa;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:hn(n||Pn)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),h=r||ha;this.strokeState_={lineCap:s!==void 0?s:Jl,lineDash:this.pixelRatio_===1?h:h.map(f=>f*this.pixelRatio_),lineDashOffset:(o||da)*this.pixelRatio_,lineJoin:a!==void 0?a:io,lineWidth:(l!==void 0?l:ma)*this.pixelRatio_,miterLimit:u!==void 0?u:fa,strokeStyle:hn(n||ga)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const y=t.getColor();this.textFillState_={fillStyle:hn(y||Pn)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const y=n.getColor(),v=n.getLineCap(),E=n.getLineDash(),b=n.getLineDashOffset(),S=n.getLineJoin(),A=n.getWidth(),I=n.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Jl,lineDash:E||ha,lineDashOffset:b||da,lineJoin:S!==void 0?S:io,lineWidth:A!==void 0?A:ma,miterLimit:I!==void 0?I:fa,strokeStyle:hn(y||ga)}}const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),h=e.getText(),f=e.getTextAlign(),m=e.getTextBaseline();this.textState_={font:s!==void 0?s:Z_,textAlign:f!==void 0?f:pa,textBaseline:m!==void 0?m:Ql},this.text_=h!==void 0?Array.isArray(h)?h.reduce((y,v,E)=>y+=E%2?" ":v,""):h:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const cy=qT,Ci=.5;function uy(i,e,t,n,s,r,o){const a=i[0]*Ci,l=i[1]*Ci,u=Ht(a,l);u.imageSmoothingEnabled=!1;const h=u.canvas,f=new cy(u,Ci,s,null,o),m=t.length,y=Math.floor((256*256*256-1)/m),v={};for(let b=1;b<=m;++b){const S=t[b-1],A=S.getStyleFunction()||n;if(!n)continue;let I=A(S,r);if(!I)continue;Array.isArray(I)||(I=[I]);const M=(b*y).toString(16).padStart(7,"#00000");for(let p=0,k=I.length;p<k;++p){const W=I[p],H=W.getGeometryFunction()(S);if(!H||!St(s,H.getExtent()))continue;const se=W.clone(),ce=se.getFill();ce&&ce.setColor(M);const pe=se.getStroke();pe&&(pe.setColor(M),pe.setLineDash(null)),se.setText(void 0);const ve=W.getImage();if(ve&&ve.getOpacity()!==0){const X=ve.getImageSize();if(!X)continue;const Z=Ht(X[0],X[1],void 0,{alpha:!1}),we=Z.canvas;Z.fillStyle=M,Z.fillRect(0,0,we.width,we.height),se.setImage(new _a({img:we,imgSize:X,anchor:ve.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ve.getOrigin(),opacity:1,size:ve.getSize(),scale:ve.getScale(),rotation:ve.getRotation(),rotateWithView:ve.getRotateWithView()}))}const Me=se.getZIndex()||0;let ye=v[Me];ye||(ye={},v[Me]=ye,ye.Polygon=[],ye.Circle=[],ye.LineString=[],ye.Point=[]);const le=H.getType();if(le==="GeometryCollection"){const X=H.getGeometriesArrayRecursive();for(let Z=0,we=X.length;Z<we;++Z){const De=X[Z];ye[De.getType().replace("Multi","")].push(De,se)}}else ye[le.replace("Multi","")].push(H,se)}}const E=Object.keys(v).map(Number).sort(nr);for(let b=0,S=E.length;b<S;++b){const A=v[E[b]];for(const I in A){const R=A[I];for(let M=0,p=R.length;M<p;M+=2){f.setStyle(R[M+1]);for(let k=0,W=e.length;k<W;++k)f.setTransform(e[k]),f.drawGeometry(R[M])}}}return u.getImageData(0,0,h.width,h.height)}function hy(i,e,t){const n=[];if(t){const s=Math.floor(Math.round(i[0])*Ci),r=Math.floor(Math.round(i[1])*Ci),o=(Mt(s,0,t.width-1)+Mt(r,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],h=t.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/e.length);h&&h%f===0&&n.push(e[h/f-1])}return n}const ZT=.5,dy={Point:rw,LineString:iw,Polygon:aw,MultiPoint:ow,MultiLineString:nw,MultiPolygon:sw,GeometryCollection:tw,Circle:QT};function JT(i,e){return parseInt(Ve(i),10)-parseInt(Ve(e),10)}function fy(i,e){const t=Ih(i,e);return t*t}function Ih(i,e){return ZT*i/e}function QT(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function sc(i,e,t,n,s,r,o){let a=!1;const l=t.getImage();if(l){const u=l.getImageState();u==ze.LOADED||u==ze.ERROR?l.unlistenImageChange(s):(u==ze.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return ew(i,e,t,n,r,o),a}function ew(i,e,t,n,s,r){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(n,s);if(t.getRenderer())gy(i,a,t,e);else{const u=dy[a.getType()];u(i,a,t,e,r)}}function gy(i,e,t,n){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let o=0,a=r.length;o<a;++o)gy(i,r[o],t,n);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function tw(i,e,t,n,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=dy[r[o].getType()];l(i,r[o],t,n,s)}}function iw(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function nw(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function sw(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(o||r){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function rw(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=ze.LOADED)return;let l=i;if(s){const h=r.getDeclutterMode();if(h!=="none")if(l=s,h==="obstacle"){const f=i.getBuilder(t.getZIndex(),"Image");f.setImageStyle(r,a),f.drawPoint(e,n)}else o&&o.getText()&&(a={})}const u=l.getBuilder(t.getZIndex(),"Image");u.setImageStyle(r,a),u.drawPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const u=l.getBuilder(t.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(e,n)}}function ow(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=ze.LOADED)return;let l=i;if(s){const h=r.getDeclutterMode();if(h!=="none")if(l=s,h==="obstacle"){const f=i.getBuilder(t.getZIndex(),"Image");f.setImageStyle(r,a),f.drawMultiPoint(e,n)}else o&&o.getText()&&(a={})}const u=l.getBuilder(t.getZIndex(),"Image");u.setImageStyle(r,a),u.drawMultiPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const u=l.getBuilder(t.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(e,n)}}function aw(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}class lw extends Xd{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=si(),this.wrappedRenderedExtent_=si(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,u=r.rotation,h=l.getExtent(),f=this.getLayer().getSource(),m=t.pixelRatio,y=t.viewHints,v=!(y[xt.ANIMATING]||y[xt.INTERACTING]),E=this.compositionContext_,b=Math.round(t.size[0]*m),S=Math.round(t.size[1]*m),A=f.getWrapX()&&l.canWrapX(),I=A?tt(h):null,R=A?Math.ceil((s[2]-h[2])/I)+1:1;let M=A?Math.floor((s[0]-h[0])/I):0;do{const p=this.getRenderTransform(o,a,u,m,b,S,M*I);e.execute(E,1,p,u,v,void 0,n)}while(++M<R)}setupCompositionContext_(){if(this.opacity_!==1){const e=Ht(this.context.canvas.width,this.context.canvas.height,_p);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Ma(this.compositionContext_),_p.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const n=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];Qx(this.pixelTransform,1/n,1/n),Dc(this.inversePixelTransform,this.pixelTransform);const r=_d(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,u=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!u||u.isEmpty()))return null;const h=Math.round(e.size[0]*n),f=Math.round(e.size[1]*n);a.width!=h||a.height!=f?(a.width=h,a.height=f,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,h,f),this.preRender(o,e);const m=e.viewState;m.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let y=!1,v=!0;if(s.extent&&this.clipping){const E=un(s.extent);v=St(E,e.extent),y=v&&!Hi(E,e.extent),y&&this.clipUnrotated(this.compositionContext_,e,E)}return v&&this.renderWorlds(l,e),y&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==m.rotation&&(this.renderedRotation_=m.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];Ot(this.pixelTransform,n);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),h=[],f=n[0]*Ci,m=n[1]*Ci;h.push(this.getRenderTransform(s,r,o,Ci,f,m,0).slice());const y=u.getSource(),v=a.getExtent();if(y.getWrapX()&&a.canWrapX()&&!Hi(v,l)){let E=l[0];const b=tt(v);let S=0,A;for(;E<v[0];)--S,A=b*S,h.push(this.getRenderTransform(s,r,o,Ci,f,m,A).slice()),E+=b;for(S=0,E=l[2];E>v[2];)++S,A=b*S,h.push(this.getRenderTransform(s,r,o,Ci,f,m,A).slice()),E-=b}this.hitDetectionImageData_=uy(n,h,this.renderedFeatures_,u.getStyleFunction(),l,r,o)}t(hy(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),u={},h=function(y,v,E){const b=Ve(y),S=u[b];if(S){if(S!==!0&&E<S.distanceSq){if(E===0)return u[b]=!0,r.splice(r.lastIndexOf(S),1),s(y,l,v);S.geometry=v,S.distanceSq=E}}else{if(E===0)return u[b]=!0,s(y,l,v);r.push(u[b]={feature:y,layer:l,geometry:v,distanceSq:E,callback:s})}};let f;const m=[this.replayGroup_];return this.declutterExecutorGroup&&m.push(this.declutterExecutorGroup),m.some(y=>f=y.forEachFeatureAtCoordinate(e,o,a,n,h,y===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(v=>v.value):null)),f}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[xt.ANIMATING],r=e.viewHints[xt.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,h=u.projection,f=u.resolution,m=e.pixelRatio,y=t.getRevision(),v=t.getRenderBuffer();let E=t.getRenderOrder();E===void 0&&(E=JT);const b=u.center.slice(),S=qi(l,v*f),A=S.slice(),I=[S.slice()],R=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!Hi(R,e.extent)){const ye=tt(R),le=Math.max(tt(S)/2,ye);S[0]=R[0]-le,S[2]=R[2]+le,wd(b,h);const X=L_(I[0],h);X[0]<R[0]&&X[2]<R[2]?I.push([X[0]+ye,X[1],X[2]+ye,X[3]]):X[0]>R[0]&&X[2]>R[2]&&I.push([X[0]-ye,X[1],X[2]-ye,X[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==y&&this.renderedRenderOrder_==E&&Hi(this.wrappedRenderedExtent_,S))return ws(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new ic(Ih(f,m),S,f,m);let p;this.getLayer().getDeclutter()&&(p=new ic(Ih(f,m),S,f,m));let k;for(let ye=0,le=I.length;ye<le;++ye)n.loadFeatures(I[ye],f,h);const W=fy(f,m);let H=!0;const se=ye=>{let le;const X=ye.getStyleFunction()||t.getStyleFunction();if(X&&(le=X(ye,f)),le){const Z=this.renderFeature(ye,W,le,M,k,p);H=H&&!Z}},ce=Ad(S),pe=n.getFeaturesInExtent(ce);E&&pe.sort(E);for(let ye=0,le=pe.length;ye<le;++ye)se(pe[ye]);this.renderedFeatures_=pe,this.ready=H;const ve=M.finish(),Me=new nc(S,f,m,n.getOverlaps(),ve,t.getRenderBuffer());return p&&(this.declutterExecutorGroup=new nc(S,f,m,n.getOverlaps(),p.finish(),t.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=y,this.renderedRenderOrder_=E,this.renderedExtent_=A,this.wrappedRenderedExtent_=S,this.renderedCenter_=b,this.renderedProjection_=h,this.replayGroup_=Me,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,r,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=sc(s,e,n[l],t,this.boundHandleStyleImageChange_,r,o)||a;else a=sc(s,e,n,t,this.boundHandleStyleImageChange_,r,o);return a}}const cw=lw;class uw extends oy{constructor(e){super(e)}createRenderer(){return new cw(this)}}const is=uw;class hw{constructor(e){this.rbush_=new ny(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Ve(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[s]=l,this.items_[Ve(a)]=l}this.rbush_.load(n)}remove(e){const t=Ve(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Ve(t)],s=[n.minX,n.minY,n.maxX,n.maxY];rr(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,r=e.length;s<r;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return _s(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Ji(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const Cp=hw;class dw extends Di{constructor(e){super(),this.projection=ct(e.projection),this.attributions_=Ep(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Ep(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Ep(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}const Kd=dw,$i={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function fw(i,e){return[[-1/0,-1/0,1/0,1/0]]}function xp(i){return function(e,t,n){const s=i.getZForResolution(A1(t)),r=i.getTileRangeForExtentAndZ(un(e),s),o=[],a=[s,0,0];for(a[1]=r.minX;a[1]<=r.maxX;++a[1])for(a[2]=r.minY;a[2]<=r.maxY;++a[2])o.push(Ad(i.getTileCoordExtent(a)));return o}}let gw=!1;function py(i,e,t,n,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,s):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=gw,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();let h;u=="json"||u=="text"?h=a.responseText:u=="xml"?(h=a.responseXML,h||(h=new DOMParser().parseFromString(a.responseText,"application/xml"))):u=="arraybuffer"&&(h=a.response),h?r(e.readFeatures(h,{extent:t,featureProjection:s}),e.readProjection(h)):o()}else o()},a.onerror=o,a.send()}function Tp(i,e){return function(t,n,s,r,o){const a=this;py(i,e,t,n,s,function(l,u){a.addFeatures(l),r!==void 0&&r(l)},o||sr)}}class Kn extends mn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class pw extends Kd{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=sr,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ge(this.format_,7),this.loader_=Tp(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:fw;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Cp:null,this.loadedExtentsRtree_=new Cp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new cn(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ve(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Kn($i.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[qe(t,Pe.CHANGE,this.handleFeatureChange_,this),qe(t,Qr.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let n=!0;const s=t.getId();return s!==void 0&&(s.toString()in this.idIndex_?n=!1:this.idIndex_[s.toString()]=t),n&&(Ge(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=Ve(a);this.addToIndex_(l,a)&&n.push(a)}for(let r=0,o=n.length;r<o;r++){const a=n[r],l=Ve(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const h=u.getExtent();t.push(h),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener($i.ADDFEATURE))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new Kn($i.ADDFEATURE,n[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener($i.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener($i.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(fi.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(fi.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(gt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(n);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Kn($i.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){if(s.getGeometry().intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){if(n.getGeometry().intersectsExtent(e)){const r=t(n);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),_s(this.nullGeometryFeatures_)||Ki(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=l1(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}else if(this.featuresCollection_)return this.featuresCollection_.getArray().slice(0);return[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||aa,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const h=u.getGeometry(),f=a;if(a=h.closestPointXY(n,s,o,a),a<f){r=u;const m=Math.sqrt(a);l[0]=n-m,l[1]=s-m,l[2]=n+m,l[3]=s+m}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Ve(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const r=t.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Kn($i.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ve(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_s(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,n);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(h){return Hi(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Kn($i.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Kn($i.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Kn($i.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(s){if(rr(s.extent,e))return n=s,!0}),n&&t.remove(n)}removeFeature(e){if(!e)return;const t=Ve(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ve(e),n=this.featureChangeKeys_[t];if(!n)return;n.forEach(gt),delete this.featureChangeKeys_[t];const s=e.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new Kn($i.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Ge(this.format_,7),this.url_=e,this.setLoader(Tp(e,this.format_))}}const ln=pw;function mw(i,e){const t=i.canvas;e=e||{};const n=e.pixelRatio||gd,s=e.size;s&&(t.width=s[0]*n,t.height=s[1]*n,t.style.width=s[0]+"px",t.style.height=s[1]+"px");const r=[0,0,t.width,t.height],o=Dl(xi(),n,n);return new cy(i,n,r,o,0)}class ts extends mn{constructor(e,t){super(e),this.layer=t}}const Gu={LAYERS:"layers"};class qd extends ty{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Gu.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new cn(n.slice(),{unique:!0}):Ge(typeof n.getArray=="function",43):n=new cn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(gt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(qe(e,fi.ADD,this.handleLayersAdd_,this),qe(e,fi.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(gt);Ra(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const r=t[n];this.registerLayerListeners_(r),this.dispatchEvent(new ts("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[qe(e,Qr.PROPERTYCHANGE,this.handleLayerChange_,this),qe(e,Pe.CHANGE,this.handleLayerChange_,this)];e instanceof qd&&t.push(qe(e,"addlayer",this.handleLayerGroupAdd_,this),qe(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ve(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new ts("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new ts("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new ts("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Ve(t);this.listenerKeys_[n].forEach(gt),delete this.listenerKeys_[n],this.dispatchEvent(new ts("removelayer",t)),this.changed()}getLayers(){return this.get(Gu.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new ts("removelayer",n[s]))}this.set(Gu.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=On(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return t}getSourceState(){return"ready"}}const or=qd;class _w extends po{constructor(e){e=e||{},super(e)}}const yw=_w;class vw extends Xd{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,s=e.viewState,r=s.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=On(l,un(t.extent,s.projection))),!a[xt.ANIMATING]&&!a[xt.INTERACTING]&&!Gc(l))if(o){const u=s.projection,h=o.getImage(l,r,n,u);h&&(this.loadImage(h)?this.image_=h:h.getState()===ze.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=Ot(t.pixelToCoordinateTransform,e.slice()),r=n.getExtent();if(r&&!Ia(r,s))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=tt(o),u=Math.floor(a.width*((s[0]-o[0])/l));if(u<0||u>=a.width)return null;const h=It(o),f=Math.floor(a.height*((o[3]-s[1])/h));return f<0||f>=a.height?null:this.getImageData(a,u,f)}renderFrame(e,t){const n=this.image_,s=n.getExtent(),r=n.getResolution(),o=n.getPixelRatio(),a=e.layerStatesArray[e.layerIndex],l=e.pixelRatio,u=e.viewState,h=u.center,f=u.resolution,m=l*r/(f*o),y=e.extent,v=u.resolution,E=u.rotation,b=Math.round(tt(y)/v*l),S=Math.round(It(y)/v*l);Zi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,E,-b/2,-S/2),Dc(this.inversePixelTransform,this.pixelTransform);const A=_d(this.pixelTransform);this.useContainer(t,A,this.getBackground(e));const I=this.context,R=I.canvas;R.width!=b||R.height!=S?(R.width=b,R.height=S):this.containerReused||I.clearRect(0,0,b,S);let M=!1,p=!0;if(a.extent){const ce=un(a.extent,u.projection);p=St(ce,e.extent),M=p&&!Hi(ce,e.extent),M&&this.clipUnrotated(I,e,ce)}const k=n.getImage(),W=Zi(this.tempTransform,b/2,S/2,m,m,0,o*(s[0]-h[0])/r,o*(h[1]-s[3])/r);this.renderedResolution=r*l/o;const H=k.width*W[0],se=k.height*W[3];if(this.getLayer().getSource().getInterpolate()||(I.imageSmoothingEnabled=!1),this.preRender(I,e),p&&H>=.5&&se>=.5){const ce=W[4],pe=W[5],ve=a.opacity;let Me;ve!==1&&(Me=I.globalAlpha,I.globalAlpha=ve),I.drawImage(k,0,0,+k.width,+k.height,ce,pe,H,se),ve!==1&&(I.globalAlpha=Me)}return this.postRender(I,e),M&&I.restore(),I.imageSmoothingEnabled=!0,A!==R.style.transform&&(R.style.transform=A),this.container}}const Cw=vw;class Ew extends yw{constructor(e){super(e)}createRenderer(){return new Cw(this)}getData(e){return super.getData(e)}}const my=Ew;class xw{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?ct(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=ct(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return Le()}readFeature(e,t){return Le()}readFeatures(e,t){return Le()}readGeometry(e,t){return Le()}readProjection(e){return Le()}writeFeature(e,t){return Le()}writeFeatures(e,t){return Le()}writeGeometry(e,t){return Le()}}const _y=xw;function Na(i,e,t){const n=t?ct(t.featureProjection):null,s=t?ct(t.dataProjection):null;let r;if(n&&s&&!In(n,s)?r=(e?i.clone():i).transform(e?n:s,e?s:n):r=i,e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*o)/o;return l};r===i&&(r=i.clone()),r.applyTransform(a)}return r}class rc extends jn{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{let s=this.getLayout();const r=e,o=[],a=[];for(let l=0,u=r.length;l<u;++l){const h=r[l];l===0&&(s=h.getLayout()),Ki(o,h.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?Ki(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new rc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<hr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Od(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Md(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,s))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,V1(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return ca(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ua(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,s=[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],u=new ua(e.slice(r,l),n);s.push(u),r=l}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],u=Xl(t,n,l,r,.5);Ki(e,u),n=l}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=G1(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new rc(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return z1(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Dd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}const Zd=rc;class Jd extends jn{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Ki(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new Jd(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<hr(this.getExtent(),e,t))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const u=er(e,t,r[a],r[a+1]);if(u<s){s=u;for(let h=0;h<o;++h)n[h]=r[a+h];n.length=o}}return s}getCoordinates(){return os(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new Oi(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,s=[];for(let r=0,o=e.length;r<o;r+=n){const a=new Oi(e.slice(r,r+n),t);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let s=0,r=t.length;s<r;s+=n){const o=t[s],a=t[s+1];if(yd(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pa(this.flatCoordinates,0,e,this.stride),this.changed()}}const zc=Jd;function yy(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=o*a-r*l,r=a,o=l}return s/2}function vy(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=yy(i,e,a,n),e=a}return s}function Tw(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=vy(i,e,a,n),e=a[a.length-1]}return s}class oc extends jn{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new oc(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<hr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ld(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return yy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return os(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new oc(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pa(this.flatCoordinates,0,e,this.stride),this.changed()}}const ac=oc;function Qd(i,e,t,n,s,r,o){let a,l,u,h,f,m,y;const v=s[r+1],E=[];for(let A=0,I=t.length;A<I;++A){const R=t[A];for(h=i[R-n],m=i[R-n+1],a=e;a<R;a+=n)f=i[a],y=i[a+1],(v<=m&&y<=v||m<=v&&v<=y)&&(u=(v-m)/(y-m)*(f-h)+h,E.push(u)),h=f,m=y}let b=NaN,S=-1/0;for(E.sort(nr),h=E[0],a=1,l=E.length;a<l;++a){f=E[a];const A=Math.abs(f-h);A>S&&(u=(h+f)/2,Nd(i,e,t,n,u,v)&&(b=u,S=A)),h=f}return isNaN(b)&&(b=s[r]),o?(o.push(b,v,S),o):[b,v,S]}function Cy(i,e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];r=Qd(i,e,l,n,s,2*o,r),e=l[l.length-1]}return r}function ww(i,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const r=i[e+s];i[e+s]=i[t-n+s],i[t-n+s]=r}e+=n,t-=n}}function Hc(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function Ey(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=Hc(i,e,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function bw(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(!Ey(i,e,a,n,s))return!1;a.length&&(e=a[a.length-1])}return!0}function Lh(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=Hc(i,e,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&ww(i,e,a,n),e=a}return e}function wp(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r)e=Lh(i,e,t[r],n,s);return e}function Sw(i,e){const t=[];let n=0,s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];if(!Hc(i,n,a,2))t.push(e.slice(s,r+1));else{if(t.length===0)continue;t[t.length-1].push(e[s])}s=r+1,n=a}return t}class no extends jn{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Ki(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new no(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<hr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Od(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Md(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Nd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return vy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Lh(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,ca(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=wi(this.getExtent());this.flatInteriorPoint_=Qd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Oi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new ac(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],u=new ac(t.slice(r,l),e);s.push(u),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Ey(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Lh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=V_(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new no(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return z_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Dd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}const ar=no;function Rw(i,e,t,n){t=t||32;const s=[];for(let r=0;r<t;++r)Ki(s,x1(i,e,2*Math.PI*r/t,n));return s.push(s[0],s[1]),new no(s,"XY",[s.length])}function bp(i){const e=i[0],t=i[1],n=i[2],s=i[3],r=[e,t,e,s,n,s,n,t,e,t];return new no(r,"XY",[r.length])}function xy(i,e,t,n){const s=[];let r=si();for(let o=0,a=t.length;o<a;++o){const l=t[o];r=Cd(i,e,l[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return s}class lc extends jn{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){let s=this.getLayout();const r=e,o=[],a=[];for(let l=0,u=r.length;l<u;++l){const h=r[l];l===0&&(s=h.getLayout());const f=o.length,m=h.getEnds();for(let y=0,v=m.length;y<v;++y)m[y]+=f;Ki(o,h.getFlatCoordinates()),a.push(m)}t=s,e=o,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Ki(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,r=t.length;s<r;++s)t[s]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const n=new lc(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,s){return s<hr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F1(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),N1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return B1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Tw(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),wp(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,bh(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=xy(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Cy(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new zc(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;bw(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=wp(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=$1(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new lc(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const r=this.endss_[e-1];t=r[r.length-1]}const n=this.endss_[e].slice(),s=n[n.length-1];if(t!==0)for(let r=0,o=n.length;r<o;++r)n[r]-=t;return new ar(this.flatCoordinates.slice(t,s),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),u=l[l.length-1];if(r!==0)for(let f=0,m=l.length;f<m;++f)l[f]-=r;const h=new ar(t.slice(r,u),e,l);s.push(h),r=u}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return H1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=k1(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const ef=lc;var tf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */tf.read=function(i,e,t,n,s){var r,o,a=s*8-n-1,l=(1<<a)-1,u=l>>1,h=-7,f=t?s-1:0,m=t?-1:1,y=i[e+f];for(f+=m,r=y&(1<<-h)-1,y>>=-h,h+=a;h>0;r=r*256+i[e+f],f+=m,h-=8);for(o=r&(1<<-h)-1,r>>=-h,h+=n;h>0;o=o*256+i[e+f],f+=m,h-=8);if(r===0)r=1-u;else{if(r===l)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-u}return(y?-1:1)*o*Math.pow(2,r-n)};tf.write=function(i,e,t,n,s,r){var o,a,l,u=r*8-s-1,h=(1<<u)-1,f=h>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:r-1,v=n?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=m/l:e+=m*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=h?(a=0,o=h):o+f>=1?(a=(e*l-1)*Math.pow(2,s),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,s),o=0));s>=8;i[t+y]=a&255,y+=v,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;i[t+y]=o&255,y+=v,o/=256,u-=8);i[t+y-v]|=E*128};var Aw=it,pl=tf;function it(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}it.Varint=0;it.Fixed64=1;it.Bytes=2;it.Fixed32=5;var Oh=(1<<16)*(1<<16),Sp=1/Oh,Iw=12,Ty=typeof TextDecoder>"u"?null:new TextDecoder("utf8");it.prototype={destroy:function(){this.buf=null},readFields:function(i,e,t){for(t=t||this.length;this.pos<t;){var n=this.readVarint(),s=n>>3,r=this.pos;this.type=n&7,i(s,e,this),this.pos===r&&this.skip(n)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=ml(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Ap(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=ml(this.buf,this.pos)+ml(this.buf,this.pos+4)*Oh;return this.pos+=8,i},readSFixed64:function(){var i=ml(this.buf,this.pos)+Ap(this.buf,this.pos+4)*Oh;return this.pos+=8,i},readFloat:function(){var i=pl.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=pl.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e=this.buf,t,n;return n=e[this.pos++],t=n&127,n<128||(n=e[this.pos++],t|=(n&127)<<7,n<128)||(n=e[this.pos++],t|=(n&127)<<14,n<128)||(n=e[this.pos++],t|=(n&127)<<21,n<128)?t:(n=e[this.pos],t|=(n&15)<<28,Lw(t,i,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2===1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=Iw&&Ty?zw(this.buf,e,i):Bw(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==it.Bytes)return i.push(this.readVarint(e));var t=xn(this);for(i=i||[];this.pos<t;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==it.Bytes)return i.push(this.readSVarint());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==it.Bytes)return i.push(this.readBoolean());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==it.Bytes)return i.push(this.readFloat());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==it.Bytes)return i.push(this.readDouble());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==it.Bytes)return i.push(this.readFixed32());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==it.Bytes)return i.push(this.readSFixed32());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==it.Bytes)return i.push(this.readFixed64());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==it.Bytes)return i.push(this.readSFixed64());var e=xn(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=i&7;if(e===it.Varint)for(;this.buf[this.pos++]>127;);else if(e===it.Bytes)this.pos=this.readVarint()+this.pos;else if(e===it.Fixed32)this.pos+=4;else if(e===it.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),xr(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),xr(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),xr(this.buf,i&-1,this.pos),xr(this.buf,Math.floor(i*Sp),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),xr(this.buf,i&-1,this.pos),xr(this.buf,Math.floor(i*Sp),this.pos+4),this.pos+=8},writeVarint:function(i){if(i=+i||0,i>268435455||i<0){Ow(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))},writeSVarint:function(i){this.writeVarint(i<0?-i*2-1:i*2)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(i.length*4),this.pos++;var e=this.pos;this.pos=Hw(this.buf,i,this.pos);var t=this.pos-e;t>=128&&Rp(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(i){this.realloc(4),pl.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),pl.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var t=0;t<e;t++)this.buf[this.pos++]=i[t]},writeRawMessage:function(i,e){this.pos++;var t=this.pos;i(e,this);var n=this.pos-t;n>=128&&Rp(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeMessage:function(i,e,t){this.writeTag(i,it.Bytes),this.writeRawMessage(e,t)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,Dw,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,Fw,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,Gw,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,Nw,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,kw,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,jw,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,$w,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,Vw,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,Ww,e)},writeBytesField:function(i,e){this.writeTag(i,it.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,it.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,it.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,it.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,it.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,it.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,it.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,it.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,it.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,it.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,!!e)}};function Lw(i,e,t){var n=t.buf,s,r;if(r=n[t.pos++],s=(r&112)>>4,r<128||(r=n[t.pos++],s|=(r&127)<<3,r<128)||(r=n[t.pos++],s|=(r&127)<<10,r<128)||(r=n[t.pos++],s|=(r&127)<<17,r<128)||(r=n[t.pos++],s|=(r&127)<<24,r<128)||(r=n[t.pos++],s|=(r&1)<<31,r<128))return Er(i,s,e);throw new Error("Expected varint not more than 10 bytes")}function xn(i){return i.type===it.Bytes?i.readVarint()+i.pos:i.pos+1}function Er(i,e,t){return t?e*4294967296+(i>>>0):(e>>>0)*4294967296+(i>>>0)}function Ow(i,e){var t,n;if(i>=0?(t=i%4294967296|0,n=i/4294967296|0):(t=~(-i%4294967296),n=~(-i/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Pw(t,n,e),Mw(n,e)}function Pw(i,e,t){t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos]=i&127}function Mw(i,e){var t=(i&7)<<4;e.buf[e.pos++]|=t|((i>>>=3)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127)))))}function Rp(i,e,t){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(n);for(var s=t.pos-1;s>=i;s--)t.buf[s+n]=t.buf[s]}function Dw(i,e){for(var t=0;t<i.length;t++)e.writeVarint(i[t])}function Fw(i,e){for(var t=0;t<i.length;t++)e.writeSVarint(i[t])}function Nw(i,e){for(var t=0;t<i.length;t++)e.writeFloat(i[t])}function kw(i,e){for(var t=0;t<i.length;t++)e.writeDouble(i[t])}function Gw(i,e){for(var t=0;t<i.length;t++)e.writeBoolean(i[t])}function jw(i,e){for(var t=0;t<i.length;t++)e.writeFixed32(i[t])}function $w(i,e){for(var t=0;t<i.length;t++)e.writeSFixed32(i[t])}function Vw(i,e){for(var t=0;t<i.length;t++)e.writeFixed64(i[t])}function Ww(i,e){for(var t=0;t<i.length;t++)e.writeSFixed64(i[t])}function ml(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+i[e+3]*16777216}function xr(i,e,t){i[t]=e,i[t+1]=e>>>8,i[t+2]=e>>>16,i[t+3]=e>>>24}function Ap(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function Bw(i,e,t){for(var n="",s=e;s<t;){var r=i[s],o=null,a=r>239?4:r>223?3:r>191?2:1;if(s+a>t)break;var l,u,h;a===1?r<128&&(o=r):a===2?(l=i[s+1],(l&192)===128&&(o=(r&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=i[s+1],u=i[s+2],(l&192)===128&&(u&192)===128&&(o=(r&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=i[s+1],u=i[s+2],h=i[s+3],(l&192)===128&&(u&192)===128&&(h&192)===128&&(o=(r&15)<<18|(l&63)<<12|(u&63)<<6|h&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),s+=a}return n}function zw(i,e,t){return Ty.decode(i.subarray(e,t))}function Hw(i,e,t){for(var n=0,s,r;n<e.length;n++){if(s=e.charCodeAt(n),s>55295&&s<57344)if(r)if(s<56320){i[t++]=239,i[t++]=191,i[t++]=189,r=s;continue}else s=r-55296<<10|s-56320|65536,r=null;else{s>56319||n+1===e.length?(i[t++]=239,i[t++]=191,i[t++]=189):r=s;continue}else r&&(i[t++]=239,i[t++]=191,i[t++]=189,r=null);s<128?i[t++]=s:(s<2048?i[t++]=s>>6|192:(s<65536?i[t++]=s>>12|224:(i[t++]=s>>18|240,i[t++]=s>>12&63|128),i[t++]=s>>6&63|128),i[t++]=s&63|128)}return t}class Yc extends jn{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new Yc(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=e-r[0],a=t-r[1],l=o*o+a*a;if(l<s){if(l===0)for(let u=0;u<this.stride;++u)n[u]=r[u];else{const u=this.getRadius()/Math.sqrt(l);n[0]=r[0]+u*o,n[1]=r[1]+u*a;for(let h=2;h<this.stride;++h)n[h]=r[h]}return n.length=this.stride,l}return s}containsXY(e,t){const n=this.flatCoordinates,s=e-n[0],r=t-n[1];return s*s+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return Ji(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(St(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:Ed(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+n;for(let r=1;r<t;++r)s[t+r]=e[r];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let r=$_(s,0,e,this.stride);s[r++]=s[0]+t;for(let o=1,a=this.stride;o<a;++o)s[r++]=s[o];s.length=r,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(Id(n,0,n.length,s,e,t,n)),this.changed()}translate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(j_(n,0,n.length,s,e,t,n)),this.changed()}}Yc.prototype.transform;const wy=Yc;class cc extends Ul{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(gt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(qe(this.geometries_[e],Pe.CHANGE,this.changed,this))}clone(){const e=new cc(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<hr(this.getExtent(),e,t))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(e,t,n,s);return s}containsXY(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)if(n[s].containsXY(e,t))return!0;return!1}computeExtent(e){La(e);const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)A_(e,t[n].getExtent());return e}getGeometries(){return Ip(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let s=!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(s=!0)}if(s){const r=new cc(null);return r.setGeometriesArray(t),r}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].rotate(e,t);this.changed()}scale(e,t,n){n||(n=wi(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(Ip(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ip(i){const e=[];for(let t=0,n=i.length;t<n;++t)e.push(i[t].clone());return e}const Yw=cc,Lp=xi();class Ca{constructor(e,t,n,s,r){this.styleFunction,this.extent_,this.id_=r,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=s}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?vd(this.flatCoordinates_):Cd(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=wi(this.getExtent());this.flatInteriorPoints_=Qd(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=xy(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Cy(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Xl(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let s=0,r=n.length;s<r;++s){const o=n[s],a=Xl(e,t,o,2,.5);Ki(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=ct(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const s=It(n)/It(t);Zi(Lp,n[0],n[3],s,-s,0,0,0),ps(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Lp,this.flatCoordinates_)}}getEnds(){return this.ends_}}Ca.prototype.getEndss=Ca.prototype.getEnds;Ca.prototype.getFlatCoordinates=Ca.prototype.getOrientedFlatCoordinates;const Op=Ca;class Uw extends _y{constructor(e){super(),e=e||{},this.dataProjection=new xd({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:Op,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,s){e.pos=t.geometry;const r=e.readVarint()+e.pos;let o=1,a=0,l=0,u=0,h=0,f=0;for(;e.pos<r;){if(!a){const m=e.readVarint();o=m&7,a=m>>3}a--,o===1||o===2?(l+=e.readSVarint(),u+=e.readSVarint(),o===1&&h>f&&(s.push(h),f=h),n.push(l,u),h+=2):o===7?h>f&&(n.push(n[f],n[f+1]),h+=2):Ge(!1,59)}h>f&&(s.push(h),f=h)}createFeature_(e,t,n){const s=t.type;if(s===0)return null;let r;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],u=[];this.readRawGeometry_(e,t,l,u);const h=Jw(s,u.length);if(this.featureClass_===Op)r=new this.featureClass_(h,l,u,o,a),r.transform(n.dataProjection);else{let f;if(h=="Polygon"){const v=Sw(l,u);f=v.length>1?new ef(l,"XY",v):new ar(l,"XY",u)}else f=h==="Point"?new Oi(l,"XY"):h==="LineString"?new ua(l,"XY"):h==="MultiPoint"?new zc(l,"XY"):h==="MultiLineString"?new Zd(l,"XY",u):null;const m=this.featureClass_;r=new m,this.geometryName_&&r.setGeometryName(this.geometryName_);const y=Na(f,!1,n);r.setGeometry(y),a!==void 0&&r.setId(a),r.setProperties(o,!0)}return r}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const s=ct(t.dataProjection);s.setWorldExtent(t.extent),t.dataProjection=s;const r=new Aw(e),o=r.readFields(Xw,{}),a=[];for(const l in o){if(n&&!n.includes(l))continue;const u=o[l],h=u?[0,0,u.extent,u.extent]:null;s.setExtent(h);for(let f=0,m=u.length;f<m;++f){const y=Zw(r,u,f),v=this.createFeature_(r,y,t);v!==null&&a.push(v)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Xw(i,e,t){if(i===3){const n={keys:[],values:[],features:[]},s=t.readVarint()+t.pos;t.readFields(Kw,n,s),n.length=n.features.length,n.length&&(e[n.name]=n)}}function Kw(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let n=null;const s=t.readVarint()+t.pos;for(;t.pos<s;)i=t.readVarint()>>3,n=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(n)}}function qw(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const s=e.layer.keys[t.readVarint()],r=e.layer.values[t.readVarint()];e.properties[s]=r}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function Zw(i,e,t){i.pos=e.features[t];const n=i.readVarint()+i.pos,s={layer:e,type:0,properties:{}};return i.readFields(qw,s,n),s}function Jw(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}const Qw=Uw,ge={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function by(i){return Math.pow(i,3)}function mo(i){return 1-by(1-i)}function Ph(i){return 3*i*i-2*i*i*i}function Sy(i){return i}let eb=class extends Aa{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Pe.CHANGE)}release(){this.state===ge.ERROR&&this.setState(ge.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==ge.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==ge.LOADED){e.interimTile=null;break}else e.getState()==ge.LOADING?t=e:e.getState()==ge.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ge.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Le()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:by(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}};const Uc=eb;class tb extends Uc{constructor(e,t,n,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ge.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ge.ERROR,this.unlistenImage_(),this.image_=ib(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ge.LOADED:this.state=ge.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ge.ERROR&&(this.state=ge.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ge.IDLE&&(this.state=ge.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Yd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function ib(){const i=Ht(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const Ry=tb,Ay=.5,nb=10,Pp=.25;class sb{constructor(e,t,n,s,r,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=vs(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){const I=A[0]+"/"+A[1];return a[I]||(a[I]=l(A)),a[I]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&tt(s)==tt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?tt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?tt(this.targetProj_.getExtent()):null;const u=bs(n),h=kc(n),f=Nc(n),m=Fc(n),y=this.transformInv_(u),v=this.transformInv_(h),E=this.transformInv_(f),b=this.transformInv_(m),S=nb+(o?Math.max(0,Math.ceil(Math.log2(Ch(n)/(o*o*256*256)))):0);if(this.addQuad_(u,h,f,m,y,v,E,b,S),this.wrapsXInSource_){let A=1/0;this.triangles_.forEach(function(I,R,M){A=Math.min(A,I.source[0][0],I.source[1][0],I.source[2][0])}),this.triangles_.forEach(I=>{if(Math.max(I.source[0][0],I.source[1][0],I.source[2][0])-A>this.sourceWorldWidth_/2){const R=[[I.source[0][0],I.source[0][1]],[I.source[1][0],I.source[1][1]],[I.source[2][0],I.source[2][1]]];R[0][0]-A>this.sourceWorldWidth_/2&&(R[0][0]-=this.sourceWorldWidth_),R[1][0]-A>this.sourceWorldWidth_/2&&(R[1][0]-=this.sourceWorldWidth_),R[2][0]-A>this.sourceWorldWidth_/2&&(R[2][0]-=this.sourceWorldWidth_);const M=Math.min(R[0][0],R[1][0],R[2][0]);Math.max(R[0][0],R[1][0],R[2][0])-M<this.sourceWorldWidth_/2&&(I.source=R)}})}a={}}addTriangle_(e,t,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,n]})}addQuad_(e,t,n,s,r,o,a,l,u){const h=zl([r,o,a,l]),f=this.sourceWorldWidth_?tt(h)/this.sourceWorldWidth_:null,m=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&f>.5&&f<1;let v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=zl([e,t,n,s]);v=tt(b)/this.targetWorldWidth_>Pp||v}!y&&this.sourceProj_.isGlobal()&&f&&(v=f>Pp||v)}if(!v&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!St(h,this.maxSourceExtent_))return;let E=0;if(!v&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)v=!0;else if(E=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),E!=1&&E!=2&&E!=4&&E!=8)return}if(u>0){if(!v){const b=[(e[0]+n[0])/2,(e[1]+n[1])/2],S=this.transformInv_(b);let A;y?A=(gs(r[0],m)+gs(a[0],m))/2-gs(S[0],m):A=(r[0]+a[0])/2-S[0];const I=(r[1]+a[1])/2-S[1];v=A*A+I*I>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const b=[(t[0]+n[0])/2,(t[1]+n[1])/2],S=this.transformInv_(b),A=[(s[0]+e[0])/2,(s[1]+e[1])/2],I=this.transformInv_(A);this.addQuad_(e,t,b,A,r,o,S,I,u-1),this.addQuad_(A,b,n,s,I,S,a,l,u-1)}else{const b=[(e[0]+t[0])/2,(e[1]+t[1])/2],S=this.transformInv_(b),A=[(n[0]+s[0])/2,(n[1]+s[1])/2],I=this.transformInv_(A);this.addQuad_(e,b,A,s,r,S,I,l,u-1),this.addQuad_(b,t,n,A,S,o,a,I,u-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}E&11||this.addTriangle_(e,n,s,r,a,l),E&14||this.addTriangle_(e,n,t,r,a,o),E&&(E&13||this.addTriangle_(t,s,e,o,l,r),E&7||this.addTriangle_(t,s,n,o,l,a))}calculateSourceExtent(){const e=si();return this.triangles_.forEach(function(t,n,s){const r=t.source;Uo(e,r[0]),Uo(e,r[1]),Uo(e,r[2])}),e}getTriangles(){return this.triangles_}}const Iy=sb;let ju;const Ur=[];function Mp(i,e,t,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),i.restore()}function $u(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function rb(){if(ju===void 0){const i=Ht(6,6,Ur);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",Mp(i,4,5,4,0),Mp(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;ju=$u(e,0)||$u(e,4)||$u(e,8),Ma(i),Ur.push(i.canvas)}return ju}function Ea(i,e,t,n){const s=$c(t,e,i);let r=Jg(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(r*=o);const a=i.getMetersPerUnit();a!==void 0&&(r/=a);const l=i.getExtent();if(!l||Ia(l,s)){const u=Jg(i,r,s)/r;isFinite(u)&&u>0&&(r/=u)}return r}function ob(i,e,t,n){const s=wi(t);let r=Ea(i,e,s,n);return(!isFinite(r)||r<=0)&&Ed(t,function(o){return r=Ea(i,e,o,n),isFinite(r)&&r>0}),r}function Ly(i,e,t,n,s,r,o,a,l,u,h,f){const m=Ht(Math.round(t*i),Math.round(t*e),Ur);if(f||(m.imageSmoothingEnabled=!1),l.length===0)return m.canvas;m.scale(t,t);function y(R){return Math.round(R*t)/t}m.globalCompositeOperation="lighter";const v=si();l.forEach(function(R,M,p){A_(v,R.extent)});const E=tt(v),b=It(v),S=Ht(Math.round(t*E/n),Math.round(t*b/n),Ur);f||(S.imageSmoothingEnabled=!1);const A=t/n;l.forEach(function(R,M,p){const k=R.extent[0]-v[0],W=-(R.extent[3]-v[3]),H=tt(R.extent),se=It(R.extent);R.image.width>0&&R.image.height>0&&S.drawImage(R.image,u,u,R.image.width-2*u,R.image.height-2*u,k*A,W*A,H*A,se*A)});const I=bs(o);return a.getTriangles().forEach(function(R,M,p){const k=R.source,W=R.target;let H=k[0][0],se=k[0][1],ce=k[1][0],pe=k[1][1],ve=k[2][0],Me=k[2][1];const ye=y((W[0][0]-I[0])/r),le=y(-(W[0][1]-I[1])/r),X=y((W[1][0]-I[0])/r),Z=y(-(W[1][1]-I[1])/r),we=y((W[2][0]-I[0])/r),De=y(-(W[2][1]-I[1])/r),We=H,J=se;H=0,se=0,ce-=We,pe-=J,ve-=We,Me-=J;const ut=[[ce,pe,0,0,X-ye],[ve,Me,0,0,we-ye],[0,0,ce,pe,Z-le],[0,0,ve,Me,De-le]],je=C1(ut);if(je){if(m.save(),m.beginPath(),rb()||!f){m.moveTo(X,Z);const Be=4,pt=ye-X,vt=le-Z;for(let Ze=0;Ze<Be;Ze++)m.lineTo(X+y((Ze+1)*pt/Be),Z+y(Ze*vt/(Be-1))),Ze!=Be-1&&m.lineTo(X+y((Ze+1)*pt/Be),Z+y((Ze+1)*vt/(Be-1)));m.lineTo(we,De)}else m.moveTo(X,Z),m.lineTo(ye,le),m.lineTo(we,De);m.clip(),m.transform(je[0],je[2],je[1],je[3],ye,le),m.translate(v[0]-We,v[3]-J),m.scale(n/t,-n/t),m.drawImage(S.canvas,0,0),m.restore()}}),Ma(S),Ur.push(S.canvas),h&&(m.save(),m.globalCompositeOperation="source-over",m.strokeStyle="black",m.lineWidth=1,a.getTriangles().forEach(function(R,M,p){const k=R.target,W=(k[0][0]-I[0])/r,H=-(k[0][1]-I[1])/r,se=(k[1][0]-I[0])/r,ce=-(k[1][1]-I[1])/r,pe=(k[2][0]-I[0])/r,ve=-(k[2][1]-I[1])/r;m.beginPath(),m.moveTo(se,ce),m.lineTo(W,H),m.lineTo(pe,ve),m.closePath(),m.stroke()}),m.restore()),m.canvas}class ab extends Uc{constructor(e,t,n,s,r,o,a,l,u,h,f,m){super(r,ge.IDLE,{interpolate:!!m}),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const y=s.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let E=this.sourceTileGrid_.getExtent();const b=v?On(y,v):y;if(Ch(b)===0){this.state=ge.EMPTY;return}const S=e.getExtent();S&&(E?E=On(E,S):E=S);const A=s.getResolution(this.wrappedTileCoord_[0]),I=ob(e,n,b,A);if(!isFinite(I)||I<=0){this.state=ge.EMPTY;return}const R=h!==void 0?h:Ay;if(this.triangulation_=new Iy(e,n,b,E,I*R,A),this.triangulation_.getTriangles().length===0){this.state=ge.EMPTY;return}this.sourceZ_=t.getZForResolution(I);let M=this.triangulation_.calculateSourceExtent();if(E&&(e.canWrapX()?(M[1]=Mt(M[1],E[1],E[3]),M[3]=Mt(M[3],E[1],E[3])):M=On(M,E)),!Ch(M))this.state=ge.EMPTY;else{const p=t.getTileRangeForExtentAndZ(M,this.sourceZ_);for(let k=p.minX;k<=p.maxX;k++)for(let W=p.minY;W<=p.maxY;W++){const H=u(this.sourceZ_,k,W,a);H&&this.sourceTiles_.push(H)}this.sourceTiles_.length===0&&(this.state=ge.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==ge.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=ge.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Ly(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ge.LOADED}this.changed()}load(){if(this.state==ge.IDLE){this.state=ge.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const n=t.getState();if(n==ge.IDLE||n==ge.LOADING){e++;const s=qe(t,Pe.CHANGE,function(r){const o=t.getState();(o==ge.LOADED||o==ge.ERROR||o==ge.EMPTY)&&(gt(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,n,s){t.getState()==ge.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(gt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ma(this.canvas_.getContext("2d")),Ur.push(this.canvas_),this.canvas_=null),super.release()}}const Mh=ab;class Oy{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Tr(i,e,t,n,s){return s!==void 0?(s.minX=i,s.maxX=e,s.minY=t,s.maxY=n,s):new Oy(i,e,t,n)}const Py=Oy;class lb extends Xd{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=si(),this.tmpTileRange_=new Py(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),s=t.getUseInterimTilesOnError();return n==ge.LOADED||n==ge.EMPTY||n==ge.ERROR&&!s}getTile(e,t,n,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,n,r,o);return u.getState()==ge.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=Ot(t.pixelToCoordinateTransform,e.slice()),r=n.getExtent();if(r&&!Ia(r,s))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,u=n.getRenderSource(),h=u.getTileGridForProjection(l.projection),f=u.getTilePixelRatio(t.pixelRatio);for(let m=h.getZForResolution(l.resolution);m>=h.getMinZoom();--m){const y=h.getTileCoordForCoordAndZ(s,m),v=u.getTile(m,y[1],y[2],o,a);if(!(v instanceof Ry||v instanceof Mh)||v instanceof Mh&&v.getState()===ge.EMPTY)return null;if(v.getState()!==ge.LOADED)continue;const E=h.getOrigin(m),b=Wt(h.getTileSize(m)),S=h.getResolution(m),A=Math.floor(f*((s[0]-E[0])/S-y[1]*b[0])),I=Math.floor(f*((E[1]-s[1])/S-y[2]*b[1])),R=Math.round(f*u.getGutterForProjection(l.projection));return this.getImageData(v.getImage(),A+R,I+R)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,u=e.pixelRatio,h=this.getLayer(),f=h.getSource(),m=f.getRevision(),y=f.getTileGridForProjection(r),v=y.getZForResolution(o,f.zDirection),E=y.getResolution(v);let b=e.extent;const S=e.viewState.resolution,A=f.getTilePixelRatio(u),I=Math.round(tt(b)/S*u),R=Math.round(It(b)/S*u),M=n.extent&&un(n.extent);M&&(b=On(b,un(n.extent)));const p=E*I/2/A,k=E*R/2/A,W=[a[0]-p,a[1]-k,a[0]+p,a[1]+k],H=y.getTileRangeForExtentAndZ(b,v),se={};se[v]={};const ce=this.createLoadedTileFinder(f,r,se),pe=this.tmpExtent,ve=this.tmpTileRange_;this.newTiles_=!1;const Me=l?Eh(s.center,S,l,e.size):void 0;for(let ut=H.minX;ut<=H.maxX;++ut)for(let je=H.minY;je<=H.maxY;++je){if(l&&!y.tileCoordIntersectsViewport([v,ut,je],Me))continue;const Be=this.getTile(v,ut,je,e);if(this.isDrawableTile(Be)){const Ze=Ve(this);if(Be.getState()==ge.LOADED){se[v][Be.tileCoord.toString()]=Be;let st=Be.inTransition(Ze);st&&n.opacity!==1&&(Be.endTransition(Ze),st=!1),!this.newTiles_&&(st||!this.renderedTiles.includes(Be))&&(this.newTiles_=!0)}if(Be.getAlpha(Ze,e.time)===1)continue}const pt=y.getTileCoordChildTileRange(Be.tileCoord,ve,pe);let vt=!1;pt&&(vt=ce(v+1,pt)),vt||y.forEachTileCoordParentTileRange(Be.tileCoord,ce,ve,pe)}const ye=E/o*u/A;Zi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-I/2,-R/2);const le=_d(this.pixelTransform);this.useContainer(t,le,this.getBackground(e));const X=this.context,Z=X.canvas;Dc(this.inversePixelTransform,this.pixelTransform),Zi(this.tempTransform,I/2,R/2,ye,ye,0,-I/2,-R/2),Z.width!=I||Z.height!=R?(Z.width=I,Z.height=R):this.containerReused||X.clearRect(0,0,I,R),M&&this.clipUnrotated(X,e,M),f.getInterpolate()||(X.imageSmoothingEnabled=!1),this.preRender(X,e),this.renderedTiles.length=0;let we=Object.keys(se).map(Number);we.sort(nr);let De,We,J;n.opacity===1&&(!this.containerReused||f.getOpaque(e.viewState.projection))?we=we.reverse():(De=[],We=[]);for(let ut=we.length-1;ut>=0;--ut){const je=we[ut],Be=f.getTilePixelSize(je,u,r),vt=y.getResolution(je)/E,Ze=Be[0]*vt*ye,st=Be[1]*vt*ye,ri=y.getTileCoordForCoordAndZ(bs(W),je),oi=y.getTileCoordExtent(ri),P=Ot(this.tempTransform,[A*(oi[0]-W[0])/E,A*(W[3]-oi[3])/E]),F=A*f.getGutterForProjection(r),z=se[je];for(const q in z){const $=z[q],te=$.tileCoord,de=ri[1]-te[1],ae=Math.round(P[0]-(de-1)*Ze),oe=ri[2]-te[2],Q=Math.round(P[1]-(oe-1)*st),me=Math.round(P[0]-de*Ze),ue=Math.round(P[1]-oe*st),fe=ae-me,Ce=Q-ue,Se=v===je,Xe=Se&&$.getAlpha(Ve(this),e.time)!==1;let Ne=!1;if(!Xe)if(De){J=[me,ue,me+fe,ue,me+fe,ue+Ce,me,ue+Ce];for(let rt=0,Ft=De.length;rt<Ft;++rt)if(v!==je&&je<We[rt]){const Ct=De[rt];St([me,ue,me+fe,ue+Ce],[Ct[0],Ct[3],Ct[4],Ct[7]])&&(Ne||(X.save(),Ne=!0),X.beginPath(),X.moveTo(J[0],J[1]),X.lineTo(J[2],J[3]),X.lineTo(J[4],J[5]),X.lineTo(J[6],J[7]),X.moveTo(Ct[6],Ct[7]),X.lineTo(Ct[4],Ct[5]),X.lineTo(Ct[2],Ct[3]),X.lineTo(Ct[0],Ct[1]),X.clip())}De.push(J),We.push(je)}else X.clearRect(me,ue,fe,Ce);this.drawTileImage($,e,me,ue,fe,Ce,F,Se),De&&!Xe?(Ne&&X.restore(),this.renderedTiles.unshift($)):this.renderedTiles.push($),this.updateUsedTiles(e.usedTiles,f,$)}}return this.renderedRevision=m,this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!rr(this.renderedExtent_,W),this.renderedExtent_=W,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(e,f,y,u,r,b,v,h.getPreload()),this.scheduleExpireCache(e,f),this.postRender(X,e),n.extent&&X.restore(),X.imageSmoothingEnabled=!0,le!==Z.style.transform&&(Z.style.transform=le),this.container}drawTileImage(e,t,n,s,r,o,a,l){const u=this.getTileImage(e);if(!u)return;const h=Ve(this),f=t.layerStatesArray[t.layerIndex],m=f.opacity*(l?e.getAlpha(h,t.time):1),y=m!==this.context.globalAlpha;y&&(this.context.save(),this.context.globalAlpha=m),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,s,r,o),y&&this.context.restore(),m!==f.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=function(s,r,o){const a=Ve(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const s=Ve(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}manageTilePyramid(e,t,n,s,r,o,a,l,u){const h=Ve(t);h in e.wantedTiles||(e.wantedTiles[h]={});const f=e.wantedTiles[h],m=e.tileQueue,y=n.getMinZoom(),v=e.viewState.rotation,E=v?Eh(e.viewState.center,e.viewState.resolution,v,e.size):void 0;let b=0,S,A,I,R,M,p;for(p=y;p<=a;++p)for(A=n.getTileRangeForExtentAndZ(o,p,A),I=n.getResolution(p),R=A.minX;R<=A.maxX;++R)for(M=A.minY;M<=A.maxY;++M)v&&!n.tileCoordIntersectsViewport([p,R,M],E)||(a-p<=l?(++b,S=t.getTile(p,R,M,s,r),S.getState()==ge.IDLE&&(f[S.getKey()]=!0,m.isKeyQueued(S.getKey())||m.enqueue([S,h,n.getTileCoordCenter(S.tileCoord),I])),u!==void 0&&u(S)):t.useTile(p,R,M,r));t.updateCacheSize(b,r)}}const My=lb,cb={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},ub={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class hb extends My{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=xi()}prepareTile(e,t,n){let s;const r=e.getState();return(r===ge.LOADED||r===ge.ERROR)&&(this.updateExecutorGroup_(e,t,n),this.tileImageNeedsRender_(e)&&(s=!0)),s}getTile(e,t,n,s){const r=s.pixelRatio,o=s.viewState,a=o.resolution,l=o.projection,u=this.getLayer(),h=u.getSource().getTile(e,t,n,r,l),f=s.viewHints,m=!(f[xt.ANIMATING]||f[xt.INTERACTING]);return(m||!h.wantedResolution)&&(h.wantedResolution=a),this.prepareTile(h,r,l)&&(m||Date.now()-s.time<8)&&u.getRenderMode()!=="vector"&&this.renderTileImage_(h,s),super.getTile(e,t,n,s)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?Ve(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const s=this.getLayer(),r=s.getRevision(),o=s.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(s);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==r&&l.renderedRenderOrder==o)return;const u=s.getSource(),h=s.getDeclutter(),f=u.getTileGrid(),y=u.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),v=u.getSourceTiles(t,n,e),E=Ve(s);delete e.hitDetectionImageData[E],e.executorGroups[E]=[],h&&(e.declutterExecutorGroups[E]=[]),l.dirty=!1;for(let b=0,S=v.length;b<S;++b){const A=v[b];if(A.getState()!=ge.LOADED)continue;const I=A.tileCoord,R=f.getTileCoordExtent(I),M=On(y,R),p=qi(M,s.getRenderBuffer()*a,this.tmpExtent),k=rr(R,M)?null:p,W=new ic(0,p,a,t),H=h?new ic(0,M,a,t):void 0,se=fy(a,t),ce=function(le){let X;const Z=le.getStyleFunction()||s.getStyleFunction();if(Z&&(X=Z(le,a)),X){const we=this.renderFeature(le,se,X,W,H);l.dirty=l.dirty||we}},pe=A.getFeatures();o&&o!==l.renderedRenderOrder&&pe.sort(o);for(let le=0,X=pe.length;le<X;++le){const Z=pe[le];(!k||St(k,Z.getGeometry().getExtent()))&&ce.call(this,Z)}const ve=W.finish(),Me=s.getRenderMode()!=="vector"&&h&&v.length===1?null:M,ye=new nc(Me,a,t,u.getOverlaps(),ve,s.getRenderBuffer());if(e.executorGroups[E].push(ye),H){const le=new nc(null,a,t,u.getOverlaps(),H.finish(),s.getRenderBuffer());e.declutterExecutorGroups[E].push(le)}}l.renderedRevision=r,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,n,s,r){const o=t.viewState.resolution,a=t.viewState.rotation;n=n??0;const l=this.getLayer(),h=l.getSource().getTileGridForProjection(t.viewState.projection),f=zl([e]);qi(f,o*n,f);const m={},y=function(b,S,A){let I=b.getId();I===void 0&&(I=Ve(b));const R=m[I];if(R){if(R!==!0&&A<R.distanceSq){if(A===0)return m[I]=!0,r.splice(r.lastIndexOf(R),1),s(b,l,S);R.geometry=S,R.distanceSq=A}}else{if(A===0)return m[I]=!0,s(b,l,S);r.push(m[I]={feature:b,layer:l,geometry:S,distanceSq:A,callback:s})}},v=this.renderedTiles;let E;for(let b=0,S=v.length;!E&&b<S;++b){const A=v[b],I=h.getTileCoordExtent(A.wrappedTileCoord);if(!St(I,f))continue;const R=Ve(l),M=[A.executorGroups[R]],p=A.declutterExecutorGroups[R];p&&M.push(p),M.some(k=>{const W=k===p?t.declutterTree.all().map(H=>H.value):null;for(let H=0,se=k.length;H<se;++H)if(E=k[H].forEachFeatureAtCoordinate(e,o,a,n,y,W),E)return!0})}return E}getFeatures(e){return new Promise((t,n)=>{const s=this.getLayer(),r=Ve(s),o=s.getSource(),a=this.renderedProjection,l=a.getExtent(),u=this.renderedResolution,h=o.getTileGridForProjection(a),f=Ot(this.renderedPixelToCoordinateTransform_,e.slice()),m=h.getTileCoordForCoordAndResolution(f,u);let y;for(let I=0,R=this.renderedTiles.length;I<R;++I)if(m.toString()===this.renderedTiles[I].tileCoord.toString()){if(y=this.renderedTiles[I],y.getState()===ge.LOADED){const M=h.getTileCoordExtent(y.tileCoord);o.getWrapX()&&a.canWrapX()&&!Hi(l,M)&&wd(f,a);break}y=void 0}if(!y||y.loadingSourceTiles>0){t([]);return}const v=h.getTileCoordExtent(y.wrappedTileCoord),E=bs(v),b=[(f[0]-E[0])/u,(E[1]-f[1])/u],S=y.getSourceTiles().reduce(function(I,R){return I.concat(R.getFeatures())},[]);let A=y.hitDetectionImageData[r];if(!A){const I=Wt(h.getTileSize(h.getZForResolution(u,o.zDirection))),R=this.renderedRotation_,M=[this.getRenderTransform(h.getTileCoordCenter(y.wrappedTileCoord),u,0,Ci,I[0]*Ci,I[1]*Ci,0)];A=uy(I,M,S,s.getStyleFunction(),h.getTileCoordExtent(y.wrappedTileCoord),y.getReplayState(s).renderedResolution,R),y.hitDetectionImageData[r]=A}t(hy(b,S,A))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const t=this.context,n=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();const s=e.viewHints,r=!(s[xt.ANIMATING]||s[xt.INTERACTING]),o=this.renderedTiles;for(let a=0,l=o.length;a<l;++a){const u=o[a],h=u.declutterExecutorGroups[Ve(this.getLayer())];if(h)for(let f=h.length-1;f>=0;--f)h[f].execute(this.context,1,this.getTileRenderTransform(u,e),e.viewState.rotation,r,void 0,e.declutterTree)}t.globalAlpha=n}getTileRenderTransform(e,t){const n=t.pixelRatio,s=t.viewState,r=s.center,o=s.resolution,a=s.rotation,l=t.size,u=Math.round(l[0]*n),h=Math.round(l[1]*n),m=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),y=e.tileCoord,v=m.getTileCoordExtent(e.wrappedTileCoord),E=m.getTileCoordExtent(y,this.tmpExtent)[0]-v[0];return md(Dl(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(r,o,a,n,u,h,E))}postRender(e,t){const n=t.viewHints,s=!(n[xt.ANIMATING]||n[xt.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;const r=this.getLayer(),o=r.getRenderMode(),a=e.globalAlpha;e.globalAlpha=r.getOpacity();const l=ub[o],u=t.viewState,h=u.rotation,f=r.getSource(),y=f.getTileGridForProjection(u.projection).getZForResolution(u.resolution,f.zDirection),v=this.renderedTiles,E=[],b=[];let S=!0;for(let A=v.length-1;A>=0;--A){const I=v[A];S=S&&!I.getReplayState(r).dirty;const R=I.executorGroups[Ve(r)].filter(H=>H.hasExecutors(l));if(R.length===0)continue;const M=this.getTileRenderTransform(I,t),p=I.tileCoord[0];let k=!1;const W=R[0].getClipCoords(M);if(W){for(let H=0,se=E.length;H<se;++H)if(y!==p&&p<b[H]){const ce=E[H];St([W[0],W[3],W[4],W[7]],[ce[0],ce[3],ce[4],ce[7]])&&(k||(e.save(),k=!0),e.beginPath(),e.moveTo(W[0],W[1]),e.lineTo(W[2],W[3]),e.lineTo(W[4],W[5]),e.lineTo(W[6],W[7]),e.moveTo(ce[6],ce[7]),e.lineTo(ce[4],ce[5]),e.lineTo(ce[2],ce[3]),e.lineTo(ce[0],ce[1]),e.clip())}E.push(W),b.push(p)}for(let H=0,se=R.length;H<se;++H)R[H].execute(e,1,M,h,s,l);k&&e.restore()}e.globalAlpha=a,this.ready=S,super.postRender(e,t)}renderFeature(e,t,n,s,r){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)o=sc(s,e,n[a],t,this.boundHandleStyleImageChange_,void 0,r)||o;else o=sc(s,e,n,t,this.boundHandleStyleImageChange_,void 0,r);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),s=t.getRevision(),r=e.wantedResolution;return n.renderedTileResolution!==r||n.renderedTileRevision!==s}renderTileImage_(e,t){const n=this.getLayer(),s=e.getReplayState(n),r=n.getRevision(),o=e.executorGroups[Ve(n)];s.renderedTileRevision=r;const a=e.wrappedTileCoord,l=a[0],u=n.getSource();let h=t.pixelRatio;const m=t.viewState.projection,y=u.getTileGridForProjection(m),v=y.getResolution(e.tileCoord[0]),E=t.pixelRatio/e.wantedResolution*v,b=y.getResolution(l),S=e.getContext(n);h=Math.round(Math.max(h,E/h));const A=u.getTilePixelSize(l,h,m);S.canvas.width=A[0],S.canvas.height=A[1];const I=h/E;if(I!==1){const k=zg(this.tmpTransform_);Dl(k,I,I),S.setTransform.apply(S,k)}const R=y.getTileCoordExtent(a,this.tmpExtent),M=E/b,p=zg(this.tmpTransform_);Dl(p,M,-M),e1(p,-R[0],-R[3]);for(let k=0,W=o.length;k<W;++k)o[k].execute(S,I,p,0,!0,cb[n.getRenderMode()]);s.renderedTileResolution=e.wantedResolution}}const db=hb,ls={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class fb extends oy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const n=e.renderMode||"hybrid";Ge(n=="hybrid"||n=="vector",28),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new db(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(ls.PRELOAD)}getUseInterimTilesOnError(){return this.get(ls.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(ls.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(ls.USE_INTERIM_TILES_ON_ERROR,e)}}const Dy=fb;let gb=class extends Uc{constructor(e,t,n,s,r,o){super(e,t,o),this.extent=null,this.format_=s,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=r,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ge.IDLE&&(this.setState(ge.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ge.ERROR)}setFeatures(e){this.features_=e,this.setState(ge.LOADED)}setLoader(e){this.loader_=e}};const pb=gb;class mb{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return Ge(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return Ge(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ge(!(e in this.entries_),16);const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}const Dh=mb;function Dp(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function _o(i,e,t){return i+"/"+e+"/"+t}function Fy(i){return _o(i[0],i[1],i[2])}function _b(i){const[e,t,n]=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number);return _o(e,t,n)}function Ny(i){return i.split("/").map(Number)}function nf(i){return(i[1]<<i[0])+i[2]}function yb(i,e){const t=i[0],n=i[1],s=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return r?r.containsXY(n,s):!0}class vb extends Dh{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=Ny(e)[0];this.forEach(s=>{s.tileCoord[0]!==n&&(this.remove(Fy(s.tileCoord)),s.release())})}}const sf=vb,ky=42,rf=256,wr=[0,0,0],qn=5;class Cb{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ge($x(this.resolutions_,function(s,r){return r-s},!0),17);let t;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ge(this.origins_.length==this.resolutions_.length,20));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=bs(n)),Ge(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ge(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:rf,Ge(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(s,r){const o=new Py(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([t,r,a])}forEachTileCoordParentTileRange(e,t,n,s){let r,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);u>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=Tr(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,u,n),t(u,r))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,o=e[2]*2;return Tr(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return Tr(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),u=Math.floor(r*l),h=Math.floor(o*l);if(t<s)return Tr(u,u,h,h,n);const f=Math.floor(l*(r+1))-1,m=Math.floor(l*(o+1))-1;return Tr(u,f,h,m,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeExtent(e,t,n){const s=this.getOrigin(e),r=this.getResolution(e),o=Wt(this.getTileSize(e),this.tmpSize_),a=s[0]+t.minX*o[0]*r,l=s[0]+(t.maxX+1)*o[0]*r,u=s[1]+t.minY*o[1]*r,h=s[1]+(t.maxY+1)*o[1]*r;return Ji(a,u,l,h,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,wr);const s=wr[1],r=wr[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,wr);const o=wr[1],a=wr[2];return Tr(s,o,r,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Wt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=Wt(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*r[0]*s,a=n[1]-(e[2]+1)*r[1]*s,l=o+r[0]*s,u=a+r[1]*s;return Ji(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),u=Wt(this.getTileSize(o),this.tmpSize_);let h=a*(e-l[0])/n/u[0],f=a*(l[1]-t)/n/u[1];return s?(h=rs(h,qn)-1,f=rs(f,qn)-1):(h=Fr(h,qn),f=Fr(f,qn)),Dp(o,h,f,r)}getTileCoordForXYAndZ_(e,t,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=Wt(this.getTileSize(n),this.tmpSize_);let u=(e-o[0])/a/l[0],h=(o[1]-t)/a/l[1];return s?(u=rs(u,qn)-1,h=rs(h,qn)-1):(u=Fr(u,qn),h=Fr(h,qn)),Dp(n,u,h,r)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Lc(this.resolutions_,e,t||0);return Mt(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return B_(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}const of=Cb,Vu={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function af(i){let e=i.getDefaultTileGrid();return e||(e=Tb(i),i.setDefaultTileGrid(e)),e}function Eb(i,e,t){const n=e[0],s=i.getTileCoordCenter(e),r=Xc(t);if(!Ia(r,s)){const o=tt(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return e}function xb(i,e,t,n){n=n!==void 0?n:"top-left";const s=Gy(i,e,t);return new of({extent:i,origin:s1(i,n),resolutions:s,tileSize:t})}function uc(i){const e=i||{},t=e.extent||ct("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Gy(t,e.maxZoom,e.tileSize,e.maxResolution)};return new of(n)}function Gy(i,e,t,n){e=e!==void 0?e:ky,t=Wt(t!==void 0?t:rf);const s=It(i),r=tt(i);n=n>0?n:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function Tb(i,e,t,n){const s=Xc(i);return xb(s,e,t,n)}function Xc(i){i=ct(i);let e=i.getExtent();if(!e){const t=180*la.degrees/i.getMetersPerUnit();e=Ji(-t,-t,t,t)}return e}class wb extends Kd{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Wt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new sf(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let o=!0,a,l,u;for(let h=n.minX;h<=n.maxX;++h)for(let f=n.minY;f<=n.maxY;++f)l=_o(t,h,f),u=!1,r.containsKey(l)&&(a=r.get(l),u=a.getState()===ge.LOADED,u&&(u=s(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,r){return Le()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:af(e)}getTileCacheForProjection(e){const t=this.getProjection();return Ge(t===null||In(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(t),o=Wt(s.getTileSize(e),this.tmpSize);return r==1?o:jd(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=Eb(n,e,t)),yb(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,s){}}class bb extends mn{constructor(e,t){super(e),this.tile=t}}const jy=wb;function Sb(i,e){const t=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(t,o[0].toString()).replace(n,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const u=o[0],h=e.getFullTileRange(u);return Ge(h,55),(h.getHeight()-o[2]-1).toString()})}}function $y(i,e){const t=i.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Sb(i[s],e);return Rb(n)}function Rb(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const s=nf(e),r=gs(s,i.length);return i[r](e,t,n)}}function Ab(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=n;r<=s;++r)e.push(i.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(i.replace(t[0],s.toString()));return e}return e.push(i),e}class lf extends jy{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===lf.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Ve(t),s=t.getState();let r;s==ge.LOADING?(this.tileLoadingKeys_[n]=!0,r=Vu.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==ge.ERROR?Vu.TILELOADERROR:s==ge.LOADED?Vu.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new bb(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Ab(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction($y(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const s=_o(e,t,n);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const Vy=lf,Fp=[];class Ib extends Uc{constructor(e,t,n,s){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=s.bind(void 0,this),this.wrappedTileCoord=n}getContext(e){const t=Ve(e);return t in this.context_||(this.context_[t]=Ht(1,1,Fp)),this.context_[t]}hasContext(e){return Ve(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=Ve(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];Ma(t),Fp.push(t.canvas),delete this.context_[e]}super.release()}}const Lb=Ib;class Ob extends Vy{constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||Xc(t),s=e.tileGrid||uc({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Mb,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new sf(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:pb,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],n=this.tileCache;if(n.getCount()===0)return t;const s=Ny(n.peekFirstKey())[0],r=this.tileGrid;return n.forEach(function(o){if(o.tileCoord[0]!==s||o.getState()!==ge.LOADED)return;const a=o.getSourceTiles();for(let l=0,u=a.length;l<u;++l){const h=a[l],f=h.tileCoord;if(St(e,r.getTileCoordExtent(f))){const m=h.getFeatures();if(m)for(let y=0,v=m.length;y<v;++y){const E=m[y],b=E.getGeometry();St(e,b.getExtent())&&t.push(E)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const n=this.getTileCacheForProjection(e),s=Object.keys(t).reduce((r,o)=>{const a=_b(o),l=n.peek(a);if(l){const u=l.sourceTiles;for(let h=0,f=u.length;h<f;++h)r[u[h].getKey()]=!0}return r},{});super.expireCache(e,t),this.sourceTileCache.expireCache(s)}getSourceTiles(e,t,n){if(n.getState()===ge.IDLE){n.setState(ge.LOADING);const s=n.wrappedTileCoord,r=this.getTileGridForProjection(t),o=r.getTileCoordExtent(s),a=s[0],l=r.getResolution(a);qi(o,-l,o);const u=this.tileGrid,h=u.getExtent();h&&On(o,h,o);const f=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(o,f,m=>{const y=this.tileUrlFunction(m,e,t),v=this.sourceTileCache.containsKey(y)?this.sourceTileCache.get(y):new this.tileClass(m,y?ge.IDLE:ge.EMPTY,y,this.format_,this.tileLoadFunction);n.sourceTiles.push(v);const E=v.getState();if(E<ge.LOADED){const b=S=>{this.handleTileChange(S);const A=v.getState();if(A===ge.LOADED||A===ge.ERROR){const I=v.getKey();I in n.errorTileKeys?v.getState()===ge.LOADED&&delete n.errorTileKeys[I]:n.loadingSourceTiles--,A===ge.ERROR?n.errorTileKeys[I]=!0:v.removeEventListener(Pe.CHANGE,b),n.loadingSourceTiles===0&&n.setState(_s(n.errorTileKeys)?ge.LOADED:ge.ERROR)}};v.addEventListener(Pe.CHANGE,b),n.loadingSourceTiles++}E===ge.IDLE&&(v.extent=u.getTileCoordExtent(m),v.projection=t,v.resolution=u.getResolution(m[0]),this.sourceTileCache.set(y,v),v.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(m=>m.getState()===ge.ERROR)?ge.ERROR:ge.LOADED)}return n.sourceTiles}getTile(e,t,n,s,r){const o=_o(e,t,n),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const u=[e,t,n];let h=this.getTileCoordForTileUrlFunction(u,r);const f=this.getTileGrid().getExtent(),m=this.getTileGridForProjection(r);if(h&&f){const E=m.getTileCoordExtent(h);qi(E,-m.getResolution(e),E),St(f,E)||(h=null)}let y=!0;if(h!==null){const E=this.tileGrid,b=m.getResolution(e),S=E.getZForResolution(b,1),A=m.getTileCoordExtent(h);qi(A,-b,A),E.forEachTileCoord(A,S,I=>{y=y&&!this.tileUrlFunction(I,s,r)})}const v=new Lb(u,y?ge.EMPTY:ge.IDLE,h,this.getSourceTiles.bind(this,s,r));return v.key=a,l?(v.interimTile=l,v.refreshInterimChain(),this.tileCache.replace(o,v)):this.tileCache.set(o,v),v}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const s=this.tileGrid,r=s.getResolutions().slice(),o=r.map(function(u,h){return s.getOrigin(h)}),a=r.map(function(u,h){return s.getTileSize(h)}),l=ky+1;for(let u=r.length;u<l;++u)r.push(r[u-1]/2),o.push(o[u-1]),a.push(a[u-1]);n=new of({extent:s.getExtent(),origins:o,resolutions:r,tileSizes:a}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),r=Wt(s.getTileSize(e),this.tmpSize);return[Math.round(r[0]*t),Math.round(r[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}const Pb=Ob;function Mb(i,e){i.setLoader(function(t,n,s){py(e,i.getFormat(),t,n,s,i.onLoad.bind(i),i.onError.bind(i))})}class Db extends _y{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(_l(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(_l(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Le()}readFeaturesFromObject(e,t){return Le()}readGeometry(e,t){return this.readGeometryFromObject(_l(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Le()}readProjection(e){return this.readProjectionFromObject(_l(e))}readProjectionFromObject(e){return Le()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Le()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Le()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Le()}}function _l(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}else if(i!==null)return i;return null}const Wy=Db;class Fb extends Wy{constructor(e){e=e||{},super(),this.dataProjection=ct(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=ct(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const s=Fh(n.geometry,t),r=new eo;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&r.setGeometryName(n.geometry_name),r.setGeometry(s),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(e,t){const n=e;let s=null;if(n.type==="FeatureCollection"){const r=e;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],t))}else s=[this.readFeatureFromObject(e,t)];return s}readGeometryFromObject(e,t){return Fh(e,t)}readProjectionFromObject(e){const t=e.crs;let n;return t?t.type=="name"?n=ct(t.properties.name):t.type==="EPSG"?n=ct("EPSG:"+t.properties.code):Ge(!1,36):n=this.dataProjection,n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},s=e.getId();if(s!==void 0&&(n.id=s),!e.hasProperties())return n;const r=e.getProperties(),o=e.getGeometry();return o&&(n.geometry=Nh(o,t),delete r[e.getGeometryName()]),_s(r)||(n.properties=r),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let s=0,r=e.length;s<r;++s)n.push(this.writeFeatureObject(e[s],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return Nh(e,this.adaptOptions(t))}}function Fh(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=kb(i);break}case"LineString":{t=Gb(i);break}case"Polygon":{t=Wb(i);break}case"MultiPoint":{t=$b(i);break}case"MultiLineString":{t=jb(i);break}case"MultiPolygon":{t=Vb(i);break}case"GeometryCollection":{t=Nb(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return Na(t,!1,e)}function Nb(i,e){const t=i.geometries.map(function(n){return Fh(n,e)});return new Yw(t)}function kb(i){return new Oi(i.coordinates)}function Gb(i){return new ua(i.coordinates)}function jb(i){return new Zd(i.coordinates)}function $b(i){return new zc(i.coordinates)}function Vb(i){return new ef(i.coordinates)}function Wb(i){return new ar(i.coordinates)}function Nh(i,e){i=Na(i,!0,e);const t=i.getType();let n;switch(t){case"Point":{n=Xb(i);break}case"LineString":{n=zb(i);break}case"Polygon":{n=Kb(i,e);break}case"MultiPoint":{n=Yb(i);break}case"MultiLineString":{n=Hb(i);break}case"MultiPolygon":{n=Ub(i,e);break}case"GeometryCollection":{n=Bb(i,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function Bb(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return Nh(n,e)})}}function zb(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function Hb(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function Yb(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function Ub(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function Xb(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function Kb(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}const qb=Fb;class Zb extends hd{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Le()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Zi(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Dc(s,n)}forEachFeatureAtCoordinate(e,t,n,s,r,o,a,l){let u;const h=t.viewState;function f(R,M,p,k){return r.call(o,M,R?p:null,k)}const m=h.projection,y=wd(e.slice(),m),v=[[0,0]];if(m.canWrapX()&&s){const R=m.getExtent(),M=tt(R);v.push([-M,0],[M,0])}const E=t.layerStatesArray,b=E.length,S=[],A=[];for(let R=0;R<v.length;R++)for(let M=b-1;M>=0;--M){const p=E[M],k=p.layer;if(k.hasRenderer()&&Hd(p,h)&&a.call(l,k)){const W=k.getRenderer(),H=k.getSource();if(W&&H){const se=H.getWrapX()?y:e,ce=f.bind(null,p.managed);A[0]=se[0]+v[R][0],A[1]=se[1]+v[R][1],u=W.forEachFeatureAtCoordinate(A,t,n,ce,S)}if(u)return u}}if(S.length===0)return;const I=1/S.length;return S.forEach((R,M)=>R.distanceSq+=M*I),S.sort((R,M)=>R.distanceSq-M.distanceSq),S.some(R=>u=R.callback(R.feature,R.layer,R.geometry)),u}hasFeatureAtCoordinate(e,t,n,s,r,o){return this.forEachFeatureAtCoordinate(e,t,n,s,aa,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(e){Le()}scheduleExpireIconCache(e){tc.canExpireCache()&&e.postRenderFunctions.push(Jb)}}function Jb(i,e){tc.expire()}const Qb=Zb;class eS extends Qb{constructor(e){super(e),this.fontChangeListenerKey_=qe(wn,Qr.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Wc+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new ly(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){gt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ds.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=e.viewState;this.children_.length=0;const s=[];let r=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const u=l.layer,h=u.getSourceState();if(!Hd(l,n)||h!="ready"&&h!="undefined"){u.unrender();continue}const f=u.render(e,r);f&&(f!==r&&(this.children_.push(f),r=f),"getDeclutter"in u&&s.push(u))}for(let o=s.length-1;o>=0;--o)s[o].renderDeclutter(e);Q1(this.element_,this.children_),this.dispatchRenderEvent(ds.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}const tS=eS;class iS extends mn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}const Lr=iS;class nS extends Lr{constructor(e,t,n,s,r,o){super(e,t,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Qn=nS,Rt={SINGLECLICK:"singleclick",CLICK:Pe.CLICK,DBLCLICK:Pe.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},kh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class sS extends Aa{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=qe(n,kh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=qe(n,kh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Pe.TOUCHMOVE,this.boundHandleTouchMove_,b_?{passive:!1}:!1)}emulateClick_(e){let t=new Qn(Rt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Qn(Rt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Qn(Rt.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Rt.POINTERUP||t.type==Rt.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Rt.POINTERDOWN||t.type==Rt.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Qn(Rt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(gt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Qn(Rt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(const n in e){const s=e[n];this.down_[n]=typeof s=="function"?sr:s}if(this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(qe(n,Rt.POINTERMOVE,this.handlePointerMove_,this),qe(n,Rt.POINTERUP,this.handlePointerUp_,this),qe(this.element_,Rt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(qe(this.element_.getRootNode(),Rt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Qn(Rt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Qn(Rt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(gt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Pe.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(gt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(gt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const rS=sS,Sn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Kt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},hc=1/0;class oS{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ra(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){Ge(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=hc?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,r=t[e],o=n[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),h=u<s&&n[u]<n[l]?u:l;t[e]=t[h],n[e]=n[h],e=h}t[e]=r,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,r=n[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(s[a]>o)n[t]=n[a],s[t]=s[a],t=a;else break}n[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const r=t.length;let o,a,l;for(a=0;a<r;++a)o=t[a],l=e(o),l==hc?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,t[s++]=o);t.length=s,n.length=s,this.heapify_()}}const aS=oS;class lS extends aS{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Pe.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===ge.LOADED||n===ge.ERROR||n===ge.EMPTY){n!==ge.ERROR&&t.removeEventListener(Pe.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0,s,r,o;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===ge.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}const cS=lS;function uS(i,e,t,n,s){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return hc;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}const Vi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Np(i,e,t){return function(n,s,r,o,a){if(!n)return;if(!s&&!e)return n;const l=e?0:r[0]*s,u=e?0:r[1]*s,h=a?a[0]:0,f=a?a[1]:0;let m=i[0]+l/2+h,y=i[2]-l/2+h,v=i[1]+u/2+f,E=i[3]-u/2+f;m>y&&(m=(y+m)/2,y=m),v>E&&(v=(E+v)/2,E=v);let b=Mt(n[0],m,y),S=Mt(n[1],v,E);if(o&&t&&s){const A=30*s;b+=-A*Math.log(1+Math.max(0,m-n[0])/A)+A*Math.log(1+Math.max(0,n[0]-y)/A),S+=-A*Math.log(1+Math.max(0,v-n[1])/A)+A*Math.log(1+Math.max(0,n[1]-E)/A)}return[b,S]}}function hS(i){return i}function cf(i,e,t,n){const s=tt(e)/t[0],r=It(e)/t[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function uf(i,e,t){let n=Math.min(i,e);const s=50;return n*=Math.log(1+s*Math.max(0,i/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/i-1))/s+1),Mt(n,t/2,e*2)}function dS(i,e,t,n){return e=e!==void 0?e:!0,function(s,r,o,a){if(s!==void 0){const l=i[0],u=i[i.length-1],h=t?cf(l,t,o,n):l;if(a)return e?uf(s,h,u):Mt(s,u,h);const f=Math.min(h,s),m=Math.floor(Lc(i,f,r));return i[m]>h&&m<i.length-1?i[m+1]:i[m]}}}function fS(i,e,t,n,s,r){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(o,a,l,u){if(o!==void 0){const h=s?cf(e,s,l,r):e;if(u)return n?uf(o,h,t):Mt(o,t,h);const f=1e-9,m=Math.ceil(Math.log(e/h)/Math.log(i)-f),y=-a*(.5-f)+.5,v=Math.min(h,o),E=Math.floor(Math.log(e/v)/Math.log(i)+y),b=Math.max(m,E),S=e/Math.pow(i,b);return Mt(S,t,h)}}}function kp(i,e,t,n,s){return t=t!==void 0?t:!0,function(r,o,a,l){if(r!==void 0){const u=n?cf(i,n,a,s):i;return!t||!l?Mt(r,e,u):uf(r,u,e)}}}function hf(i){if(i!==void 0)return 0}function Gp(i){if(i!==void 0)return i}function gS(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function pS(i){return i=i||Yr(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=i?0:e}}const Wu=0;class mS extends Di{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Sd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&w1(),e.center&&(e.center=Tn(e.center,this.projection_)),e.extent&&(e.extent=un(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Vi)delete t[a];this.setProperties(t,!0);const n=yS(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=_S(e),r=n.constraint,o=vS(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenter();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-t[3]+t[1]-s[1]),a=r/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=Tn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Tn(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const h=arguments[s];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(s===t){n&&yl(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;s<t;++s){const h=arguments[s],f={start:r,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Ph,callback:n};if(h.center&&(f.sourceCenter=o,f.targetCenter=h.center.slice(),o=f.targetCenter),h.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(h.zoom),a=f.targetResolution):h.resolution&&(f.sourceResolution=a,f.targetResolution=h.resolution,a=f.targetResolution),h.rotation!==void 0){f.sourceRotation=l;const m=gs(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+m,l=f.targetRotation}CS(f)?f.complete=!0:r+=f.duration,u.push(f)}this.animations_.push(u),this.setHint(xt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[xt.ANIMATING]>0}getInteracting(){return this.hints_[xt.INTERACTING]>0}cancelAnimations(){this.setHint(xt.ANIMATING,-this.hints_[xt.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&yl(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const u=e-l.start;let h=l.duration>0?u/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const f=l.easing(h);if(l.sourceCenter){const m=l.sourceCenter[0],y=l.sourceCenter[1],v=l.targetCenter[0],E=l.targetCenter[1];this.nextCenter_=l.targetCenter;const b=m+f*(v-m),S=y+f*(E-y);this.targetCenter_=[b,S]}if(l.sourceResolution&&l.targetResolution){const m=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const y=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(m,0,y,!0);this.targetCenter_=this.calculateCenterZoom(v,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=m,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const m=f===1?gs(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const y=this.constraints_.rotation(m,!0);this.targetCenter_=this.calculateCenterRotate(y,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=m}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(xt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&yl(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],Td(n,e-this.getRotation()),P_(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=t[0]-e*(t[0]-s[0])/r,a=t[1]-e*(t[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&wh(e,this.getProjection())}getCenterInternal(){return this.get(Vi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Ad(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ge(t,1);const n=this.getResolution();Ge(n!==void 0,2);const s=this.getRotation();return Ge(s!==void 0,3),zr(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Vi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(un(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=tt(e)/t[0],s=It(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(Vi.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/t;return function(o){return Math.log(n/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Bu(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const r=Lc(this.resolutions_,e,1);t=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Mt(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,Mt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(Ge(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){Ge(!Gc(e),25);const s=un(e,this.getProjection());n=bp(s)}else if(e.getType()==="Circle"){const s=un(e.getExtent(),this.getProjection());n=bp(s),n.rotate(this.getRotation(),wi(s))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,h=-1/0;for(let f=0,m=r.length;f<m;f+=o){const y=r[f]*n-r[f+1]*s,v=r[f]*s+r[f+1]*n;a=Math.min(a,y),l=Math.min(l,v),u=Math.max(u,y),h=Math.max(h,v)}return[a,l,u,h]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],r=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const u=this.getRotation(),h=Math.sin(u),f=Math.cos(u),m=wi(a);m[0]+=(s[1]-s[3])/2*l,m[1]+=(s[0]-s[2])/2*l;const y=m[0]*f-m[1]*h,v=m[1]*f+m[0]*h,E=this.getConstrainedCenter([y,v],l),b=t.callback?t.callback:sr;t.duration!==void 0?this.animateInternal({resolution:l,center:E,duration:t.duration,easing:t.easing},b):(this.targetResolution_=l,this.targetCenter_=E,this.applyTargetState_(!1,!0),yl(b,!0))}centerOn(e,t,n){this.centerOnInternal(Tn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(Bu(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=Bu(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,n);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=wh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Tn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Tn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Tn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Vi.ROTATION)!==s&&this.set(Vi.ROTATION,s),this.get(Vi.RESOLUTION)!==o&&(this.set(Vi.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Vi.CENTER)||!Yl(this.get(Vi.CENTER),a))&&this.set(Vi.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!Yl(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:mo,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(xt.INTERACTING,1)}endInteraction(e,t,n){n=n&&Tn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.setHint(xt.INTERACTING,-1),this.resolveConstraints(e,t,n)}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function yl(i,e){setTimeout(function(){i(e)},0)}function _S(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return Np(i.extent,i.constrainOnlyCenter,t)}const e=Sd(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Np(t,!1,!1)}return hS}function yS(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:Wu,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,u=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,f=i.showFullExtent!==void 0?i.showFullExtent:!1,m=Sd(i.projection,"EPSG:3857"),y=m.getExtent();let v=i.constrainOnlyCenter,E=i.extent;if(!u&&!E&&m.isGlobal()&&(v=!1,E=y),i.resolutions!==void 0){const b=i.resolutions;t=b[o],n=b[a]!==void 0?b[a]:b[b.length-1],i.constrainResolution?e=dS(b,h,!v&&E,f):e=kp(t,n,h,!v&&E,f)}else{const S=(y?Math.max(tt(y),It(y)):360*la.degrees/m.getMetersPerUnit())/rf/Math.pow(2,Wu),A=S/Math.pow(2,28-Wu);t=i.maxResolution,t!==void 0?o=0:t=S/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=S/Math.pow(l,a):n=A),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=fS(l,t,n,h,!v&&E,f):e=kp(t,n,h,!v&&E,f)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function vS(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?pS():t===!1?Gp:typeof t=="number"?gS(t):Gp}return hf}function CS(i){return!(i.sourceCenter&&i.targetCenter&&!Yl(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Bu(i,e,t,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,l=i[1]*r+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const u=a*r-l*o,h=l*r+a*o;return[u,h]}const ns=mS;class ES extends Di{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Zl(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Zl(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)gt(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==sr&&this.listenerKeys.push(qe(e,Sn.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const df=ES;class xS extends df{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Pe.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Wc+" "+Vd+(this.collapsed_&&this.collapsible_?" "+ap:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},n=[];let s=!0;const r=e.layerStatesArray;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(!Hd(l,e.viewState))continue;const u=l.layer.getSource();if(!u)continue;const h=u.getAttributions();if(!h)continue;const f=h(e);if(f)if(s=s&&u.getAttributionsCollapsible()!==!1,Array.isArray(f))for(let m=0,y=f.length;m<y;++m)f[m]in t||(n.push(f[m]),t[f[m]]=!0);else f in t||(n.push(f),t[f]=!0)}return this.overrideCollapsible_||this.setCollapsible(s),n}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ws(t,this.renderedAttributions_)){K_(this.ulElement_);for(let s=0,r=t.length;s<r;++s){const o=document.createElement("li");o.innerHTML=t[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ap),this.collapsed_?op(this.collapseLabel_,this.label_):op(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const TS=xS;class wS extends df{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(Pe.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Wc+" "+Vd,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(hl)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:mo}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(hl);!r&&n===0?this.element.classList.add(hl):r&&n!==0&&this.element.classList.remove(hl)}this.label_.style.transform=s}this.rotation_=n}}const bS=wS;class SS extends df{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(Pe.CLICK,this.handleClick_.bind(this,n),!1);const f=document.createElement("button");f.className=r,f.setAttribute("type","button"),f.title=u,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(Pe.CLICK,this.handleClick_.bind(this,-n),!1);const m=t+" "+Wc+" "+Vd,y=this.element;y.className=m,y.appendChild(h),y.appendChild(f),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:mo})):n.setZoom(r)}}}const RS=SS;function AS(i){i=i||{};const e=new cn;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new RS(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new bS(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new TS(i.attributionOptions)),e}const jp={ACTIVE:"active"};class IS extends Di{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(jp.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(jp.ACTIVE,e)}setMap(e){this.map_=e}}function LS(i,e,t){const n=i.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:Sy,center:i.getConstrainedCenter(s)})}}function ff(i,e,t,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+e),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:mo})}const ka=IS;class OS extends ka{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Rt.DBLCLICK){const n=e.originalEvent,s=e.map,r=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();ff(a,o,r,this.duration_),n.preventDefault(),t=!0}return!t}}const PS=OS;class MS extends ka{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Rt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Rt.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Rt.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Rt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function gf(i){const e=i.length;let t=0,n=0;for(let s=0;s<e;s++)t+=i[s].clientX,n+=i[s].clientY;return{clientX:t/e,clientY:n/e}}const Ga=MS;function Gh(i){const e=arguments;return function(t){let n=!0;for(let s=0,r=e.length;s<r&&(n=n&&e[s](t),!!n);++s);return n}}const DS=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},FS=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},NS=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},By=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?NS(i):!0},kS=aa,zy=function(i){const e=i.originalEvent;return e.button==0&&!(Kx&&qx&&e.ctrlKey)},Hy=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},GS=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Yy=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},zu=function(i){const e=i.originalEvent;return Ge(e!==void 0,56),e.pointerType=="mouse"},jS=function(i){const e=i.originalEvent;return Ge(e!==void 0,56),e.isPrimary&&e.button===0};class $S extends Ga{constructor(e){super({stopDown:Oc}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Gh(Hy,jS);this.condition_=e.onFocusOnly?Gh(By,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(gf(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();M_(r,a.getResolution()),Td(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:mo})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const VS=$S;class WS extends Ga{constructor(e){e=e||{},super({stopDown:Oc}),this.condition_=e.condition?e.condition:FS,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!zu(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===hf)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return zu(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return zu(e)&&zy(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const BS=WS;class zS extends hd{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new ar([s])}getGeometry(){return this.geometry_}}const HS=zS,vl={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Hu extends mn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class YS extends Ga{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new HS(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:zy,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],r=n[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Hu(vl.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Hu(t?vl.BOXEND:vl.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Hu(vl.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}const US=YS;class XS extends US{constructor(e){e=e||{};const t=e.condition?e.condition:GS;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:mo})}}const KS=XS,Vs={LEFT:37,UP:38,RIGHT:39,DOWN:40};class qS extends ka{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Hy(t)&&Yy(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Pe.KEYDOWN){const n=e.originalEvent,s=n.keyCode;if(this.condition_(e)&&(s==Vs.DOWN||s==Vs.LEFT||s==Vs.RIGHT||s==Vs.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;s==Vs.DOWN?u=-a:s==Vs.LEFT?l=-a:s==Vs.RIGHT?l=a:u=a;const h=[l,u];Td(h,o.getRotation()),LS(o,h,this.duration_),n.preventDefault(),t=!0}}return!t}}const ZS=qS;class JS extends ka{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:Yy,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Pe.KEYDOWN||e.type==Pe.KEYPRESS){const n=e.originalEvent,s=n.charCode;if(this.condition_(e)&&(s=="+".charCodeAt(0)||s=="-".charCodeAt(0))){const r=e.map,o=s=="+".charCodeAt(0)?this.delta_:-this.delta_,a=r.getView();ff(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}const QS=JS;class eR{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const tR=eR;class iR extends ka{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:kS;this.condition_=e.onFocusOnly?Gh(By,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Pe.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==Pe.WHEEL&&(r=s.deltaY,Ux&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=gd),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Mt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),ff(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const nR=iR;class sR extends Ga{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Oc),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==hf&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(gf(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const rR=sR;class oR extends Ga{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Oc),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(gf(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const aR=oR;function lR(i){i=i||{};const e=new cn,t=new tR(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new BS),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new PS({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new VS({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new rR),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new aR({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new ZS),e.push(new QS({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new nR({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new KS({duration:i.zoomDuration})),e}function Uy(i){if(i instanceof po){i.setMapInternal(null);return}i instanceof or&&i.getLayers().forEach(Uy)}function Xy(i,e){if(i instanceof po){i.setMapInternal(e);return}if(i instanceof or){const t=i.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)Xy(t[n],e)}}let cR=class extends Di{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=uR(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:gd,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=xi(),this.pixelToCoordinateTransform_=xi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||AS(),this.interactions=t.interactions||lR({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new cS(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Kt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Kt.VIEW,this.handleViewChanged_),this.addChangeListener(Kt.SIZE,this.handleSizeChanged_),this.addChangeListener(Kt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof ns)&&e.view.then(function(s){n.setView(new ns(s))}),this.controls.addEventListener(fi.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(fi.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(fi.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(fi.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(fi.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(fi.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Xy(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:aa,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof or?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:aa,r=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(Kt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return wh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ot(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Kt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof cn){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Tn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ot(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Kt.SIZE)}getView(){return this.get(Kt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return uS(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new Qn(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===kh.POINTERDOWN||n===Pe.WHEEL||n===Pe.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[xt.ANIMATING]||o[xt.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(ds.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ds.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Lr(Sn.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Lr(Sn.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let s=0,r=n.length;s<r;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)gt(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Pe.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Pe.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Zl(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new tS(this)),this.mapBrowserEventHandler_=new rS(this,this.moveTolerance_);for(const r in Rt)this.mapBrowserEventHandler_.addEventListener(Rt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Pe.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Pe.WHEEL,this.boundHandleBrowserEvent_,b_?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[qe(n,Pe.KEYDOWN,this.handleBrowserEvent,this),qe(n,Pe.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(gt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(gt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=qe(e,Qr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=qe(e,Pe.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(gt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new ts("addlayer",e)),this.layerGroupPropertyListenerKeys_=[qe(e,Qr.PROPERTYCHANGE,this.render,this),qe(e,Pe.CHANGE,this.render,this),qe(e,"addlayer",this.handleLayerAdd_,this),qe(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Uy(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(t!==void 0&&sp(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:zr(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Ve(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=zr(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Gc(this.previousExtent_)&&!rr(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Lr(Sn.MOVESTART,this,s)),this.previousExtent_=La(this.previousExtent_)),this.previousExtent_&&!r.viewHints[xt.ANIMATING]&&!r.viewHints[xt.INTERACTING]&&!rr(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Lr(Sn.MOVEEND,this,r)),R_(r.extent,this.previousExtent_))),this.dispatchEvent(new Lr(Sn.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(Sn.LOADSTART)||this.hasListener(Sn.LOADEND)||this.hasListener(ds.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new ts("removelayer",t)),this.set(Kt.LAYERGROUP,e)}setSize(e){this.set(Kt.SIZE,e)}setTarget(e){this.set(Kt.TARGET,e)}setView(e){if(!e||e instanceof ns){this.set(Kt.VIEW,e);return}this.set(Kt.VIEW,new ns);const t=this;e.then(function(n){t.setView(new ns(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(t=[r,o],!sp(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&N_("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!ws(t,n))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(t=[parseInt(n.width,10),parseInt(n.height,10)]),e.setViewportSize(t)}}};function uR(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new or({layers:i.layers});t[Kt.LAYERGROUP]=n,t[Kt.TARGET]=i.target,t[Kt.VIEW]=i.view instanceof ns?i.view:new ns;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new cn(i.controls.slice()):(Ge(typeof i.controls.getArray=="function",47),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new cn(i.interactions.slice()):(Ge(typeof i.interactions.getArray=="function",48),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new cn(i.overlays.slice()):(Ge(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new cn,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}const Ko=cR;class hR extends sy{constructor(e,t,n,s,r,o,a){const l=e.getExtent(),u=t.getExtent(),h=u?On(n,u):n,f=wi(h),m=Ea(e,t,f,s),y=Ay,v=new Iy(e,t,h,l,m*y,s),E=v.calculateSourceExtent(),b=o(E,m,r),S=b?ze.IDLE:ze.EMPTY,A=b?b.getPixelRatio():1;super(n,s,A,S),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=v,this.targetResolution_=s,this.targetExtent_=n,this.sourceImage_=b,this.sourcePixelRatio_=A,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ze.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ze.LOADED){const t=tt(this.targetExtent_)/this.targetResolution_,n=It(this.targetExtent_)/this.targetResolution_;this.canvas_=Ly(t,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}load(){if(this.state==ze.IDLE){this.state=ze.LOADING,this.changed();const e=this.sourceImage_.getState();e==ze.LOADED||e==ze.ERROR?this.reproject_():(this.sourceListenerKey_=qe(this.sourceImage_,Pe.CHANGE,function(t){const n=this.sourceImage_.getState();(n==ze.LOADED||n==ze.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){gt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const dR=hR,Yu={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class fR extends mn{constructor(e,t){super(e),this.image=t}}class Ky extends Kd{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const n=Lc(t,e,0);e=t[n]}return e}getImage(e,t,n,s){const r=this.getProjection();if(!r||!s||In(r,s))return r&&(s=r),this.getImageInternal(e,t,n,s);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&In(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==t&&rr(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new dR(r,s,e,t,n,(o,a,l)=>this.getImageInternal(o,a,l,r),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,n,s){return Le()}handleImageChange(e){const t=e.target;let n;switch(t.getState()){case ze.LOADING:this.loading=!0,n=Yu.IMAGELOADSTART;break;case ze.LOADED:this.loading=!1,n=Yu.IMAGELOADEND;break;case ze.ERROR:this.loading=!1,n=Yu.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new fR(n,t))}}function pf(i,e){i.getImage().src=e}class gR extends po{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(ls.PRELOAD)}setPreload(e){this.set(ls.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ls.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ls.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const pR=gR;class mR extends pR{constructor(e){super(e)}createRenderer(){return new My(this)}}const ss=mR;class _R extends Vy{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:yR,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Ry,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!In(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!In(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||In(t,e)))return this.tileGrid;const n=Ve(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=af(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||In(t,e))return this.tileCache;const n=Ve(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new sf(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,s,r,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,r),u=l?this.tileUrlFunction(l,s,r):void 0,h=new this.tileClass(a,u!==void 0?ge.IDLE:ge.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(Pe.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,n,s,r){const o=this.getProjection();if(!o||!r||In(o,r))return this.getTileInternal(e,t,n,s,o||r);const a=this.getTileCacheForProjection(r),l=[e,t,n];let u;const h=Fy(l);a.containsKey(h)&&(u=a.get(h));const f=this.getKey();if(u&&u.key==f)return u;const m=this.getTileGridForProjection(o),y=this.getTileGridForProjection(r),v=this.getTileCoordForTileUrlFunction(l,r),E=new Mh(o,m,r,y,l,v,this.getTilePixelRatio(s),this.getGutter(),(b,S,A,I)=>this.getTileInternal(b,S,A,I,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return E.key=f,u?(E.interimTile=u,E.refreshInterimChain(),a.replace(h,E)):a.set(h,E),E}getTileInternal(e,t,n,s,r){let o=null;const a=_o(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,n,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,t,n,s,r,l),u.getState()==ge.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=ct(e);if(n){const s=Ve(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function yR(i,e){i.getImage().src=e}const Kc=_R;const vR={props:{onClose:{type:Function,default:()=>{}},onChangLayerVisible:{type:Function,default:()=>{}},onDeleteLayer:{type:Function,default:()=>{}},onLockLayer:{type:Function,default:()=>{}},onChangeOrderLayer:{type:Function,default:()=>{}},currentLayers:{type:Array,default:[]},selectLock:{type:Boolean,default:!1}},setup(i,{emit:e}){const t=pn({});return{props:i,state:t}}},$n=i=>(rd("data-v-debeefc3"),i=i(),od(),i),CR={class:"rounded-4 bg-white"},ER={class:"row mx-0 align-items-center flex-nowrap text-center p-2 fw-bold"},xR=$n(()=>ee("p",{class:"mb-0 fs-5"},"已選擇的圖層",-1)),TR=$n(()=>ee("svg",{width:"32",height:"32",viewBox:"0 0 24 24"},[ee("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10zm0-11.414L9.172 7.757L7.757 9.172L10.586 12l-2.829 2.828l1.415 1.415L12 13.414l2.828 2.829l1.415-1.415L13.414 12l2.829-2.828l-1.415-1.415L12 10.586z"})],-1)),wR=[TR],bR=$n(()=>ee("hr",{class:"my-0"},null,-1)),SR={class:"py-3 px-4 content"},RR={class:"allControl d-flex align-items-center justify-content-end mb-0"},AR=$n(()=>ee("svg",{viewBox:"0 0 25 24",fill:"currentColor"},[ee("path",{d:"M8.02381 9.33333H14.881V7.80952C14.881 7.1746 14.6587 6.63492 14.2143 6.19048C13.7698 5.74603 13.2302 5.52381 12.5952 5.52381C11.9603 5.52381 11.4206 5.74603 10.9762 6.19048C10.5317 6.63492 10.3095 7.1746 10.3095 7.80952H8.78571C8.78571 6.75556 9.15727 5.85702 9.90038 5.1139C10.643 4.3713 11.5413 4 12.5952 4C13.6492 4 14.5477 4.3713 15.2909 5.1139C16.0335 5.85702 16.4048 6.75556 16.4048 7.80952V9.33333H17.1667C17.5857 9.33333 17.9446 9.48241 18.2432 9.78057C18.5414 10.0792 18.6905 10.4381 18.6905 10.8571V18.4762C18.6905 18.8952 18.5414 19.2541 18.2432 19.5528C17.9446 19.8509 17.5857 20 17.1667 20H8.02381C7.60476 20 7.24616 19.8509 6.948 19.5528C6.64933 19.2541 6.5 18.8952 6.5 18.4762V10.8571C6.5 10.4381 6.64933 10.0792 6.948 9.78057C7.24616 9.48241 7.60476 9.33333 8.02381 9.33333ZM12.5952 16.1905C13.0143 16.1905 13.3731 16.0414 13.6718 15.7432C13.97 15.4446 14.119 15.0857 14.119 14.6667C14.119 14.2476 13.97 13.8888 13.6718 13.5901C13.3731 13.2919 13.0143 13.1429 12.5952 13.1429C12.1762 13.1429 11.8176 13.2919 11.5194 13.5901C11.2208 13.8888 11.0714 14.2476 11.0714 14.6667C11.0714 15.0857 11.2208 15.4446 11.5194 15.7432C11.8176 16.0414 12.1762 16.1905 12.5952 16.1905Z"})],-1)),IR=$n(()=>ee("svg",{viewBox:"0 0 25 24",fill:"currentColor"},[ee("path",{d:"M7.5 21C6.95 21 6.47933 20.8043 6.088 20.413C5.696 20.021 5.5 19.55 5.5 19V6H4.5V4H9.5V3H15.5V4H20.5V6H19.5V19C19.5 19.55 19.3043 20.021 18.913 20.413C18.521 20.8043 18.05 21 17.5 21H7.5ZM9.5 17H11.5V8H9.5V17ZM13.5 17H15.5V8H13.5V17Z"})],-1)),LR={class:"list-unstyled d-flex flex-wrap flex-column-reverse"},OR={key:0,class:"d-flex justify-content-between align-items-center border-bottom py-2"},PR={class:"tool"},MR=["onClick"],DR=$n(()=>ee("svg",{viewBox:"0 0 25 24",fill:"currentColor"},[ee("path",{d:"M9.49991 19.84H15.4999V11.84H20.3399L12.4999 4.00003L4.65991 11.84H9.49991V19.84Z",fill:"#808080"})],-1)),FR=[DR],NR=["onClick"],kR=$n(()=>ee("svg",{viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ee("path",{d:"M9.49991 4H15.4999V12H20.3399L12.4999 19.84L4.65991 12H9.49991V4Z",fill:"#808080"})],-1)),GR=[kR],jR=["onClick"],$R=$n(()=>ee("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[ee("path",{d:"M12.3333 10C11.8029 10 11.2942 10.2107 10.9191 10.5858C10.544 10.9609 10.3333 11.4696 10.3333 12C10.3333 12.5304 10.544 13.0391 10.9191 13.4142C11.2942 13.7893 11.8029 14 12.3333 14C12.8638 14 13.3725 13.7893 13.7475 13.4142C14.1226 13.0391 14.3333 12.5304 14.3333 12C14.3333 11.4696 14.1226 10.9609 13.7475 10.5858C13.3725 10.2107 12.8638 10 12.3333 10ZM12.3333 15.3333C11.4493 15.3333 10.6014 14.9821 9.97631 14.357C9.35119 13.7319 9 12.8841 9 12C9 11.1159 9.35119 10.2681 9.97631 9.64298C10.6014 9.01786 11.4493 8.66667 12.3333 8.66667C13.2174 8.66667 14.0652 9.01786 14.6904 9.64298C15.3155 10.2681 15.6667 11.1159 15.6667 12C15.6667 12.8841 15.3155 13.7319 14.6904 14.357C14.0652 14.9821 13.2174 15.3333 12.3333 15.3333ZM12.3333 7C9 7 6.15333 9.07333 5 12C6.15333 14.9267 9 17 12.3333 17C15.6667 17 18.5133 14.9267 19.6667 12C18.5133 9.07333 15.6667 7 12.3333 7Z",fill:"#808080"})],-1)),VR=[$R],WR=["onClick"],BR=$n(()=>ee("svg",{viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ee("path",{d:"M7.5 21C6.95 21 6.47933 20.8043 6.088 20.413C5.696 20.021 5.5 19.55 5.5 19V6H4.5V4H9.5V3H15.5V4H20.5V6H19.5V19C19.5 19.55 19.3043 20.021 18.913 20.413C18.521 20.8043 18.05 21 17.5 21H7.5ZM9.5 17H11.5V8H9.5V17ZM13.5 17H15.5V8H13.5V17Z",fill:"#808080"})],-1)),zR=[BR];function HR(i,e,t,n,s,r){return et(),nt("div",CR,[ee("div",ER,[xR,ee("a",{href:"",class:"closeBtn position-absolute col-auto",onClick:e[0]||(e[0]=jt((...o)=>n.props.onClose&&n.props.onClose(...o),["prevent"]))},wR)]),bR,ee("div",SR,[ee("div",RR,[ee("a",{href:"",class:Ei(["d-flex align-items-center text-decoration-none me-4",{lockUp:n.props.selectLock,unlock:!n.props.selectLock}]),onClick:e[1]||(e[1]=jt(()=>{n.props.onLockLayer()},["prevent"]))},[AR,oa(" 鎖定圖層 ")],2),ee("a",{href:"",class:Ei(["d-flex align-items-center text-decoration-none",{disabled:n.props.currentLayers.length<=1}]),onClick:e[2]||(e[2]=jt(()=>{n.props.currentLayers.length>0&&n.props.onDeleteLayer({action:"selectLayerMode",value:{layerName:"all"}})},["prevent"]))},[IR,oa(" 全部刪除 ")],2)]),ee("ul",LR,[(et(!0),nt(di,null,zo(n.props.currentLayers,(o,a)=>(et(),nt("li",null,[(et(),nt("div",OR,[ee("div",null,jr(o==null?void 0:o.label),1),ee("div",PR,[ee("a",{href:"",onClick:jt(l=>n.props.onChangeOrderLayer({action:"changeOrder",value:{movement:"up",id:o.id,key:a}}),["prevent"])},FR,8,MR),ee("a",{href:"",onClick:jt(l=>n.props.onChangeOrderLayer({action:"changeOrder",value:{movement:"down",id:o.id,key:a}}),["prevent"])},GR,8,NR),ee("a",{href:"",class:Ei({Invisible:!(o!=null&&o.visible)}),onClick:jt(()=>{n.props.onChangLayerVisible({action:"changeLayerVisible",value:{key:a}})},["prevent"])},VR,10,jR),ee("a",{href:"",onClick:jt(l=>n.props.onDeleteLayer({action:"selectLayerMode",value:{id:o==null?void 0:o.id}}),["prevent"])},zR,8,WR)])]))]))),256))])])])}const YR=Ts(vR,[["render",HR],["__scopeId","data-v-debeefc3"]]),Xt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class UR extends Di{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+eT,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Xt.ELEMENT,this.handleElementChanged),this.addChangeListener(Xt.MAP,this.handleMapChanged),this.addChangeListener(Xt.OFFSET,this.handleOffsetChanged),this.addChangeListener(Xt.POSITION,this.handlePositionChanged),this.addChangeListener(Xt.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Xt.ELEMENT)}getId(){return this.id}getMap(){return this.get(Xt.MAP)||null}getOffset(){return this.get(Xt.OFFSET)}getPosition(){return this.get(Xt.POSITION)}getPositioning(){return this.get(Xt.POSITIONING)}handleElementChanged(){K_(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(Zl(this.element),gt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=qe(e,Sn.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Xt.ELEMENT,e)}setMap(e){this.set(Xt.MAP,e)}setOffset(e){this.set(Xt.OFFSET,e)}setPosition(e){this.set(Xt.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Xt.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),s=this.getElement(),r=this.getRect(s,[Z1(s),J1(s)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Hi(n,r)){const a=r[0]-n[0],l=n[2]-r[2],u=r[1]-n[1],h=n[3]-r[3],f=[0,0];if(a<0?f[0]=a-o:l<0&&(f[0]=Math.abs(l)+o),u<0?f[1]=u-o:h<0&&(f[1]=Math.abs(h)+o),f[0]!==0||f[1]!==0){const m=t.getView().getCenterInternal(),y=t.getPixelFromCoordinateInternal(m);if(!y)return;const v=[y[0]+f[0],y[1]+f[1]],E=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(v),duration:E.duration,easing:E.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),s=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[s,r,s+t[0],r+t[1]]}setPositioning(e){this.set(Xt.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),s=e.getSize();this.updateRenderedPosition(n,s)}updateRenderedPosition(e,t){const n=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+s[0])+"px",a=Math.round(e[1]+s[1])+"px";let l="0%",u="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?l="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(l="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?u="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(u="-50%");const h=`translate(${l}, ${u}) translate(${o}, ${a})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,n.transform=h)}getOptions(){return this.options}}const dc=UR;class XR extends Kc{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:uc({extent:Xc(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const xa=XR;class KR extends ln{constructor(e){super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const n=t.getGeometry();return Ge(n.getType()=="Point",10),n},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,n){this.source.loadFeatures(e,t,n),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(Pe.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(Pe.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const n=e===0?0:Math.min(t,e)/e,s=e!==this.distance||this.interpolationRatio!==n;this.distance=e,this.minDistance=t,this.interpolationRatio=n,s&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=si(),t=this.distance*this.resolution,n=this.source.getFeatures(),s={};for(let r=0,o=n.length;r<o;r++){const a=n[r];if(!(Ve(a)in s)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();vd(u,e),qi(e,t,e);const h=this.source.getFeaturesInExtent(e).filter(function(f){const m=Ve(f);return m in s?!1:(s[m]=!0,!0)});this.features.push(this.createCluster(h,e))}}}}createCluster(e,t){const n=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?P_(n,l.getCoordinates()):e.splice(a,1)}M_(n,1/e.length);const s=wi(t),r=this.interpolationRatio,o=new Oi([n[0]*(1-r)+s[0]*r,n[1]*(1-r)+s[1]*r]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new eo({geometry:o,features:e})}}const qy=KR;function Ta(i,e){const t=[];Object.keys(e).forEach(function(s){e[s]!==null&&e[s]!==void 0&&t.push(s+"="+encodeURIComponent(e[s]))});const n=t.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}class qR extends Ky{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,n=e.imageLoadFunction!==void 0?e.imageLoadFunction:pf;super({attributions:e.attributions,interpolate:e.interpolate,projection:ct(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new ry(this.imageExtent_,void 0,1,this.url_,t,n),this.imageSize_=e.imageSize?e.imageSize:null,this.image_.addEventListener(Pe.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,n,s){return St(e,this.image_.getExtent())?this.image_:null}getUrl(){return this.url_}handleImageChange(e){if(this.image_.getState()==ze.LOADED){const t=this.image_.getExtent(),n=this.image_.getImage();let s,r;this.imageSize_?(s=this.imageSize_[0],r=this.imageSize_[1]):(s=n.width,r=n.height);const o=tt(t),a=It(t),l=o/s,u=a/r;let h=s,f=r;if(l>u?h=Math.round(o/u):f=Math.round(a/l),h!==s||f!==r){const m=Ht(h,f);this.getInterpolate()||(m.imageSmoothingEnabled=!1);const y=m.canvas;m.drawImage(n,0,0,s,r,0,0,y.width,y.height),this.image_.setImage(y)}}super.handleImageChange(e)}}const ZR=qR,cs="1.3.0",Zn=4,$p=[101,101];class JR extends Ky{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:pf,this.params_=Object.assign({},e.params),this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getFeatureInfoUrl(e,t,n,s){if(this.url_===void 0)return;const r=ct(n),o=this.getProjection();o&&o!==r&&(t=Ea(o,r,e,t),e=$c(e,r,o));const a=zr(e,t,0,$p),l={SERVICE:"WMS",VERSION:cs,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(l,this.params_,s);const u=Fr((e[0]-a[0])/t,Zn),h=Fr((a[3]-e[1])/t,Zn);return l[this.v13_?"I":"X"]=u,l[this.v13_?"J":"Y"]=h,this.getRequestUrl_(a,$p,1,o||r,l)}getLegendUrl(e,t){if(this.url_===void 0)return;const n={SERVICE:"WMS",VERSION:cs,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const s=this.params_.LAYERS;if(!(!Array.isArray(s)||s.length===1))return;n.LAYER=s}if(e!==void 0){const s=this.getProjection()?this.getProjection().getMetersPerUnit():1,r=28e-5;n.SCALE=e*s/r}return Object.assign(n,t),Ta(this.url_,n)}getParams(){return this.params_}getImageInternal(e,t,n,s){if(this.url_===void 0)return null;t=this.findNearestResolution(t),n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const r=t/n,o=wi(e),a=rs(tt(e)/r,Zn),l=rs(It(e)/r,Zn),u=zr(o,r,0,[a,l]),h=rs(this.ratio_*tt(e)/r,Zn),f=rs(this.ratio_*It(e)/r,Zn),m=zr(o,r,0,[h,f]),y=this.image_;if(y&&this.renderedRevision_==this.getRevision()&&y.getResolution()==t&&y.getPixelRatio()==n&&Hi(y.getExtent(),u))return y;const v={SERVICE:"WMS",VERSION:cs,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(v,this.params_),this.imageSize_[0]=qg(tt(m)/r,Zn),this.imageSize_[1]=qg(It(m)/r,Zn);const E=this.getRequestUrl_(m,this.imageSize_,n,s,v);return this.image_=new ry(m,t,n,E,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Pe.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(e,t,n,s,r){if(Ge(this.url_!==void 0,9),r[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(r.STYLES=""),n!=1)switch(this.serverType_){case"geoserver":const l=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+l:r.FORMAT_OPTIONS="dpi:"+l;break;case"mapserver":r.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":r.DPI=90*n;break;default:Ge(!1,8);break}r.WIDTH=t[0],r.HEIGHT=t[1];const o=s.getAxisOrientation();let a;return this.v13_&&o.substr(0,2)=="ne"?a=[e[1],e[0],e[3],e[2]]:a=e,r.BBOX=a.join(","),Ta(this.url_,r)}getUrl(){return this.url_}setImageLoadFunction(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){const e=this.params_.VERSION||cs;this.v13_=O_(e,"1.3")>=0}}const QR=JR,eA='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class tA extends xa{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[eA];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const iA=tA;class nA extends Kc{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=e.params||{},this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=si(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const t=[];for(const n in this.params_)t[e++]=n+"-"+this.params_[n];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,n,s,r,o){const a=this.urls;if(!a)return;const l=r.getCode().split(/:(?=\d+$)/).pop();o.SIZE=t[0]+","+t[1],o.BBOX=n.join(","),o.BBOXSR=l,o.IMAGESR=l,o.DPI=Math.round(o.DPI?o.DPI*s:90*s);let u;if(a.length==1)u=a[0];else{const f=gs(nf(e),a.length);u=a[f]}const h=u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Ta(h,o)}getTilePixelRatio(e){return this.hidpi_?e:1}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,n){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(n)),s.getResolutions().length<=e[0])return;t!=1&&!this.hidpi_&&(t=1);const r=s.getTileCoordExtent(e,this.tmpExtent_);let o=Wt(s.getTileSize(e[0]),this.tmpSize);t!=1&&(o=jd(o,t,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,o,r,t,n,a)}}const sA=nA;class rA extends Kc{constructor(e){e=e||{};const t=Object.assign({},e.params),n="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=si(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,n,s){const r=ct(n),o=this.getProjection();let a=this.getTileGrid();a||(a=this.getTileGridForProjection(r));const l=a.getZForResolution(t,this.zDirection),u=a.getTileCoordForCoordAndZ(e,l);if(a.getResolutions().length<=u[0])return;let h=a.getResolution(u[0]),f=a.getTileCoordExtent(u,this.tmpExtent_),m=Wt(a.getTileSize(u[0]),this.tmpSize);const y=this.gutter_;y!==0&&(m=np(m,y,this.tmpSize),f=qi(f,h*y,f)),o&&o!==r&&(h=Ea(o,r,e,h),f=G_(f,r,o),e=$c(e,r,o));const v={SERVICE:"WMS",VERSION:cs,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(v,this.params_,s);const E=Math.floor((e[0]-f[0])/h),b=Math.floor((f[3]-e[1])/h);return v[this.v13_?"I":"X"]=E,v[this.v13_?"J":"Y"]=b,this.getRequestUrl_(u,m,f,1,o||r,v)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:cs,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const s=this.params_.LAYERS;if(!(!Array.isArray(s)||s.length===1))return;n.LAYER=s}if(e!==void 0){const s=this.getProjection()?this.getProjection().getMetersPerUnit():1,r=28e-5;n.SCALE=e*s/r}return Object.assign(n,t),Ta(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,n,s,r,o){const a=this.urls;if(!a)return;if(o.WIDTH=t[0],o.HEIGHT=t[1],o[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(o.STYLES=""),s!=1)switch(this.serverType_){case"geoserver":const f=90*s+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+f:o.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":o.MAP_RESOLUTION=90*s;break;case"carmentaserver":case"qgis":o.DPI=90*s;break;default:Ge(!1,52);break}const l=r.getAxisOrientation(),u=n;if(this.v13_&&l.substr(0,2)=="ne"){let f;f=n[0],u[0]=n[1],u[1]=f,f=n[2],u[2]=n[3],u[3]=f}o.BBOX=u.join(",");let h;if(a.length==1)h=a[0];else{const f=gs(nf(e),a.length);h=a[f]}return Ta(h,o)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const n in this.params_)t[e++]=n+"-"+this.params_[n];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||cs;this.v13_=O_(e,"1.3")>=0}tileUrlFunction(e,t,n){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(n)),s.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const r=s.getResolution(e[0]);let o=s.getTileCoordExtent(e,this.tmpExtent_),a=Wt(s.getTileSize(e[0]),this.tmpSize);const l=this.gutter_;l!==0&&(a=np(a,l,this.tmpSize),o=qi(o,r*l,o)),t!=1&&(a=jd(a,t,this.tmpSize));const u={SERVICE:"WMS",VERSION:cs,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(u,this.params_),this.getRequestUrl_(e,a,o,t,n,u)}}const qo=rA;window.ol&&ol.ext&&!ol.ext.input&&(ol.ext.input={});var oA=class extends Di{constructor(e){e=e||{},super();var t=this.input=e.input;t||(t=this.input=document.createElement("INPUT"),e.type&&t.setAttribute("type",e.type),e.min!==void 0&&t.setAttribute("min",e.min),e.max!==void 0&&t.setAttribute("max",e.max),e.step!==void 0&&t.setAttribute("step",e.step),e.parent&&e.parent.appendChild(t)),e.disabled&&(t.disabled=!0),e.checked!==void 0&&(t.checked=!!e.checked),e.val!==void 0&&(t.value=e.val),e.hidden&&(t.style.display="none"),t.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this));var n;t.addEventListener("focusout",function(){this.element&&(n&&clearTimeout(n),n=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(e,t){var n=function(s){this.moving=!0,this.element.classList.add("ol-moving");var r=function(o){o.type==="pointerup"&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",r),document.removeEventListener("pointercancel",r),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),o.target===e&&t(o),o.stopPropagation(),o.preventDefault()}.bind(this);document.addEventListener("pointermove",r,!1),document.addEventListener("pointerup",r,!1),document.addEventListener("pointercancel",r,!1),s.stopPropagation(),s.preventDefault()}.bind(this);e.addEventListener("mousedown",n,!1),e.addEventListener("touchstart",n,!1)}setValue(e){e!==void 0&&(this.input.value=e),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},mf=class extends oA{constructor(e){e=e||{},super(e);var t=this.element=document.createElement("LABEL");e.html instanceof Element?t.appendChild(e.html):e.html!==void 0&&(t.innerHTML=e.html),t.className=("ol-ext-check ol-ext-checkbox "+(e.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),t.appendChild(document.createElement("SPAN")),e.after&&t.appendChild(document.createTextNode(e.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},aA=class extends mf{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-toggle-switch "+(e.className||"")).trim()}},lA=class extends mf{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-check ol-ext-radio "+(e.className||"")).trim()}},Ye={};Ye.create=function(i,e){e=e||{};var t;if(i==="TEXT")t=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(t);else{t=document.createElement(i),/button/i.test(i)&&t.setAttribute("type","button");for(var n in e)switch(n){case"className":{e.className&&e.className.trim&&t.setAttribute("class",e.className.trim());break}case"text":{t.innerText=e.text;break}case"html":{e.html instanceof Element?t.appendChild(e.html):e.html!==void 0&&(t.innerHTML=e.html);break}case"parent":{e.parent&&e.parent.appendChild(t);break}case"options":{if(/select/i.test(i))for(var s in e.options)Ye.create("OPTION",{html:s,value:e.options[s],parent:t});break}case"style":{Ye.setStyle(t,e.style);break}case"change":case"click":{Ye.addListener(t,n,e[n]);break}case"on":{for(var r in e.on)Ye.addListener(t,r,e.on[r]);break}case"checked":{t.checked=!!e.checked;break}default:{t.setAttribute(n,e[n]);break}}}return t};Ye.createSwitch=function(i){var e=Ye.create("INPUT",{type:"checkbox",on:i.on,click:i.click,change:i.change,parent:i.parent}),t=Object.assign({input:e},i||{});return new aA(t),e};Ye.createCheck=function(i){var e=Ye.create("INPUT",{name:i.name,type:i.type==="radio"?"radio":"checkbox",on:i.on,parent:i.parent}),t=Object.assign({input:e},i||{});return i.type==="radio"?new lA(t):new mf(t),e};Ye.setHTML=function(i,e){e instanceof Element?i.appendChild(e):e!==void 0&&(i.innerHTML=e)};Ye.appendText=function(i,e){i.appendChild(document.createTextNode(e||""))};Ye.addListener=function(i,e,t,n){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(s){i.addEventListener(s,t,n)})};Ye.removeListener=function(i,e,t){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(n){i.removeEventListener(n,t)})};Ye.show=function(i){i.style.display=""};Ye.hide=function(i){i.style.display="none"};Ye.hidden=function(i){return Ye.getStyle(i,"display")==="none"};Ye.toggle=function(i){i.style.display=i.style.display==="none"?"":"none"};Ye.setStyle=function(i,e){for(var t in e)switch(t){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":{typeof e[t]=="number"?i.style[t]=e[t]+"px":i.style[t]=e[t];break}default:i.style[t]=e[t]}};Ye.getStyle=function(i,e){var t,n=(i.ownerDocument||document).defaultView;if(n&&n.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),t=n.getComputedStyle(i,null).getPropertyValue(e);else if(i.currentStyle&&(e=e.replace(/-(\w)/g,function(s,r){return r.toUpperCase()}),t=i.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(t)))return function(s){var r=i.style.left,o=i.runtimeStyle.left;return i.runtimeStyle.left=i.currentStyle.left,i.style.left=s||0,s=i.style.pixelLeft+"px",i.style.left=r,i.runtimeStyle.left=o,s}(t);return/px$/.test(t)?parseInt(t):t};Ye.outerHeight=function(i){return i.offsetHeight+Ye.getStyle(i,"marginBottom")};Ye.outerWidth=function(i){return i.offsetWidth+Ye.getStyle(i,"marginLeft")};Ye.offsetRect=function(i){var e=i.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};Ye.getFixedOffset=function(i){var e={left:0,top:0},t=function(n){if(!n)return e;if(Ye.getStyle(n,"position")==="absolute"&&Ye.getStyle(n,"transform")!=="none"){var s=n.getBoundingClientRect();return e.left+=s.left,e.top+=s.top,e}return t(n.offsetParent)};return t(i.offsetParent)};Ye.positionRect=function(i,e){var t=0,n=0,s=function(r){if(r)return t+=r.offsetLeft,n+=r.offsetTop,s(r.offsetParent);var o={top:i.offsetTop+n,left:i.offsetLeft+t};return e&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+i.offsetHeight,o.right=o.top+i.offsetWidth,o};return s(i.offsetParent)};Ye.scrollDiv=function(i,e){e=e||{};var t=!1,n=0,s,r=0,o=typeof e.onmove=="function"?e.onmove:function(){},a=e.vertical?"screenY":"screenX",l=e.vertical?"scrollTop":"scrollLeft",u=!1,h,f,m=0,y=function(){I&&(m++,setTimeout(v))},v=function(){if(I){if(m--,m)return;var k=i.clientHeight,W=i.scrollHeight;h=k/W,I.style.height=h*100+"%",I.style.top=i.scrollTop/W*100+"%",A.style.height=k+"px",k>W-.5?A.classList.add("ol-100pc"):A.classList.remove("ol-100pc")}},E=function(k){k.target.classList.contains("ol-noscroll")||(u=!1,t=k[a],r=new Date,i.classList.add("ol-move"),k.preventDefault(),window.addEventListener("pointermove",b),Ye.addListener(window,["pointerup","pointercancel"],M))},b=function(k){if(t!==!1){var W=(f?-1/h:1)*(t-k[a]);u=u||Math.round(W),i[l]+=W,s=new Date,s-r&&(n=(n+W/(s-r))/2),t=k[a],r=s,W&&o(!0)}else u=!0},S=function(k){var W=k>0?Math.min(100,k/2):Math.max(-100,k/2);k-=W,i[l]+=W,-1<k&&k<1?(u?setTimeout(function(){i.classList.remove("ol-move")}):i.classList.remove("ol-move"),u=!1,o(!1)):setTimeout(function(){S(k)},40)},A,I;if(e.vertical&&e.minibar){var R=function(k){i.removeEventListener("pointermove",R),i.parentNode.classList.add("ol-miniscroll"),I=Ye.create("DIV"),A=Ye.create("DIV",{className:"ol-scroll",html:I}),i.parentNode.insertBefore(A,i),I.addEventListener("pointerdown",function(W){f=!0,E(W)}),e.mousewheel&&(Ye.addListener(A,["mousewheel","DOMMouseScroll","onmousewheel"],function(W){p(W)}),Ye.addListener(I,["mousewheel","DOMMouseScroll","onmousewheel"],function(W){p(W)})),i.parentNode.addEventListener("pointerenter",y),window.addEventListener("resize",y),k!==!1&&y()};i.parentNode?R(!1):i.addEventListener("pointermove",R),i.addEventListener("scroll",function(){y()})}i.style["touch-action"]="none",i.style.overflow="hidden",i.classList.add("ol-scrolldiv"),Ye.addListener(i,["pointerdown"],function(k){f=!1,E(k)}),i.addEventListener("click",function(k){i.classList.contains("ol-move")&&(k.preventDefault(),k.stopPropagation())},!0);var M=function(k){r=new Date-r,r>100||f?n=0:r>0&&(n=((n||0)+(t-k[a])/r)/2),S(e.animate===!1?0:n*200),t=!1,n=0,r=0,i.classList.contains("ol-move")?i.classList.remove("ol-hasClick"):(i.classList.add("ol-hasClick"),setTimeout(function(){i.classList.remove("ol-hasClick")},500)),f=!1,window.removeEventListener("pointermove",b),Ye.removeListener(window,["pointerup","pointercancel"],M)},p=function(k){var W=Math.max(-1,Math.min(1,k.wheelDelta||-k.detail));return i.classList.add("ol-move"),i[l]-=W*30,i.classList.remove("ol-move"),!1};return e.mousewheel&&Ye.addListener(i,["mousewheel","DOMMouseScroll","onmousewheel"],p),{refresh:y}};Ye.dispatchEvent=function(i,e){var t;try{t=new CustomEvent(i)}catch{t=document.createEvent("CustomEvent"),t.initCustomEvent(i,!0,!0,{})}e.dispatchEvent(t)};var bt={};bt.getTransform=function(i){var e=window.getComputedStyle(i,null),t=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform"),n=t.split("(")[1].split(")")[0].split(","),s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],r,o;if(n.length===16)for(r=0;r<4;++r)for(o=0;o<4;++o)s[o][r]=+n[r*4+o];else for(r=0;r<3;++r)for(o=0;o<2;++o)s[o][r]=+n[r*2+o];return s};bt.getTransformOrigin=function(i){for(var e=window.getComputedStyle(i,null),t=e.getPropertyValue("-webkit-transform-origin")||e.getPropertyValue("-moz-transform-origin")||e.getPropertyValue("-ms-transform-origin")||e.getPropertyValue("-o-transform-origin")||e.getPropertyValue("transform-origin"),n=t.split(" "),s=[0,0,0,1],r=0;r<n.length;++r)s[r]=parseInt(n[r]);return s};bt.translateMatrix=function(i,e,t){return[[1,0,0,i],[0,1,0,e],[0,0,1,t],[0,0,0,1]]};bt.identity=function(){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]};bt.roundTo=function(i,e){e||(e=1e-10);for(var t=[[],[],[],[]],n=0;n<4;n++)for(var s=0;s<4;s++)t[n][s]=Math.round(i[n][s]/e)*e;return t};bt.multiply=function(i,e){for(var t=[[],[],[],[]],n=0;n<4;++n)for(var s=0;s<4;++s){for(var r=0,o=0;o<4;++o)r+=i[o][n]*e[s][o];t[s][n]=r}return t};bt.computeTransformMatrix=function(i,e){var t=bt.translateMatrix(-e[0],-e[1],-e[2]),n=bt.translateMatrix(e[0],e[1],e[2]),s=bt.multiply(t,i);return bt.multiply(s,n)};bt.transformVertex=function(i,e){for(var t=[e[0],e[1],0,1],n=[],s=0;s<4;++s){n[s]=0;for(var r=0;r<4;++r)n[s]+=+i[s][r]*t[r]}return n};bt.projectVertex=function(i){for(var e=[],t=0;t<4;++t)e[t]=i[t]/i[3];return e};bt.inverse=function(i){var e=i[0][0]*i[1][1]-i[1][0]*i[0][1],t=i[0][0]*i[1][2]-i[1][0]*i[0][2],n=i[0][0]*i[1][3]-i[1][0]*i[0][3],s=i[0][1]*i[1][2]-i[1][1]*i[0][2],r=i[0][1]*i[1][3]-i[1][1]*i[0][3],o=i[0][2]*i[1][3]-i[1][2]*i[0][3],a=i[2][2]*i[3][3]-i[3][2]*i[2][3],l=i[2][1]*i[3][3]-i[3][1]*i[2][3],u=i[2][1]*i[3][2]-i[3][1]*i[2][2],h=i[2][0]*i[3][3]-i[3][0]*i[2][3],f=i[2][0]*i[3][2]-i[3][0]*i[2][2],m=i[2][0]*i[3][1]-i[3][0]*i[2][1],y=1/(e*a-t*l+n*u+s*h-r*f+o*m);if(isNaN(y)||y===1/0)throw new Error("Inverse determinant attempted to divide by zero.");return[[(i[1][1]*a-i[1][2]*l+i[1][3]*u)*y,(-i[0][1]*a+i[0][2]*l-i[0][3]*u)*y,(i[3][1]*o-i[3][2]*r+i[3][3]*s)*y,(-i[2][1]*o+i[2][2]*r-i[2][3]*s)*y],[(-i[1][0]*a+i[1][2]*h-i[1][3]*f)*y,(i[0][0]*a-i[0][2]*h+i[0][3]*f)*y,(-i[3][0]*o+i[3][2]*n-i[3][3]*t)*y,(i[2][0]*o-i[2][2]*n+i[2][3]*t)*y],[(i[1][0]*l-i[1][1]*h+i[1][3]*m)*y,(-i[0][0]*l+i[0][1]*h-i[0][3]*m)*y,(i[3][0]*r-i[3][1]*n+i[3][3]*e)*y,(-i[2][0]*r+i[2][1]*n-i[2][3]*e)*y],[(-i[1][0]*u+i[1][1]*f-i[1][2]*m)*y,(i[0][0]*u-i[0][1]*f+i[0][2]*m)*y,(-i[3][0]*s+i[3][1]*t-i[3][2]*e)*y,(i[2][0]*s-i[2][1]*t+i[2][2]*e)*y]]};var cA=class extends Ko{constructor(e){var t=e.target instanceof Element?e.target:document.getElementById(e.target);window.getComputedStyle(t).position!=="absolute"&&(t.style.position="relative"),t.style.overflow="hidden";var n=Ye.create("DIV",{className:"ol-perspective-map",parent:t}),s={};Object.assign(s,e),s.target=n,super(s),this._tiltCondition=e.tiltCondition||DS}getPixelRatio(){return window.devicePixelRatio}setPerspective(e,t){t=t||{},e>30?e=30:e<0&&(e=0);var n=this._angle||0,s=Math.round(e*10)/10,r=this.getTarget().querySelector(".ol-layers").style;cancelAnimationFrame(this._animatedPerspective),requestAnimationFrame(function(o){this._animatePerpective(o,o,r,n,s,t.duration,t.easing||Ph)}.bind(this))}_animatePerpective(e,t,n,s,r,o,a){var l,u;o===0?(l=1,u=!0):(l=(t-e)/(o||500),u=l>=1),l=a(l);var h;u?h=this._angle=r:h=this._angle=s+(r-s)*l;var f=h/30;n.transform="translateY(-"+17*f+"%) perspective(200px) rotateX("+h+"deg) scaleY("+(1-f/2)+")",this.getMatrix3D(!0),this.render(),u||requestAnimationFrame(function(m){this._animatePerpective(e,m,n,s,r,o||500,a||Ph)}.bind(this)),this.dispatchEvent({type:"change:perspective",angle:h,animating:!u})}handleMapBrowserEvent(e){if(e.pixel=[e.originalEvent.offsetX/this.getPixelRatio(),e.originalEvent.offsetY/this.getPixelRatio()],e.coordinate=this.getCoordinateFromPixel(e.pixel),Ko.prototype.handleMapBrowserEvent.call(this,e),this._tiltCondition(e))switch(e.type){case"pointerdown":{this._dragging=e.originalEvent.offsetY;break}case"pointerup":{this._dragging=!1;break}case"pointerdrag":{if(this._dragging!==!1){var t=e.originalEvent.offsetY>this._dragging?.5:-.5;t&&this.setPerspective((this._angle||0)+t,{duration:0}),this._dragging=e.originalEvent.offsetY}break}}else this._dragging=!1}getMatrix3D(e){if(e){var t=this.getTarget().querySelector(".ol-layers"),n=bt.getTransform(t),s=bt.getTransformOrigin(t);this._matrixTransform=bt.computeTransformMatrix(n,s)}return this._matrixTransform||(this._matrixTransform=bt.identity()),this._matrixTransform}getPixelScreenFromCoordinate(e){var t=this.getPixelFromCoordinate(e),n=this.getMatrix3D(),s=bt.transformVertex(n,t);return s=bt.projectVertex(s),[s[0],s[1]]}getPixelFromPixelScreen(e){var t=bt.inverse(this.getMatrix3D()),n=bt.transformVertex(t,e);return n=bt.projectVertex(n),[n[0],n[1]]}};(function(){var i=dc.prototype.updatePixelPosition;dc.prototype.updatePixelPosition=function(){var e=this.getMap();if(e&&e instanceof cA){var t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}var n=e.getPixelScreenFromCoordinate(t),s=e.getSize();n[0]-=s[0]/4,n[1]-=s[1]/4,this.updateRenderedPosition(n,s)}else i.call(this)}})();const uA={Point:gA,LineString:pA,Polygon:vA,MultiPoint:_A,MultiLineString:mA,MultiPolygon:yA},hA={Point:CA,LineString:EA,Polygon:xA,MultiPoint:wA,MultiLineString:TA,MultiPolygon:bA};class dA extends Wy{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,t,n){const s=e,r=Vp(s.geometry,t),o=new eo;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(r),s.attributes){o.setProperties(s.attributes,!0);const a=s.attributes[n];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(e,t){if(t=t||{},e.features){const n=e,s=[],r=n.features;for(let o=0,a=r.length;o<a;++o)s.push(this.readFeatureFromObject(r[o],t,e.objectIdFieldName));return s}return[this.readFeatureFromObject(e,t)]}readGeometryFromObject(e,t){return Vp(e,t)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const n=e.spatialReference.wkid;return ct("EPSG:"+n)}return null}writeGeometryObject(e,t){return Wp(e,this.adaptOptions(t))}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={};if(!e.hasProperties())return n.attributes={},n;const s=e.getProperties(),r=e.getGeometry();if(r){n.geometry=Wp(r,t);const o=t&&(t.dataProjection||t.featureProjection);o&&(n.geometry.spatialReference={wkid:Number(ct(o).getCode().split(":").pop())}),delete s[e.getGeometryName()]}return _s(s)?n.attributes={}:n.attributes=s,n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let s=0,r=e.length;s<r;++s)n.push(this.writeFeatureObject(e[s],t));return{features:n}}}function Vp(i,e){if(!i)return null;let t;if(typeof i.x=="number"&&typeof i.y=="number")t="Point";else if(i.points)t="MultiPoint";else if(i.paths)i.paths.length===1?t="LineString":t="MultiLineString";else if(i.rings){const s=i,r=yo(s),o=fA(s.rings,r);o.length===1?(t="Polygon",i=Object.assign({},i,{rings:o[0]})):(t="MultiPolygon",i=Object.assign({},i,{rings:o}))}const n=uA[t];return Na(n(i),!1,e)}function fA(i,e){const t=[],n=[],s=[];let r,o;for(r=0,o=i.length;r<o;++r)t.length=0,Pa(t,0,i[r],e.length),Hc(t,0,t.length,e.length)?n.push([i[r]]):s.push(i[r]);for(;s.length;){const a=s.shift();let l=!1;for(r=n.length-1;r>=0;r--){const u=n[r][0];if(Hi(new ac(u).getExtent(),new ac(a).getExtent())){n[r].push(a),l=!0;break}}l||n.push([a.reverse()])}return n}function gA(i){let e;return i.m!==void 0&&i.z!==void 0?e=new Oi([i.x,i.y,i.z,i.m],"XYZM"):i.z!==void 0?e=new Oi([i.x,i.y,i.z],"XYZ"):i.m!==void 0?e=new Oi([i.x,i.y,i.m],"XYM"):e=new Oi([i.x,i.y]),e}function pA(i){const e=yo(i);return new ua(i.paths[0],e)}function mA(i){const e=yo(i);return new Zd(i.paths,e)}function yo(i){let e="XY";return i.hasZ===!0&&i.hasM===!0?e="XYZM":i.hasZ===!0?e="XYZ":i.hasM===!0&&(e="XYM"),e}function _A(i){const e=yo(i);return new zc(i.points,e)}function yA(i){const e=yo(i);return new ef(i.rings,e)}function vA(i){const e=yo(i);return new ar(i.rings,e)}function CA(i,e){const t=i.getCoordinates();let n;const s=i.getLayout();return s==="XYZ"?n={x:t[0],y:t[1],z:t[2]}:s==="XYM"?n={x:t[0],y:t[1],m:t[2]}:s==="XYZM"?n={x:t[0],y:t[1],z:t[2],m:t[3]}:s==="XY"?n={x:t[0],y:t[1]}:Ge(!1,34),n}function ja(i){const e=i.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function EA(i,e){const t=ja(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:[i.getCoordinates()]}}function xA(i,e){const t=ja(i);return{hasZ:t.hasZ,hasM:t.hasM,rings:i.getCoordinates(!1)}}function TA(i,e){const t=ja(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:i.getCoordinates()}}function wA(i,e){const t=ja(i);return{hasZ:t.hasZ,hasM:t.hasM,points:i.getCoordinates()}}function bA(i,e){const t=ja(i),n=i.getCoordinates(!1),s=[];for(let r=0;r<n.length;r++)for(let o=n[r].length-1;o>=0;o--)s.push(n[r][o]);return{hasZ:t.hasZ,hasM:t.hasM,rings:s}}function Wp(i,e){const t=hA[i.getType()];return t(Na(i,!0,e),e)}const Bp=dA;(async()=>await x_.ajax({url:"https://api.edtest.site/layers",method:"GET",dataType:"",success:i=>{i.map(e=>e)},error:i=>i}))();const Wo={america:()=>new ss({name:"america",className:"america",preload:1/0,source:new sA({url:"https://sampleserver6.arcgisonline.com/ArcGIS/rest/services/USA/MapServer"})}),EsriJSON:()=>{const i="https://services8.arcgis.com/jz4Cju60Wi6R7jAW/arcgis/rest/services/RIVERPOLY_(1)/FeatureServer/0",e=new Yi({fill:new fs,stroke:new to({color:[0,38,115,1],width:.5})}),t=new ln({format:new Bp,url:function(n,s,r){const o=r.getCode().split(/:(?=\d+$)/).pop();return i+"/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent(`{"xmin":${n[0]},"ymin":${n[1]},"xmax":${n[2]},"ymax":${n[3]},"spatialReference":{"wkid":${o}}}`)+"&geometryType=esriGeometryEnvelope&inSR="+o+"&outFields=*&outSR="+o},strategy:xp(uc({tileSize:512}))});return new is({name:"EsriJSON",source:t,style:function(n){const s=[0,38,115,1];return e.getFill().setColor(s),e},opacity:.7})},BsriJSON:()=>{const i="https://services8.arcgis.com/jz4Cju60Wi6R7jAW/arcgis/rest/services/河川支流/FeatureServer/0",e=new Yi({fill:new fs,stroke:new to({color:[0,0,0,1],width:.5})}),t=new ln({format:new Bp,url:function(n,s,r){const o=r.getCode().split(/:(?=\d+$)/).pop();return i+"/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent(`{"xmin":${n[0]},"ymin":${n[1]},"xmax":${n[2]},"ymax":${n[3]},"spatialReference":{"wkid":${o}}}`)+"&geometryType=esriGeometryEnvelope&inSR="+o+"&outFields=*&outSR="+o},strategy:xp(uc({tileSize:512}))});return new is({name:"BsriJSON",type:"BsriJSON",source:t,style:function(n){const s=[0,0,0,1];return e.getFill().setColor(s),e},opacity:1})},roads:()=>{const i="Gu2rcfenfMEKjKXgPF6H";return new ss({name:"roads",type:"roads",source:new xa({url:"https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key="+i,tileSize:512,maxZoom:22})})},imagery:()=>{const i="Gu2rcfenfMEKjKXgPF6H";return new ss({name:"imagery",type:"imagery",source:new xa({url:"https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key="+i,maxZoom:20})})},DimensionMap:()=>{const i=new eo({name:"DimensionMap",title:"DimensionMap",geometry:new wy([120.9984423386347,24.791781619336316],.005)}),e=new Yi({renderer(r,o){const[[a,l],[u,h]]=r,f=o.context,m=u-a,y=h-l,v=Math.sqrt(m*m+y*y);f.beginPath(),f.arc(a,l,v,0,2*Math.PI,!0),f.fillStyle="rgba(255,0,0)",f.fill()}}),t=new is({source:new ln({features:[i]}),style:e}),n=[[120.971859,24.801583],[120.97,24.809583],[120.985,24.808583],[120.99,24.806583],[120.971859,24.801583]],s=new is({name:"DimensionMap",title:"DimensionMap",source:new ln({features:[new eo({name:"areaLineLayer",title:"areaLineLayer",geometry:new ar([n])})]}),style:new Yi({fill:new fs({color:"#0f9ce2"})})});return[t,s]},getLayer:(i,e,t)=>{var a;let n,s,r=i.layer_type,o=i.figure_type;if(r==="WMS"){switch(o){case"Point":s=new qo({maxzoom:18,minzoom:3,url:"https://dwgis1.ncdr.nat.gov.tw/server/services/MAP0627/Map2022FloodingPoint1721/MapServer/WMSServer",params:{SERVICE:"WMS",BGCOLOR:"0xFFFFFF",TRANSPARENT:"TRUE",SRS:"EPSG:3826",LAYERS:"0",VERSION:"1.1.1",FORMAT:"image/png"},serverType:"mapserver",crossOrigin:"anonymous"});break;case"Surface":let u=[],h={};const f=isNaN(e)?i.tiles_url:i.tiles_list[e].tile_url;f&&(u=f.split("WMSServer?"),u[1]=u[1].split("&"),u[1].forEach(m=>{const y=m.split("=");h[y[0]]=y[1]})),s=new qo({maxzoom:18,minzoom:3,url:u[0]+"WMSServer?",params:h,serverType:"mapserver"});break;default:console.log(o)}let l=isNaN(e)?"":`- ${(a=i.tiles_list[e])==null?void 0:a.title}`;n=new ss({id:t,label:`${i.title} ${l}`,source:s})}if(r==="GeoJson")switch(o){case"Line":n=new is({source:new ln({url:"https://dmap.ncdr.nat.gov.tw/GeoJson/土石流潛勢溪流.geojson",format:new qb,crossOrigin:"anonymous"})});break;case"Point":const l=new qo({maxzoom:18,minzoom:3,url:"https://dwgis1.ncdr.nat.gov.tw/server/services/MAP0627/Map2022FloodingPoint1721/MapServer/WMSServer",params:{SERVICE:"WMS",BGCOLOR:"0xFFFFFF",TRANSPARENT:"TRUE",SRS:"EPSG:3826",LAYERS:"0",VERSION:"1.1.1",FORMAT:"image/png"},crossOrigin:"anonymous"});n=new ss({source:l});break;default:console.log(o)}return n},getLayerIndex:i=>{let e,t,n;return i.split("_").forEach((s,r)=>{switch(r){case 0:e=Number(s.split("node")[1]);break;case 1:t=Number(s.split("subNode")[1]);break;case 2:n=s.split("nestedSubNode")[1]!=="undefined"?Number(s.split("nestedSubNode")[1]):"undefined";break}}),{nodeIndex:e,subNodeIndex:t,nestedSubNodeIndex:n,layeredIndex:i}}},zp="Gu2rcfenfMEKjKXgPF6H";var Hp=[{name:"default",label:"預設",urls:new iA},{name:"roads",label:"底圖一",urls:new xa({url:"https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key="+zp,tileSize:512,maxZoom:22})},{name:"imagery",label:"底圖二",urls:new xa({url:"https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key="+zp,maxZoom:20})}];const Fo={sourceFun:(i,e,t)=>{let n=Hp.find(r=>r.name==i),s={preload:1/0,name:n.name,label:n.label,source:n.urls};return t&&(s[e]=t),new ss(s)},sourceData:()=>Hp.map(i=>({name:i.name,label:i.label}))};const SA={props:{onClose:{type:Function,default:()=>{}},mapLayers:{type:Array,default:[]},currentLayers:{type:Array,default:[]}},setup(i,{emit:e}){const t=Wo,n=pn({DropDown:null});function s(l,u){e("onMapControl",{action:l,value:u})}function r(l,u){e("onLayerControl",{action:l,value:u})}function o(l){n.DropDown!==l?n.DropDown=l:n.DropDown=null}function a(l,u){u.subNode.single_tiles||!isNaN(u.nestedSubNodeIndex)?r("layerMode",{checked:l.target.checked,nodeIndex:u.nodeIndex,subNodeIndex:u.subNodeIndex,nestedSubNodeIndex:u.nestedSubNodeIndex||void 0,id:u.id}):console.log("還有子選項")}return{props:i,state:n,mapLayers:t,onMapControl:s,onLayerControl:r,openLayerList:o,LayerCheckboxChange:a}}},_f=i=>(rd("data-v-9dfcac0c"),i=i(),od(),i),RA={class:"rounded-4 bg-white"},AA={class:"row mx-0 align-items-center flex-nowrap text-center p-2 fw-bold border-bottom"},IA=_f(()=>ee("p",{class:"mb-0 fs-5"},"圖層選項",-1)),LA=_f(()=>ee("svg",{width:"32",height:"32",viewBox:"0 0 24 24"},[ee("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10zm0-11.414L9.172 7.757L7.757 9.172L10.586 12l-2.829 2.828l1.415 1.415L12 13.414l2.828 2.829l1.415-1.415L13.414 12l2.829-2.828l-1.415-1.415L12 10.586z"})],-1)),OA=[LA],PA={class:"py-3 px-4 content"},MA={class:"mb-2 landBoundary"},DA={class:"mb-2"},FA=["onClick"],NA=_f(()=>ee("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1)),kA=[NA],GA={class:"ms-3"},jA=["checked","onChange"],$A={class:"ms-3"},VA=["checked","onChange"];function WA(i,e,t,n,s,r){return et(),nt("div",RA,[ee("div",AA,[IA,ee("a",{href:"",class:"closeBtn position-absolute col-auto",onClick:e[0]||(e[0]=jt((...o)=>n.props.onClose&&n.props.onClose(...o),["prevent"]))},OA)]),ee("div",PA,[ee("div",MA,[(et(!0),nt(di,null,zo(n.props.mapLayers,(o,a)=>(et(),nt("div",DA,[ee("div",{class:"title d-flex align-items-center fw-bold text-black order-1 mb-1 text-decoration-none",onClick:l=>n.openLayerList(a)},[ee("div",{class:Ei(o.groupClass)},null,2),ee("div",null,jr(o.label),1),(et(),nt("svg",{viewBox:"0 0 24 24",class:Ei({openTitle:n.state.DropDown==a})},kA,2))],8,FA),n.state.DropDown==a?(et(!0),nt(di,{key:0},zo(o.layers,(l,u)=>(et(),nt("div",GA,[ee("input",{type:"checkbox",checked:n.props.currentLayers.some(h=>h.id===l.id),onChange:h=>{n.LayerCheckboxChange(h,{nodeIndex:a,subNode:l,subNodeIndex:u,nestedSubNodeIndex:"",id:l.id})}},null,40,jA),oa(" "+jr(l.title)+" ",1),(et(!0),nt(di,null,zo(l==null?void 0:l.tiles_list,(h,f)=>(et(),nt("div",$A,[ee("input",{type:"checkbox",checked:n.props.currentLayers.some(m=>m.id===h.id),onChange:m=>{n.LayerCheckboxChange(m,{nodeIndex:a,subNode:l,subNodeIndex:u,nestedSubNodeIndex:f,id:h.id})}},null,40,VA),oa(" "+jr(h.title),1)]))),256))]))),256)):rn("",!0)]))),256))])])])}const BA=Ts(SA,[["render",WA],["__scopeId","data-v-9dfcac0c"]]),zA="/Map_Demo/assets/zoomIn-c80b5dd3.svg",HA="/Map_Demo/assets/zoomOut-88993246.svg",YA="/Map_Demo/assets/compass-1c1efd7a.svg",UA="/Map_Demo/assets/location-b52d62b2.svg",XA="/Map_Demo/assets/zoom-8acdf5b3.svg",KA={props:{id:{Type:String,default:0},map:{}},setup(i,{emit:e}){function t(n){e("onMapControl",{action:n})}return{onMapControl:t}}},qA={class:"d-flex flex-nowrap flex-column"},ZA=ee("img",{src:zA,alt:"zoomIn"},null,-1),JA=[ZA],QA=ee("img",{src:HA,alt:"zoomOut"},null,-1),eI=[QA],tI=ee("img",{src:YA,alt:"compass"},null,-1),iI=[tI],nI=ee("img",{src:UA,alt:"location"},null,-1),sI=[nI],rI=ee("img",{src:XA,alt:"zoom"},null,-1),oI=[rI];function aI(i,e,t,n,s,r){return et(),nt("div",qA,[ee("a",{href:"",class:"asideTool-btn order-1 mb-0",onClick:e[0]||(e[0]=jt(o=>n.onMapControl("In"),["prevent"]))},JA),ee("a",{href:"",class:"asideTool-btn order-1 mb-2",onClick:e[1]||(e[1]=jt(o=>n.onMapControl("Out"),["prevent"]))},eI),ee("a",{href:"",class:"asideTool-btn order-1 mb-2",onClick:e[2]||(e[2]=jt(o=>n.onMapControl("toNorth"),["prevent"]))},iI),ee("a",{href:"",class:"asideTool-btn order-1 mb-2",onClick:e[3]||(e[3]=jt(o=>n.onMapControl("moveTo"),["prevent"]))},sI),ee("a",{href:"",class:"asideTool-btn order-1 mb-2",onClick:e[4]||(e[4]=jt(o=>n.onMapControl("fullScreen"),["prevent"]))},oI)])}const lI=Ts(KA,[["render",aI]]);const cI={props:{baseMapsOptions:{type:Array,default:[]},onChangeBaseMaps:{type:Function,default:()=>{}}},setup(i,{emit:e}){const t=pn({selectMap:i.baseMapsOptions[0]});function n(s){let r="baseMap",o={checked:!0,layerName:t.selectMap};e("onChangeBaseMaps",{action:r,value:o})}return{state:t,props:i,onChangeBaseMaps:n}}},uI=["value"];function hI(i,e,t,n,s,r){return et(),nt("div",null,[pE(ee("select",{name:"",id:"","onUpdate:modelValue":e[0]||(e[0]=o=>n.state.selectMap=o),onChange:e[1]||(e[1]=o=>{n.onChangeBaseMaps()})},[(et(!0),nt(di,null,zo(n.props.baseMapsOptions,(o,a)=>(et(),nt("option",{value:o.name},jr(o.label),9,uI))),256))],544),[[hx,n.state.selectMap]])])}const dI=Ts(cI,[["render",hI],["__scopeId","data-v-485263dd"]]),fI="/Map_Demo/assets/twoDimensional-a98be995.svg",gI="/Map_Demo/assets/threeDimensional-53ca5816.svg",pI="/Map_Demo/assets/baseLayer-bfe09163.svg",Zy="/Map_Demo/assets/singleWindow-a5fb901a.svg",Jy="/Map_Demo/assets/doubleWindows-dfb5c9e8.svg";const mI={props:{currentLayers:{type:Array,default:[]},mapCount:{type:Number,default:1},dimensionMapStatus:{type:Boolean,default:!1}},setup(i,{emit:e}){const t=pn({toolSwitch:{threeDimensionalBtn:!1,layerConditionBtn:!1,splitWindowBtn:!1},targetNum:1});function n(a,l){Object.keys(t.toolSwitch).forEach(u=>{u===a?t.toolSwitch[a]?t.toolSwitch[a]=!1:t.toolSwitch[a]=!0:t.toolSwitch[u]=!1})}function s(a,l){a==="changeMapCount"&&(t.toolSwitch.splitWindowBtn=!1),e("onLayerControl",{action:a,value:l})}function r(){e("conditionWrap")}function o(a){t.targetNum=a,e("onChangeTarget",a)}return{props:i,state:t,toolSwitch:n,onLayerControl:s,conditionWrap:r,onChangeTarget:o}}},_I={class:"list-unstyled d-flex align-items-center flex-nowrap w-full"},yI={class:"me-4 position-relative"},vI={class:"MapFeatureBtn text-white"},CI=ee("img",{src:fI},null,-1),EI=[CI],xI=ee("img",{src:gI},null,-1),TI=[xI],wI={class:"me-4 position-relative"},bI=ee("img",{src:pI,alt:""},null,-1),SI=[bI],RI={class:"me-4 position-relative"},AI={key:0,src:Zy,alt:""},II={key:1,src:Jy,alt:""},LI={key:0,class:"list-unstyled position-absolute start-0 top-100 p-0"},OI={class:"mt-2"},PI=ee("img",{src:Zy,alt:""},null,-1),MI=[PI],DI={class:"mt-2"},FI=ee("img",{src:Jy,alt:""},null,-1),NI=[FI],kI={class:"switchControl d-flex position-fixed rounded-pill translate-middle-x p-2",id:"switchControl",style:{"z-index":"99"}};function GI(i,e,t,n,s,r){return et(),nt("div",null,[ee("ul",_I,[ee("li",yI,[ee("div",vI,[n.props.dimensionMapStatus?(et(),nt("a",{key:0,href:"",onClick:e[0]||(e[0]=jt(o=>(n.toolSwitch("threeDimensionalBtn"),n.onLayerControl("changeDimensionMap","3D")),["prevent"]))},EI)):(et(),nt("a",{key:1,href:"",onClick:e[1]||(e[1]=jt(o=>(n.toolSwitch("threeDimensionalBtn"),n.onLayerControl("changeDimensionMap","2D")),["prevent"]))},TI))])]),ee("li",wI,[ee("a",{href:"",class:"MapFeatureBtn text-white",onClick:e[2]||(e[2]=jt(o=>(n.toolSwitch("layerConditionBtn"),n.conditionWrap()),["prevent"]))},SI)]),ee("li",RI,[ee("a",{href:"",class:"MapFeatureBtn text-white",onClick:e[3]||(e[3]=jt(o=>n.toolSwitch("splitWindowBtn"),["prevent"]))},[n.props.mapCount===1?(et(),nt("img",AI)):rn("",!0),n.props.mapCount===2?(et(),nt("img",II)):rn("",!0)]),n.state.toolSwitch.splitWindowBtn?(et(),nt("ul",LI,[ee("li",OI,[ee("a",{href:"",class:"text-white MapFeatureBtn",onClick:e[4]||(e[4]=jt(o=>n.onLayerControl("changeMapCount",1),["prevent"]))},MI)]),ee("li",DI,[ee("a",{href:"",class:"text-white MapFeatureBtn",onClick:e[5]||(e[5]=jt(o=>n.onLayerControl("changeMapCount",2),["prevent"]))},NI)])])):rn("",!0)])]),ee("div",kI,[ee("div",{class:Ei(["fs-3 text-white rounded-pill",{active:n.state.targetNum===1}]),onClick:e[6]||(e[6]=()=>{n.onChangeTarget(1)})},"左",2),ee("div",{class:Ei(["fs-3 text-white rounded-pill",{active:n.state.targetNum===2}]),onClick:e[7]||(e[7]=()=>{n.onChangeTarget(2)})},"右",2)])])}const jI=Ts(mI,[["render",GI]]),Tt={};Tt.obj=function(i){return i};Tt.supportsImageRenderingPixelatedResult_=void 0;Tt.imageRenderingValueResult_=void 0;Tt.supportsImageRenderingPixelated=function(){if(Tt.supportsImageRenderingPixelatedResult_===void 0){const i=document.createElement("canvas");i.setAttribute("style","image-rendering: -moz-crisp-edges; image-rendering: pixelated;");const e=i.style.imageRendering;Tt.supportsImageRenderingPixelatedResult_=!!e,Tt.supportsImageRenderingPixelatedResult_&&(Tt.imageRenderingValueResult_=e)}return Tt.supportsImageRenderingPixelatedResult_};Tt.imageRenderingValue=function(){return Tt.supportsImageRenderingPixelated(),Tt.imageRenderingValueResult_||""};Tt.getSourceProjection=function(i){return i.get("olcs.projection")||i.getProjection()};function Nr(i,e,t){return i.on(e,t)}let $I=0;function $t(i){return i.olcs_uid||(i.olcs_uid=++$I)}function VI(i,e){const t=i.length,n=Array(i.length);for(let s=0;s<t;s++)n[s]={index:s,value:i[s]};n.sort((s,r)=>e(s.value,r.value)||s.index-r.index);for(let s=0;s<i.length;s++)i[s]=n[s].value}function WI(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function BI(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function Uu(i){const e=Cesium.GroundPolylinePrimitive;return e&&e.isSupported(i)}const zI=function(){const e=new jy({projection:"EPSG:3857",wrapX:!0}).getTileCoordForTileUrlFunction([6,-31,22]);return e&&e[1]===33&&e[2]===22}();class Qy{constructor(e,t,n){this.source_=t,this.projection_=null,this.fallbackProj_=n||null,this.ready_=!1,this.tilingScheme_=null,this.rectangle_=null,this.map_=e,this.shouldRequestNextLevel=!1;const s=this.source_.get("olcs.proxy");s&&(typeof s=="function"?this.proxy_={getURL:s}:typeof s=="string"&&(this.proxy_=new Cesium.DefaultProxy(s))),this.errorEvent_=new Cesium.Event,this.emptyCanvas_=document.createElement("canvas"),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.source_.on("change",r=>{this.handleSourceChanged_()}),this.handleSourceChanged_()}handleSourceChanged_(e){if(!this.ready_&&this.source_.getState()=="ready"){this.projection_=Tt.getSourceProjection(this.source_)||this.fallbackProj_;const t={numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1};if(this.source_.tileGrid!==null&&this.source_.tileGrid.forEachTileCoord(this.projection_.getExtent(),0,([n,s,r])=>{t.numberOfLevelZeroTilesX=s+1,t.numberOfLevelZeroTilesY=r+1}),this.projection_.getCode()==="EPSG:4326")this.shouldRequestNextLevel=t.numberOfLevelZeroTilesX===1&&t.numberOfLevelZeroTilesY===1,this.tilingScheme_=new Cesium.GeographicTilingScheme(t);else if(this.projection_.getCode()==="EPSG:3857")this.shouldRequestNextLevel=!1,this.tilingScheme_=new Cesium.WebMercatorTilingScheme(t);else return;this.rectangle_=this.tilingScheme_.rectangle,this.ready_=!0}}getTileCredits(e,t,n){const s=this.source_.getAttributions();if(!s)return[];const r=this.map_.getView().calculateExtent(this.map_.getSize()),o=this.map_.getView().getCenter(),a=this.shouldRequestNextLevel?n+1:n;return e0(s,a,o,r)}requestImage(e,t,n){const s=this.source_.getTileUrlFunction();if(s&&this.projection_){const r=this.shouldRequestNextLevel?n+1:n;let o=t;zI||(o=-t-1);let a=s.call(this.source_,[r,e,o],1,this.projection_);return this.proxy_&&(a=this.proxy_.getURL(a)),a?Cesium.ImageryProvider.loadImage(this,a):this.emptyCanvas_}else return this.emptyCanvas_}}Object.defineProperties(Qy.prototype,{ready:{get:function(){return this.ready_}},rectangle:{get:function(){return this.rectangle_}},tileWidth:{get:function(){const i=this.source_.getTileGrid();return i?Array.isArray(i.getTileSize(0))?i.getTileSize(0)[0]:i.getTileSize(0):256}},tileHeight:{get:function(){const i=this.source_.getTileGrid();return i?Array.isArray(i.getTileSize(0))?i.getTileSize(0)[1]:i.getTileSize(0):256}},maximumLevel:{get:function(){const i=this.source_.getTileGrid();return i?i.getMaxZoom():18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.tilingScheme_}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this.errorEvent_}},proxy:{get:function(){return this.proxy_}},hasAlphaChannel:{get:function(){return!0}},pickFeatures:{get:function(){}}});const HI=new Qw,YI=[new Yi({stroke:new to({color:"blue",width:2})})];class UI{constructor(e){this.urls=e.urls,this.ready=!0,this.readyPromise=Promise.resolve(!0),this.tileWidth=256,this.tileHeight=256,this.maximumLevel=e.maximumLevel||20,this.minimumLevel=e.minimumLevel||0,this.tilingScheme=new Cesium.WebMercatorTilingScheme,this.rectangle=e.rectangle||this.tilingScheme.rectangle,this.errorEvent=new Cesium.Event,this.credit=e.credit,this.hasAlphaChannel=!0,this.styleFunction_=e.styleFunction||(()=>YI),this.projection_=ct("EPSG:3857"),this.emptyCanvas_=document.createElement("canvas"),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.tileRectangle_=new Cesium.Rectangle;const t=e.cacheSize!==void 0?e.cacheSize:50;this.tileCache=new Dh(t),this.featureCache=e.featureCache||new Dh(t);const n=af(this.projection_);this.tileFunction_=$y(this.urls,n)}getTileCredits(){return[]}pickFeatures(){}getTileFeatures(e,t,n){const s=this.getCacheKey_(e,t,n);let r;if(this.featureCache.containsKey(s)&&(r=this.featureCache.get(s)),!r){const o=this.getUrl_(e,t,n);if(r=fetch(o).then(a=>a.ok?a:Promise.reject(a)).then(a=>a.arrayBuffer()).then(a=>this.readFeaturesFromBuffer(a)),this.featureCache.set(s,r),this.featureCache.getCount()>2*this.featureCache.highWaterMark)for(;this.featureCache.canExpireCache();)this.featureCache.pop()}return r}readFeaturesFromBuffer(e){let t;const n=HI.readFeatures(e,t),s=this.tileWidth/4096;return n.forEach(r=>{const o=r.getFlatCoordinates();for(let a=0;a<o.length;++a)o[a]*=s}),n}getUrl_(e,t,n){return this.tileFunction_([e,t,n])}getCacheKey_(e,t,n){return`${e}_${t}_${n}`}requestImage(e,t,n,s){if(n<this.minimumLevel)return this.emptyCanvas_;try{const r=this.getCacheKey_(n,e,t);let o;if(this.tileCache.containsKey(r)&&(o=this.tileCache.get(r)),!o&&(o=this.getTileFeatures(n,e,t).then(a=>{this.tilingScheme.tileXYToNativeRectangle(e,t,n,this.tileRectangle_);const l=(this.tileRectangle_.east-this.tileRectangle_.west)/this.tileWidth;return this.rasterizeFeatures(a,this.styleFunction_,l)}),this.tileCache.set(r,o),this.tileCache.getCount()>2*this.tileCache.highWaterMark))for(;this.tileCache.canExpireCache();)this.tileCache.pop();return o}catch(r){console.trace(r),this.raiseEvent("could not render pbf to tile",r)}}rasterizeFeatures(e,t,n){const s=document.createElement("canvas"),r=mw(s.getContext("2d"),{size:[this.tileWidth,this.tileHeight]});return e.forEach(o=>{const a=t(o,n);a&&a.forEach(l=>{r.setStyle(l),r.drawGeometry(o)})}),s}}const Ee={};Ee.computePixelSizeAtCoordinate=function(i,e){const t=i.camera,n=i.canvas,s=t.frustum,r=Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(t.position,e,new Cesium.Cartesian3));return s.getPixelDimensions(n.clientWidth,n.clientHeight,r,i.pixelRatio,new Cesium.Cartesian2)};Ee.computeBoundingBoxAtTarget=function(i,e,t){const n=Ee.computePixelSizeAtCoordinate(i,e),s=Cesium.Transforms.eastNorthUpToFixedFrame(e),r=Cesium.Matrix4.multiplyByPoint(s,new Cesium.Cartesian3(-n.x*t,-n.y*t,0),new Cesium.Cartesian3),o=Cesium.Matrix4.multiplyByPoint(s,new Cesium.Cartesian3(n.x*t,n.y*t,0),new Cesium.Cartesian3);return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray([r,o])};Ee.applyHeightOffsetToGeometry=function(i,e){i.applyTransform((t,n,s)=>{if(console.assert(t===n),s!==void 0&&s>=3)for(let r=0;r<n.length;r+=s)n[r+2]=n[r+2]+e;return n})};Ee.createMatrixAtCoordinates=function(i,e=0,t=Cesium.Cartesian3.ZERO,n=new Cesium.Cartesian3(1,1,1)){const s=Ee.ol4326CoordinateToCesiumCartesian(i),r=Cesium.Transforms.eastNorthUpToFixedFrame(s),o=Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z,-e),a=Cesium.Matrix4.fromTranslationQuaternionRotationScale(t,o,n);return Cesium.Matrix4.multiply(r,a,new Cesium.Matrix4)};Ee.rotateAroundAxis=function(i,e,t,n,s){const r=Cesium.Math.clamp,o=Cesium.defaultValue,a=s||{},l=o(a.duration,500),u=o(a.easing,Sy),h=a.callback;let f=0;const m=new Cesium.Matrix4,y=Date.now(),v=function(){const b=Date.now()-y,S=u(r(b/l,0,1));console.assert(S>=f),i.transform.clone(m);const A=(S-f)*e;f=S,i.lookAtTransform(n),i.rotate(t,A),i.lookAtTransform(m),S<1?window.requestAnimationFrame(v):h&&h()};window.requestAnimationFrame(v)};Ee.setHeadingUsingBottomCenter=function(i,e,t,n){const s=i.camera,r=Ee.computeAngleToZenith(i,t),o=s.right,a=Cesium.Quaternion.fromAxisAngle(o,r),l=Cesium.Matrix3.fromQuaternion(a),u=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(s.position,t,u);const h=new Cesium.Cartesian3;Cesium.Matrix3.multiplyByVector(l,u,h),Cesium.Cartesian3.add(h,t,h);const f=Cesium.Matrix4.fromTranslation(h),m=Ee.rotateAroundAxis;m(s,e,h,f,n)};Ee.pickOnTerrainOrEllipsoid=function(i,e){const t=i.camera.getPickRay(e);return i.globe.pick(t,i)||i.camera.pickEllipsoid(e)};Ee.pickBottomPoint=function(i){const e=i.canvas,t=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight);return Ee.pickOnTerrainOrEllipsoid(i,t)};Ee.pickCenterPoint=function(i){const e=i.canvas,t=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight/2);return Ee.pickOnTerrainOrEllipsoid(i,t)};Ee.computeSignedTiltAngleOnGlobe=function(i){const e=i.camera,t=new Cesium.Ray(e.position,e.direction);let n=i.globe.pick(t,i);if(!n){const a=Cesium.Ellipsoid.WGS84,l=Cesium.IntersectionTests.rayEllipsoid(t,a);l&&(n=Cesium.Ray.getPoint(t,l.start))}if(!n)return;const s=new Cesium.Cartesian3;Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(n,s);const r=Ee.signedAngleBetween,o=r(e.direction,s,e.right)-Math.PI;return Cesium.Math.convertLongitudeRange(o)};Ee.bottomFovRay=function(i){const e=i.camera,t=e.frustum.fovy/2,n=e.direction,s=Cesium.Quaternion.fromAxisAngle(e.right,t),r=Cesium.Matrix3.fromQuaternion(s),o=new Cesium.Cartesian3;return Cesium.Matrix3.multiplyByVector(r,n,o),new Cesium.Ray(e.position,o)};Ee.signedAngleBetween=function(i,e,t){const n=new Cesium.Cartesian3,s=new Cesium.Cartesian3,r=new Cesium.Cartesian3;Cesium.Cartesian3.normalize(i,n),Cesium.Cartesian3.normalize(e,s),Cesium.Cartesian3.cross(n,s,r);const o=Cesium.Cartesian3.dot(n,s),a=Cesium.Cartesian3.magnitude(r),l=Cesium.Cartesian3.dot(t,r),u=Math.atan2(a,o);return l>=0?u:-u};Ee.computeAngleToZenith=function(i,e){const t=i.camera,n=t.frustum.fovy/2,s=Ee.bottomFovRay(i),r=Cesium.Cartesian3.clone(s.direction);Cesium.Cartesian3.negate(r,r);const o=new Cesium.Cartesian3;Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(e,o);const a=new Cesium.Cartesian3;return Cesium.Cartesian3.negate(t.right,a),Ee.signedAngleBetween(o,r,a)+n};Ee.extentToRectangle=function(i,e){if(i&&e){const t=G_(i,e,"EPSG:4326");return Cesium.Rectangle.fromDegrees(t[0],t[1],t[2],t[3])}else return null};Ee.sourceToImageryProvider=function(i,e,t,n){const s=e.get("olcs_skip");if(s)return null;let r=null;if(e instanceof QR&&e.getUrl()&&e.getImageLoadFunction()===pf){const o={"olcs.proxy":e.get("olcs.proxy"),"olcs.extent":e.get("olcs.extent"),"olcs.projection":e.get("olcs.projection"),"olcs.imagesource":e};e=new qo({url:e.getUrl(),attributions:e.getAttributions(),projection:e.getProjection(),params:e.getParams()}),e.setProperties(o)}if(e instanceof Kc){let o=Tt.getSourceProjection(e);if(o||(o=t),Ee.isCesiumProjection(o))r=new Qy(i,e,t);else return null}else if(e instanceof ZR){let o=Tt.getSourceProjection(e);if(o||(o=t),Ee.isCesiumProjection(o))r=new Cesium.SingleTileImageryProvider({url:e.getUrl(),rectangle:new Cesium.Rectangle.fromDegrees(e.getImageExtent()[0],e.getImageExtent()[1],e.getImageExtent()[2],e.getImageExtent()[3])});else return null}else if(e instanceof Pb){let o=Tt.getSourceProjection(e);if(o||(o=t),s===!1){const a=o.getCode().split(":")[1],l=e.urls.map(E=>E.replace(a,"3857")),u=n.getExtent(),h=Ee.extentToRectangle(u,o),f=e.get("olcs_minimumLevel"),m=e.getAttributions(),y=n.getStyleFunction();let v;if(u&&m){const E=wi(u);v=e0(m,0,E,u)[0]}return r=new UI({credit:v,rectangle:h,minimumLevel:f,styleFunction:y,urls:l}),r}return null}else return null;return r};Ee.tileLayerToImageryLayer=function(i,e,t){if(!(e instanceof ss)&&!(e instanceof my)&&!(e instanceof Dy))return null;const n=e.getSource();if(!n)return null;let s=n.get("olcs_provider");if(s||(s=this.sourceToImageryProvider(i,n,t,e)),!s)return null;const r={},a=e.get("olcs.extent")||e.getExtent();return a&&(r.rectangle=Ee.extentToRectangle(a,t)),new Cesium.ImageryLayer(s,r)};Ee.updateCesiumLayerProperties=function(i,e){let t=1,n=!0;[i.layer].concat(i.parents).forEach(s=>{const r=s.getOpacity();r!==void 0&&(t*=r);const o=s.getVisible();o!==void 0&&(n&=o)}),e.alpha=t,e.show=n};Ee.ol4326CoordinateToCesiumCartesian=function(i){const e=i;return e.length>2?Cesium.Cartesian3.fromDegrees(e[0],e[1],e[2]):Cesium.Cartesian3.fromDegrees(e[0],e[1])};Ee.ol4326CoordinateArrayToCsCartesians=function(i){console.assert(i!==null);const e=Ee.ol4326CoordinateToCesiumCartesian,t=[];for(let n=0;n<i.length;++n)t.push(e(i[n]));return t};Ee.olGeometryCloneTo4326=function(i,e){console.assert(e);const t=ct("EPSG:4326"),n=ct(e);if(n.getCode()!==t.getCode()){const s=i.getProperties();i=i.clone(),i.transform(n,t),i.setProperties(s)}return i};Ee.convertColorToCesium=function(i){if(i=i||"black",Array.isArray(i))return new Cesium.Color(Cesium.Color.byteToFloat(i[0]),Cesium.Color.byteToFloat(i[1]),Cesium.Color.byteToFloat(i[2]),i[3]);if(typeof i=="string")return Cesium.Color.fromCssColorString(i);if(i instanceof CanvasPattern||i instanceof CanvasGradient){const e=document.createElement("canvas"),t=e.getContext("2d");return e.width=e.height=256,t.fillStyle=i,t.fillRect(0,0,e.width,e.height),new Cesium.ImageMaterialProperty({image:e})}console.assert(!1,"impossible")};Ee.convertUrlToCesium=function(i){let e="";const t=/\{(\d|[a-z])-(\d|[a-z])\}/,n=t.exec(i);if(n){i=i.replace(t,"{s}");const s=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let o;for(o=s;o<=r;++o)e+=String.fromCharCode(o)}return{url:i,subdomains:e}};Ee.resetToNorthZenith=function(i,e){return new Promise((t,n)=>{const s=e.camera,r=Ee.pickBottomPoint(e);if(!r){n("Could not get bottom pivot");return}const o=i.getView().getRotation();if(o===void 0){n("The view is not initialized");return}const a=Ee.computeAngleToZenith(e,r);Ee.setHeadingUsingBottomCenter(e,o,r);const l=Cesium.Matrix4.fromTranslation(r),u=s.right,h={callback:()=>{const f=i.getView();Ee.normalizeView(f),t()}};Ee.rotateAroundAxis(s,-a,u,l,h)})};Ee.rotateAroundBottomCenter=function(i,e){return new Promise((t,n)=>{const s=i.camera,r=Ee.pickBottomPoint(i);if(!r){n("could not get bottom pivot");return}const o={callback:t},a=Cesium.Matrix4.fromTranslation(r),l=s.right,u=Ee.rotateAroundAxis;u(s,-e,l,a,o)})};Ee.normalizeView=function(i,e=0){const t=i.getResolution();i.setRotation(e),i.constrainResolution?i.setResolution(i.constrainResolution(t)):i.setResolution(i.getConstrainedResolution(t))};Ee.isCesiumProjection=function(i){const e=i.getCode()==="EPSG:3857",t=i.getCode()==="EPSG:4326";return e||t};function e0(i,e,t,n){const s={viewState:{zoom:e,center:t},extent:n};if(!i)return[];let r=i(s);return Array.isArray(r)||(r=[r]),r.map(o=>new Cesium.Credit(o,!0))}function XI(i,e,t,n){const s=t.canvas,o=t.camera.frustum.fovy;console.assert(!isNaN(o));const a=n.getMetersPerUnit(),l=i*s.clientHeight,u=Math.cos(Math.abs(e));return l*a*u/2/Math.tan(o/2)}function KI(i,e,t,n){const s=t.canvas,o=t.camera.frustum.fovy;console.assert(!isNaN(o));const a=n.getMetersPerUnit(),l=2*i*Math.tan(o/2),u=Math.cos(Math.abs(e));return l/a/u/s.clientHeight}class qI{constructor(e){this.ol3d=e,this.scene_=e.getCesiumScene(),this.canvas_=this.scene_.canvas,this._boundNotifyRepaintRequired=this.notifyRepaintRequired.bind(this),this.repaintEventNames_=["mousemove","mousedown","mouseup","touchstart","touchend","touchmove","pointerdown","pointerup","pointermove","wheel"],this.enable()}enable(){this.scene_.requestRenderMode=!0,this.scene_.maximumRenderTimeChange=1e3;for(const e of this.repaintEventNames_)this.canvas_.addEventListener(e,this._boundNotifyRepaintRequired,!1);window.addEventListener("resize",this._boundNotifyRepaintRequired,!1),this.ol3d.getOlMap().getLayerGroup().on("change",this._boundNotifyRepaintRequired)}disable(){for(const e of this.repaintEventNames_)this.canvas_.removeEventListener(e,this._boundNotifyRepaintRequired,!1);window.removeEventListener("resize",this._boundNotifyRepaintRequired,!1),this.ol3d.getOlMap().getLayerGroup().un("change",this._boundNotifyRepaintRequired),this.scene_.requestRenderMode=!1}restartRenderLoop(){this.notifyRepaintRequired()}notifyRepaintRequired(){this.scene_.requestRender()}}function Cl(i){return i*180/Math.PI}function No(i){return i*Math.PI/180}class kr{constructor(e,t){this.scene_=e,this.cam_=e.camera,this.map_=t,this.view_=null,this.viewListenKey_=null,this.toLonLat_=kr.identityProjection,this.fromLonLat_=kr.identityProjection,this.tilt_=0,this.distance_=0,this.lastCameraViewMatrix_=null,this.viewUpdateInProgress_=!1,this.map_.on("change:view",n=>{this.setView_(this.map_.getView())}),this.setView_(this.map_.getView())}static identityProjection(e,t,n){const s=n||e.length;if(t)for(let r=0;r<s;++r)t[r]=e[r];return e}setView_(e){if(this.view_&&(An(this.viewListenKey_),this.viewListenKey_=null),this.view_=e,e){const t=vs(e.getProjection(),"EPSG:4326"),n=vs("EPSG:4326",e.getProjection());console.assert(t&&n),this.toLonLat_=t,this.fromLonLat_=n,this.viewListenKey_=e.on("propertychange",s=>this.handleViewEvent_(s)),this.readFromView()}else this.toLonLat_=kr.identityProjection,this.fromLonLat_=kr.identityProjection}handleViewEvent_(e){this.viewUpdateInProgress_||this.readFromView()}setHeading(e){this.view_&&this.view_.setRotation(e)}getHeading(){return this.view_?this.view_.getRotation()||0:void 0}setTilt(e){this.tilt_=e,this.updateCamera_()}getTilt(){return this.tilt_}setDistance(e){this.distance_=e,this.updateCamera_(),this.updateView()}getDistance(){return this.distance_}setCenter(e){this.view_&&this.view_.setCenter(e)}getCenter(){if(this.view_)return this.view_.getCenter()}setPosition(e){if(!this.toLonLat_)return;const t=this.toLonLat_(e);console.assert(t);const n=new Cesium.Cartographic(No(t[0]),No(t[1]),this.getAltitude());this.cam_.setView({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(n)}),this.updateView()}getPosition(){if(!this.fromLonLat_)return;const e=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position),t=this.fromLonLat_([Cl(e.longitude),Cl(e.latitude)]);return console.assert(t),t}setAltitude(e){const t=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);t.height=e,this.cam_.position=Cesium.Ellipsoid.WGS84.cartographicToCartesian(t),this.updateView()}getAltitude(){return Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position).height}updateCamera_(){if(!this.view_||!this.toLonLat_)return;const e=this.view_.getCenter();if(!e)return;const t=this.toLonLat_(e);console.assert(t);const n=new Cesium.Cartographic(No(t[0]),No(t[1]));if(this.scene_.globe){const o=this.scene_.globe.getHeight(n);n.height=o||0}const s=Cesium.Ellipsoid.WGS84.cartographicToCartesian(n),r={pitch:this.tilt_-Cesium.Math.PI_OVER_TWO,heading:-this.view_.getRotation(),roll:void 0};this.cam_.setView({destination:s,orientation:r}),this.cam_.moveBackward(this.distance_),this.checkCameraChange(!0)}readFromView(){if(!this.view_||!this.toLonLat_)return;const e=this.view_.getCenter();if(e==null)return;const t=this.toLonLat_(e);console.assert(t);const n=this.view_.getResolution();this.distance_=this.calcDistanceForResolution(n||0,No(t[1])),this.updateCamera_()}updateView(){if(!this.view_||!this.fromLonLat_)return;this.viewUpdateInProgress_=!0;const e=Cesium.Ellipsoid.WGS84,t=this.scene_,n=Ee.pickCenterPoint(t);let s=n;if(!s){const o=t.globe,a=this.cam_.positionCartographic.clone(),l=o.getHeight(a);a.height=l||0,s=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a)}this.distance_=Cesium.Cartesian3.distance(s,this.cam_.position);const r=e.cartesianToCartographic(s);if(this.view_.setCenter(this.fromLonLat_([Cl(r.longitude),Cl(r.latitude)])),this.view_.setResolution(this.calcResolutionForDistance(this.distance_,r?r.latitude:0)),n){const o=this.cam_.position,a=new Cesium.Cartesian3;e.geocentricSurfaceNormal(n,a);const l=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(o,n,l),Cesium.Cartesian3.normalize(l,l);const u=this.cam_.up,h=this.cam_.right,f=new Cesium.Cartesian3(-n.y,n.x,0),m=Cesium.Cartesian3.angleBetween(h,f),v=Cesium.Cartesian3.cross(n,u,new Cesium.Cartesian3).z;this.view_.setRotation(v<0?m:-m);const E=Math.acos(Cesium.Cartesian3.dot(a,l));this.tilt_=isNaN(E)?0:E}else this.view_.setRotation(this.cam_.heading),this.tilt_=-this.cam_.pitch+Math.PI/2;this.viewUpdateInProgress_=!1}checkCameraChange(e){const t=this.lastCameraViewMatrix_,n=this.cam_.viewMatrix;(!t||!Cesium.Matrix4.equalsEpsilon(t,n,1e-5))&&(this.lastCameraViewMatrix_=n.clone(),e!==!0&&this.updateView())}calcDistanceForResolution(e,t){return XI(e,t,this.scene_,this.view_.getProjection())}calcResolutionForDistance(e,t){return KI(e,t,this.scene_,this.view_.getProjection())}}class t0{constructor(e,t){this.map=e,this.view=e.getView(),this.scene=t,this.olLayers=e.getLayerGroup().getLayers(),this.mapLayerGroup=e.getLayerGroup(),this.layerMap={},this.olLayerListenKeys={},this.olGroupListenKeys_={}}synchronize(){this.destroyAll(),this.addLayers_(this.mapLayerGroup)}orderLayers(){}addLayers_(e){const t=[{layer:e,parents:[]}];for(;t.length>0;){const n=t.splice(0,1)[0],s=n.layer,r=$t(s).toString();this.olLayerListenKeys[r]=[],console.assert(!this.layerMap[r]);let o=null;if(s instanceof or)this.listenForGroupChanges_(s),s!==this.mapLayerGroup&&(o=this.createSingleLayerCounterparts(n)),o||s.getLayers().forEach(a=>{if(a){const l={layer:a,parents:s===this.mapLayerGroup?[]:[n.layer].concat(n.parents)};t.push(l)}});else if(o=this.createSingleLayerCounterparts(n),!o){const a=r,l=n,u=h=>{const f=this.createSingleLayerCounterparts(l);f&&(l.layer.un("change",u),this.addCesiumObjects_(f,a,l.layer),this.orderLayers())};this.olLayerListenKeys[r].push(Nr(l.layer,"change",u))}o&&this.addCesiumObjects_(o,r,s)}this.orderLayers()}addCesiumObjects_(e,t,n){this.layerMap[t]=e,this.olLayerListenKeys[t].push(Nr(n,"change:zIndex",()=>this.orderLayers())),e.forEach(s=>{this.addCesiumObject(s)})}removeAndDestroySingleLayer_(e){const t=$t(e).toString(),n=this.layerMap[t];return n&&(n.forEach(s=>{this.removeSingleCesiumObject(s,!1),this.destroyCesiumObject(s)}),this.olLayerListenKeys[t].forEach(An),delete this.olLayerListenKeys[t]),delete this.layerMap[t],!!n}unlistenSingleGroup_(e){if(e===this.mapLayerGroup)return;const t=$t(e).toString();this.olGroupListenKeys_[t].forEach(s=>{An(s)}),delete this.olGroupListenKeys_[t],delete this.layerMap[t]}removeLayer_(e){if(e){const t=[e];for(;t.length>0;){const n=t.splice(0,1)[0],s=this.removeAndDestroySingleLayer_(n);n instanceof or&&(this.unlistenSingleGroup_(n),s||n.getLayers().forEach(r=>{t.push(r)}))}}}listenForGroupChanges_(e){const t=$t(e).toString();console.assert(this.olGroupListenKeys_[t]===void 0);const n=[];this.olGroupListenKeys_[t]=n;let s=[];const r=function(){const o=e.getLayers();o&&(s=[o.on("add",a=>{this.addLayers_(a.element)}),o.on("remove",a=>{this.removeLayer_(a.element)})],n.push(...s))}.bind(this);r(),n.push(e.on("change:layers",o=>{s.forEach(a=>{const l=n.indexOf(a);l>=0&&n.splice(l,1),An(a)}),r()}))}destroyAll(){this.removeAllCesiumObjects(!0);let e;for(e in this.olGroupListenKeys_)this.olGroupListenKeys_[e].forEach(An);for(e in this.olLayerListenKeys)this.olLayerListenKeys[e].forEach(An);this.olGroupListenKeys_={},this.olLayerListenKeys={},this.layerMap={}}addCesiumObject(e){}destroyCesiumObject(e){}removeSingleCesiumObject(e,t){}removeAllCesiumObjects(e){}createSingleLayerCounterparts(e){}}class ZI extends t0{constructor(e,t){super(e,t),this.cesiumLayers_=t.imageryLayers,this.ourLayers_=new Cesium.ImageryLayerCollection}addCesiumObject(e){this.cesiumLayers_.add(e),this.ourLayers_.add(e)}destroyCesiumObject(e){e.destroy()}removeSingleCesiumObject(e,t){this.cesiumLayers_.remove(e,t),this.ourLayers_.remove(e,!1)}removeAllCesiumObjects(e){for(let t=0;t<this.ourLayers_.length;++t)this.cesiumLayers_.remove(this.ourLayers_.get(t),e);this.ourLayers_.removeAll(!1)}convertLayerToCesiumImageries(e,t){const n=Ee.tileLayerToImageryLayer(this.map,e,t);return n?[n]:null}createSingleLayerCounterparts(e){const t=e.layer,n=$t(t).toString(),s=this.view.getProjection();console.assert(s);const r=this.convertLayerToCesiumImageries(t,s);if(r){const o=[];if([e.layer].concat(e.parents).forEach(a=>{o.push(a.on(["change:opacity","change:visible"],()=>{console.assert(r);for(let l=0;l<r.length;++l)Ee.updateCesiumLayerProperties(e,r[l])}))}),t.getStyleFunction){let a=t.getStyleFunction();o.push(t.on("change",()=>{const l=t.getStyleFunction();if(a!==l){a=l;for(let u=0;u<r.length;++u){const h=r[u];h._imageryCache&&h.imageryProvider.cache_&&(h._imageryCache={},h.imageryProvider.cache_={},h.imageryProvider.styleFunction_=l)}this.scene.requestRender()}}))}for(let a=0;a<r.length;++a)Ee.updateCesiumLayerProperties(e,r[a]);o.push(t.on("change:extent",a=>{for(let l=0;l<r.length;++l)this.cesiumLayers_.remove(r[l],!0),this.ourLayers_.remove(r[l],!1);delete this.layerMap[$t(t)],this.synchronize()})),o.push(t.on("change",a=>{for(let l=0;l<r.length;++l){const u=this.cesiumLayers_.indexOf(r[l]);u>=0&&(this.cesiumLayers_.remove(r[l],!1),this.cesiumLayers_.add(r[l],u))}})),this.olLayerListenKeys[n].push(...o)}return Array.isArray(r)?r:null}orderLayers(){const e=[],t={},n=[this.mapLayerGroup];for(;n.length>0;){const s=n.splice(0,1)[0];if(e.push(s),t[$t(s)]=s.getZIndex()||0,s instanceof or){const r=s.getLayers();r&&n.unshift(...r.getArray())}}VI(e,(s,r)=>t[$t(s)]-t[$t(r)]),e.forEach(s=>{const r=$t(s).toString(),o=this.layerMap[r];o&&o.forEach(a=>{this.raiseToTop(a)})})}raiseToTop(e){this.cesiumLayers_.raiseToTop(e)}}class JI{constructor(e,t){const n=new Cesium.BillboardCollection({scene:t}),s=new Cesium.PrimitiveCollection;this.olListenKeys=[],this.rootCollection_=new Cesium.PrimitiveCollection,this.context={projection:e,billboards:n,featureToCesiumMap:{},primitives:s},this.rootCollection_.add(n),this.rootCollection_.add(s)}destroy(){this.olListenKeys.forEach(An),this.olListenKeys.length=0}getRootPrimitive(){return this.rootCollection_}}class QI{constructor(e){this.scene=e,this.boundOnRemoveOrClearFeatureListener_=this.onRemoveOrClearFeature_.bind(this),this.defaultBillboardEyeOffset_=new Cesium.Cartesian3(0,0,10)}onRemoveOrClearFeature_(e){const t=e.target;console.assert(t instanceof ln);const n=Tt.obj(t).olcs_cancellers;if(n){const s=e.feature;if(s){const r=$t(s),o=n[r];o&&(o(),delete n[r])}else{for(const r in n)n.hasOwnProperty(r)&&n[r]();Tt.obj(t).olcs_cancellers={}}}}setReferenceForPicking(e,t,n){n.olLayer=e,n.olFeature=t}createColoredPrimitive(e,t,n,s,r,o){const a=function(m,y){const v=new Cesium.GeometryInstance({geometry:m});return y&&!(y instanceof Cesium.ImageMaterialProperty)&&(v.attributes={color:Cesium.ColorGeometryInstanceAttribute.fromColor(y)}),v},l={flat:!0,renderState:{depthTest:{enabled:!0}}};o!==void 0&&(l.renderState||(l.renderState={}),l.renderState.lineWidth=o);const u=a(s,r),h=this.getHeightReference(e,t,n);let f;if(h===Cesium.HeightReference.CLAMP_TO_GROUND){const m=u.geometry.constructor;if(m&&!m.createShadowVolume)return null;f=new Cesium.GroundPrimitive({geometryInstances:u})}else f=new Cesium.Primitive({geometryInstances:u});if(r instanceof Cesium.ImageMaterialProperty){const m=r.image.getValue().toDataURL();f.appearance=new Cesium.MaterialAppearance({flat:!0,renderState:{depthTest:{enabled:!0}},material:new Cesium.Material({fabric:{type:"Image",uniforms:{image:m}}})})}else f.appearance=new Cesium.PerInstanceColorAppearance(l);return this.setReferenceForPicking(e,t,f),f}extractColorFromOlStyle(e,t){const n=e.getFill()?e.getFill().getColor():null,s=e.getStroke()?e.getStroke().getColor():null;let r="black";return s&&t?r=s:n&&(r=n),Ee.convertColorToCesium(r)}extractLineWidthFromOlStyle(e){const t=e.getStroke()?e.getStroke().getWidth():void 0;return t!==void 0?t:1}wrapFillAndOutlineGeometries(e,t,n,s,r,o){const a=this.extractColorFromOlStyle(o,!1),l=this.extractColorFromOlStyle(o,!0),u=new Cesium.PrimitiveCollection;if(o.getFill()){const h=this.createColoredPrimitive(e,t,n,s,a);console.assert(!!h),u.add(h)}if(o.getStroke()&&r){const h=this.extractLineWidthFromOlStyle(o),f=this.createColoredPrimitive(e,t,n,r,l,h);f&&u.add(f)}return u}addTextStyle(e,t,n,s,r){let o;if(r instanceof Cesium.PrimitiveCollection?o=r:(o=new Cesium.PrimitiveCollection,o.add(r)),!s.getText())return o;const a=s.getText(),l=this.olGeometry4326TextPartToCesium(e,t,n,a);return l&&o.add(l),o}csAddBillboard(e,t,n,s,r,o){t.eyeOffset||(t.eyeOffset=this.defaultBillboardEyeOffset_);const a=e.add(t);return this.setReferenceForPicking(n,s,a),a}olCircleGeometryToCesium(e,t,n,s,r){n=Ee.olGeometryCloneTo4326(n,s),console.assert(n.getType()=="Circle");let o=n.getCenter();const a=o.length==3?o[2]:0;let l=o.slice();l[0]+=n.getRadius(),o=Ee.ol4326CoordinateToCesiumCartesian(o),l=Ee.ol4326CoordinateToCesiumCartesian(l);const u=Cesium.Cartesian3.distance(o,l),h=new Cesium.CircleGeometry({center:o,radius:u,height:a});let f,m;if(this.getHeightReference(e,t,n)===Cesium.HeightReference.CLAMP_TO_GROUND){const v=this.extractLineWidthFromOlStyle(r);if(v){const E=Rw(n.getCenter(),u),b=Ee.ol4326CoordinateArrayToCsCartesians(E.getLinearRing(0).getCoordinates());if(Uu(this.scene))f=new Cesium.GroundPolylinePrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.GroundPolylineGeometry({positions:b,width:v})}),appearance:new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(t,r,!0)}),classificationType:Cesium.ClassificationType.TERRAIN}),f.readyPromise.then(()=>{this.setReferenceForPicking(e,t,f._primitive)});else{const S=this.extractColorFromOlStyle(r,!0);f=this.createStackedGroundCorridors(e,t,v,S,b)}}}else m=new Cesium.CircleOutlineGeometry({center:o,radius:u,extrudedHeight:a,height:a});const y=this.wrapFillAndOutlineGeometries(e,t,n,h,m,r);return f&&y.add(f),this.addTextStyle(e,t,n,r,y)}createStackedGroundCorridors(e,t,n,s,r){Array.isArray(r[0])||(r=[r]),n=Math.max(3,n);const o=[];let a=0;for(const l of[1e3,4e3,16e3,64e3,254e3,1e6,1e7]){n*=2.14;const u={width:n,vertexFormat:Cesium.VertexFormat.POSITION_ONLY};for(const h of r)u.positions=h,o.push(new Cesium.GeometryInstance({geometry:new Cesium.CorridorGeometry(u),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(s),distanceDisplayCondition:new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(a,l-1)}}));a=l}return new Cesium.GroundPrimitive({geometryInstances:o})}olLineStringGeometryToCesium(e,t,n,s,r){n=Ee.olGeometryCloneTo4326(n,s),console.assert(n.getType()=="LineString");const o=Ee.ol4326CoordinateArrayToCsCartesians(n.getCoordinates()),a=this.extractLineWidthFromOlStyle(r);let l;const u=this.getHeightReference(e,t,n);if(u===Cesium.HeightReference.CLAMP_TO_GROUND&&!Uu(this.scene)){const h=this.extractColorFromOlStyle(r,!0);l=this.createStackedGroundCorridors(e,t,a,h,o)}else{const h=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(t,r,!0)}),f={positions:o,width:a},m={appearance:h};if(u===Cesium.HeightReference.CLAMP_TO_GROUND){const y=new Cesium.GroundPolylineGeometry(f);m.geometryInstances=new Cesium.GeometryInstance({geometry:y}),l=new Cesium.GroundPolylinePrimitive(m),l.readyPromise.then(()=>{this.setReferenceForPicking(e,t,l._primitive)})}else{f.vertexFormat=h.vertexFormat;const y=new Cesium.PolylineGeometry(f);m.geometryInstances=new Cesium.GeometryInstance({geometry:y}),l=new Cesium.Primitive(m)}}return this.setReferenceForPicking(e,t,l),this.addTextStyle(e,t,n,r,l)}olPolygonGeometryToCesium(e,t,n,s,r){n=Ee.olGeometryCloneTo4326(n,s),console.assert(n.getType()=="Polygon");const o=this.getHeightReference(e,t,n);let a,l,u;if(n.getCoordinates()[0].length==5&&t.getGeometry().get("olcs.polygon_kind")==="rectangle"){const f=n.getCoordinates()[0],m=zl(f),y=Cesium.Rectangle.fromDegrees(m[0],m[1],m[2],m[3]);let v=0;if(f[0].length==3)for(let E=0;E<f.length;E++)v=Math.max(v,f[E][2]);a=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:y,height:v}),l=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:y,height:v})}else{const f=n.getLinearRings(),m={},y=m;console.assert(f.length>0);for(let v=0;v<f.length;++v){const E=f[v].getCoordinates(),b=Ee.ol4326CoordinateArrayToCsCartesians(E);console.assert(b&&b.length>0),v==0?m.positions=b:(m.holes||(m.holes=[]),m.holes.push({positions:b}))}if(a=new Cesium.PolygonGeometry({polygonHierarchy:y,perPositionHeight:!0}),o===Cesium.HeightReference.CLAMP_TO_GROUND){const v=this.extractLineWidthFromOlStyle(r);if(v>0){const E=[m.positions];if(m.holes)for(let b=0;b<m.holes.length;++b)E.push(m.holes[b].positions);if(Uu(this.scene)){const b=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(t,r,!0)}),S=[];for(const I of E){const R=new Cesium.GroundPolylineGeometry({positions:I,width:v});S.push(new Cesium.GeometryInstance({geometry:R}))}const A={appearance:b,geometryInstances:S};u=new Cesium.GroundPolylinePrimitive(A),u.readyPromise.then(()=>{this.setReferenceForPicking(e,t,u._primitive)})}else{const b=this.extractColorFromOlStyle(r,!0);u=this.createStackedGroundCorridors(e,t,v,b,E)}}}else l=new Cesium.PolygonOutlineGeometry({polygonHierarchy:m,perPositionHeight:!0})}const h=this.wrapFillAndOutlineGeometries(e,t,n,a,l,r);return u&&h.add(u),this.addTextStyle(e,t,n,r,h)}getHeightReference(e,t,n){let s=n.get("altitudeMode");s===void 0&&(s=t.get("altitudeMode")),s===void 0&&(s=e.get("altitudeMode"));let r=Cesium.HeightReference.NONE;return s==="clampToGround"?r=Cesium.HeightReference.CLAMP_TO_GROUND:s==="relativeToGround"&&(r=Cesium.HeightReference.RELATIVE_TO_GROUND),r}createBillboardFromImage(e,t,n,s,r,o,a,l){o instanceof _a&&o.load();const u=o.getImage(1),h=function(m){return m.src!=""&&m.naturalHeight!=0&&m.naturalWidth!=0&&m.complete},f=function(){if(!u||!(u instanceof HTMLCanvasElement||u instanceof Image||u instanceof HTMLImageElement))return;const m=n.getCoordinates(),y=Ee.ol4326CoordinateToCesiumCartesian(m);let v;const E=o.getOpacity();E!==void 0&&(v=new Cesium.Color(1,1,1,E));const b=o.getScale(),S=this.getHeightReference(e,t,n),A={image:u,color:v,scale:b,heightReference:S,position:y};if(Object.assign(A,t.get("cesiumOptions")),o instanceof _a){const R=o.getAnchor();R&&(A.pixelOffset=new Cesium.Cartesian2((u.width/2-R[0])*b,(u.height/2-R[1])*b))}const I=this.csAddBillboard(a,A,e,t,n,r);l&&l(I)}.bind(this);if(u instanceof Image&&!h(u)){let m=!1;const y=e.getSource(),v=function(){m=!0};y.on(["removefeature","clear"],this.boundOnRemoveOrClearFeatureListener_);let E=Tt.obj(y).olcs_cancellers;E||(E=Tt.obj(y).olcs_cancellers={});const b=$t(t);E[b]&&E[b](),E[b]=v;const S=function(){u.removeEventListener("load",S),!a.isDestroyed()&&!m&&f()};u.addEventListener("load",S)}else f()}olPointGeometryToCesium(e,t,n,s,r,o,a){console.assert(n.getType()=="Point"),n=Ee.olGeometryCloneTo4326(n,s);let l=null;const u=r.getImage();if(u){const h=n.get("olcs_model")||t.get("olcs_model");if(h){const f=h(),m=Object.assign({},{scene:this.scene},f.cesiumOptions),y=Cesium.Model.fromGltf(m);l=new Cesium.PrimitiveCollection,l.add(y),f.debugModelMatrix&&l.add(new Cesium.DebugModelMatrixPrimitive({modelMatrix:f.debugModelMatrix}))}else this.createBillboardFromImage(e,t,n,s,r,u,o,a)}return r.getText()?this.addTextStyle(e,t,n,r,l||new Cesium.Primitive):l}olMultiGeometryToCesium(e,t,n,s,r,o,a){const l=function(h,f){const m=new Cesium.PrimitiveCollection;return h.forEach(y=>{m.add(f(e,t,y,s,r))}),m};let u;switch(n.getType()){case"MultiPoint":if(n=n,u=n.getPoints(),r.getText()){const h=new Cesium.PrimitiveCollection;return u.forEach(f=>{console.assert(f);const m=this.olPointGeometryToCesium(e,t,f,s,r,o,a);m&&h.add(m)}),h}else return u.forEach(h=>{console.assert(h),this.olPointGeometryToCesium(e,t,h,s,r,o,a)}),null;case"MultiLineString":return n=n,u=n.getLineStrings(),l(u,this.olLineStringGeometryToCesium.bind(this));case"MultiPolygon":return n=n,u=n.getPolygons(),l(u,this.olPolygonGeometryToCesium.bind(this));default:console.assert(!1,`Unhandled multi geometry type${n.getType()}`)}}olGeometry4326TextPartToCesium(e,t,n,s){const r=s.getText();if(!r)return null;const o=new Cesium.LabelCollection({scene:this.scene}),a=wi(n.getExtent());if(n instanceof jn){const v=n.getFirstCoordinate();a[2]=v.length==3?v[2]:0}const l={};l.position=Ee.ol4326CoordinateToCesiumCartesian(a),l.text=r,l.heightReference=this.getHeightReference(e,t,n);const u=s.getOffsetX(),h=s.getOffsetY();if(u!=0&&h!=0){const v=new Cesium.Cartesian2(u,h);l.pixelOffset=v}l.font=s.getFont()||"10px sans-serif";let f;s.getFill()&&(l.fillColor=this.extractColorFromOlStyle(s,!1),f=Cesium.LabelStyle.FILL),s.getStroke()&&(l.outlineWidth=this.extractLineWidthFromOlStyle(s),l.outlineColor=this.extractColorFromOlStyle(s,!0),f=Cesium.LabelStyle.OUTLINE),s.getFill()&&s.getStroke()&&(f=Cesium.LabelStyle.FILL_AND_OUTLINE),l.style=f;let m;switch(s.getTextAlign()){case"left":m=Cesium.HorizontalOrigin.LEFT;break;case"right":m=Cesium.HorizontalOrigin.RIGHT;break;case"center":default:m=Cesium.HorizontalOrigin.CENTER}if(l.horizontalOrigin=m,s.getTextBaseline()){let v;switch(s.getTextBaseline()){case"top":v=Cesium.VerticalOrigin.TOP;break;case"middle":v=Cesium.VerticalOrigin.CENTER;break;case"bottom":v=Cesium.VerticalOrigin.BOTTOM;break;case"alphabetic":v=Cesium.VerticalOrigin.TOP;break;case"hanging":v=Cesium.VerticalOrigin.BOTTOM;break;default:console.assert(!1,`unhandled baseline ${s.getTextBaseline()}`)}l.verticalOrigin=v}const y=o.add(l);return this.setReferenceForPicking(e,t,y),o}olStyleToCesium(e,t,n){const s=t.getFill(),r=t.getStroke();if(n&&!r||!n&&!s)return null;let o=n?r.getColor():s.getColor();return o=Ee.convertColorToCesium(o),n&&r.getLineDash()?Cesium.Material.fromType("Stripe",{horizontal:!1,repeat:500,evenColor:o,oddColor:new Cesium.Color(0,0,0,0)}):Cesium.Material.fromType("Color",{color:o})}computePlainStyle(e,t,n,s){const r=t.getStyleFunction();let o=null;return r&&(o=r(t,s)),!o&&n&&(o=n(t,s)),o?Array.isArray(o)?o:[o]:null}getGeometryFromFeature(e,t,n){if(n)return n;const s=e.get("olcs.3d_geometry");if(s&&s instanceof Ul)return s;if(t){const r=t.getGeometryFunction()(e);if(r instanceof Ul)return r}return e.getGeometry()}olFeatureToCesium(e,t,n,s,r){let o=this.getGeometryFromFeature(t,n,r);if(!o)return null;const a=s.projection,l=function(u){const h=s.featureToCesiumMap[$t(t)];h instanceof Array?h.push(u):s.featureToCesiumMap[$t(t)]=[u]};switch(o.getType()){case"GeometryCollection":const u=new Cesium.PrimitiveCollection;return o.getGeometries().forEach(v=>{if(v){const E=this.olFeatureToCesium(e,t,n,s,v);E&&u.add(E)}}),u;case"Point":o=o;const f=s.billboards,m=this.olPointGeometryToCesium(e,t,o,a,n,f,l);return m||null;case"Circle":return o=o,this.olCircleGeometryToCesium(e,t,o,a,n);case"LineString":return o=o,this.olLineStringGeometryToCesium(e,t,o,a,n);case"Polygon":return o=o,this.olPolygonGeometryToCesium(e,t,o,a,n);case"MultiPoint":case"MultiLineString":case"MultiPolygon":const y=this.olMultiGeometryToCesium(e,t,o,a,n,s.billboards,l);return y||null;case"LinearRing":throw new Error("LinearRing should only be part of polygon.");default:throw new Error(`Ol geom type not handled : ${o.getType()}`)}}olVectorLayerToCesium(e,t,n){const s=t.getProjection(),r=t.getResolution();if(r===void 0||!s)throw console.assert(!1,"View not ready"),new Error("View not ready");let o=e.getSource();o instanceof qy&&(o=o.getSource()),console.assert(o instanceof ln);const a=o.getFeatures(),l=new JI(s,this.scene),u=l.context;for(let h=0;h<a.length;++h){const f=a[h];if(!f)continue;const m=e.getStyleFunction(),y=this.computePlainStyle(e,f,m,r);if(!y||!y.length)continue;let v=null;for(let E=0;E<y.length;E++){const b=this.olFeatureToCesium(e,f,y[E],u);if(b){if(!v)v=b;else if(b){let S=0,A;for(;A=b.get(S);)v.add(A),S++}}}v&&(n[$t(f)]=v,l.getRootPrimitive().add(v))}return l}convert(e,t,n,s){const r=t.getProjection(),o=t.getResolution();if(o==null||!r)return null;const a=e.getStyleFunction(),l=this.computePlainStyle(e,n,a,o);if(!l||!l.length)return null;s.projection=r;let u=null;for(let h=0;h<l.length;h++){const f=this.olFeatureToCesium(e,n,l[h],s);if(!u)u=f;else if(f){let m=0,y;for(;y=f.get(m);)u.add(y),m++}}return u}}class eL extends t0{constructor(e,t,n){super(e,t),this.converter=n||new QI(t),this.csAllPrimitives_=new Cesium.PrimitiveCollection,t.primitives.add(this.csAllPrimitives_),this.csAllPrimitives_.destroyPrimitives=!1}addCesiumObject(e){console.assert(e),e.getRootPrimitive().counterpart=e,this.csAllPrimitives_.add(e.getRootPrimitive())}destroyCesiumObject(e){e.getRootPrimitive().destroy()}removeSingleCesiumObject(e,t){e.destroy(),this.csAllPrimitives_.destroyPrimitives=t,this.csAllPrimitives_.remove(e.getRootPrimitive()),this.csAllPrimitives_.destroyPrimitives=!1}removeAllCesiumObjects(e){if(this.csAllPrimitives_.destroyPrimitives=e,e)for(let t=0;t<this.csAllPrimitives_.length;++t)this.csAllPrimitives_.get(t).counterpart.destroy();this.csAllPrimitives_.removeAll(),this.csAllPrimitives_.destroyPrimitives=!1}updateLayerVisibility(e,t){let n=!0;[e.layer].concat(e.parents).forEach(s=>{const r=s.getVisible();r!==void 0?n&=r:n=!1}),t.show=n}createSingleLayerCounterparts(e){const t=e.layer;if(!(t instanceof is)||t instanceof Dy)return null;console.assert(t instanceof po);let n=t.getSource();if(n instanceof qy&&(n=n.getSource()),!n)return null;console.assert(n instanceof ln),console.assert(this.view);const s=this.view,r={},o=this.converter.olVectorLayerToCesium(t,s,r),a=o.getRootPrimitive(),l=o.olListenKeys;[e.layer].concat(e.parents).forEach(f=>{l.push(Nr(f,"change:visible",()=>{this.updateLayerVisibility(e,a)}))}),this.updateLayerVisibility(e,a);const u=function(f){console.assert(t instanceof is||t instanceof my);const m=o.context,y=this.converter.convert(t,s,f,m);y&&(r[$t(f)]=y,a.add(y))}.bind(this),h=function(f){const m=$t(f),y=o.context,v=y.featureToCesiumMap[m];v&&(delete y.featureToCesiumMap[m],v.forEach(b=>{b instanceof Cesium.Billboard&&y.billboards.remove(b)}));const E=r[m];delete r[m],E&&a.remove(E)}.bind(this);return l.push(Nr(n,"addfeature",f=>{console.assert(f.feature),u(f.feature)})),l.push(Nr(n,"removefeature",f=>{console.assert(f.feature),h(f.feature)})),l.push(Nr(n,"changefeature",f=>{const m=f.feature;console.assert(m),h(m),u(m)})),o?[o]:null}}class tL extends dc{constructor(e){const t=e.parent;super(t.getOptions()),this.scenePostRenderListenerRemover_=null,this.scene_=e.scene,this.synchronizer_=e.synchronizer,this.parent_=t,this.positionWGS84_=void 0,this.observer_=new MutationObserver(this.handleElementChanged.bind(this)),this.attributeObserver_=[],this.listenerKeys_=[];const n=s=>this.setPropertyFromEvent_(s);this.listenerKeys_.push(this.parent_.on("change:position",n)),this.listenerKeys_.push(this.parent_.on("change:element",n)),this.listenerKeys_.push(this.parent_.on("change:offset",n)),this.listenerKeys_.push(this.parent_.on("change:position",n)),this.listenerKeys_.push(this.parent_.on("change:positioning",n)),this.setProperties(this.parent_.getProperties()),this.handleMapChanged(),this.handleElementChanged()}observeTarget_(e){if(this.observer_){this.observer_.disconnect(),this.observer_.observe(e,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),this.attributeObserver_.forEach(t=>{t.disconnect()}),this.attributeObserver_.length=0;for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(n.nodeType===1){const s=new MutationObserver(this.handleElementChanged.bind(this));s.observe(n,{attributes:!0,subtree:!0}),this.attributeObserver_.push(s)}}}}setPropertyFromEvent_(e){e.target&&e.key&&this.set(e.key,e.target.get(e.key))}getScene(){return this.scene_}handleMapChanged(){this.scenePostRenderListenerRemover_&&(this.scenePostRenderListenerRemover_(),WI(this.element)),this.scenePostRenderListenerRemover_=null;const e=this.getScene();if(e){this.scenePostRenderListenerRemover_=e.postRender.addEventListener(this.updatePixelPosition.bind(this)),this.updatePixelPosition();const t=this.stopEvent?this.synchronizer_.getOverlayContainerStopEvent():this.synchronizer_.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element)}}handlePositionChanged(){const e=this.getPosition();if(e){const t=this.parent_.getMap().getView().getProjection();this.positionWGS84_=$c(e,t,"EPSG:4326")}else this.positionWGS84_=void 0;this.updatePixelPosition()}handleElementChanged(){function e(n,s){const r=n.cloneNode();n.nodeName==="CANVAS"&&r.getContext("2d").drawImage(n,0,0),s&&s.appendChild(r),n.nodeType!=Node.TEXT_NODE&&r.addEventListener("click",a=>{n.dispatchEvent(new MouseEvent("click",a)),a.stopPropagation()});const o=n.childNodes;for(let a=0;a<o.length;a++)o[a]&&e(o[a],r);return r}BI(this.element);const t=this.getElement();if(t&&t.parentNode&&t.parentNode.childNodes)for(const n of t.parentNode.childNodes){const s=e(n,null);this.element.appendChild(s)}t.parentNode&&this.observeTarget_(t.parentNode)}updatePixelPosition(){const e=this.positionWGS84_;if(!this.scene_||!e){this.setVisible(!1);return}let t=0;if(e.length===2){const f=this.scene_.globe.getHeight(Cesium.Cartographic.fromDegrees(e[0],e[1]));f&&this.scene_.globe.tilesLoaded&&(e[2]=f),f&&(t=f)}else t=e[2];const n=Cesium.Cartesian3.fromDegrees(e[0],e[1],t),s=this.scene_.camera,r=new Cesium.BoundingSphere(new Cesium.Cartesian3,6356752);if(!new Cesium.Occluder(r,s.position).isPointVisible(n)){this.setVisible(!1);return}if(s.frustum.computeCullingVolume(s.position,s.direction,s.up).computeVisibility(new Cesium.BoundingSphere(n))!==1){this.setVisible(!1);return}this.setVisible(!0);const l=this.scene_.cartesianToCanvasCoordinates(n),u=[l.x,l.y],h=[this.scene_.canvas.width,this.scene_.canvas.height];this.updateRenderedPosition(u,h)}destroy(){this.scenePostRenderListenerRemover_&&this.scenePostRenderListenerRemover_(),this.observer_&&this.observer_.disconnect(),An(this.listenerKeys_),this.listenerKeys_.splice(0),this.element.removeNode?this.element.removeNode(!0):this.element.remove(),this.element=null}}class iL{constructor(e,t){this.map=e,this.overlays_=this.map.getOverlays(),this.scene=t,this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"].forEach(s=>{this.overlayContainerStopEvent_.addEventListener(s,r=>r.stopPropagation())}),this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_),this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.scene.canvas.parentElement.appendChild(this.overlayContainer_),this.overlayMap_={}}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOverlayContainer(){return this.overlayContainer_}synchronize(){this.destroyAll(),this.addOverlays(),this.overlays_.on("add",this.addOverlayFromEvent_.bind(this)),this.overlays_.on("remove",this.removeOverlayFromEvent_.bind(this))}addOverlayFromEvent_(e){const t=e.element;this.addOverlay(t)}addOverlays(){this.overlays_.forEach(e=>{this.addOverlay(e)})}addOverlay(e){if(!e)return;const t=new tL({scene:this.scene,synchronizer:this,parent:e}),n=$t(e).toString();this.overlayMap_[n]=t}removeOverlayFromEvent_(e){const t=e.element;this.removeOverlay(t)}removeOverlay(e){const t=$t(e).toString(),n=this.overlayMap_[t];n&&(n.destroy(),delete this.overlayMap_[t])}destroyAll(){Object.keys(this.overlayMap_).forEach(e=>{this.overlayMap_[e].destroy(),delete this.overlayMap_[e]})}}class Zo{constructor(e){this.autoRenderLoop_=null,this.map_=e.map,this.time_=e.time||function(){return Cesium.JulianDate.now()},this.to4326Transform_=vs(this.map_.getView().getProjection(),"EPSG:4326"),this.resolutionScale_=1,this.canvasClientWidth_=0,this.canvasClientHeight_=0,this.resolutionScaleChanged_=!0;const t="position:absolute;top:0;left:0;width:100%;height:100%;";this.container_=document.createElement("DIV");const n=document.createAttribute("style");n.value=`${t}visibility:hidden;`,this.container_.setAttributeNode(n);let s=e.target||this.map_.getViewport();if(typeof s=="string"&&(s=document.getElementById(s)),s.appendChild(this.container_),this.isOverMap_=!e.target,this.isOverMap_&&e.stopOpenLayersEventsPropagation){const f=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"];for(let m=0,y=f.length;m<y;++m)this.container_.addEventListener(f[m],v=>v.stopPropagation())}this.canvas_=document.createElement("CANVAS");const r=document.createAttribute("style");r.value=t,this.canvas_.setAttributeNode(r),Tt.supportsImageRenderingPixelated()&&(this.canvas_.style.imageRendering=Tt.imageRenderingValue()),this.canvas_.oncontextmenu=function(){return!1},this.canvas_.onselectstart=function(){return!1},this.container_.appendChild(this.canvas_),this.enabled_=!1,this.pausedInteractions_=[],this.hiddenRootGroup_=null;const o=e.sceneOptions!==void 0?e.sceneOptions:{};o.canvas=this.canvas_,o.scene3DOnly=!0,this.scene_=new Cesium.Scene(o);const a=this.scene_.screenSpaceCameraController;a.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT}),a.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.ALT}),a.enableLook=!1,this.scene_.camera.constrainedAxis=Cesium.Cartesian3.UNIT_Z,this.camera_=new kr(this.scene_,this.map_),this.globe_=new Cesium.Globe(Cesium.Ellipsoid.WGS84),this.globe_.baseColor=Cesium.Color.WHITE,this.scene_.globe=this.globe_,this.scene_.skyAtmosphere=new Cesium.SkyAtmosphere;const l=new Cesium.SingleTileImageryProvider({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",rectangle:Cesium.Rectangle.fromDegrees(0,0,1,1)});this.globe_.imageryLayers.addImageryProvider(l,0),this.dataSourceCollection_=new Cesium.DataSourceCollection,this.dataSourceDisplay_=new Cesium.DataSourceDisplay({scene:this.scene_,dataSourceCollection:this.dataSourceCollection_});const u=e.createSynchronizers?e.createSynchronizers(this.map_,this.scene_,this.dataSourceCollection_):[new ZI(this.map_,this.scene_),new eL(this.map_,this.scene_),new iL(this.map_,this.scene_)];this.handleResize_();for(let f=u.length-1;f>=0;--f)u[f].synchronize();this.lastFrameTime_=0,this.renderId_=void 0,this.targetFrameRate_=Number.POSITIVE_INFINITY,this.blockCesiumRendering_=!1,this.warmingUp_=!1,this.trackedFeature_=null,this.trackedEntity_=null,this.entityView_=null,this.needTrackedEntityUpdate_=!1,this.boundingSphereScratch_=new Cesium.BoundingSphere,new Cesium.EventHelper().add(this.scene_.postRender,Zo.prototype.updateTrackedEntity_,this),Cesium.Camera.enableSuspendTerrainAdjustment=!1}render_(){this.renderId_!==void 0&&(cancelAnimationFrame(this.renderId_),this.renderId_=void 0),(this.enabled_||this.warmingUp_)&&!this.blockCesiumRendering_&&(this.renderId_=requestAnimationFrame(this.onAnimationFrame_.bind(this)))}onAnimationFrame_(e){this.renderId_=void 0;const t=1e3/this.targetFrameRate_;if(e-this.lastFrameTime_<t){this.render_();return}this.lastFrameTime_=e;const s=this.time_();if(this.scene_.initializeFrame(),this.handleResize_(),this.dataSourceDisplay_.update(s),this.entityView_){const r=this.trackedEntity_;this.dataSourceDisplay_.getBoundingSphere(r,!1,this.boundingSphereScratch_)===Cesium.BoundingSphereState.DONE&&(this.boundingSphereScratch_.radius=1,this.entityView_.update(s,this.boundingSphereScratch_))}this.scene_.render(s),this.camera_.checkCameraChange(),this.render_()}updateTrackedEntity_(){if(!this.needTrackedEntityUpdate_)return;const e=this.trackedEntity_,t=this.scene_,n=this.dataSourceDisplay_.getBoundingSphere(e,!1,this.boundingSphereScratch_);if(n===Cesium.BoundingSphereState.PENDING)return;t.screenSpaceCameraController.enableTilt=!1;const s=n!==Cesium.BoundingSphereState.FAILED?this.boundingSphereScratch_:void 0;s&&(s.radius=1),this.entityView_=new Cesium.EntityView(e,t,t.mapProjection.ellipsoid),this.entityView_.update(this.time_(),s),this.needTrackedEntityUpdate_=!1}handleResize_(){let e=this.canvas_.clientWidth,t=this.canvas_.clientHeight;if(e===0|t===0||e===this.canvasClientWidth_&&t===this.canvasClientHeight_&&!this.resolutionScaleChanged_)return;let n=this.resolutionScale_;Tt.supportsImageRenderingPixelated()||(n*=window.devicePixelRatio||1),this.resolutionScaleChanged_=!1,this.canvasClientWidth_=e,this.canvasClientHeight_=t,e*=n,t*=n,this.canvas_.width=e,this.canvas_.height=t,this.scene_.camera.frustum.aspectRatio=e/t}getCamera(){return this.camera_}getOlMap(){return this.map_}getOlView(){const e=this.map_.getView();return console.assert(e),e}getCesiumScene(){return this.scene_}getDataSources(){return this.dataSourceCollection_}getDataSourceDisplay(){return this.dataSourceDisplay_}getEnabled(){return this.enabled_}setEnabled(e){if(this.enabled_===e)return;this.enabled_=e,this.container_.style.visibility=this.enabled_?"visible":"hidden";let t;if(this.enabled_){if(this.throwOnUnitializedMap_(),this.isOverMap_){t=this.map_.getInteractions(),t.forEach((s,r,o)=>{this.pausedInteractions_.push(s)}),t.clear(),this.map_.addInteraction=s=>this.pausedInteractions_.push(s),this.map_.removeInteraction=s=>this.pausedInteractions_=this.pausedInteractions_.filter(r=>r!==s);const n=this.map_.getLayerGroup();n.getVisible()&&(this.hiddenRootGroup_=n,this.hiddenRootGroup_.setVisible(!1)),this.map_.getOverlayContainer().classList.add("olcs-hideoverlay")}this.camera_.readFromView(),this.render_()}else this.isOverMap_&&(t=this.map_.getInteractions(),this.pausedInteractions_.forEach(n=>{t.push(n)}),this.pausedInteractions_.length=0,this.map_.addInteraction=n=>this.map_.getInteractions().push(n),this.map_.removeInteraction=n=>this.map_.getInteractions().remove(n),this.map_.getOverlayContainer().classList.remove("olcs-hideoverlay"),this.hiddenRootGroup_&&(this.hiddenRootGroup_.setVisible(!0),this.hiddenRootGroup_=null)),this.camera_.updateView()}warmUp(e,t){if(this.enabled_)return;this.throwOnUnitializedMap_(),this.camera_.readFromView();const n=this.globe_.ellipsoid,s=this.scene_.camera,r=n.cartesianToCartographic(s.position);r.height<e&&(r.height=e,s.position=n.cartographicToCartesian(r)),this.warmingUp_=!0,this.render_(),setTimeout(()=>{this.warmingUp_=!1},t)}setBlockCesiumRendering(e){this.blockCesiumRendering_!==e&&(this.blockCesiumRendering_=e,this.render_())}enableAutoRenderLoop(){this.autoRenderLoop_||(this.autoRenderLoop_=new qI(this))}getAutoRenderLoop(){return this.autoRenderLoop_}setResolutionScale(e){e=Math.max(0,e),e!==this.resolutionScale_&&(this.resolutionScale_=Math.max(0,e),this.resolutionScaleChanged_=!0,this.autoRenderLoop_&&this.autoRenderLoop_.restartRenderLoop())}setTargetFrameRate(e){this.targetFrameRate_!==e&&(this.targetFrameRate_=e,this.render_())}throwOnUnitializedMap_(){const t=this.map_.getView(),n=t.getCenter();if(!t.isDef()||isNaN(n[0])||isNaN(n[1]))throw new Error(`The OpenLayers map is not properly initialized: ${n} / ${t.getResolution()}`)}get trackedFeature(){return this.trackedFeature_}set trackedFeature(e){if(this.trackedFeature_!==e){const t=this.scene_;if(!e||!e.getGeometry()){this.needTrackedEntityUpdate_=!1,t.screenSpaceCameraController.enableTilt=!0,this.trackedEntity_&&this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_),this.trackedEntity_=null,this.trackedFeature_=null,this.entityView_=null,t.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);return}this.trackedFeature_=e,this.needTrackedEntityUpdate_=!0;const n=this.to4326Transform_,s=function(){const o=e.getGeometry();console.assert(o instanceof Oi);const a=o.getCoordinates(),l=n(a,void 0,a.length);return Ee.ol4326CoordinateToCesiumCartesian(l)},r={position:new Cesium.CallbackProperty((o,a)=>s(),!1),point:{pixelSize:1,color:Cesium.Color.TRANSPARENT}};this.trackedEntity_=this.dataSourceDisplay_.defaultDataSource.entities.add(r)}}}const nL="/Map_Demo/assets/logo-1303f4e5.svg";const sL={props:{},setup(i,{emit:e}){const t=Wo,n=Fo,s=pn({defaultCenter:[121.398333,25.154365],defaultCenterZoom:14,targetNum:1,conditionWrap:!1,layerSelect:!1,currentLayers:[],layers:[],mapLayers:Ml(()=>s.layers.map((R,M)=>({label:R.group_title,value:R.value,layers:R.group_layers,groupClass:R.group_class}))),baseMapsOptions:Ml(()=>Fo.sourceData()),selectLock:!1,mapCount:1,map1:null,map2:null,map1LayerStatus:[],map2LayerStatus:[],deleteLightbox:!1,dimensionMap:{map1:"2D",map2:"2D"},toSearchDimensionStatus:Ml(()=>{let R=s.targetNum==1?"map1":"map2";return s.dimensionMap[R]==="2D"}),areaDataId:"",ol3d:null}),r=new ns({projection:"EPSG:4326",center:s.defaultCenter,zoom:s.defaultCenterZoom}),o=Bo(null),a=Bo(null);let l=null;function u(){o.value=new dc({element:a.value,autoPan:!0,autoPanAnimation:{duration:250}}),s.map1=new Ko({target:"map1",layers:[Fo.sourceFun("default")],view:r,controls:[]})}function h(R,M){var p=new XMLHttpRequest;p.open("GET",M),p.onload=function(){p.setRequestHeader("Content-type","image/png"),R.getImage().src=M},p.send()}function f(){new Yi({fill:new fs({color:"#ca8eff"})}),new Yi({image:new wy({radius:5}),fill:new fs({color:"rgba(255,255,255)"}),stroke:new to({color:"[115, 76, 0, 1]",width:5})});const R=new qo({maxzoom:18,minzoom:3,url:"https://dwgis1.ncdr.nat.gov.tw/server/services/MAP0627/Map2022FloodingArea1721/MapServer/WMSServer?REQUEST=GetMap&SERVICE=WMS&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&SRS=EPSG:4326&LAYERS=0&VERSION=1.1.1&FORMAT=image/png&STYLES=",params:{},tileLoadFunction:h}),M=new ss({source:R});s.map1.addLayer(M)}function m(R,M){const p=new is({source:new ln({features:[new eo({geometry:new Oi([R,M]),name:"Null Island",population:4e3,rainfall:500})]}),style:new Yi({image:new _a({anchor:[.5,100],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"https://www.ockert-cnc.de/wp-content/uploads/2016/12/map-marker-icon-100x100.png"})})});let k=s.targetNum==1?"map1":"map2";s[k].addLayer(p)}function y({action:R,value:M}){var W;let p=((W=s.map1)==null?void 0:W.getTarget())==null?"map2":"map1",k=s[p].getView();switch(R){case"In":k.animate({zoom:k.getZoom()+1});break;case"Out":k.animate({zoom:k.getZoom()-1});break;case"toNorth":k.animate({rotation:0});break;case"moveTo":if(M){const{xAxis:se,yAxis:ce}=M;k.animate({center:[se,ce],zoom:10,duration:100})}else navigator.geolocation.getCurrentPosition(function(se){k.animate({center:[se.coords.longitude,se.coords.latitude],zoom:17,duration:100}),m(se.coords.longitude,se.coords.latitude)});break;case"fullScreen":let H=document.getElementById(`map${s.targetNum}`);H.requestFullscreen?H.requestFullscreen():H.msRequestFullscreen?H.msRequestFullscreen():H.mozRequestFullScreen?H.mozRequestFullScreen():H.webkitRequestFullscreen&&H.webkitRequestFullscreen();break}}function v({action:R,value:M}){var W;let p=s.targetNum==1?s.map1:s.map2,k=p==null?void 0:p.getLayers();switch(R){case"layerMode":if(M.checked){let Z=t.getLayer(s.layers[M.nodeIndex].group_layers[M.subNodeIndex],M.nestedSubNodeIndex,M.id);p.addLayer(Z),A("add",p.getTarget(),M.id)}else k.getArray().forEach(we=>{we.get("id")==M.id&&p.removeLayer(we)}),A("delete",p.getTarget(),M.id);break;case"selectLayerMode":if(s.selectLock)return;if(M.layerName==="all"){let Z=[];k.getArray().forEach(De=>{De.get("name")!=="default"&&Z.push(De)}),Z.forEach(De=>{p.removeLayer(De)})}else k.getArray().forEach(we=>{we.get("id")==M.id&&p.removeLayer(we)});break;case"changeOrder":if(s.selectLock)return;let H=Wo.getLayerIndex(M.id),se=t.getLayer(s.layers[H.nodeIndex].group_layers[H.subNodeIndex],H.nestedSubNodeIndex,M.id);if(M.checked=!1,v({action:"layerMode",value:M}),M.movement==="up"){if(M.key==k.getArray().length)return;M.checked=!1,k.insertAt(M.key+1,se)}if(M.movement==="down"){if(M.key==0)return;k.insertAt(M.key-1,se)}break;case"changeLayerVisible":if(s.selectLock)return;let ce=!k.getArray()[M.key].getVisible();k.getArray()[M.key].setVisible(ce);break;case"baseMap":let pe=n.sourceFun(M.layerName);k.extend([pe]),k.getArray().forEach(Z=>{Z.get("name")!==M.layerName&&p.removeLayer(Z)});break;case"changeMapCount":if(s.mapCount===M)return;let Me=s.targetNum!==1?"map1":"map2";s.mapCount=M;let le=s[`${Me}LayerStatus`].filter(Z=>Z!=="3D").map(Z=>Wo.getLayerIndex(Z));if(M===2&&(s[Me]=new Ko({target:Me,layers:[Fo.sourceFun("default"),...le.map(Z=>t.getLayer(s.layers[Z.nodeIndex].group_layers[Z.subNodeIndex],Z.nestedSubNodeIndex,Z.id))],view:r,controls:[]}),((W=s[`${Me}LayerStatus`])==null?void 0:W.indexOf("3D"))!==-1&&(l=new Zo({map:s[Me]}),l.setEnabled(!0))),M===1){s[Me]=null;const Z=document.getElementById(Me);for(;Z.firstChild;)Z.removeChild(Z.firstChild)}break;case"changeDimensionMap":let X=s.targetNum==1?"map1":"map2";s.dimensionMap[X]=M,M==="3D"?(l=new Zo({map:p}),l.setEnabled(!0),s[`${X}LayerStatus`].push("3D")):(l.setEnabled(!1),s[`${X}LayerStatus`]=s[`${X}LayerStatus`].filter(Z=>Z!=="3D"));break}b()}function E(R){var p;s.targetNum=R;let M=s.targetNum!==1?"map1":"map2";if(s.mapCount===1){if(!s[`map${R}`]){let W=s[`map${R}LayerStatus`].filter(H=>H!=="3D").map(H=>Wo.getLayerIndex(H));s[`map${R}`]=new Ko({target:`map${R}`,layers:[Fo.sourceFun("default"),...W.map(H=>t.getLayer(s.layers[H.nodeIndex].group_layers[H.subNodeIndex],H.nestedSubNodeIndex,H.layeredIndex))],view:r,controls:[]}),((p=s[`map${R}LayerStatus`])==null?void 0:p.indexOf("3D"))!==-1&&(l=new Zo({map:s[`map${R}`]}),l.setEnabled(!0))}if(s[M]){s[M]=null;const k=document.getElementById(M);for(;k.firstChild;)k.removeChild(k.firstChild)}}Zm(()=>{b()})}function b(){var p;let R=s.targetNum==1?s.map1:s.map2;const M=(p=R==null?void 0:R.getLayers())==null?void 0:p.getArray();s.currentLayers=M==null?void 0:M.map(k=>({label:k.get("label"),id:k.get("id"),visible:k.getVisible()}))}function S(){s.conditionWrap=!s.conditionWrap}function A(R,M,p){if(R==="add")s[`${M}LayerStatus`].push(p);else if(R==="delete"){let k=s[`${M}LayerStatus`].findIndex(W=>W===p);s[`${M}LayerStatus`].splice(k,1)}else console.log("error")}function I(){o.value.setPosition(void 0)}return r_(()=>{x_.ajax({url:"https://api.edtest.site/layers",method:"GET"}).done(R=>{s.layers=R.map((M,p)=>(M.group_layers.forEach((k,W)=>{let H,se;H=W,k.id=`node${p}_subNode${H}_nestedSubNode${se}`,k.single_tiles||k.tiles_list.forEach((ce,pe)=>{se=pe,ce.id=`node${p}_subNode${H}_nestedSubNode${se}`})}),{...M,value:p})),u(),b()}).fail(R=>{console.log("Fail",R)})}),{addTest:f,state:s,props:i,popupCom:a,overlay:o,mapControl:y,layerControl:v,getCurrentLayerNames:b,changeTarget:E,conditionWrap:S,closeMapData:I}}},rL={class:"SearchBar position-absolute"},oL=ee("img",{src:nL,alt:"",class:"mb-2"},null,-1),aL={class:"mapSourceOption"},lL={class:"asideTool position-absolute top-50 translate-middle-y",id:"asideTool"},cL={class:"w-100 d-flex flex-nowrap mapWrap",id:"mapWrap"},uL={key:0,class:"middleLine"},hL={class:"condition position-absolute"},dL={class:"mb-2"},fL={key:1,class:"mb-4"},gL={key:1},pL={key:0,class:"lightWrap w-100 h-100 d-flex justify-content-center align-items-center"},mL={class:"p-4 rounded bg-white",style:{width:"250px"}},_L=ee("p",{class:"text-center fw-bold"},"是否要刪除全部圖層",-1),yL={class:"d-flex justify-content-around"},vL={ref:"popupCom",class:"areaData"};function CL(i,e,t,n,s,r){var m,y;const o=jI,a=dI,l=lI,u=BA,h=YR,f=Mx;return et(),nt("div",null,[ee("div",rL,[oL,Pt(o,{dimensionMapStatus:n.state.toSearchDimensionStatus,currentLayers:n.state.currentLayers,mapCount:n.state.mapCount,onOnLayerControl:e[0]||(e[0]=({action:v,value:E})=>{n.layerControl({action:v,value:E})}),onOnChangeTarget:e[1]||(e[1]=v=>{n.changeTarget(v)}),onConditionWrap:e[2]||(e[2]=v=>{n.conditionWrap(v)})},null,8,["dimensionMapStatus","currentLayers","mapCount"])]),ee("div",aL,[Pt(a,{baseMapsOptions:n.state.baseMapsOptions,onOnChangeBaseMaps:e[3]||(e[3]=({action:v,value:E})=>{n.layerControl({action:v,value:E})})},null,8,["baseMapsOptions"])]),ee("div",lL,[Pt(l,{onOnMapControl:e[4]||(e[4]=({action:v,value:E})=>{n.mapControl({action:v,value:E})})})]),ee("div",cL,[ee("div",{id:"map1",class:Ei({"w-100":((m=n.state.map1)==null?void 0:m.getTarget())=="map1"})},null,2),n.state.mapCount===2?(et(),nt("div",uL)):rn("",!0),ee("div",{id:"map2",class:Ei({"w-100":((y=n.state.map2)==null?void 0:y.getTarget())=="map2"})},null,2)]),ee("div",hL,[ee("div",dL,[n.state.conditionWrap?rn("",!0):(et(),nt("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:e[5]||(e[5]=v=>n.state.conditionWrap=!0)}," 圖層選項 ")),n.state.conditionWrap?(et(),nt("div",fL,[Pt(u,y_({mapLayers:n.state.mapLayers,currentLayers:n.state.currentLayers,onClose:()=>{n.state.conditionWrap=!1}},{onOnMapControl:e[6]||(e[6]=({action:v,value:E})=>{n.mapControl({action:v,value:E})}),onOnLayerControl:e[7]||(e[7]=({action:v,value:E})=>{n.layerControl({action:v,value:E})})}),null,16)])):rn("",!0)]),ee("div",null,[n.state.layerSelect?rn("",!0):(et(),nt("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:e[8]||(e[8]=v=>n.state.layerSelect=!0)}," 已選擇的圖層 ")),n.state.layerSelect?(et(),nt("div",gL,[Pt(h,Kv(__({selectLock:n.state.selectLock,currentLayers:n.state.currentLayers,onClose:()=>{n.state.layerSelect=!1},onChangLayerVisible:v=>{n.layerControl(v)},onChangeOrderLayer:({action:v,value:E})=>{n.layerControl({action:v,value:E})},onLockLayer:()=>{n.state.selectLock=!n.state.selectLock},onDeleteLayer:({action:v,value:E})=>{E.layerName=="all"?n.state.deleteLightbox=!0:n.layerControl({action:v,value:E})},onDeleteLayerAll:()=>{n.state.deleteLightbox=!0}})),null,16)])):rn("",!0)])]),n.state.deleteLightbox?(et(),nt("div",pL,[ee("div",mL,[_L,ee("div",yL,[ee("button",{class:"rounded px-3 py-1 bg-steel text-white border-0",onClick:e[9]||(e[9]=()=>{n.layerControl({action:"selectLayerMode",value:{layerName:"all"}}),n.state.deleteLightbox=!1})},"確定"),ee("button",{class:"rounded px-3 py-1 bg-secondary bg-gradient text-white border-0",onClick:e[10]||(e[10]=()=>{n.state.deleteLightbox=!1})},"取消")])])])):rn("",!0),ee("div",vL,[Pt(f,{id:n.state.areaDataId},null,8,["id"])],512)])}const EL=Ts(sL,[["render",CL]]);const xL={setup(i,{emit:e}){return{state:pn({})}}},TL={class:"main"};function wL(i,e,t,n,s,r){const o=EL;return et(),nt("div",TL,[Pt(o)])}const bL=Ts(xL,[["render",wL]]);var ti="top",bi="bottom",Si="right",ii="left",qc="auto",vo=[ti,bi,Si,ii],lr="start",so="end",i0="clippingParents",yf="viewport",Or="popper",n0="reference",jh=vo.reduce(function(i,e){return i.concat([e+"-"+lr,e+"-"+so])},[]),vf=[].concat(vo,[qc]).reduce(function(i,e){return i.concat([e,e+"-"+lr,e+"-"+so])},[]),s0="beforeRead",r0="read",o0="afterRead",a0="beforeMain",l0="main",c0="afterMain",u0="beforeWrite",h0="write",d0="afterWrite",f0=[s0,r0,o0,a0,l0,c0,u0,h0,d0];function gn(i){return i?(i.nodeName||"").toLowerCase():null}function Fi(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function cr(i){var e=Fi(i).Element;return i instanceof e||i instanceof Element}function Pi(i){var e=Fi(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function Cf(i){if(typeof ShadowRoot>"u")return!1;var e=Fi(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function SL(i){var e=i.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},s=e.attributes[t]||{},r=e.elements[t];!Pi(r)||!gn(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function RL(i){var e=i.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var s=e.elements[n],r=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),a=o.reduce(function(l,u){return l[u]="",l},{});!Pi(s)||!gn(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const Ef={name:"applyStyles",enabled:!0,phase:"write",fn:SL,effect:RL,requires:["computeStyles"]};function dn(i){return i.split("-")[0]}var tr=Math.max,fc=Math.min,ro=Math.round;function $h(){var i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function g0(){return!/^((?!chrome|android).)*safari/i.test($h())}function oo(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=i.getBoundingClientRect(),s=1,r=1;e&&Pi(i)&&(s=i.offsetWidth>0&&ro(n.width)/i.offsetWidth||1,r=i.offsetHeight>0&&ro(n.height)/i.offsetHeight||1);var o=cr(i)?Fi(i):window,a=o.visualViewport,l=!g0()&&t,u=(n.left+(l&&a?a.offsetLeft:0))/s,h=(n.top+(l&&a?a.offsetTop:0))/r,f=n.width/s,m=n.height/r;return{width:f,height:m,top:h,right:u+f,bottom:h+m,left:u,x:u,y:h}}function xf(i){var e=oo(i),t=i.offsetWidth,n=i.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:i.offsetLeft,y:i.offsetTop,width:t,height:n}}function p0(i,e){var t=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(t&&Cf(t)){var n=e;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function kn(i){return Fi(i).getComputedStyle(i)}function AL(i){return["table","td","th"].indexOf(gn(i))>=0}function Ss(i){return((cr(i)?i.ownerDocument:i.document)||window.document).documentElement}function Zc(i){return gn(i)==="html"?i:i.assignedSlot||i.parentNode||(Cf(i)?i.host:null)||Ss(i)}function Yp(i){return!Pi(i)||kn(i).position==="fixed"?null:i.offsetParent}function IL(i){var e=/firefox/i.test($h()),t=/Trident/i.test($h());if(t&&Pi(i)){var n=kn(i);if(n.position==="fixed")return null}var s=Zc(i);for(Cf(s)&&(s=s.host);Pi(s)&&["html","body"].indexOf(gn(s))<0;){var r=kn(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function $a(i){for(var e=Fi(i),t=Yp(i);t&&AL(t)&&kn(t).position==="static";)t=Yp(t);return t&&(gn(t)==="html"||gn(t)==="body"&&kn(t).position==="static")?e:t||IL(i)||e}function Tf(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Jo(i,e,t){return tr(i,fc(e,t))}function LL(i,e,t){var n=Jo(i,e,t);return n>t?t:n}function m0(){return{top:0,right:0,bottom:0,left:0}}function _0(i){return Object.assign({},m0(),i)}function y0(i,e){return e.reduce(function(t,n){return t[n]=i,t},{})}var OL=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,_0(typeof e!="number"?e:y0(e,vo))};function PL(i){var e,t=i.state,n=i.name,s=i.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=dn(t.placement),l=Tf(a),u=[ii,Si].indexOf(a)>=0,h=u?"height":"width";if(!(!r||!o)){var f=OL(s.padding,t),m=xf(r),y=l==="y"?ti:ii,v=l==="y"?bi:Si,E=t.rects.reference[h]+t.rects.reference[l]-o[l]-t.rects.popper[h],b=o[l]-t.rects.reference[l],S=$a(r),A=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,I=E/2-b/2,R=f[y],M=A-m[h]-f[v],p=A/2-m[h]/2+I,k=Jo(R,p,M),W=l;t.modifiersData[n]=(e={},e[W]=k,e.centerOffset=k-p,e)}}function ML(i){var e=i.state,t=i.options,n=t.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||p0(e.elements.popper,s)&&(e.elements.arrow=s))}const v0={name:"arrow",enabled:!0,phase:"main",fn:PL,effect:ML,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ao(i){return i.split("-")[1]}var DL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function FL(i){var e=i.x,t=i.y,n=window,s=n.devicePixelRatio||1;return{x:ro(e*s)/s||0,y:ro(t*s)/s||0}}function Up(i){var e,t=i.popper,n=i.popperRect,s=i.placement,r=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,u=i.adaptive,h=i.roundOffsets,f=i.isFixed,m=o.x,y=m===void 0?0:m,v=o.y,E=v===void 0?0:v,b=typeof h=="function"?h({x:y,y:E}):{x:y,y:E};y=b.x,E=b.y;var S=o.hasOwnProperty("x"),A=o.hasOwnProperty("y"),I=ii,R=ti,M=window;if(u){var p=$a(t),k="clientHeight",W="clientWidth";if(p===Fi(t)&&(p=Ss(t),kn(p).position!=="static"&&a==="absolute"&&(k="scrollHeight",W="scrollWidth")),p=p,s===ti||(s===ii||s===Si)&&r===so){R=bi;var H=f&&p===M&&M.visualViewport?M.visualViewport.height:p[k];E-=H-n.height,E*=l?1:-1}if(s===ii||(s===ti||s===bi)&&r===so){I=Si;var se=f&&p===M&&M.visualViewport?M.visualViewport.width:p[W];y-=se-n.width,y*=l?1:-1}}var ce=Object.assign({position:a},u&&DL),pe=h===!0?FL({x:y,y:E}):{x:y,y:E};if(y=pe.x,E=pe.y,l){var ve;return Object.assign({},ce,(ve={},ve[R]=A?"0":"",ve[I]=S?"0":"",ve.transform=(M.devicePixelRatio||1)<=1?"translate("+y+"px, "+E+"px)":"translate3d("+y+"px, "+E+"px, 0)",ve))}return Object.assign({},ce,(e={},e[R]=A?E+"px":"",e[I]=S?y+"px":"",e.transform="",e))}function NL(i){var e=i.state,t=i.options,n=t.gpuAcceleration,s=n===void 0?!0:n,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,u={placement:dn(e.placement),variation:ao(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Up(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Up(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const wf={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:NL,data:{}};var El={passive:!0};function kL(i){var e=i.state,t=i.instance,n=i.options,s=n.scroll,r=s===void 0?!0:s,o=n.resize,a=o===void 0?!0:o,l=Fi(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&u.forEach(function(h){h.addEventListener("scroll",t.update,El)}),a&&l.addEventListener("resize",t.update,El),function(){r&&u.forEach(function(h){h.removeEventListener("scroll",t.update,El)}),a&&l.removeEventListener("resize",t.update,El)}}const bf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:kL,data:{}};var GL={left:"right",right:"left",bottom:"top",top:"bottom"};function Fl(i){return i.replace(/left|right|bottom|top/g,function(e){return GL[e]})}var jL={start:"end",end:"start"};function Xp(i){return i.replace(/start|end/g,function(e){return jL[e]})}function Sf(i){var e=Fi(i),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function Rf(i){return oo(Ss(i)).left+Sf(i).scrollLeft}function $L(i,e){var t=Fi(i),n=Ss(i),s=t.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var u=g0();(u||!u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+Rf(i),y:l}}function VL(i){var e,t=Ss(i),n=Sf(i),s=(e=i.ownerDocument)==null?void 0:e.body,r=tr(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=tr(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+Rf(i),l=-n.scrollTop;return kn(s||t).direction==="rtl"&&(a+=tr(t.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Af(i){var e=kn(i),t=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+n)}function C0(i){return["html","body","#document"].indexOf(gn(i))>=0?i.ownerDocument.body:Pi(i)&&Af(i)?i:C0(Zc(i))}function Qo(i,e){var t;e===void 0&&(e=[]);var n=C0(i),s=n===((t=i.ownerDocument)==null?void 0:t.body),r=Fi(n),o=s?[r].concat(r.visualViewport||[],Af(n)?n:[]):n,a=e.concat(o);return s?a:a.concat(Qo(Zc(o)))}function Vh(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function WL(i,e){var t=oo(i,!1,e==="fixed");return t.top=t.top+i.clientTop,t.left=t.left+i.clientLeft,t.bottom=t.top+i.clientHeight,t.right=t.left+i.clientWidth,t.width=i.clientWidth,t.height=i.clientHeight,t.x=t.left,t.y=t.top,t}function Kp(i,e,t){return e===yf?Vh($L(i,t)):cr(e)?WL(e,t):Vh(VL(Ss(i)))}function BL(i){var e=Qo(Zc(i)),t=["absolute","fixed"].indexOf(kn(i).position)>=0,n=t&&Pi(i)?$a(i):i;return cr(n)?e.filter(function(s){return cr(s)&&p0(s,n)&&gn(s)!=="body"}):[]}function zL(i,e,t,n){var s=e==="clippingParents"?BL(i):[].concat(e),r=[].concat(s,[t]),o=r[0],a=r.reduce(function(l,u){var h=Kp(i,u,n);return l.top=tr(h.top,l.top),l.right=fc(h.right,l.right),l.bottom=fc(h.bottom,l.bottom),l.left=tr(h.left,l.left),l},Kp(i,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function E0(i){var e=i.reference,t=i.element,n=i.placement,s=n?dn(n):null,r=n?ao(n):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(s){case ti:l={x:o,y:e.y-t.height};break;case bi:l={x:o,y:e.y+e.height};break;case Si:l={x:e.x+e.width,y:a};break;case ii:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var u=s?Tf(s):null;if(u!=null){var h=u==="y"?"height":"width";switch(r){case lr:l[u]=l[u]-(e[h]/2-t[h]/2);break;case so:l[u]=l[u]+(e[h]/2-t[h]/2);break}}return l}function lo(i,e){e===void 0&&(e={});var t=e,n=t.placement,s=n===void 0?i.placement:n,r=t.strategy,o=r===void 0?i.strategy:r,a=t.boundary,l=a===void 0?i0:a,u=t.rootBoundary,h=u===void 0?yf:u,f=t.elementContext,m=f===void 0?Or:f,y=t.altBoundary,v=y===void 0?!1:y,E=t.padding,b=E===void 0?0:E,S=_0(typeof b!="number"?b:y0(b,vo)),A=m===Or?n0:Or,I=i.rects.popper,R=i.elements[v?A:m],M=zL(cr(R)?R:R.contextElement||Ss(i.elements.popper),l,h,o),p=oo(i.elements.reference),k=E0({reference:p,element:I,strategy:"absolute",placement:s}),W=Vh(Object.assign({},I,k)),H=m===Or?W:p,se={top:M.top-H.top+S.top,bottom:H.bottom-M.bottom+S.bottom,left:M.left-H.left+S.left,right:H.right-M.right+S.right},ce=i.modifiersData.offset;if(m===Or&&ce){var pe=ce[s];Object.keys(se).forEach(function(ve){var Me=[Si,bi].indexOf(ve)>=0?1:-1,ye=[ti,bi].indexOf(ve)>=0?"y":"x";se[ve]+=pe[ye]*Me})}return se}function HL(i,e){e===void 0&&(e={});var t=e,n=t.placement,s=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?vf:l,h=ao(n),f=h?a?jh:jh.filter(function(v){return ao(v)===h}):vo,m=f.filter(function(v){return u.indexOf(v)>=0});m.length===0&&(m=f);var y=m.reduce(function(v,E){return v[E]=lo(i,{placement:E,boundary:s,rootBoundary:r,padding:o})[dn(E)],v},{});return Object.keys(y).sort(function(v,E){return y[v]-y[E]})}function YL(i){if(dn(i)===qc)return[];var e=Fl(i);return[Xp(i),e,Xp(e)]}function UL(i){var e=i.state,t=i.options,n=i.name;if(!e.modifiersData[n]._skip){for(var s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,u=t.padding,h=t.boundary,f=t.rootBoundary,m=t.altBoundary,y=t.flipVariations,v=y===void 0?!0:y,E=t.allowedAutoPlacements,b=e.options.placement,S=dn(b),A=S===b,I=l||(A||!v?[Fl(b)]:YL(b)),R=[b].concat(I).reduce(function(je,Be){return je.concat(dn(Be)===qc?HL(e,{placement:Be,boundary:h,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:E}):Be)},[]),M=e.rects.reference,p=e.rects.popper,k=new Map,W=!0,H=R[0],se=0;se<R.length;se++){var ce=R[se],pe=dn(ce),ve=ao(ce)===lr,Me=[ti,bi].indexOf(pe)>=0,ye=Me?"width":"height",le=lo(e,{placement:ce,boundary:h,rootBoundary:f,altBoundary:m,padding:u}),X=Me?ve?Si:ii:ve?bi:ti;M[ye]>p[ye]&&(X=Fl(X));var Z=Fl(X),we=[];if(r&&we.push(le[pe]<=0),a&&we.push(le[X]<=0,le[Z]<=0),we.every(function(je){return je})){H=ce,W=!1;break}k.set(ce,we)}if(W)for(var De=v?3:1,We=function(Be){var pt=R.find(function(vt){var Ze=k.get(vt);if(Ze)return Ze.slice(0,Be).every(function(st){return st})});if(pt)return H=pt,"break"},J=De;J>0;J--){var ut=We(J);if(ut==="break")break}e.placement!==H&&(e.modifiersData[n]._skip=!0,e.placement=H,e.reset=!0)}}const x0={name:"flip",enabled:!0,phase:"main",fn:UL,requiresIfExists:["offset"],data:{_skip:!1}};function qp(i,e,t){return t===void 0&&(t={x:0,y:0}),{top:i.top-e.height-t.y,right:i.right-e.width+t.x,bottom:i.bottom-e.height+t.y,left:i.left-e.width-t.x}}function Zp(i){return[ti,Si,bi,ii].some(function(e){return i[e]>=0})}function XL(i){var e=i.state,t=i.name,n=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=lo(e,{elementContext:"reference"}),a=lo(e,{altBoundary:!0}),l=qp(o,n),u=qp(a,s,r),h=Zp(l),f=Zp(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}const T0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:XL};function KL(i,e,t){var n=dn(i),s=[ii,ti].indexOf(n)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:i})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[ii,Si].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function qL(i){var e=i.state,t=i.options,n=i.name,s=t.offset,r=s===void 0?[0,0]:s,o=vf.reduce(function(h,f){return h[f]=KL(f,e.rects,r),h},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}const w0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qL};function ZL(i){var e=i.state,t=i.name;e.modifiersData[t]=E0({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const If={name:"popperOffsets",enabled:!0,phase:"read",fn:ZL,data:{}};function JL(i){return i==="x"?"y":"x"}function QL(i){var e=i.state,t=i.options,n=i.name,s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,u=t.rootBoundary,h=t.altBoundary,f=t.padding,m=t.tether,y=m===void 0?!0:m,v=t.tetherOffset,E=v===void 0?0:v,b=lo(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:h}),S=dn(e.placement),A=ao(e.placement),I=!A,R=Tf(S),M=JL(R),p=e.modifiersData.popperOffsets,k=e.rects.reference,W=e.rects.popper,H=typeof E=="function"?E(Object.assign({},e.rects,{placement:e.placement})):E,se=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),ce=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,pe={x:0,y:0};if(p){if(r){var ve,Me=R==="y"?ti:ii,ye=R==="y"?bi:Si,le=R==="y"?"height":"width",X=p[R],Z=X+b[Me],we=X-b[ye],De=y?-W[le]/2:0,We=A===lr?k[le]:W[le],J=A===lr?-W[le]:-k[le],ut=e.elements.arrow,je=y&&ut?xf(ut):{width:0,height:0},Be=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:m0(),pt=Be[Me],vt=Be[ye],Ze=Jo(0,k[le],je[le]),st=I?k[le]/2-De-Ze-pt-se.mainAxis:We-Ze-pt-se.mainAxis,ri=I?-k[le]/2+De+Ze+vt+se.mainAxis:J+Ze+vt+se.mainAxis,oi=e.elements.arrow&&$a(e.elements.arrow),P=oi?R==="y"?oi.clientTop||0:oi.clientLeft||0:0,F=(ve=ce==null?void 0:ce[R])!=null?ve:0,z=X+st-F-P,q=X+ri-F,$=Jo(y?fc(Z,z):Z,X,y?tr(we,q):we);p[R]=$,pe[R]=$-X}if(a){var te,de=R==="x"?ti:ii,ae=R==="x"?bi:Si,oe=p[M],Q=M==="y"?"height":"width",me=oe+b[de],ue=oe-b[ae],fe=[ti,ii].indexOf(S)!==-1,Ce=(te=ce==null?void 0:ce[M])!=null?te:0,Se=fe?me:oe-k[Q]-W[Q]-Ce+se.altAxis,Xe=fe?oe+k[Q]+W[Q]-Ce-se.altAxis:ue,Ne=y&&fe?LL(Se,oe,Xe):Jo(y?Se:me,oe,y?Xe:ue);p[M]=Ne,pe[M]=Ne-oe}e.modifiersData[n]=pe}}const b0={name:"preventOverflow",enabled:!0,phase:"main",fn:QL,requiresIfExists:["offset"]};function eO(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function tO(i){return i===Fi(i)||!Pi(i)?Sf(i):eO(i)}function iO(i){var e=i.getBoundingClientRect(),t=ro(e.width)/i.offsetWidth||1,n=ro(e.height)/i.offsetHeight||1;return t!==1||n!==1}function nO(i,e,t){t===void 0&&(t=!1);var n=Pi(e),s=Pi(e)&&iO(e),r=Ss(e),o=oo(i,s,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&((gn(e)!=="body"||Af(r))&&(a=tO(e)),Pi(e)?(l=oo(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Rf(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function sO(i){var e=new Map,t=new Set,n=[];i.forEach(function(r){e.set(r.name,r)});function s(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&s(l)}}),n.push(r)}return i.forEach(function(r){t.has(r.name)||s(r)}),n}function rO(i){var e=sO(i);return f0.reduce(function(t,n){return t.concat(e.filter(function(s){return s.phase===n}))},[])}function oO(i){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(i())})})),e}}function aO(i){var e=i.reduce(function(t,n){var s=t[n.name];return t[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var Jp={placement:"bottom",modifiers:[],strategy:"absolute"};function Qp(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Jc(i){i===void 0&&(i={});var e=i,t=e.defaultModifiers,n=t===void 0?[]:t,s=e.defaultOptions,r=s===void 0?Jp:s;return function(a,l,u){u===void 0&&(u=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Jp,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],m=!1,y={state:h,setOptions:function(S){var A=typeof S=="function"?S(h.options):S;E(),h.options=Object.assign({},r,h.options,A),h.scrollParents={reference:cr(a)?Qo(a):a.contextElement?Qo(a.contextElement):[],popper:Qo(l)};var I=rO(aO([].concat(n,h.options.modifiers)));return h.orderedModifiers=I.filter(function(R){return R.enabled}),v(),y.update()},forceUpdate:function(){if(!m){var S=h.elements,A=S.reference,I=S.popper;if(Qp(A,I)){h.rects={reference:nO(A,$a(I),h.options.strategy==="fixed"),popper:xf(I)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(se){return h.modifiersData[se.name]=Object.assign({},se.data)});for(var R=0;R<h.orderedModifiers.length;R++){if(h.reset===!0){h.reset=!1,R=-1;continue}var M=h.orderedModifiers[R],p=M.fn,k=M.options,W=k===void 0?{}:k,H=M.name;typeof p=="function"&&(h=p({state:h,options:W,name:H,instance:y})||h)}}}},update:oO(function(){return new Promise(function(b){y.forceUpdate(),b(h)})}),destroy:function(){E(),m=!0}};if(!Qp(a,l))return y;y.setOptions(u).then(function(b){!m&&u.onFirstUpdate&&u.onFirstUpdate(b)});function v(){h.orderedModifiers.forEach(function(b){var S=b.name,A=b.options,I=A===void 0?{}:A,R=b.effect;if(typeof R=="function"){var M=R({state:h,name:S,instance:y,options:I}),p=function(){};f.push(M||p)}})}function E(){f.forEach(function(b){return b()}),f=[]}return y}}var lO=Jc(),cO=[bf,If,wf,Ef],uO=Jc({defaultModifiers:cO}),hO=[bf,If,wf,Ef,w0,x0,b0,v0,T0],Lf=Jc({defaultModifiers:hO});const S0=Object.freeze(Object.defineProperty({__proto__:null,afterMain:c0,afterRead:o0,afterWrite:d0,applyStyles:Ef,arrow:v0,auto:qc,basePlacements:vo,beforeMain:a0,beforeRead:s0,beforeWrite:u0,bottom:bi,clippingParents:i0,computeStyles:wf,createPopper:Lf,createPopperBase:lO,createPopperLite:uO,detectOverflow:lo,end:so,eventListeners:bf,flip:x0,hide:T0,left:ii,main:l0,modifierPhases:f0,offset:w0,placements:vf,popper:Or,popperGenerator:Jc,popperOffsets:If,preventOverflow:b0,read:r0,reference:n0,right:Si,start:lr,top:ti,variationPlacements:jh,viewport:yf,write:h0},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const dO=1e6,fO=1e3,Wh="transitionend",gO=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),pO=i=>{do i+=Math.floor(Math.random()*dO);while(document.getElementById(i));return i},R0=i=>{let e=i.getAttribute("data-bs-target");if(!e||e==="#"){let t=i.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e},A0=i=>{const e=R0(i);return e&&document.querySelector(e)?e:null},Mn=i=>{const e=R0(i);return e?document.querySelector(e):null},mO=i=>{if(!i)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(i);const n=Number.parseFloat(e),s=Number.parseFloat(t);return!n&&!s?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*fO)},I0=i=>{i.dispatchEvent(new Event(Wh))},Dn=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),Cs=i=>Dn(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(i):null,Co=i=>{if(!Dn(i)||i.getClientRects().length===0)return!1;const e=getComputedStyle(i).getPropertyValue("visibility")==="visible",t=i.closest("details:not([open])");if(!t)return e;if(t!==i){const n=i.closest("summary");if(n&&n.parentNode!==t||n===null)return!1}return e},Es=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",L0=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const e=i.getRootNode();return e instanceof ShadowRoot?e:null}return i instanceof ShadowRoot?i:i.parentNode?L0(i.parentNode):null},gc=()=>{},Va=i=>{i.offsetHeight},O0=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Xu=[],_O=i=>{document.readyState==="loading"?(Xu.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Xu)e()}),Xu.push(i)):i()},Mi=()=>document.documentElement.dir==="rtl",Ni=i=>{_O(()=>{const e=O0();if(e){const t=i.NAME,n=e.fn[t];e.fn[t]=i.jQueryInterface,e.fn[t].Constructor=i,e.fn[t].noConflict=()=>(e.fn[t]=n,i.jQueryInterface)}})},Ln=i=>{typeof i=="function"&&i()},P0=(i,e,t=!0)=>{if(!t){Ln(i);return}const n=5,s=mO(e)+n;let r=!1;const o=({target:a})=>{a===e&&(r=!0,e.removeEventListener(Wh,o),Ln(i))};e.addEventListener(Wh,o),setTimeout(()=>{r||I0(e)},s)},Of=(i,e,t,n)=>{const s=i.length;let r=i.indexOf(e);return r===-1?!t&&n?i[s-1]:i[0]:(r+=t?1:-1,n&&(r=(r+s)%s),i[Math.max(0,Math.min(r,s-1))])},yO=/[^.]*(?=\..*)\.|.*/,vO=/\..*/,CO=/::\d+$/,Ku={};let em=1;const M0={mouseenter:"mouseover",mouseleave:"mouseout"},EO=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function D0(i,e){return e&&`${e}::${em++}`||i.uidEvent||em++}function F0(i){const e=D0(i);return i.uidEvent=e,Ku[e]=Ku[e]||{},Ku[e]}function xO(i,e){return function t(n){return Pf(n,{delegateTarget:i}),t.oneOff&&re.off(i,n.type,e),e.apply(i,[n])}}function TO(i,e,t){return function n(s){const r=i.querySelectorAll(e);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Pf(s,{delegateTarget:o}),n.oneOff&&re.off(i,s.type,e,t),t.apply(o,[s])}}function N0(i,e,t=null){return Object.values(i).find(n=>n.callable===e&&n.delegationSelector===t)}function k0(i,e,t){const n=typeof e=="string",s=n?t:e||t;let r=G0(i);return EO.has(r)||(r=i),[n,s,r]}function tm(i,e,t,n,s){if(typeof e!="string"||!i)return;let[r,o,a]=k0(e,t,n);e in M0&&(o=(v=>function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return v.call(this,E)})(o));const l=F0(i),u=l[a]||(l[a]={}),h=N0(u,o,r?t:null);if(h){h.oneOff=h.oneOff&&s;return}const f=D0(o,e.replace(yO,"")),m=r?TO(i,t,o):xO(i,o);m.delegationSelector=r?t:null,m.callable=o,m.oneOff=s,m.uidEvent=f,u[f]=m,i.addEventListener(a,m,r)}function Bh(i,e,t,n,s){const r=N0(e[t],n,s);r&&(i.removeEventListener(t,r,!!s),delete e[t][r.uidEvent])}function wO(i,e,t,n){const s=e[t]||{};for(const r of Object.keys(s))if(r.includes(n)){const o=s[r];Bh(i,e,t,o.callable,o.delegationSelector)}}function G0(i){return i=i.replace(vO,""),M0[i]||i}const re={on(i,e,t,n){tm(i,e,t,n,!1)},one(i,e,t,n){tm(i,e,t,n,!0)},off(i,e,t,n){if(typeof e!="string"||!i)return;const[s,r,o]=k0(e,t,n),a=o!==e,l=F0(i),u=l[o]||{},h=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(u).length)return;Bh(i,l,o,r,s?t:null);return}if(h)for(const f of Object.keys(l))wO(i,l,f,e.slice(1));for(const f of Object.keys(u)){const m=f.replace(CO,"");if(!a||e.includes(m)){const y=u[f];Bh(i,l,o,y.callable,y.delegationSelector)}}},trigger(i,e,t){if(typeof e!="string"||!i)return null;const n=O0(),s=G0(e),r=e!==s;let o=null,a=!0,l=!0,u=!1;r&&n&&(o=n.Event(e,t),n(i).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),u=o.isDefaultPrevented());let h=new Event(e,{bubbles:a,cancelable:!0});return h=Pf(h,t),u&&h.preventDefault(),l&&i.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function Pf(i,e){for(const[t,n]of Object.entries(e||{}))try{i[t]=n}catch{Object.defineProperty(i,t,{configurable:!0,get(){return n}})}return i}const Jn=new Map,qu={set(i,e,t){Jn.has(i)||Jn.set(i,new Map);const n=Jn.get(i);if(!n.has(e)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(e,t)},get(i,e){return Jn.has(i)&&Jn.get(i).get(e)||null},remove(i,e){if(!Jn.has(i))return;const t=Jn.get(i);t.delete(e),t.size===0&&Jn.delete(i)}};function im(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function Zu(i){return i.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Fn={setDataAttribute(i,e,t){i.setAttribute(`data-bs-${Zu(e)}`,t)},removeDataAttribute(i,e){i.removeAttribute(`data-bs-${Zu(e)}`)},getDataAttributes(i){if(!i)return{};const e={},t=Object.keys(i.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of t){let s=n.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=im(i.dataset[n])}return e},getDataAttribute(i,e){return im(i.getAttribute(`data-bs-${Zu(e)}`))}};class Wa{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=Dn(t)?Fn.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Dn(t)?Fn.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const n of Object.keys(t)){const s=t[n],r=e[n],o=Dn(r)?"element":gO(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${s}".`)}}}const bO="5.2.3";class Qi extends Wa{constructor(e,t){super(),e=Cs(e),e&&(this._element=e,this._config=this._getConfig(t),qu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){qu.remove(this._element,this.constructor.DATA_KEY),re.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,n=!0){P0(e,t,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return qu.get(Cs(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return bO}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Qc=(i,e="hide")=>{const t=`click.dismiss${i.EVENT_KEY}`,n=i.NAME;re.on(document,t,`[data-bs-dismiss="${n}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),Es(this))return;const r=Mn(this)||this.closest(`.${n}`);i.getOrCreateInstance(r)[e]()})},SO="alert",RO="bs.alert",j0=`.${RO}`,AO=`close${j0}`,IO=`closed${j0}`,LO="fade",OO="show";class eu extends Qi{static get NAME(){return SO}close(){if(re.trigger(this._element,AO).defaultPrevented)return;this._element.classList.remove(OO);const t=this._element.classList.contains(LO);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),re.trigger(this._element,IO),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=eu.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Qc(eu,"close");Ni(eu);const PO="button",MO="bs.button",DO=`.${MO}`,FO=".data-api",NO="active",nm='[data-bs-toggle="button"]',kO=`click${DO}${FO}`;class tu extends Qi{static get NAME(){return PO}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(NO))}static jQueryInterface(e){return this.each(function(){const t=tu.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}re.on(document,kO,nm,i=>{i.preventDefault();const e=i.target.closest(nm);tu.getOrCreateInstance(e).toggle()});Ni(tu);const Ue={find(i,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,i))},findOne(i,e=document.documentElement){return Element.prototype.querySelector.call(e,i)},children(i,e){return[].concat(...i.children).filter(t=>t.matches(e))},parents(i,e){const t=[];let n=i.parentNode.closest(e);for(;n;)t.push(n),n=n.parentNode.closest(e);return t},prev(i,e){let t=i.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(i,e){let t=i.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(i){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,i).filter(t=>!Es(t)&&Co(t))}},GO="swipe",Eo=".bs.swipe",jO=`touchstart${Eo}`,$O=`touchmove${Eo}`,VO=`touchend${Eo}`,WO=`pointerdown${Eo}`,BO=`pointerup${Eo}`,zO="touch",HO="pen",YO="pointer-event",UO=40,XO={endCallback:null,leftCallback:null,rightCallback:null},KO={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class pc extends Wa{constructor(e,t){super(),this._element=e,!(!e||!pc.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return XO}static get DefaultType(){return KO}static get NAME(){return GO}dispose(){re.off(this._element,Eo)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ln(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=UO)return;const t=e/this._deltaX;this._deltaX=0,t&&Ln(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(re.on(this._element,WO,e=>this._start(e)),re.on(this._element,BO,e=>this._end(e)),this._element.classList.add(YO)):(re.on(this._element,jO,e=>this._start(e)),re.on(this._element,$O,e=>this._move(e)),re.on(this._element,VO,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===HO||e.pointerType===zO)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const qO="carousel",ZO="bs.carousel",Rs=`.${ZO}`,$0=".data-api",JO="ArrowLeft",QO="ArrowRight",eP=500,ko="next",br="prev",Pr="left",Nl="right",tP=`slide${Rs}`,Ju=`slid${Rs}`,iP=`keydown${Rs}`,nP=`mouseenter${Rs}`,sP=`mouseleave${Rs}`,rP=`dragstart${Rs}`,oP=`load${Rs}${$0}`,aP=`click${Rs}${$0}`,V0="carousel",xl="active",lP="slide",cP="carousel-item-end",uP="carousel-item-start",hP="carousel-item-next",dP="carousel-item-prev",W0=".active",B0=".carousel-item",fP=W0+B0,gP=".carousel-item img",pP=".carousel-indicators",mP="[data-bs-slide], [data-bs-slide-to]",_P='[data-bs-ride="carousel"]',yP={[JO]:Nl,[QO]:Pr},vP={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},CP={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ba extends Qi{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ue.findOne(pP,this._element),this._addEventListeners(),this._config.ride===V0&&this.cycle()}static get Default(){return vP}static get DefaultType(){return CP}static get NAME(){return qO}next(){this._slide(ko)}nextWhenVisible(){!document.hidden&&Co(this._element)&&this.next()}prev(){this._slide(br)}pause(){this._isSliding&&I0(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){re.one(this._element,Ju,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){re.one(this._element,Ju,()=>this.to(e));return}const n=this._getItemIndex(this._getActive());if(n===e)return;const s=e>n?ko:br;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&re.on(this._element,iP,e=>this._keydown(e)),this._config.pause==="hover"&&(re.on(this._element,nP,()=>this.pause()),re.on(this._element,sP,()=>this._maybeEnableCycle())),this._config.touch&&pc.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of Ue.find(gP,this._element))re.on(n,rP,s=>s.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(Pr)),rightCallback:()=>this._slide(this._directionToOrder(Nl)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),eP+this._config.interval))}};this._swipeHelper=new pc(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=yP[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=Ue.findOne(W0,this._indicatorsElement);t.classList.remove(xl),t.removeAttribute("aria-current");const n=Ue.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(xl),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const n=this._getActive(),s=e===ko,r=t||Of(this._getItems(),n,s,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),a=y=>re.trigger(this._element,y,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:o});if(a(tP).defaultPrevented||!n||!r)return;const u=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=s?uP:cP,f=s?hP:dP;r.classList.add(f),Va(r),n.classList.add(h),r.classList.add(h);const m=()=>{r.classList.remove(h,f),r.classList.add(xl),n.classList.remove(xl,f,h),this._isSliding=!1,a(Ju)};this._queueCallback(m,n,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(lP)}_getActive(){return Ue.findOne(fP,this._element)}_getItems(){return Ue.find(B0,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Mi()?e===Pr?br:ko:e===Pr?ko:br}_orderToDirection(e){return Mi()?e===br?Pr:Nl:e===br?Nl:Pr}static jQueryInterface(e){return this.each(function(){const t=Ba.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}re.on(document,aP,mP,function(i){const e=Mn(this);if(!e||!e.classList.contains(V0))return;i.preventDefault();const t=Ba.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");if(n){t.to(n),t._maybeEnableCycle();return}if(Fn.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});re.on(window,oP,()=>{const i=Ue.find(_P);for(const e of i)Ba.getOrCreateInstance(e)});Ni(Ba);const EP="collapse",xP="bs.collapse",za=`.${xP}`,TP=".data-api",wP=`show${za}`,bP=`shown${za}`,SP=`hide${za}`,RP=`hidden${za}`,AP=`click${za}${TP}`,Qu="show",Gr="collapse",Tl="collapsing",IP="collapsed",LP=`:scope .${Gr} .${Gr}`,OP="collapse-horizontal",PP="width",MP="height",DP=".collapse.show, .collapse.collapsing",zh='[data-bs-toggle="collapse"]',FP={parent:null,toggle:!0},NP={parent:"(null|element)",toggle:"boolean"};class wa extends Qi{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=Ue.find(zh);for(const s of n){const r=A0(s),o=Ue.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return FP}static get DefaultType(){return NP}static get NAME(){return EP}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(DP).filter(a=>a!==this._element).map(a=>wa.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||re.trigger(this._element,wP).defaultPrevented)return;for(const a of e)a.hide();const n=this._getDimension();this._element.classList.remove(Gr),this._element.classList.add(Tl),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Tl),this._element.classList.add(Gr,Qu),this._element.style[n]="",re.trigger(this._element,bP)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||re.trigger(this._element,SP).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Va(this._element),this._element.classList.add(Tl),this._element.classList.remove(Gr,Qu);for(const s of this._triggerArray){const r=Mn(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Tl),this._element.classList.add(Gr),re.trigger(this._element,RP)};this._element.style[t]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Qu)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Cs(e.parent),e}_getDimension(){return this._element.classList.contains(OP)?PP:MP}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(zh);for(const t of e){const n=Mn(t);n&&this._addAriaAndCollapsedClass([t],this._isShown(n))}}_getFirstLevelChildren(e){const t=Ue.find(LP,this._config.parent);return Ue.find(e,this._config.parent).filter(n=>!t.includes(n))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle(IP,!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const n=wa.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}re.on(document,AP,zh,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();const e=A0(this),t=Ue.find(e);for(const n of t)wa.getOrCreateInstance(n,{toggle:!1}).toggle()});Ni(wa);const sm="dropdown",kP="bs.dropdown",dr=`.${kP}`,Mf=".data-api",GP="Escape",rm="Tab",jP="ArrowUp",om="ArrowDown",$P=2,VP=`hide${dr}`,WP=`hidden${dr}`,BP=`show${dr}`,zP=`shown${dr}`,z0=`click${dr}${Mf}`,H0=`keydown${dr}${Mf}`,HP=`keyup${dr}${Mf}`,Mr="show",YP="dropup",UP="dropend",XP="dropstart",KP="dropup-center",qP="dropdown-center",qs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ZP=`${qs}.${Mr}`,kl=".dropdown-menu",JP=".navbar",QP=".navbar-nav",eM=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",tM=Mi()?"top-end":"top-start",iM=Mi()?"top-start":"top-end",nM=Mi()?"bottom-end":"bottom-start",sM=Mi()?"bottom-start":"bottom-end",rM=Mi()?"left-start":"right-start",oM=Mi()?"right-start":"left-start",aM="top",lM="bottom",cM={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},uM={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class fn extends Qi{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Ue.next(this._element,kl)[0]||Ue.prev(this._element,kl)[0]||Ue.findOne(kl,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return cM}static get DefaultType(){return uM}static get NAME(){return sm}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Es(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!re.trigger(this._element,BP,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(QP))for(const n of[].concat(...document.body.children))re.on(n,"mouseover",gc);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Mr),this._element.classList.add(Mr),re.trigger(this._element,zP,e)}}hide(){if(Es(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!re.trigger(this._element,VP,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))re.off(n,"mouseover",gc);this._popper&&this._popper.destroy(),this._menu.classList.remove(Mr),this._element.classList.remove(Mr),this._element.setAttribute("aria-expanded","false"),Fn.removeDataAttribute(this._menu,"popper"),re.trigger(this._element,WP,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Dn(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${sm.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof S0>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Dn(this._config.reference)?e=Cs(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=Lf(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Mr)}_getPlacement(){const e=this._parent;if(e.classList.contains(UP))return rM;if(e.classList.contains(XP))return oM;if(e.classList.contains(KP))return aM;if(e.classList.contains(qP))return lM;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(YP)?t?iM:tM:t?sM:nM}_detectNavbar(){return this._element.closest(JP)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Fn.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=Ue.find(eM,this._menu).filter(s=>Co(s));n.length&&Of(n,t,e===om,!n.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=fn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===$P||e.type==="keyup"&&e.key!==rm)return;const t=Ue.find(ZP);for(const n of t){const s=fn.getInstance(n);if(!s||s._config.autoClose===!1)continue;const r=e.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key===rm||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:s._element};e.type==="click"&&(a.clickEvent=e),s._completeHide(a)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n=e.key===GP,s=[jP,om].includes(e.key);if(!s&&!n||t&&!n)return;e.preventDefault();const r=this.matches(qs)?this:Ue.prev(this,qs)[0]||Ue.next(this,qs)[0]||Ue.findOne(qs,e.delegateTarget.parentNode),o=fn.getOrCreateInstance(r);if(s){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),r.focus())}}re.on(document,H0,qs,fn.dataApiKeydownHandler);re.on(document,H0,kl,fn.dataApiKeydownHandler);re.on(document,z0,fn.clearMenus);re.on(document,HP,fn.clearMenus);re.on(document,z0,qs,function(i){i.preventDefault(),fn.getOrCreateInstance(this).toggle()});Ni(fn);const am=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",lm=".sticky-top",wl="padding-right",cm="margin-right";class Hh{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,wl,t=>t+e),this._setElementAttributes(am,wl,t=>t+e),this._setElementAttributes(lm,cm,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,wl),this._resetElementAttributes(am,wl),this._resetElementAttributes(lm,cm)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,t);const a=window.getComputedStyle(o).getPropertyValue(t);o.style.setProperty(t,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&Fn.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){const n=s=>{const r=Fn.getDataAttribute(s,t);if(r===null){s.style.removeProperty(t);return}Fn.removeDataAttribute(s,t),s.style.setProperty(t,r)};this._applyManipulationCallback(e,n)}_applyManipulationCallback(e,t){if(Dn(e)){t(e);return}for(const n of Ue.find(e,this._element))t(n)}}const Y0="backdrop",hM="fade",um="show",hm=`mousedown.bs.${Y0}`,dM={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},fM={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class U0 extends Wa{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return dM}static get DefaultType(){return fM}static get NAME(){return Y0}show(e){if(!this._config.isVisible){Ln(e);return}this._append();const t=this._getElement();this._config.isAnimated&&Va(t),t.classList.add(um),this._emulateAnimation(()=>{Ln(e)})}hide(e){if(!this._config.isVisible){Ln(e);return}this._getElement().classList.remove(um),this._emulateAnimation(()=>{this.dispose(),Ln(e)})}dispose(){this._isAppended&&(re.off(this._element,hm),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(hM),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Cs(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),re.on(e,hm,()=>{Ln(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){P0(e,this._getElement(),this._config.isAnimated)}}const gM="focustrap",pM="bs.focustrap",mc=`.${pM}`,mM=`focusin${mc}`,_M=`keydown.tab${mc}`,yM="Tab",vM="forward",dm="backward",CM={autofocus:!0,trapElement:null},EM={autofocus:"boolean",trapElement:"element"};class X0 extends Wa{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return CM}static get DefaultType(){return EM}static get NAME(){return gM}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),re.off(document,mc),re.on(document,mM,e=>this._handleFocusin(e)),re.on(document,_M,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,re.off(document,mc))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=Ue.focusableChildren(t);n.length===0?t.focus():this._lastTabNavDirection===dm?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===yM&&(this._lastTabNavDirection=e.shiftKey?dm:vM)}}const xM="modal",TM="bs.modal",en=`.${TM}`,wM=".data-api",bM="Escape",SM=`hide${en}`,RM=`hidePrevented${en}`,K0=`hidden${en}`,q0=`show${en}`,AM=`shown${en}`,IM=`resize${en}`,LM=`click.dismiss${en}`,OM=`mousedown.dismiss${en}`,PM=`keydown.dismiss${en}`,MM=`click${en}${wM}`,fm="modal-open",DM="fade",gm="show",eh="modal-static",FM=".modal.show",NM=".modal-dialog",kM=".modal-body",GM='[data-bs-toggle="modal"]',jM={backdrop:!0,focus:!0,keyboard:!0},$M={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class co extends Qi{constructor(e,t){super(e,t),this._dialog=Ue.findOne(NM,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Hh,this._addEventListeners()}static get Default(){return jM}static get DefaultType(){return $M}static get NAME(){return xM}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||re.trigger(this._element,q0,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(fm),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||re.trigger(this._element,SM).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(gm),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])re.off(e,en);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new U0({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new X0({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Ue.findOne(kM,this._dialog);t&&(t.scrollTop=0),Va(this._element),this._element.classList.add(gm);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,re.trigger(this._element,AM,{relatedTarget:e})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){re.on(this._element,PM,e=>{if(e.key===bM){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),re.on(window,IM,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),re.on(this._element,OM,e=>{re.one(this._element,LM,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(fm),this._resetAdjustments(),this._scrollBar.reset(),re.trigger(this._element,K0)})}_isAnimated(){return this._element.classList.contains(DM)}_triggerBackdropTransition(){if(re.trigger(this._element,RM).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(eh)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(eh),this._queueCallback(()=>{this._element.classList.remove(eh),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const s=Mi()?"paddingLeft":"paddingRight";this._element.style[s]=`${t}px`}if(!n&&e){const s=Mi()?"paddingRight":"paddingLeft";this._element.style[s]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const n=co.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](t)}})}}re.on(document,MM,GM,function(i){const e=Mn(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),re.one(e,q0,s=>{s.defaultPrevented||re.one(e,K0,()=>{Co(this)&&this.focus()})});const t=Ue.findOne(FM);t&&co.getInstance(t).hide(),co.getOrCreateInstance(e).toggle(this)});Qc(co);Ni(co);const VM="offcanvas",WM="bs.offcanvas",Vn=`.${WM}`,Z0=".data-api",BM=`load${Vn}${Z0}`,zM="Escape",pm="show",mm="showing",_m="hiding",HM="offcanvas-backdrop",J0=".offcanvas.show",YM=`show${Vn}`,UM=`shown${Vn}`,XM=`hide${Vn}`,ym=`hidePrevented${Vn}`,Q0=`hidden${Vn}`,KM=`resize${Vn}`,qM=`click${Vn}${Z0}`,ZM=`keydown.dismiss${Vn}`,JM='[data-bs-toggle="offcanvas"]',QM={backdrop:!0,keyboard:!0,scroll:!1},eD={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class xs extends Qi{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return QM}static get DefaultType(){return eD}static get NAME(){return VM}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||re.trigger(this._element,YM,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Hh().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(mm);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(pm),this._element.classList.remove(mm),re.trigger(this._element,UM,{relatedTarget:e})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||re.trigger(this._element,XM).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(_m),this._backdrop.hide();const t=()=>{this._element.classList.remove(pm,_m),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Hh().reset(),re.trigger(this._element,Q0)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){re.trigger(this._element,ym);return}this.hide()},t=!!this._config.backdrop;return new U0({className:HM,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new X0({trapElement:this._element})}_addEventListeners(){re.on(this._element,ZM,e=>{if(e.key===zM){if(!this._config.keyboard){re.trigger(this._element,ym);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const t=xs.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}re.on(document,qM,JM,function(i){const e=Mn(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Es(this))return;re.one(e,Q0,()=>{Co(this)&&this.focus()});const t=Ue.findOne(J0);t&&t!==e&&xs.getInstance(t).hide(),xs.getOrCreateInstance(e).toggle(this)});re.on(window,BM,()=>{for(const i of Ue.find(J0))xs.getOrCreateInstance(i).show()});re.on(window,KM,()=>{for(const i of Ue.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&xs.getOrCreateInstance(i).hide()});Qc(xs);Ni(xs);const tD=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),iD=/^aria-[\w-]*$/i,nD=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,sD=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,rD=(i,e)=>{const t=i.nodeName.toLowerCase();return e.includes(t)?tD.has(t)?!!(nD.test(i.nodeValue)||sD.test(i.nodeValue)):!0:e.filter(n=>n instanceof RegExp).some(n=>n.test(t))},ev={"*":["class","dir","id","lang","role",iD],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function oD(i,e,t){if(!i.length)return i;if(t&&typeof t=="function")return t(i);const s=new window.DOMParser().parseFromString(i,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),u=[].concat(e["*"]||[],e[a]||[]);for(const h of l)rD(h,u)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const aD="TemplateFactory",lD={allowList:ev,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},cD={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},uD={entry:"(string|element|function|null)",selector:"(string|element)"};class hD extends Wa{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return lD}static get DefaultType(){return cD}static get NAME(){return aD}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(e,r,s);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},uD)}_setContent(e,t,n){const s=Ue.findOne(n,e);if(s){if(t=this._resolvePossibleFunction(t),!t){s.remove();return}if(Dn(t)){this._putElementInTemplate(Cs(t),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(t);return}s.textContent=t}}_maybeSanitize(e){return this._config.sanitize?oD(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const dD="tooltip",fD=new Set(["sanitize","allowList","sanitizeFn"]),th="fade",gD="modal",bl="show",pD=".tooltip-inner",vm=`.${gD}`,Cm="hide.bs.modal",Go="hover",ih="focus",mD="click",_D="manual",yD="hide",vD="hidden",CD="show",ED="shown",xD="inserted",TD="click",wD="focusin",bD="focusout",SD="mouseenter",RD="mouseleave",AD={AUTO:"auto",TOP:"top",RIGHT:Mi()?"left":"right",BOTTOM:"bottom",LEFT:Mi()?"right":"left"},ID={allowList:ev,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},LD={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class xo extends Qi{constructor(e,t){if(typeof S0>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ID}static get DefaultType(){return LD}static get NAME(){return dD}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),re.off(this._element.closest(vm),Cm,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=re.trigger(this._element,this.constructor.eventName(CD)),n=(L0(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!n)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),re.trigger(this._element,this.constructor.eventName(xD))),this._popper=this._createPopper(s),s.classList.add(bl),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))re.on(a,"mouseover",gc);const o=()=>{re.trigger(this._element,this.constructor.eventName(ED)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||re.trigger(this._element,this.constructor.eventName(yD)).defaultPrevented)return;if(this._getTipElement().classList.remove(bl),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))re.off(s,"mouseover",gc);this._activeTrigger[mD]=!1,this._activeTrigger[ih]=!1,this._activeTrigger[Go]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),re.trigger(this._element,this.constructor.eventName(vD)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(th,bl),t.classList.add(`bs-${this.constructor.NAME}-auto`);const n=pO(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(th),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new hD({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[pD]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(th)}_isShown(){return this.tip&&this.tip.classList.contains(bl)}_createPopper(e){const t=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,n=AD[t.toUpperCase()];return Lf(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")re.on(this._element,this.constructor.eventName(TD),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(t!==_D){const n=t===Go?this.constructor.eventName(SD):this.constructor.eventName(wD),s=t===Go?this.constructor.eventName(RD):this.constructor.eventName(bD);re.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?ih:Go]=!0,o._enter()}),re.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?ih:Go]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},re.on(this._element.closest(vm),Cm,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=Fn.getDataAttributes(this._element);for(const n of Object.keys(t))fD.has(n)&&delete t[n];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Cs(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=xo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ni(xo);const OD="popover",PD=".popover-header",MD=".popover-body",DD={...xo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},FD={...xo.DefaultType,content:"(null|string|element|function)"};class Df extends xo{static get Default(){return DD}static get DefaultType(){return FD}static get NAME(){return OD}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[PD]:this._getTitle(),[MD]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=Df.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ni(Df);const ND="scrollspy",kD="bs.scrollspy",Ff=`.${kD}`,GD=".data-api",jD=`activate${Ff}`,Em=`click${Ff}`,$D=`load${Ff}${GD}`,VD="dropdown-item",Sr="active",WD='[data-bs-spy="scroll"]',nh="[href]",BD=".nav, .list-group",xm=".nav-link",zD=".nav-item",HD=".list-group-item",YD=`${xm}, ${zD} > ${xm}, ${HD}`,UD=".dropdown",XD=".dropdown-toggle",KD={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},qD={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class iu extends Qi{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return KD}static get DefaultType(){return qD}static get NAME(){return ND}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Cs(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(re.off(this._config.target,Em),re.on(this._config.target,Em,nh,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:s,behavior:"smooth"});return}n.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(t(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(n(o),!s)return;continue}!r&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Ue.find(nh,this._config.target);for(const t of e){if(!t.hash||Es(t))continue;const n=Ue.findOne(t.hash,this._element);Co(n)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,n))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Sr),this._activateParents(e),re.trigger(this._element,jD,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(VD)){Ue.findOne(XD,e.closest(UD)).classList.add(Sr);return}for(const t of Ue.parents(e,BD))for(const n of Ue.prev(t,YD))n.classList.add(Sr)}_clearActiveClass(e){e.classList.remove(Sr);const t=Ue.find(`${nh}.${Sr}`,e);for(const n of t)n.classList.remove(Sr)}static jQueryInterface(e){return this.each(function(){const t=iu.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}re.on(window,$D,()=>{for(const i of Ue.find(WD))iu.getOrCreateInstance(i)});Ni(iu);const ZD="tab",JD="bs.tab",fr=`.${JD}`,QD=`hide${fr}`,eF=`hidden${fr}`,tF=`show${fr}`,iF=`shown${fr}`,nF=`click${fr}`,sF=`keydown${fr}`,rF=`load${fr}`,oF="ArrowLeft",Tm="ArrowRight",aF="ArrowUp",wm="ArrowDown",Zs="active",bm="fade",sh="show",lF="dropdown",cF=".dropdown-toggle",uF=".dropdown-menu",rh=":not(.dropdown-toggle)",hF='.list-group, .nav, [role="tablist"]',dF=".nav-item, .list-group-item",fF=`.nav-link${rh}, .list-group-item${rh}, [role="tab"]${rh}`,tv='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',oh=`${fF}, ${tv}`,gF=`.${Zs}[data-bs-toggle="tab"], .${Zs}[data-bs-toggle="pill"], .${Zs}[data-bs-toggle="list"]`;class uo extends Qi{constructor(e){super(e),this._parent=this._element.closest(hF),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),re.on(this._element,sF,t=>this._keydown(t)))}static get NAME(){return ZD}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?re.trigger(t,QD,{relatedTarget:e}):null;re.trigger(e,tF,{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Zs),this._activate(Mn(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(sh);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),re.trigger(e,iF,{relatedTarget:t})};this._queueCallback(n,e,e.classList.contains(bm))}_deactivate(e,t){if(!e)return;e.classList.remove(Zs),e.blur(),this._deactivate(Mn(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(sh);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),re.trigger(e,eF,{relatedTarget:t})};this._queueCallback(n,e,e.classList.contains(bm))}_keydown(e){if(![oF,Tm,aF,wm].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=[Tm,wm].includes(e.key),n=Of(this._getChildren().filter(s=>!Es(s)),e.target,t,!0);n&&(n.focus({preventScroll:!0}),uo.getOrCreateInstance(n).show())}_getChildren(){return Ue.find(oh,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=Mn(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains(lF))return;const s=(r,o)=>{const a=Ue.findOne(r,n);a&&a.classList.toggle(o,t)};s(cF,Zs),s(uF,sh),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Zs)}_getInnerElement(e){return e.matches(oh)?e:Ue.findOne(oh,e)}_getOuterElement(e){return e.closest(dF)||e}static jQueryInterface(e){return this.each(function(){const t=uo.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}re.on(document,nF,tv,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!Es(this)&&uo.getOrCreateInstance(this).show()});re.on(window,rF,()=>{for(const i of Ue.find(gF))uo.getOrCreateInstance(i)});Ni(uo);const pF="toast",mF="bs.toast",As=`.${mF}`,_F=`mouseover${As}`,yF=`mouseout${As}`,vF=`focusin${As}`,CF=`focusout${As}`,EF=`hide${As}`,xF=`hidden${As}`,TF=`show${As}`,wF=`shown${As}`,bF="fade",Sm="hide",Sl="show",Rl="showing",SF={animation:"boolean",autohide:"boolean",delay:"number"},RF={animation:!0,autohide:!0,delay:5e3};class nu extends Qi{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return RF}static get DefaultType(){return SF}static get NAME(){return pF}show(){if(re.trigger(this._element,TF).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(bF);const t=()=>{this._element.classList.remove(Rl),re.trigger(this._element,wF),this._maybeScheduleHide()};this._element.classList.remove(Sm),Va(this._element),this._element.classList.add(Sl,Rl),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||re.trigger(this._element,EF).defaultPrevented)return;const t=()=>{this._element.classList.add(Sm),this._element.classList.remove(Rl,Sl),re.trigger(this._element,xF)};this._element.classList.add(Rl),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Sl),super.dispose()}isShown(){return this._element.classList.contains(Sl)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){re.on(this._element,_F,e=>this._onInteraction(e,!0)),re.on(this._element,yF,e=>this._onInteraction(e,!1)),re.on(this._element,vF,e=>this._onInteraction(e,!0)),re.on(this._element,CF,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=nu.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Qc(nu);Ni(nu);const AF=Object.assign({});function IF(i){for(const[e,t]of Object.entries(AF)){const n=e.slice(e.lastIndexOf("/")+1,e.lastIndexOf("."));i.component(n,nE(t))}}const iv=mx(bL);iv.use(IF);iv.mount("#app");
//# sourceMappingURL=index-e5cacc34.js.map
