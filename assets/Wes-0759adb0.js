import{V as Le,h as be,T as he,X as Ce,i as _e,S as xe,O as K,m as $,M as ee,j as G,k as Ie,l as Se,n as we,o as Ne,g as ke,f as Me,e as De,d as Te,b as We,a as ve,_ as Ae,p as Oe,q as Ee,r as Be,F as Pe,P as Ve,s as je,I as ze,t as Re,c as Fe}from"./logo-359cfd71.js";import{$ as te}from"./jquery-cdd872f9.js";import{_ as qe,r as Ze,f as le,g as Ge,n as ae,c as N,a as y,h as de,i as I,j as k,m as P,k as Je,l as Qe,q as ce,u as Ye,o as x}from"./index-f93268f5.js";const He={props:{},setup(oe,{emit:c}){const m=$,a=Ye(),e=Ze({defaultCenter:[121.326776,24.655499],defaultCenterZoom:14,targetNum:1,conditionWrap:!1,layerSelect:!1,currentLayers:[],layers:[],mapLayers:le(()=>e.layers.map((t,r)=>({label:t.group_title,value:t.value,layers:t.group_layers,groupClass:t.group_class}))),selectLock:!1,mapCount:1,map1:null,map2:null,map1LayerStatus:[],map2LayerStatus:[],temp:{map1BaseStatus:0,map2BaseStatus:0},deleteLightbox:!1,dimensionMap:{map1:"2D",map2:"2D"},toSearchDimensionStatus:le(()=>{const s=e.targetNum===1?"map1":"map2";return e.dimensionMap[s]==="2D"}),selectValueTemp:0,popup:{nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""},comSize:{wrapHeight:"",wrapWidth:""},tribeQuery:{}});let u=null;Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0NzM3MWFhYS0xMjNlLTQ3MTMtODFjZS0xZjMzM2I5NGZiYTEiLCJpZCI6MTMwODE4LCJpYXQiOjE2ODQwNzM3Mjl9.UYu4kBialPo19dcvosHzZTpg2BD1zkFQnjCD78YiiYo";const A=new Le({projection:"EPSG:4326",center:e.defaultCenter,zoom:e.defaultCenterZoom,minZoom:4,maxZoom:16});function J(){e.map1=new ee({target:"map1",layers:[G.getBaseMapData(0)],view:A,controls:[]}),e.map1.addControl(new Oe({units:"metric"})),V("3D")}function Q(s,t){const r=new Ee({source:new Be({features:[new Pe({geometry:new Ve([s,t]),population:4e3,rainfall:500})]}),style:new je({image:new ze({anchor:[.5,100],anchorXUnits:"fraction",anchorYUnits:"pixels",src:Re})})}),i=e.targetNum===1?"map1":"map2";e[i].addLayer(r)}function O({action:s,value:t}){var l;const r=((l=e.map1)==null?void 0:l.getTarget())==null?"map2":"map1",i=e[r].getView();switch(s){case"In":i.animate({zoom:i.getZoom()+1});break;case"Out":i.animate({zoom:i.getZoom()-1});break;case"toNorth":i.animate({rotation:0});break;case"moveTo":if(t){const{xAxis:p,yAxis:C}=t;i.animate({center:[p,C],zoom:17,duration:100})}else navigator.geolocation.getCurrentPosition(function(p){i.animate({center:[p.coords.longitude,p.coords.latitude],zoom:17,duration:100}),Q(p.coords.longitude,p.coords.latitude)});break;case"fullScreen":const o=document.getElementById(`map${e.targetNum}`);o.requestFullscreen?o.requestFullscreen():o.msRequestFullscreen?o.msRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen();break}}function S({action:s,value:t}){var l,o,p,C,T,W,q,Z,se;const r=e.targetNum==1?e.map1:e.map2,i=r==null?void 0:r.getLayers();switch(s){case"layerMode":if(t.checked){let g=t.nestedSubNodeIndex,v=e.layers[t.nodeIndex].group_layers[t.subNodeIndex].single_tiles,L=!_e(e.layers[t.nodeIndex].group_layers[t.subNodeIndex].info_box);if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){if(!v||L){const b=u.getCesiumScene(),h=b.imageryLayers.length;for(let D=0;D<h;D++){let f=b.imageryLayers.get(D),w=(o=(l=f==null?void 0:f.imageryProvider._resource)==null?void 0:l.queryParameters)==null?void 0:o.id;const B=(p=m.getLayerIndex(w))==null?void 0:p.nodeIndex,X=(C=m.getLayerIndex(w))==null?void 0:C.subNodeIndex;t.nodeIndex==B&&t.subNodeIndex==X&&b.imageryLayers.remove(f)}g=e.selectValueTemp,t.id=m.resetLayerId(t.id,"nestedSubNode",e.selectValueTemp)}const _=m.get3DLayer(e.layers[t.nodeIndex].group_layers[t.subNodeIndex],g,t.id);u.getCesiumScene().imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider(_))}else{(!v||L)&&(i.getArray().forEach(h=>{h.get("id")&&h.get("id").includes(`node${t.nodeIndex}_subNode${t.subNodeIndex}_nestedSubNode`)&&r.removeLayer(h)}),g=e.selectValueTemp,t.id=m.resetLayerId(t.id,"nestedSubNode",e.selectValueTemp));let _=m.getLayer(e.layers[t.nodeIndex].group_layers[t.subNodeIndex],g,t.id);if(r.addLayer(_),["雷達回波預測","累積雨量預測","氣溫預測"].includes(_.get("label"))){const{currentLayerKey:b,tilesImageUrls:h,imageExtent:D}=_.get("ext"),f=t.id.split("_nestedSubNode")[0];((T=e.temp)==null?void 0:T[`${f}count`])===void 0&&(e.temp[`${f}count`]=b),e.temp[f]=setInterval(function(){e.temp[`${f}count`]=e.temp[`${f}count`]+1>4?0:e.temp[`${f}count`]+1;let w=new xe({url:h[e.temp[`${f}count`]],projection:"EPSG:4326",imageExtent:D,interpolate:!0});_.setSource(w)},1e3)}["新竹縣原住民部落範圍","近年歷史災害82處部落點位","雨量站","工程鑽探","土石流潛勢溪流","落石分布"].includes(_.get("label"))&&(ne(r,_.label),re(t,_.get("label")))}d("add",r.getTarget(),t.id)}else{if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){const{id:g,nestedSubNodeIndex:v,nodeIndex:L,subNodeIndex:_}=t;let b=e.layers[L].group_layers[_];const h=u.getCesiumScene(),D=h.imageryLayers.length;for(let f=0;f<D;f++){let w=h.imageryLayers.get(f);const B=(q=(W=w==null?void 0:w.imageryProvider._resource)==null?void 0:W.queryParameters)==null?void 0:q.id,X=(Z=m.getLayerIndex(B))==null?void 0:Z.nodeIndex,fe=(se=m.getLayerIndex(B))==null?void 0:se.subNodeIndex;(b.title===B||L==X&&_==fe)&&h.imageryLayers.remove(w)}}else{let v=function(){const L=t.id.split("_nestedSubNode")[0];g.filter(b=>{var h;return(h=b==null?void 0:b.get("id"))==null?void 0:h.includes(L)}).forEach(b=>{r.removeLayer(b)})},g=i.getArray();if(v(),e.layers[t.nodeIndex].group_layers[t.subNodeIndex].layer_type==="WFS"&&(re(t),e.popup.popupId=0,e.popup.popupData="",e.popup.overlay&&(r.removeOverlay(e.popup.overlay),e.popup.overlay=null)),["雷達回波預測","累積雨量預測","氣溫預測"].includes(e.layers[t.nodeIndex].group_layers[t.subNodeIndex].title)){const L=t.id.split("_nestedSubNode")[0];clearInterval(e.temp[L]),delete e.temp[`${L}count`]}}d("delete",r.getTarget(),t.id)}break;case"selectLayerMode":if(e.selectLock)return;t.layerName==="all"?i.getArray().filter(L=>L.get("id")!==void 0).forEach(L=>{S({action:"layerMode",value:{checked:!1,...m.getLayerIndex(L.get("id"))}})}):S({action:"layerMode",value:{checked:!1,...m.getLayerIndex(t.id)}});break;case"changeOrder":if(e.selectLock)return;const{nodeIndex:Y,subNodeIndex:H,nestedSubNodeIndex:U}=m.getLayerIndex(t.id),ie=m.getLayer(e.layers[Y].group_layers[H],U,t.id);if(t.movement==="up"){if(t.key+1===i.getArray().length)return;const g={checked:!1,nodeIndex:Y,subNodeIndex:H,nestedSubNodeIndex:U,id:t.id};S({action:"layerMode",value:g}),i.insertAt(t.key+1,ie)}if(t.movement==="down"){if(t.key-1===0)return;const g={checked:!1,nodeIndex:Y,subNodeIndex:H,nestedSubNodeIndex:U,id:t.id};S({action:"layerMode",value:g}),i.insertAt(t.key-1,ie)}break;case"baseMap":e.temp[`map${e.targetNum}BaseStatus`]=t.baseId;const ye=new he({preload:1/0,name:t.name,label:t.label,type:t.mapType,baseId:t.baseId,source:new Ce({url:t.url}),crossOrigin:"anonymous"}),ge=r==null?void 0:r.getLayers().getArray();i.insertAt(0,ye),ge.forEach(g=>(g.get("type")==="base"&&g.get("baseId")!==t.baseId&&r.removeLayer(g),!0));break;case"setOpacity":E(t.key,t.value);break}M()}function M(){var s,t,r;if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){e.currentLayers=[];const i=u.getCesiumScene(),l=i.imageryLayers.length;for(let o=0;o<l;o++){let C=i.imageryLayers.get(o).imageryProvider;C instanceof Cesium.WebMapServiceImageryProvider&&e.currentLayers.push({label:(s=C._resource)==null?void 0:s.queryParameters.layers_name,id:(t=C._resource)==null?void 0:t.queryParameters.id,visible:1})}}else{const i=e.targetNum==1?e.map1:e.map2,l=(r=i==null?void 0:i.getLayers())==null?void 0:r.getArray();e.currentLayers=l==null?void 0:l.map(o=>({label:o.get("label"),id:o.get("id"),visible:o.getVisible()}))}}function V(s){let t=e.targetNum==1?e.map1:e.map2,r=t==null?void 0:t.getLayers(),i=e.targetNum==1?"map1":"map2";if(e.dimensionMap[i]=s,s==="3D"){const o=r.getArray().find(p=>p.get("label").includes("近年歷史災害82處部落點位"));o&&e[`map${e.targetNum}`].removeLayer(o),j(!0),e[`${i}LayerStatus`].push("3D")}else j(!1),e[`${i}LayerStatus`]=e[`${i}LayerStatus`].filter(l=>l!=="3D"),e[`map${e.targetNum}LayerStatus`].forEach(l=>{let{nodeIndex:o,subNodeIndex:p,nestedSubNodeIndex:C}=m.getLayerIndex(l);return m.getLayer(e.layers[o].group_layers[p],C,s.id).get("label").includes("近年歷史災害82處部落點位")&&S({action:"layerMode",value:{checked:!0,nodeIndex:o,subNodeIndex:p,nestedSubNodeIndex:C,id:l}}),l})}function j(s){const t=e.targetNum==1?e.map1:e.map2;if(s){u=new K({map:t,time(){return Cesium.JulianDate.now()},sceneOptions:{mapProjection:new Cesium.WebMercatorProjection}}),u.setEnabled(!0);let r=u.getCesiumScene();r.terrainProvider=Cesium.createWorldTerrain({}),u.setEnabled(!0)}else u.setEnabled(!1)}function z(s){const t=e.targetNum==1?e.map1:e.map2,r=t==null?void 0:t.getLayers();if(e.selectLock)return;let i=!r.getArray()[s].getVisible();r.getArray()[s].setVisible(i),ae(()=>{M()})}function E(s,t){let r=e.targetNum==1?e.map1:e.map2;(r==null?void 0:r.getLayers()).getArray()[s].setOpacity(Number(t))}function R(s){var l;if(e.mapCount===s)return;const t=e.targetNum!==1?"map1":"map2";e.mapCount=s;const i=e[`${t}LayerStatus`].filter(o=>o!=="3D").map(o=>$.getLayerIndex(o));if(s===2&&(e[t]=new ee({target:t,layers:[G.getBaseMapData(0),...i.map(o=>m.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:A,controls:[]}),((l=e[`${t}LayerStatus`])==null?void 0:l.indexOf("3D"))!==-1)){u=new K({map:e[t],time(){return Cesium.JulianDate.now()}}),u.setEnabled(!0);let o=u.getCesiumScene({});o.terrainProvider=Cesium.createWorldTerrain({})}if(s===1){e[t]=null;const o=document.getElementById(t);for(;o.firstChild;)o.removeChild(o.firstChild)}}function F(s){var r;e.targetNum=s;const t=e.targetNum!==1?"map1":"map2";if(e.mapCount===1){if(!e[`map${s}`]){let i=e[`map${s}LayerStatus`].filter(o=>o!=="3D");i.includes("node0_subNode4_nestedSubNodeundefined")&&(i=[...i.filter(p=>p!=="node0_subNode4_nestedSubNodeundefined"),"node0_subNode4_nestedSubNodeundefined"]);const l=i.map(o=>$.getLayerIndex(o));e[`map${s}`]=new ee({target:`map${s}`,layers:[G.getBaseMapData(e.temp[`map${e.targetNum}BaseStatus`]),...l.map(o=>m.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:A,controls:[]}),ne(e[`map${s}`]),((r=e[`map${s}LayerStatus`])==null?void 0:r.indexOf("3D"))!==-1&&(u=new K({map:e[`map${s}`],time(){return Cesium.JulianDate.now()}}),u.setEnabled(!0))}if(e[t]){e[t]=null;const i=document.getElementById(t);for(;i.firstChild;)i.removeChild(i.firstChild)}}ae(()=>{M()})}function n(){e.conditionWrap=!e.conditionWrap}function d(s,t,r){if(s==="add")e[`${t}LayerStatus`].push(r);else if(s==="delete"){const i=e[`${t}LayerStatus`].findIndex(l=>l===r);e[`${t}LayerStatus`].splice(i,1)}else console.log("error")}function ne(s){var r;const t=new Ie({layers:(r=s==null?void 0:s.getLayers())==null?void 0:r.getArray(),condition:Se});s.addInteraction(t),t.on("select",i=>{const l=i.selected[0];if(l){e.popup.overlay=new we({element:e.popup.nodeRef,autoPan:!0,autoPanAnimation:{duration:250}}),e.popup.overlay.setPosition(i.mapBrowserEvent.coordinate),s.addOverlay(e.popup.overlay);const o=(l.getId()??l.getGeometryName()).split(".");if(e.popup.popupData=o[0],e.popup.coordinate=i.mapBrowserEvent.coordinate,o[0]==="新竹縣原住民部落範圍"){e.popup.popupId=l.get("編號");return}if(o[0]==="近年歷史災害82處部落點位"){e.popup.popupId=o[1];return}if(o[0]==="雨量站"){e.popup.popupId=l.get("Name");return}if(o[0]==="工程鑽探"){console.log("選到工程鑽探"),e.popup.popupId=l.get("name").split("_")[0];return}if(o[0]==="土石流潛勢溪流"){e.popup.popupId=l.get("ID"),e.popup.temp=l;return}o[0]==="落石分布"&&(e.popup.popupId=l.get("DATA_ID"),e.popup.temp=l)}else s.removeOverlay(e.popup.overlay),e.popup.overlay=null,e.popup={nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""}})}function pe(){(e.targetNum===1?e.map1:e.map2).removeOverlay(e.popup.overlay),e.popup.overlay=null}function re(s,t){const{checked:r,id:i}=s;if(!r){e.selectLayerOption={};return}t==="新竹縣原住民部落範圍"&&te.ajax({url:"https://api.edtest.site/tribeQuery",method:"GET",success:l=>{e.tribeQuery=l},error:l=>{console.log(l)}})}function me(s){const t={action:"moveTo",value:{xAxis:s.WGS84.lng,yAxis:s.WGS84.lat}};O(t)}Ge(async()=>{let s=te.ajax({url:"https://api.edtest.site/underLayers",method:"GET"}).done(r=>r),t=te.ajax({url:"https://api.edtest.site/layers",method:"GET"}).done(r=>r);Promise.all([s,t]).then(r=>{let i=r[0].data.map((l,o)=>({mapType:"base",baseId:o,onCurrent:!1,...l}));G.setBaseMapData(i),e.temp.map1BaseStatus=0,e.temp.baseMapList=be(),e.layers=r[1].map((l,o)=>(l.group_layers.forEach((p,C)=>{let T=C,W;p.id=`node${o}_subNode${T}_nestedSubNode${W}`,p.single_tiles||p.tiles_list.forEach((q,Z)=>{W=Z,q.id=`node${o}_subNode${T}_nestedSubNode${W}`})}),{...l,value:o})),ae(()=>{J(),M()})}),e.comSize.wrapHeight=window.innerHeight,e.comSize.wrapWidth=window.innerWidth,a.dispatch("updateWindowWidth",window.innerWidth),window.onresize=r=>{e.comSize.wrapHeight=r.target.innerHeight,e.comSize.wrapWidth=r.target.innerWidth,a.dispatch("updateWindowWidth",window.innerWidth)}});function ue(){window.console.log("ol3d",u);let s=u.getCesiumScene().imageryLayers,t=s.length;for(let r=0;r<t;r++){let i=s.get(r);window.console.log(1,i)}}return{state:e,props:oe,store:a,mapControl:O,layerControl:S,onChangeLayerVisible:z,onChangeLayerOpacity:E,changeTarget:F,conditionWrap:n,closeAreaData:pe,moveToMap:me,changeMapCount:R,onChangeDimensionMap:V,show:ue}}},Ue={class:"w-100 d-flex justify-content-between flex-sm-row flex-wrap flex-sm-nowrap mapWrap",id:"mapWrap"},Xe={key:0,class:"middleLine"},Ke={class:"SearchBar d-block d-sm-block position-fixed w-100 w-sm-auto position-sm-absolute p-3 p-sm-0"},$e={class:"d-flex align-items-center justify-content-between justify-content-sm-start"},et=y("img",{src:Ne,alt:"",class:"logo col-5 col-sm-auto me-0 me-sm-5"},null,-1),tt={class:"conditionCom d-none d-sm-block position-absolute"},at={class:"mb-4"},ot={key:1,class:"mb-4"},nt={key:1},rt={class:"m-Navbar d-flex d-sm-none position-relative w-100"},st={class:"position-absolute bottom-100 w-100",style:{"max-height":"70vh","overflow-y":"scroll"}},it={key:0},lt={key:0,class:"lightWrap w-100 h-100 d-flex justify-content-center align-items-center"},dt={class:"p-4 rounded bg-white",style:{width:"250px"}},ct=y("p",{class:"text-center fw-bold"},"是否要取消全部圖層",-1),pt={class:"d-flex justify-content-around"};function mt(oe,c,m,a,e,u){var z,E,R,F;const A=ke,J=Me,Q=De,O=Te,S=Fe,M=We,V=ve,j=Ae;return x(),N("div",null,[y("div",Ue,[y("div",{id:"map1",class:de({"w-100":((z=a.state.map1)==null?void 0:z.getTarget())=="map1","h-100":a.state.mapCount===1,"h-50":a.state.mapCount===2&&a.state.comSize.wrapWidth<600,middleMap:(E=a.state.map1)==null?void 0:E.getTarget()})},null,2),a.state.mapCount===2?(x(),N("div",Xe)):I("",!0),y("div",{id:"map2",class:de({"w-100":((R=a.state.map2)==null?void 0:R.getTarget())=="map2","h-100":a.state.mapCount===1,"h-50":a.state.mapCount===2&&a.state.comSize.wrapWidth<600,middleMap:(F=a.state.map2)==null?void 0:F.getTarget()})},null,2)]),k(A,{class:"asideTool position-absolute top-50 translate-middle-y",id:"asideTool",onChangeTarget:n=>{a.changeTarget(n)},onOnMapControl:c[0]||(c[0]=({action:n,value:d})=>{a.mapControl({action:n,value:d})})},null,8,["onChangeTarget"]),y("div",Ke,[y("div",$e,[et,k(J,{class:"mapSourceOption col-5 col-sm-auto d-block d-sm-block",baseMapList:a.state.temp.baseMapList,onChangeBaseMaps:({action:n,value:d})=>{a.layerControl({action:n,value:d})}},null,8,["baseMapList","onChangeBaseMaps"])]),k(Q,P({class:"mt-4 d-none d-sm-block"},{dimensionMapStatus:a.state.toSearchDimensionStatus,currentLayers:a.state.currentLayers,mapCount:a.state.mapCount,onChangeBaseMaps:({action:n,value:d})=>{a.layerControl({action:n,value:d})},onChangeMapCount:n=>{a.changeMapCount(n)}},{onChangeTarget:n=>{a.changeTarget(n)},onOnLayerControl:c[1]||(c[1]=({action:n,value:d})=>{a.layerControl({action:n,value:d})}),onConditionWrap:c[2]||(c[2]=n=>{a.conditionWrap(n)}),onChangeDimensionMap:n=>{a.onChangeDimensionMap(n)}}),null,16,["onChangeTarget","onChangeDimensionMap"])]),y("div",tt,[y("div",at,[a.state.conditionWrap?I("",!0):(x(),N("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:c[3]||(c[3]=n=>a.state.conditionWrap=!0)}," 圖層選項 ")),a.state.conditionWrap?(x(),N("div",ot,[k(O,P({tribeQuery:a.state.tribeQuery,mapLayers:a.state.mapLayers,currentLayers:a.state.currentLayers,onClose:()=>{a.state.conditionWrap=!1},showSelectLayerValue:n=>{a.state.selectValueTemp=n},moveToMap:n=>{a.moveToMap(n)}},{onOnLayerControl:c[4]||(c[4]=({action:n,value:d})=>{a.layerControl({action:n,value:d})})}),null,16)])):I("",!0),k(S,{text:"可選擇要加入的圖層",styles:"right: 105%;top: 0;text-align: right;"})]),y("div",null,[a.state.layerSelect?I("",!0):(x(),N("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:c[5]||(c[5]=n=>a.state.layerSelect=!0)}," 已選擇的圖層 ")),a.state.layerSelect?(x(),N("div",nt,[k(M,Je(Qe({selectLock:a.state.selectLock,currentLayers:a.state.currentLayers,onClose:()=>{a.state.layerSelect=!1},onLockLayer:()=>{a.state.selectLock=!a.state.selectLock},onDeleteLayer:({action:n,value:d})=>{d.layerName=="all"?a.state.deleteLightbox=!0:a.layerControl({action:n,value:d})},onLayerControl:({action:n,value:d})=>{a.layerControl({action:n,value:d})},onChangeLayerVisible:n=>{a.onChangeLayerVisible(n)},onChangeLayerOpacity:(n,d)=>{a.onChangeLayerOpacity(n,d)}})),null,16)])):I("",!0),k(S,{text:"顯示已經選擇的圖層",styles:"right: 105%;top: 0;text-align: right;"})])]),y("div",rt,[y("div",st,[a.state.conditionWrap?(x(),ce(O,P({key:0,class:"w-100"},{mapLayers:a.state.mapLayers,currentLayers:a.state.currentLayers,onClose:()=>{a.state.conditionWrap=!1},showSelectLayerValue:n=>{a.state.selectValueTemp=n}},{onOnLayerControl:c[6]||(c[6]=({action:n,value:d})=>{a.layerControl({action:n,value:d})})}),null,16)):I("",!0)]),a.state.layerSelect?(x(),N("div",it,[k(M,P({class:"position-absolute bottom-100 w-100"},{selectLock:a.state.selectLock,currentLayers:a.state.currentLayers,onClose:()=>{a.state.layerSelect=!1},onLockLayer:()=>{a.state.selectLock=!a.state.selectLock},onDeleteLayer:({action:n,value:d})=>{d.layerName=="all"?a.state.deleteLightbox=!0:a.layerControl({action:n,value:d})},onChangLayerVisible:n=>{a.layerControl(n)},onChangeOrderLayer:({action:n,value:d})=>{a.layerControl({action:n,value:d})},onLayerControl:({action:n,value:d})=>{a.layerControl({action:n,value:d})}}),null,16)])):I("",!0),k(V,P({dimensionMapStatus:a.state.toSearchDimensionStatus,currentLayers:a.state.currentLayers,mapCount:a.state.mapCount,openConditionWrap:()=>{a.state.conditionWrap=!a.state.conditionWrap,a.state.layerSelect=!1},openLayerSelect:()=>{a.state.layerSelect=!a.state.layerSelect,a.state.conditionWrap=!1},onLayerControl:({action:n,value:d})=>{a.layerControl({action:n,value:d})},onChangeMapCount:n=>{a.changeMapCount(n)},onChangeTarget:n=>{a.changeTarget(n)}},{onChangeDimensionMap:n=>{a.onChangeDimensionMap(n)},onConditionWrap:c[7]||(c[7]=n=>{a.conditionWrap(n)})}),null,16,["onChangeDimensionMap"])]),a.state.deleteLightbox?(x(),N("div",lt,[y("div",dt,[ct,y("div",pt,[y("button",{class:"rounded px-3 py-1 bg-steel text-white border-0",onClick:c[8]||(c[8]=()=>{a.layerControl({action:"selectLayerMode",value:{layerName:"all"}}),a.state.deleteLightbox=!1})},"確定"),y("button",{class:"rounded px-3 py-1 bg-secondary bg-gradient text-white border-0",onClick:c[9]||(c[9]=()=>{a.state.deleteLightbox=!1})},"取消")])])])):I("",!0),y("div",{id:"popup",class:"popup position-absolute bottom-0",ref:n=>{a.state.popup.nodeRef=n}},[a.state.popup.popupId!==0?(x(),ce(j,{key:0,class:"areaData",closeAreaData:()=>{a.closeAreaData()},popup:a.state.popup,maxHeight:500},null,8,["closeAreaData","popup"])):I("",!0)],512),a.store.state.isInit?(x(),N("div",{key:1,class:"stepOverLayer position-absolute top-0 start-0 w-100 h-100 bg-black opacity-50",id:"firstEnter",onClick:c[10]||(c[10]=()=>{a.store.dispatch("updateLayerStatus",!1)})})):I("",!0)])}const ft=qe(He,[["render",mt]]);export{ft as default};
//# sourceMappingURL=Wes-0759adb0.js.map
