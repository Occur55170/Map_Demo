import{_ as pe,a as me,b as ue,c as ye,d as ge,e as fe,f as Le,g as be,V as we,h as Ne,T as Me,X as ke,i as Te,S as De,O as K,m as $,M as ee,j as Z,k as ve,l as We,n as Ae,o as Oe,p as Ee,q as Pe,r as Be,F as Ve,P as je,s as ze,I as Re,t as Fe}from"./logo-359cfd71.js";import{$ as te}from"./jquery-cdd872f9.js";import{_ as qe,r as Ze,f as le,g as Ge,n as ae,c as N,a as u,h as de,i as I,j as M,m as B,k as Je,l as Qe,q as ce,u as Ye,o as S}from"./index-f93268f5.js";const He={components:{AreaData:pe,MNavbar:me,LayerSelector:ue,OverLayer:ye,Condition:ge,SearchBar:fe,MapSourceOption:Le,AsideTool:be},props:{},setup(oe,{emit:c}){const m=$,a=Ye(),e=Ze({defaultCenter:[121.326776,24.655499],defaultCenterZoom:14,targetNum:1,conditionWrap:!1,layerSelect:!1,currentLayers:[],layers:[],mapLayers:le(()=>e.layers.map((n,t)=>({label:n.group_title,value:n.value,layers:n.group_layers,groupClass:n.group_class}))),selectLock:!1,mapCount:1,map1:null,map2:null,map1LayerStatus:[],map2LayerStatus:[],temp:{map1BaseStatus:0,map2BaseStatus:0},deleteLightbox:!1,dimensionMap:{map1:"2D",map2:"2D"},toSearchDimensionStatus:le(()=>{const n=e.targetNum===1?"map1":"map2";return e.dimensionMap[n]==="2D"}),selectValueTemp:0,popup:{nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""},comSize:{wrapHeight:"",wrapWidth:""},tribeQuery:{}});let y=null;Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0NzM3MWFhYS0xMjNlLTQ3MTMtODFjZS0xZjMzM2I5NGZiYTEiLCJpZCI6MTMwODE4LCJpYXQiOjE2ODQwNzM3Mjl9.UYu4kBialPo19dcvosHzZTpg2BD1zkFQnjCD78YiiYo";const A=new we({projection:"EPSG:4326",center:e.defaultCenter,zoom:e.defaultCenterZoom,minZoom:4,maxZoom:16});function G(){e.map1=new ee({target:"map1",layers:[Z.getBaseMapData(0)],view:A,controls:[]}),e.map1.addControl(new Ee({units:"metric"}))}function J(n,t){const s=new Pe({source:new Be({features:[new Ve({geometry:new je([n,t]),population:4e3,rainfall:500})]}),style:new ze({image:new Re({anchor:[.5,100],anchorXUnits:"fraction",anchorYUnits:"pixels",src:Fe})})}),i=e.targetNum===1?"map1":"map2";e[i].addLayer(s)}function O({action:n,value:t}){var l;const s=((l=e.map1)==null?void 0:l.getTarget())==null?"map2":"map1",i=e[s].getView();switch(n){case"In":i.animate({zoom:i.getZoom()+1});break;case"Out":i.animate({zoom:i.getZoom()-1});break;case"toNorth":i.animate({rotation:0});break;case"moveTo":if(t){const{xAxis:p,yAxis:C}=t;i.animate({center:[p,C],zoom:17,duration:100})}else navigator.geolocation.getCurrentPosition(function(p){i.animate({center:[p.coords.longitude,p.coords.latitude],zoom:17,duration:100}),J(p.coords.longitude,p.coords.latitude)});break;case"fullScreen":const o=document.getElementById(`map${e.targetNum}`);o.requestFullscreen?o.requestFullscreen():o.msRequestFullscreen?o.msRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen();break}}function x({action:n,value:t}){var l,o,p,C,D,v,F,q,se;const s=e.targetNum==1?e.map1:e.map2,i=s==null?void 0:s.getLayers();switch(n){case"layerMode":if(t.checked){let g=t.nestedSubNodeIndex,W=e.layers[t.nodeIndex].group_layers[t.subNodeIndex].single_tiles,L=!Te(e.layers[t.nodeIndex].group_layers[t.subNodeIndex].info_box);if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){if(!W||L){const b=y.getCesiumScene(),h=b.imageryLayers.length;for(let T=0;T<h;T++){let f=b.imageryLayers.get(T),w=(o=(l=f==null?void 0:f.imageryProvider._resource)==null?void 0:l.queryParameters)==null?void 0:o.id;const P=(p=m.getLayerIndex(w))==null?void 0:p.nodeIndex,X=(C=m.getLayerIndex(w))==null?void 0:C.subNodeIndex;t.nodeIndex==P&&t.subNodeIndex==X&&b.imageryLayers.remove(f)}g=e.selectValueTemp,t.id=m.resetLayerId(t.id,"nestedSubNode",e.selectValueTemp)}const _=m.get3DLayer(e.layers[t.nodeIndex].group_layers[t.subNodeIndex],g,t.id);y.getCesiumScene().imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider(_))}else{(!W||L)&&(i.getArray().forEach(h=>{h.get("id")&&h.get("id").includes(`node${t.nodeIndex}_subNode${t.subNodeIndex}_nestedSubNode`)&&s.removeLayer(h)}),g=e.selectValueTemp,t.id=m.resetLayerId(t.id,"nestedSubNode",e.selectValueTemp));let _=m.getLayer(e.layers[t.nodeIndex].group_layers[t.subNodeIndex],g,t.id);if(s.addLayer(_),["雷達回波預測","累積雨量預測","氣溫預測"].includes(_.get("label"))){const{currentLayerKey:b,tilesImageUrls:h,imageExtent:T}=_.get("ext"),f=t.id.split("_nestedSubNode")[0];((D=e.temp)==null?void 0:D[`${f}count`])===void 0&&(e.temp[`${f}count`]=b),e.temp[f]=setInterval(function(){e.temp[`${f}count`]=e.temp[`${f}count`]+1>4?0:e.temp[`${f}count`]+1;let w=new De({url:h[e.temp[`${f}count`]],projection:"EPSG:4326",imageExtent:T,interpolate:!0});_.setSource(w)},1e3)}["新竹縣原住民部落範圍","近年歷史災害82處部落點位","雨量站","工程鑽探","土石流潛勢溪流","落石分布"].includes(_.get("label"))&&(ne(s,_.label),re(t,_.get("label")))}d("add",s.getTarget(),t.id)}else{if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){const{id:g,nestedSubNodeIndex:W,nodeIndex:L,subNodeIndex:_}=t;let b=e.layers[L].group_layers[_];const h=y.getCesiumScene(),T=h.imageryLayers.length;for(let f=0;f<T;f++){let w=h.imageryLayers.get(f);const P=(F=(v=w==null?void 0:w.imageryProvider._resource)==null?void 0:v.queryParameters)==null?void 0:F.id,X=(q=m.getLayerIndex(P))==null?void 0:q.nodeIndex,xe=(se=m.getLayerIndex(P))==null?void 0:se.subNodeIndex;(b.title===P||L==X&&_==xe)&&h.imageryLayers.remove(w)}}else{let W=function(){const L=t.id.split("_nestedSubNode")[0];g.filter(b=>{var h;return(h=b==null?void 0:b.get("id"))==null?void 0:h.includes(L)}).forEach(b=>{s.removeLayer(b)})},g=i.getArray();if(W(),e.layers[t.nodeIndex].group_layers[t.subNodeIndex].layer_type==="WFS"&&(re(t),e.popup.popupId=0,e.popup.popupData="",e.popup.overlay&&(s.removeOverlay(e.popup.overlay),e.popup.overlay=null)),["雷達回波預測","累積雨量預測","氣溫預測"].includes(e.layers[t.nodeIndex].group_layers[t.subNodeIndex].title)){const L=t.id.split("_nestedSubNode")[0];clearInterval(e.temp[L]),delete e.temp[`${L}count`]}}d("delete",s.getTarget(),t.id)}break;case"selectLayerMode":if(e.selectLock)return;t.layerName==="all"?i.getArray().filter(L=>L.get("id")!==void 0).forEach(L=>{x({action:"layerMode",value:{checked:!1,...m.getLayerIndex(L.get("id"))}})}):x({action:"layerMode",value:{checked:!1,...m.getLayerIndex(t.id)}});break;case"changeOrder":if(e.selectLock)return;const{nodeIndex:Y,subNodeIndex:H,nestedSubNodeIndex:U}=m.getLayerIndex(t.id),ie=m.getLayer(e.layers[Y].group_layers[H],U,t.id);if(t.movement==="up"){if(t.key+1===i.getArray().length)return;const g={checked:!1,nodeIndex:Y,subNodeIndex:H,nestedSubNodeIndex:U,id:t.id};x({action:"layerMode",value:g}),i.insertAt(t.key+1,ie)}if(t.movement==="down"){if(t.key-1===0)return;const g={checked:!1,nodeIndex:Y,subNodeIndex:H,nestedSubNodeIndex:U,id:t.id};x({action:"layerMode",value:g}),i.insertAt(t.key-1,ie)}break;case"baseMap":e.temp[`map${e.targetNum}BaseStatus`]=t.baseId;const Se=new Me({preload:1/0,name:t.name,label:t.label,type:t.mapType,baseId:t.baseId,source:new ke({url:t.url}),crossOrigin:"anonymous"}),Ie=s==null?void 0:s.getLayers().getArray();i.insertAt(0,Se),Ie.forEach(g=>(g.get("type")==="base"&&g.get("baseId")!==t.baseId&&s.removeLayer(g),!0));break;case"setOpacity":E(t.key,t.value);break}k()}function k(){var n,t,s;if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){e.currentLayers=[];const i=y.getCesiumScene(),l=i.imageryLayers.length;for(let o=0;o<l;o++){let C=i.imageryLayers.get(o).imageryProvider;C instanceof Cesium.WebMapServiceImageryProvider&&e.currentLayers.push({label:(n=C._resource)==null?void 0:n.queryParameters.layers_name,id:(t=C._resource)==null?void 0:t.queryParameters.id,visible:1})}}else{const i=e.targetNum==1?e.map1:e.map2,l=(s=i==null?void 0:i.getLayers())==null?void 0:s.getArray();e.currentLayers=l==null?void 0:l.map(o=>({label:o.get("label"),id:o.get("id"),visible:o.getVisible()}))}}function Q(n){const t=e.targetNum===1?e.map1:e.map2,s=t==null?void 0:t.getLayers(),i=e.targetNum===1?"map1":"map2";if(e.dimensionMap[i]=n,n==="3D"){const o=s.getArray().find(p=>p.get("label").includes("近年歷史災害82處部落點位"));o&&e[`map${e.targetNum}`].removeLayer(o),V(!0),e[`${i}LayerStatus`].push("3D")}else V(!1),e[`${i}LayerStatus`]=e[`${i}LayerStatus`].filter(l=>l!=="3D"),e[`map${e.targetNum}LayerStatus`].forEach(l=>{const{nodeIndex:o,subNodeIndex:p,nestedSubNodeIndex:C}=m.getLayerIndex(l);return m.getLayer(e.layers[o].group_layers[p],C,n.id).get("label").includes("近年歷史災害82處部落點位")&&x({action:"layerMode",value:{checked:!0,nodeIndex:o,subNodeIndex:p,nestedSubNodeIndex:C,id:l}}),l})}function V(n){const t=e.targetNum===1?e.map1:e.map2;if(n){y=new K({map:t,time(){return Cesium.JulianDate.now()},sceneOptions:{mapProjection:new Cesium.WebMercatorProjection}}),y.setEnabled(!0);const s=y.getCesiumScene();s.terrainProvider=Cesium.createWorldTerrain({}),y.setEnabled(!0)}else y.setEnabled(!1)}function j(n){const t=e.targetNum===1?e.map1:e.map2,s=t==null?void 0:t.getLayers();if(e.selectLock)return;const i=!s.getArray()[n].getVisible();s.getArray()[n].setVisible(i),ae(()=>{k()})}function E(n,t){const s=e.targetNum===1?e.map1:e.map2;(s==null?void 0:s.getLayers()).getArray()[n].setOpacity(Number(t))}function z(n){var l;if(e.mapCount===n)return;const t=e.targetNum!==1?"map1":"map2";e.mapCount=n;const i=e[`${t}LayerStatus`].filter(o=>o!=="3D").map(o=>$.getLayerIndex(o));if(n===2&&(e[t]=new ee({target:t,layers:[Z.getBaseMapData(0),...i.map(o=>m.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:A,controls:[]}),((l=e[`${t}LayerStatus`])==null?void 0:l.indexOf("3D"))!==-1)){y=new K({map:e[t],time(){return Cesium.JulianDate.now()}}),y.setEnabled(!0);const o=y.getCesiumScene({});o.terrainProvider=Cesium.createWorldTerrain({})}if(n===1){e[t]=null;const o=document.getElementById(t);for(;o.firstChild;)o.removeChild(o.firstChild)}}function R(n){var s;e.targetNum=n;const t=e.targetNum!==1?"map1":"map2";if(e.mapCount===1){if(!e[`map${n}`]){let i=e[`map${n}LayerStatus`].filter(o=>o!=="3D");i.includes("node0_subNode4_nestedSubNodeundefined")&&(i=[...i.filter(p=>p!=="node0_subNode4_nestedSubNodeundefined"),"node0_subNode4_nestedSubNodeundefined"]);const l=i.map(o=>$.getLayerIndex(o));e[`map${n}`]=new ee({target:`map${n}`,layers:[Z.getBaseMapData(e.temp[`map${e.targetNum}BaseStatus`]),...l.map(o=>m.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:A,controls:[]}),ne(e[`map${n}`]),((s=e[`map${n}LayerStatus`])==null?void 0:s.indexOf("3D"))!==-1&&(y=new K({map:e[`map${n}`],time(){return Cesium.JulianDate.now()}}),y.setEnabled(!0))}if(e[t]){e[t]=null;const i=document.getElementById(t);for(;i.firstChild;)i.removeChild(i.firstChild)}}ae(()=>{k()})}function r(){e.conditionWrap=!e.conditionWrap}function d(n,t,s){if(n==="add")e[`${t}LayerStatus`].push(s);else if(n==="delete"){const i=e[`${t}LayerStatus`].findIndex(l=>l===s);e[`${t}LayerStatus`].splice(i,1)}else console.log("error")}function ne(n){var s;const t=new ve({layers:(s=n==null?void 0:n.getLayers())==null?void 0:s.getArray(),condition:We});n.addInteraction(t),t.on("select",i=>{const l=i.selected[0];if(l){e.popup.overlay=new Ae({element:e.popup.nodeRef,autoPan:!0,autoPanAnimation:{duration:250}}),e.popup.overlay.setPosition(i.mapBrowserEvent.coordinate),n.addOverlay(e.popup.overlay);const o=(l.getId()??l.getGeometryName()).split(".");if(e.popup.popupData=o[0],e.popup.coordinate=i.mapBrowserEvent.coordinate,o[0]==="新竹縣原住民部落範圍"){e.popup.popupId=l.get("編號");return}if(o[0]==="近年歷史災害82處部落點位"){e.popup.popupId=o[1];return}if(o[0]==="雨量站"){e.popup.popupId=l.get("Name");return}if(o[0]==="工程鑽探"){console.log("選到工程鑽探"),e.popup.popupId=l.get("name").split("_")[0];return}if(o[0]==="土石流潛勢溪流"){e.popup.popupId=l.get("ID"),e.popup.temp=l;return}o[0]==="落石分布"&&(e.popup.popupId=l.get("DATA_ID"),e.popup.temp=l)}else n.removeOverlay(e.popup.overlay),e.popup.overlay=null,e.popup={nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""}})}function he(){(e.targetNum===1?e.map1:e.map2).removeOverlay(e.popup.overlay),e.popup.overlay=null}function re(n,t){const{checked:s,id:i}=n;if(!s){e.selectLayerOption={};return}t==="新竹縣原住民部落範圍"&&te.ajax({url:"https://api.edtest.site/tribeQuery",method:"GET",success:l=>{e.tribeQuery=l},error:l=>{console.log(l)}})}function Ce(n){const t={action:"moveTo",value:{xAxis:n.WGS84.lng,yAxis:n.WGS84.lat}};O(t)}Ge(async()=>{const n=te.ajax({url:"https://api.edtest.site/underLayers",method:"GET"}).done(s=>s),t=te.ajax({url:"https://api.edtest.site/layers",method:"GET"}).done(s=>s);Promise.all([n,t]).then(s=>{let i=s[0].data.map((l,o)=>({mapType:"base",baseId:o,onCurrent:!1,...l}));Z.setBaseMapData(i),e.temp.map1BaseStatus=0,e.temp.baseMapList=Ne(),e.layers=s[1].map((l,o)=>(l.group_layers.forEach((p,C)=>{const D=C;let v;p.id=`node${o}_subNode${D}_nestedSubNode${v}`,p.single_tiles||p.tiles_list.forEach((F,q)=>{v=q,F.id=`node${o}_subNode${D}_nestedSubNode${v}`})}),{...l,value:o})),ae(()=>{G(),k()})}),e.comSize.wrapHeight=window.innerHeight,e.comSize.wrapWidth=window.innerWidth,a.dispatch("updateWindowWidth",window.innerWidth),window.onresize=s=>{e.comSize.wrapHeight=s.target.innerHeight,e.comSize.wrapWidth=s.target.innerWidth,a.dispatch("updateWindowWidth",window.innerWidth)}});function _e(){var n=new Cesium.WebMapServiceImageryProvider({url:"https://dwgis1.ncdr.nat.gov.tw/server/services/MAP0627/Map2022FloodingPoint1721/MapServer/WMSServer",layers:"0",parameters:{FORMAT:"image/png",VERSION:"1.1.1",TRANSPARENT:!0,STYLES:""}}),t=new Cesium.ImageryLayer(n,{show:!0});y.imageryLayers.addImageryProvider(t)}return{state:e,props:oe,store:a,mapControl:O,layerControl:x,onChangeLayerVisible:j,onChangeLayerOpacity:E,changeTarget:R,conditionWrap:r,closeAreaData:he,moveToMap:Ce,changeMapCount:z,onChangeDimensionMap:Q,show:_e}}},Ue={class:"w-100 d-flex justify-content-between flex-sm-row flex-wrap flex-sm-nowrap mapWrap",id:"mapWrap"},Xe={key:0,class:"middleLine"},Ke={class:"SearchBar d-block d-sm-block position-fixed w-100 w-sm-auto position-sm-absolute p-3 p-sm-0"},$e={class:"d-flex align-items-center justify-content-between justify-content-sm-start"},et=u("img",{src:Oe,alt:"",class:"logo col-5 col-sm-auto me-0 me-sm-5"},null,-1),tt={class:"conditionCom d-none d-sm-block position-absolute"},at={class:"mb-4"},ot={key:1,class:"mb-4"},nt={key:1},rt={class:"m-Navbar d-flex d-sm-none position-relative w-100"},st={class:"position-absolute bottom-100 w-100",style:{"max-height":"70vh","overflow-y":"scroll"}},it={key:0},lt={key:0,class:"lightWrap w-100 h-100 d-flex justify-content-center align-items-center"},dt={class:"p-4 rounded bg-white",style:{width:"250px"}},ct=u("p",{class:"text-center fw-bold"},"是否要取消全部圖層",-1),pt={class:"d-flex justify-content-around"};function mt(oe,c,m,a,e,y){var j,E,z,R;const A=be,G=Le,J=fe,O=ge,x=ye,k=ue,Q=me,V=pe;return S(),N("div",null,[u("div",Ue,[u("div",{id:"map1",class:de({"w-100":((j=a.state.map1)==null?void 0:j.getTarget())=="map1","h-100":a.state.mapCount===1,"h-50":a.state.mapCount===2&&a.state.comSize.wrapWidth<600,middleMap:(E=a.state.map1)==null?void 0:E.getTarget()})},null,2),a.state.mapCount===2?(S(),N("div",Xe)):I("",!0),u("div",{id:"map2",class:de({"w-100":((z=a.state.map2)==null?void 0:z.getTarget())==="map2","h-100":a.state.mapCount===1,"h-50":a.state.mapCount===2&&a.state.comSize.wrapWidth<600,middleMap:(R=a.state.map2)==null?void 0:R.getTarget()})},null,2)]),M(A,{class:"asideTool position-absolute top-50 translate-middle-y",id:"asideTool",onChangeTarget:r=>{a.changeTarget(r)},onOnMapControl:c[0]||(c[0]=({action:r,value:d})=>{a.mapControl({action:r,value:d})})},null,8,["onChangeTarget"]),u("div",Ke,[u("div",$e,[et,M(G,{class:"mapSourceOption col-5 col-sm-auto d-block d-sm-block",baseMapList:a.state.temp.baseMapList,onChangeBaseMaps:({action:r,value:d})=>{a.layerControl({action:r,value:d})}},null,8,["baseMapList","onChangeBaseMaps"])]),M(J,B({class:"mt-4 d-none d-sm-block"},{dimensionMapStatus:a.state.toSearchDimensionStatus,currentLayers:a.state.currentLayers,mapCount:a.state.mapCount,onChangeBaseMaps:({action:r,value:d})=>{a.layerControl({action:r,value:d})},onChangeMapCount:r=>{a.changeMapCount(r)}},{onChangeTarget:r=>{a.changeTarget(r)},onOnLayerControl:c[1]||(c[1]=({action:r,value:d})=>{a.layerControl({action:r,value:d})}),onConditionWrap:c[2]||(c[2]=r=>{a.conditionWrap(r)}),onChangeDimensionMap:r=>{a.onChangeDimensionMap(r)}}),null,16,["onChangeTarget","onChangeDimensionMap"])]),u("div",tt,[u("div",at,[a.state.conditionWrap?I("",!0):(S(),N("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:c[3]||(c[3]=r=>a.state.conditionWrap=!0)}," 圖層選項 ")),a.state.conditionWrap?(S(),N("div",ot,[M(O,B({tribeQuery:a.state.tribeQuery,mapLayers:a.state.mapLayers,currentLayers:a.state.currentLayers,onClose:()=>{a.state.conditionWrap=!1},showSelectLayerValue:r=>{a.state.selectValueTemp=r},moveToMap:r=>{a.moveToMap(r)}},{onOnLayerControl:c[4]||(c[4]=({action:r,value:d})=>{a.layerControl({action:r,value:d})})}),null,16)])):I("",!0),M(x,{text:"可選擇要加入的圖層",styles:"right: 105%;top: 0;text-align: right;"})]),u("div",null,[a.state.layerSelect?I("",!0):(S(),N("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:c[5]||(c[5]=r=>a.state.layerSelect=!0)}," 已選擇的圖層 ")),a.state.layerSelect?(S(),N("div",nt,[M(k,Je(Qe({selectLock:a.state.selectLock,currentLayers:a.state.currentLayers,onClose:()=>{a.state.layerSelect=!1},onLockLayer:()=>{a.state.selectLock=!a.state.selectLock},onDeleteLayer:({action:r,value:d})=>{d.layerName==="all"?a.state.deleteLightbox=!0:a.layerControl({action:r,value:d})},onLayerControl:({action:r,value:d})=>{a.layerControl({action:r,value:d})},onChangeLayerVisible:r=>{a.onChangeLayerVisible(r)},onChangeLayerOpacity:(r,d)=>{a.onChangeLayerOpacity(r,d)}})),null,16)])):I("",!0),M(x,{text:"顯示已經選擇的圖層",styles:"right: 105%;top: 0;text-align: right;"})])]),u("div",rt,[u("div",st,[a.state.conditionWrap?(S(),ce(O,B({key:0,class:"w-100"},{mapLayers:a.state.mapLayers,currentLayers:a.state.currentLayers,onClose:()=>{a.state.conditionWrap=!1},showSelectLayerValue:r=>{a.state.selectValueTemp=r}},{onOnLayerControl:c[6]||(c[6]=({action:r,value:d})=>{a.layerControl({action:r,value:d})})}),null,16)):I("",!0)]),a.state.layerSelect?(S(),N("div",it,[M(k,B({class:"position-absolute bottom-100 w-100"},{selectLock:a.state.selectLock,currentLayers:a.state.currentLayers,onClose:()=>{a.state.layerSelect=!1},onLockLayer:()=>{a.state.selectLock=!a.state.selectLock},onDeleteLayer:({action:r,value:d})=>{d.layerName=="all"?a.state.deleteLightbox=!0:a.layerControl({action:r,value:d})},onChangLayerVisible:r=>{a.layerControl(r)},onChangeOrderLayer:({action:r,value:d})=>{a.layerControl({action:r,value:d})},onLayerControl:({action:r,value:d})=>{a.layerControl({action:r,value:d})}}),null,16)])):I("",!0),M(Q,B({dimensionMapStatus:a.state.toSearchDimensionStatus,currentLayers:a.state.currentLayers,mapCount:a.state.mapCount,openConditionWrap:()=>{a.state.conditionWrap=!a.state.conditionWrap,a.state.layerSelect=!1},openLayerSelect:()=>{a.state.layerSelect=!a.state.layerSelect,a.state.conditionWrap=!1},onLayerControl:({action:r,value:d})=>{a.layerControl({action:r,value:d})},onChangeMapCount:r=>{a.changeMapCount(r)},onChangeTarget:r=>{a.changeTarget(r)}},{onChangeDimensionMap:r=>{a.onChangeDimensionMap(r)},onConditionWrap:c[7]||(c[7]=r=>{a.conditionWrap(r)})}),null,16,["onChangeDimensionMap"])]),a.state.deleteLightbox?(S(),N("div",lt,[u("div",dt,[ct,u("div",pt,[u("button",{class:"rounded px-3 py-1 bg-steel text-white border-0",onClick:c[8]||(c[8]=()=>{a.layerControl({action:"selectLayerMode",value:{layerName:"all"}}),a.state.deleteLightbox=!1})},"確定 "),u("button",{class:"rounded px-3 py-1 bg-secondary bg-gradient text-white border-0",onClick:c[9]||(c[9]=()=>{a.state.deleteLightbox=!1})},"取消 ")])])])):I("",!0),u("div",{id:"popup",class:"popup position-absolute bottom-0",ref:r=>{a.state.popup.nodeRef=r}},[a.state.popup.popupId!==0?(S(),ce(V,{key:0,class:"areaData",closeAreaData:()=>{a.closeAreaData()},popup:a.state.popup,maxHeight:500},null,8,["closeAreaData","popup"])):I("",!0)],512),a.store.state.isInit?(S(),N("div",{key:1,class:"stepOverLayer position-absolute top-0 start-0 w-100 h-100 bg-black opacity-50",id:"firstEnter",onClick:c[10]||(c[10]=()=>{a.store.dispatch("updateLayerStatus",!1)})})):I("",!0)])}const ft=qe(He,[["render",mt]]);export{ft as default};
//# sourceMappingURL=WebMap-b8116152.js.map
