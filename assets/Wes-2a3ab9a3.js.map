{"version":3,"file":"Wes-2a3ab9a3.js","sources":["../../node_modules/ol-ext/util/input/Base.js","../../node_modules/ol-ext/util/input/Checkbox.js","../../node_modules/ol-ext/util/input/Switch.js","../../node_modules/ol-ext/util/input/Radio.js","../../node_modules/ol-ext/util/element.js","../../node_modules/ol-ext/util/matrix3D.js","../../node_modules/ol-ext/map/PerspectiveMap.js","../../src/view/Wes.vue"],"sourcesContent":["/** Vanilla JS geographic inputs\r\n * color, size, width, font, symboles, dash, arrow, pattern\r\n */\r\nimport ol_Object from 'ol/Object.js'\r\n\r\n/** @namespace  ol.ext.input\r\n */\r\n/*global ol*/\r\nif (window.ol && ol.ext && !ol.ext.input) {\r\n  ol.ext.input = {};\r\n}\r\n\r\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \r\n * @constructor\r\n * @extends {ol_Object}\r\n * @param {*} options\r\n *  @param {Element} [options.input] input element, if none create one\r\n *  @param {string} [options.type] input type, if no input\r\n *  @param {number} [options.min] input min, if no input\r\n *  @param {number} [options.max] input max, if no input\r\n *  @param {number} [options.step] input step, if no input\r\n *  @param {string|number} [options.val] input value\r\n *  @param {boolean} [options.checked] check input\r\n *  @param {boolean} [options.hidden] the input is display:none\r\n *  @param {boolean} [options.disabled] disable input\r\n *  @param {Element} [options.parent] parent element, if no input\r\n */\r\nvar ol_ext_input_Base = class olextinputBase extends ol_Object {\r\n  constructor(options) {\r\n    options = options || {};\r\n    super();\r\n\r\n    var input = this.input = options.input;\r\n    if (!input) {\r\n      input = this.input = document.createElement('INPUT');\r\n      if (options.type)\r\n        input.setAttribute('type', options.type);\r\n      if (options.min !== undefined)\r\n        input.setAttribute('min', options.min);\r\n      if (options.max !== undefined)\r\n        input.setAttribute('max', options.max);\r\n      if (options.step !== undefined)\r\n        input.setAttribute('step', options.step);\r\n      if (options.parent)\r\n        options.parent.appendChild(input);\r\n    }\r\n    if (options.disabled)\r\n      input.disabled = true;\r\n    if (options.checked !== undefined)\r\n      input.checked = !!options.checked;\r\n    if (options.val !== undefined)\r\n      input.value = options.val;\r\n    if (options.hidden)\r\n      input.style.display = 'none';\r\n    input.addEventListener('focus', function () {\r\n      if (this.element)\r\n        this.element.classList.add('ol-focus');\r\n    }.bind(this));\r\n    var tout;\r\n    input.addEventListener('focusout', function () {\r\n      if (this.element) {\r\n        if (tout)\r\n          clearTimeout(tout);\r\n        tout = setTimeout(function () {\r\n          this.element.classList.remove('ol-focus');\r\n        }.bind(this), 0);\r\n      }\r\n    }.bind(this));\r\n  }\r\n  /** Listen to drag event\r\n   * @param {Element} elt\r\n   * @param {function} cback when draggin on the element\r\n   * @private\r\n   */\r\n  _listenDrag(elt, cback) {\r\n    var handle = function (e) {\r\n      this.moving = true;\r\n      this.element.classList.add('ol-moving');\r\n      var listen = function (e) {\r\n        if (e.type === 'pointerup') {\r\n          document.removeEventListener('pointermove', listen);\r\n          document.removeEventListener('pointerup', listen);\r\n          document.removeEventListener('pointercancel', listen);\r\n          setTimeout(function () {\r\n            this.moving = false;\r\n            this.element.classList.remove('ol-moving');\r\n          }.bind(this));\r\n        }\r\n        if (e.target === elt)\r\n          cback(e);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }.bind(this);\r\n      document.addEventListener('pointermove', listen, false);\r\n      document.addEventListener('pointerup', listen, false);\r\n      document.addEventListener('pointercancel', listen, false);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }.bind(this);\r\n    elt.addEventListener('mousedown', handle, false);\r\n    elt.addEventListener('touchstart', handle, false);\r\n  }\r\n  /** Set the current value\r\n   */\r\n  setValue(v) {\r\n    if (v !== undefined)\r\n      this.input.value = v;\r\n    this.input.dispatchEvent(new Event('change'));\r\n  }\r\n  /** Get the current getValue\r\n   * @returns {string}\r\n   */\r\n  getValue() {\r\n    return this.input.value;\r\n  }\r\n  /** Get the input element\r\n   * @returns {Element}\r\n   */\r\n  getInputElement() {\r\n    return this.input;\r\n  }\r\n}\r\n\r\nexport default ol_ext_input_Base\r\n","import ol_ext_input_Base from './Base.js'\r\n\r\n/** Checkbox input\r\n * @constructor\r\n * @extends {ol_ext_input_Base}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element|string} [options.html] label content\r\n *  @param {string} [options.after] label garnish (placed after)\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n *  @param {boolean} [options.autoClose=true]\r\n *  @param {boolean} [options.visible=false] display the input\r\n */\r\nvar ol_ext_input_Checkbox = class olextinputCheckbox extends ol_ext_input_Base {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    var label = this.element = document.createElement('LABEL');\r\n    if (options.html instanceof Element)\r\n      label.appendChild(options.html);\r\n    else if (options.html !== undefined)\r\n      label.innerHTML = options.html;\r\n    label.className = ('ol-ext-check ol-ext-checkbox ' + (options.className || '')).trim();\r\n\r\n    if (this.input.parentNode)\r\n      this.input.parentNode.insertBefore(label, this.input);\r\n    label.appendChild(this.input);\r\n    label.appendChild(document.createElement('SPAN'));\r\n    if (options.after) {\r\n      label.appendChild(document.createTextNode(options.after));\r\n    }\r\n\r\n    // Handle change\r\n    this.input.addEventListener('change', function () {\r\n      this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\r\n    }.bind(this));\r\n\r\n  }\r\n  isChecked() {\r\n    return this.input.checked;\r\n  }\r\n}\r\n\r\nexport default ol_ext_input_Checkbox\r\n","import ol_ext_input_Checkbox from './Checkbox.js'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Switch = class olextinputSwitch extends ol_ext_input_Checkbox {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\r\n  }\r\n};\r\n  \r\nexport default ol_ext_input_Switch\r\n","import ol_ext_input_Checkbox from './Checkbox.js'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Radio = class olextinputRadio extends ol_ext_input_Checkbox {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.element.className = ('ol-ext-check ol-ext-radio ' + (options.className || '')).trim();\r\n  }\r\n}\r\n  \r\nexport default ol_ext_input_Radio\r\n","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\nimport ol_ext_input_Checkbox from './input/Checkbox.js'\r\nimport ol_ext_input_Switch from './input/Switch.js'\r\nimport ol_ext_input_Radio from './input/Radio.js'\r\n\r\n/** @namespace ol.ext.element */\r\nvar ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} [options.html] Content of the element (if text is not set)\r\n *  @param {string} [options.text] Text content (if html is not set)\r\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName);\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'text': {\r\n          elt.innerText = options.text;\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'options': {\r\n          if (/select/i.test(tagName)) {\r\n            for (var i in options.options) {\r\n              ol_ext_element.create('OPTION', {\r\n                html: i,\r\n                value: options.options[i],\r\n                parent: elt          \r\n              })\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'style': {\r\n          ol_ext_element.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    on: options.on,\r\n    click: options.click,\r\n    change: options.change,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  new ol_ext_input_Switch(opt);\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  if (options.type === 'radio') {\r\n    new ol_ext_input_Radio(opt);\r\n  } else {\r\n    new ol_ext_input_Checkbox(opt);\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Get element offset \r\n * @param {ELement} elt\r\n * @returns {Object} top/left offset\r\n */\r\nol_ext_element.getFixedOffset = function(elt) {\r\n  var offset = {\r\n    left:0,\r\n    top:0\r\n  };\r\n  var getOffset = function(parent) {\r\n    if (!parent) return offset;\r\n    // Check position when transform\r\n    if (ol_ext_element.getStyle(parent, 'position') === 'absolute'\r\n      && ol_ext_element.getStyle(parent, 'transform') !== \"none\") {\r\n      var r = parent.getBoundingClientRect();\r\n      offset.left += r.left; \r\n      offset.top += r.top; \r\n      return offset;\r\n    }\r\n    return getOffset(parent.offsetParent)\r\n  }\r\n  return getOffset(elt.offsetParent)\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @param {boolean} fixed get fixed position\r\n * @return {Object} \r\n */\r\nol_ext_element.positionRect = function(elt, fixed) {\r\n  var gleft = 0;\r\n  var gtop = 0;\r\n\r\n  var getRect = function( parent ) {\r\n    if (parent) {\r\n      gleft += parent.offsetLeft;\r\n      gtop += parent.offsetTop;\r\n      return getRect(parent.offsetParent);\r\n    } else {\r\n      var r = {\r\n        top: elt.offsetTop + gtop,\r\n        left: elt.offsetLeft + gleft\r\n      };\r\n      if (fixed) {\r\n        r.top -= (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        r.left -= (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0);\r\n      }\r\n      r.bottom = r.top + elt.offsetHeight;\r\n      r.right = r.top + elt.offsetWidth;\r\n      return r;\r\n    }\r\n  }; \r\n  return getRect(elt.offsetParent);\r\n}\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} [options.onmove] a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n *  @param {boolean} [options.mousewheel=false] enable mousewheel to scroll\r\n *  @param {boolean} [options.minibar=false] add a mini scrollbar to the parent element (only vertical scrolling)\r\n * @returns {Object} an object with a refresh function\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  options = options || {};\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  //var page = options.vertical ? 'pageY' : 'pageX';\r\n  var page = options.vertical ? 'screenY' : 'screenX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n  // Factor scale content / container\r\n  var scale, isbar;\r\n\r\n  // Update the minibar\r\n  var updateCounter = 0;\r\n  var updateMinibar = function() {\r\n    if (scrollbar) {\r\n      updateCounter++;\r\n      setTimeout(updateMinibarDelay);\r\n    }\r\n  }\r\n  var updateMinibarDelay = function() {\r\n    if (scrollbar) {\r\n      updateCounter--;\r\n      // Prevent multi call\r\n      if (updateCounter) return;\r\n      // Container height\r\n      var pheight = elt.clientHeight;\r\n      // Content height\r\n      var height = elt.scrollHeight;\r\n      // Set scrollbar value\r\n      scale = pheight / height;\r\n      scrollbar.style.height = scale * 100 + '%';\r\n      scrollbar.style.top = (elt.scrollTop / height * 100) + '%';\r\n      scrollContainer.style.height = pheight + 'px';\r\n      // No scroll\r\n      if (pheight > height - .5) scrollContainer.classList.add('ol-100pc');\r\n      else scrollContainer.classList.remove('ol-100pc');\r\n    }\r\n  }\r\n  \r\n  // Handle pointer down\r\n  var onPointerDown = function(e) {\r\n    // Prevent scroll\r\n    if (e.target.classList.contains('ol-noscroll')) return;\r\n    // Start scrolling\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n    // Prevent elt dragging\r\n    e.preventDefault();\r\n    // Listen scroll\r\n    window.addEventListener('pointermove', onPointerMove);\r\n    ol_ext_element.addListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  }\r\n\r\n  // Register scroll\r\n  var onPointerMove = function(e) {\r\n    if (pos !== false) {\r\n      var delta = (isbar ? -1/scale : 1) * (pos - e[page]);\r\n      moving = moving || Math.round(delta)\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    } else {\r\n      moving = true;\r\n    }\r\n  };\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n  \r\n  // Initialize scroll container for minibar\r\n  var scrollContainer, scrollbar;\r\n  if (options.vertical && options.minibar) {\r\n    var init = function(b) {\r\n      // only once\r\n      elt.removeEventListener('pointermove', init);\r\n      elt.parentNode.classList.add('ol-miniscroll');\r\n      scrollbar = ol_ext_element.create('DIV');\r\n      scrollContainer = ol_ext_element.create('DIV', {\r\n        className: 'ol-scroll',\r\n        html: scrollbar\r\n      });\r\n      elt.parentNode.insertBefore(scrollContainer, elt);\r\n      // Move scrollbar\r\n      scrollbar.addEventListener('pointerdown', function(e) {\r\n        isbar = true;\r\n        onPointerDown(e)\r\n      });\r\n      // Handle mousewheel\r\n      if (options.mousewheel) {\r\n        ol_ext_element.addListener(scrollContainer, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n        ol_ext_element.addListener(scrollbar, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n      }\r\n      // Update on enter\r\n      elt.parentNode.addEventListener('pointerenter', updateMinibar);\r\n      // Update on resize\r\n      window.addEventListener('resize', updateMinibar);\r\n      // Update\r\n      if (b!==false) updateMinibar();\r\n    };\r\n    // Allready inserted in the DOM\r\n    if (elt.parentNode) init(false);\r\n    // or wait when ready\r\n    else elt.addEventListener('pointermove', init);\r\n    // Update on scroll\r\n    elt.addEventListener('scroll', function() {\r\n      updateMinibar();\r\n    });\r\n  }\r\n\r\n  // Enable scroll\r\n  elt.style['touch-action'] = 'none';\r\n  elt.style['overflow'] = 'hidden';\r\n  elt.classList.add('ol-scrolldiv');\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    isbar = false;\r\n    onPointerDown(e)\r\n  });\r\n\r\n  // Prevet click when moving...\r\n  elt.addEventListener('click', function(e) {\r\n    if (elt.classList.contains('ol-move')) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }, true);\r\n\r\n  // Stop scrolling\r\n  var onPointerUp = function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100 || isbar) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n    // Add class to handle click (on iframe / double-click)\r\n    if (!elt.classList.contains('ol-move')) {\r\n      elt.classList.add('ol-hasClick')\r\n      setTimeout(function() { elt.classList.remove('ol-hasClick'); }, 500);\r\n    } else {\r\n      elt.classList.remove('ol-hasClick');\r\n    }\r\n    isbar = false;\r\n    window.removeEventListener('pointermove', onPointerMove)\r\n    ol_ext_element.removeListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  };\r\n\r\n  // Handle mousewheel\r\n  var onMouseWheel = function(e) {\r\n    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n    elt.classList.add('ol-move');\r\n    elt[scroll] -= delta*30;\r\n    elt.classList.remove('ol-move');\r\n    return false;\r\n  }\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      onMouseWheel\r\n    );\r\n  }\r\n\r\n  return { \r\n    refresh: updateMinibar\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n */\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\nexport default ol_ext_element\r\n","/* See \r\nhttps://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web\r\nhttps://evanw.github.io/lightgl.js/docs/matrix.html \r\nhttps://github.com/jlmakes/rematrix\r\nhttps://jsfiddle.net/2znLxda2/\r\n*/\r\n/** Matrix3D; a set of functions to handle matrix3D\r\n */\r\nvar ol_matrix3D = {};\r\n\r\n/** Get transform matrix3D of an element\r\n * @param {Element} ele\r\n * @return {Array<Array<number>>}\r\n */\r\nol_matrix3D.getTransform = function(ele) {\r\n  var style = window.getComputedStyle(ele, null);\r\n  \r\n  var tr = style.getPropertyValue(\"-webkit-transform\") \r\n    || style.getPropertyValue(\"-moz-transform\") \r\n    || style.getPropertyValue(\"-ms-transform\") \r\n    || style.getPropertyValue(\"-o-transform\") \r\n    || style.getPropertyValue(\"transform\");\r\n    \r\n  var values = tr.split('(')[1].split(')')[0].split(',');\r\n\r\n  var mx = [ [1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1] ];    \r\n  var i, j;\r\n  if (values.length === 16) {\r\n    for (i = 0; i < 4; ++i) {\r\n      for (j = 0; j < 4; ++j) {\r\n        mx[j][i] = +values[i * 4 + j];\r\n      }\r\n    }\r\n  } else {\r\n    for (i = 0; i < 3; ++i) {\r\n      for (j = 0; j < 2; ++j) {\r\n        mx[j][i] = +values[i * 2 + j];\r\n      }\r\n    }\r\n  }\r\n  \r\n  return mx;\r\n};\r\n\r\n/** Get transform matrix3D of an element\r\n * @param {Element} ele\r\n * @return {Array<number>}\r\n */\r\nol_matrix3D.getTransformOrigin = function (ele) {\r\n  var style = window.getComputedStyle(ele, null);\r\n    \r\n  var tr = style.getPropertyValue(\"-webkit-transform-origin\") \r\n    || style.getPropertyValue(\"-moz-transform-origin\") \r\n    || style.getPropertyValue(\"-ms-transform-origin\") \r\n    || style.getPropertyValue(\"-o-transform-origin\") \r\n    || style.getPropertyValue(\"transform-origin\");\r\n  \r\n  var values = tr.split(' ');\r\n  \r\n  var mx = [ 0, 0, 0, 1 ];\r\n  for (var i = 0; i < values.length; ++i) {\r\n    mx[i] = parseInt(values[i]);\r\n  }\r\n  return mx;\r\n};\r\n\r\n/** Compute translate matrix\r\n * @param {number} x\r\n * @param {number} y\r\n * @param {number} z\r\n * @return {Array<Array<number>>}\r\n */\r\nol_matrix3D.translateMatrix = function(x, y, z) {\r\n  return [\r\n    [1, 0, 0, x],\r\n    [0, 1, 0, y],\r\n    [0, 0, 1, z],\r\n    [0, 0, 0, 1]\r\n  ];\r\n};\r\n\r\n/** Identity matrix\r\n * @return {Array<Array<number>>}\r\n */\r\nol_matrix3D.identity = function() {\r\n  return [\r\n    [1, 0, 0, 0],\r\n    [0, 1, 0, 0],\r\n    [0, 0, 1, 0],\r\n    [0, 0, 0, 1]\r\n  ];\r\n};\r\n\r\n/** Round matrix\r\n * @param {Array<Array<number>>} mx\r\n * @param {number} round Rounding value, default 1E-10\r\n */\r\nol_matrix3D.roundTo = function(mx, round) {\r\n  if (!round) round = 1E-10;\r\n  var m = [[],[],[],[]];\r\n  for (var i=0; i<4; i++) {\r\n    for (var j=0; j<4; j++) {\r\n      m[i][j] = Math.round(mx[i][j] / round) * round;\r\n    }\r\n  }\r\n  return m;\r\n};\r\n\r\n/** Multiply matrix3D \r\n * @param {Array<Array<number>>} mx1\r\n * @param {Array<Array<number>>} mx2\r\n * @return {Array<Array<number>>} \r\n */\r\nol_matrix3D.multiply = function (mx1, mx2) {\r\n  var mx = [ [], [], [], [] ];\r\n  \r\n  for (var i = 0; i < 4; ++i) {\r\n    for (var j = 0; j < 4; ++j) {\r\n      var sum = 0;\r\n      for (var k = 0; k < 4; ++k) {\r\n          sum += (mx1[k][i] * mx2[j][k]);\r\n      }\r\n      mx[j][i] = sum;\r\n    }\r\n  }\r\n  \r\n  return mx;\r\n};\r\n\r\n/** Compute the full transform that is applied to the transformed parent: -origin o tx o origin\r\n * @param {Array<Array<number>>} tx transform matrix\r\n * @param {Array<Array<number>>} origin transform origin\r\n * @return {Array<Array<number>>} \r\n */\r\nol_matrix3D.computeTransformMatrix = function(tx, origin) {\r\n  var preTx = ol_matrix3D.translateMatrix(-origin[0], -origin[1], -origin[2]);\r\n  var postTx = ol_matrix3D.translateMatrix(origin[0], origin[1], origin[2]);\r\n  \r\n  var temp1 = ol_matrix3D.multiply(preTx, tx);\r\n  \r\n  return ol_matrix3D.multiply(temp1, postTx);\r\n};\r\n\r\n/** Apply transform to a coordinate\r\n * @param {Array<Array<number>>} tx\r\n * @param {ol.pixel} px\r\n */\r\nol_matrix3D.transformVertex = function(tx, px) {\r\n  var vert = [px[0], px[1], 0, 1]\r\n  var mx = [ ];\r\n    \r\n  for (var i = 0; i < 4; ++i) {\r\n    mx[i] = 0;\r\n    for (var j = 0; j < 4; ++j) {\r\n      mx[i] += +tx[i][j] * vert[j];\r\n    }\r\n  }\r\n  \r\n  return mx;\r\n}\r\n\r\n/** Perform the homogeneous divide to apply perspective to the points (divide x,y,z by the w component).\r\n * @param {Array<number>} vert\r\n * @return {Array<number>}\r\n */\r\nol_matrix3D.projectVertex = function(vert) {\r\n  var out = [ ];\r\n  \r\n  for (var i = 0; i < 4; ++i) {\r\n    out[i] = vert[i] / vert[3];\r\n  }\r\n  \r\n  return out;\r\n};\r\n\r\n/** Inverse a matrix3D \r\n * @return {Array<Array<number>>} m matrix to transform\r\n * @return {Array<Array<number>>}\r\n */\r\nol_matrix3D.inverse = function(m) {\r\n  var s0 = m[0][0] * m[1][1] - m[1][0] * m[0][1]\r\n  var s1 = m[0][0] * m[1][2] - m[1][0] * m[0][2]\r\n  var s2 = m[0][0] * m[1][3] - m[1][0] * m[0][3]\r\n  var s3 = m[0][1] * m[1][2] - m[1][1] * m[0][2]\r\n  var s4 = m[0][1] * m[1][3] - m[1][1] * m[0][3]\r\n  var s5 = m[0][2] * m[1][3] - m[1][2] * m[0][3]\r\n\r\n  var c5 = m[2][2] * m[3][3] - m[3][2] * m[2][3]\r\n  var c4 = m[2][1] * m[3][3] - m[3][1] * m[2][3]\r\n  var c3 = m[2][1] * m[3][2] - m[3][1] * m[2][2]\r\n  var c2 = m[2][0] * m[3][3] - m[3][0] * m[2][3]\r\n  var c1 = m[2][0] * m[3][2] - m[3][0] * m[2][2]\r\n  var c0 = m[2][0] * m[3][1] - m[3][0] * m[2][1]\r\n\r\n  var determinant = 1 / (s0 * c5 - s1 * c4 + s2 * c3 + s3 * c2 - s4 * c1 + s5 * c0)\r\n\r\n  if (isNaN(determinant) || determinant === Infinity) {\r\n    throw new Error('Inverse determinant attempted to divide by zero.')\r\n  }\r\n\r\n  return [\r\n    [\r\n      (m[1][1] * c5 - m[1][2] * c4 + m[1][3] * c3) * determinant,\r\n      (-m[0][1] * c5 + m[0][2] * c4 - m[0][3] * c3) * determinant,\r\n      (m[3][1] * s5 - m[3][2] * s4 + m[3][3] * s3) * determinant,\r\n      (-m[2][1] * s5 + m[2][2] * s4 - m[2][3] * s3) * determinant\r\n    ],[\r\n      (-m[1][0] * c5 + m[1][2] * c2 - m[1][3] * c1) * determinant,\r\n      (m[0][0] * c5 - m[0][2] * c2 + m[0][3] * c1) * determinant,\r\n      (-m[3][0] * s5 + m[3][2] * s2 - m[3][3] * s1) * determinant,\r\n      (m[2][0] * s5 - m[2][2] * s2 + m[2][3] * s1) * determinant\r\n    ],[\r\n      (m[1][0] * c4 - m[1][1] * c2 + m[1][3] * c0) * determinant,\r\n      (-m[0][0] * c4 + m[0][1] * c2 - m[0][3] * c0) * determinant,\r\n      (m[3][0] * s4 - m[3][1] * s2 + m[3][3] * s0) * determinant,\r\n      (-m[2][0] * s4 + m[2][1] * s2 - m[2][3] * s0) * determinant\r\n    ],[\r\n      (-m[1][0] * c3 + m[1][1] * c1 - m[1][2] * c0) * determinant,\r\n      (m[0][0] * c3 - m[0][1] * c1 + m[0][2] * c0) * determinant,\r\n      (-m[3][0] * s3 + m[3][1] * s1 - m[3][2] * s0) * determinant,\r\n      (m[2][0] * s3 - m[2][1] * s1 + m[2][2] * s0) * determinant\r\n    ]\r\n  ]\r\n};\r\n\r\nexport default ol_matrix3D\r\n","/*\tCopyright (c) 2019 Jean-Marc VIGLINO,\r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport ol_Map from 'ol/Map.js'\r\nimport ol_ext_element from '../util/element.js';\r\nimport ol_Overlay from 'ol/Overlay.js'\r\nimport { inAndOut as ol_easing_inAndOut } from 'ol/easing.js'\r\nimport ol_matrix3D from '../util/matrix3D.js'\r\nimport { altKeyOnly as ol_events_condition_altKeyOnly } from 'ol/events/condition.js'\r\n\r\n/** A map with a perspective\r\n * @constructor \r\n * @extends {ol.Map}\r\n * @fires change:perspective\r\n * @param {olx.MapOptions=} options \r\n *  @param {ol.events.condition} tiltCondition , default altKeyOnly\r\n */\r\nvar ol_PerspectiveMap = class olPerspectiveMap extends ol_Map {\r\n  constructor(options) {\r\n\r\n    // Map div\r\n    var divMap = options.target instanceof Element ? options.target : document.getElementById(options.target);\r\n    if (window.getComputedStyle(divMap).position !== 'absolute') {\r\n      divMap.style.position = 'relative';\r\n    }\r\n    divMap.style.overflow = 'hidden';\r\n\r\n    // Create map inside\r\n    var map = ol_ext_element.create('DIV', {\r\n      className: 'ol-perspective-map',\r\n      parent: divMap\r\n    });\r\n    var opts = {};\r\n    Object.assign(opts, options);\r\n    opts.target = map;\r\n    // enhance pixel ratio\r\n    //opts.pixelRatio = 2;\r\n    super(opts);\r\n\r\n    this._tiltCondition = options.tiltCondition || ol_events_condition_altKeyOnly;\r\n\r\n  }\r\n  /** Get pixel ratio for the map\r\n   */\r\n  getPixelRatio() {\r\n    return window.devicePixelRatio;\r\n  }\r\n  /** Set perspective angle\r\n   * @param {number} angle the perspective angle 0 (vertical) - 30 (max), default 0\r\n   * @param {*} options\r\n   *  @param {number} options.duration The duration of the animation in milliseconds, default 500\r\n   *  @param {function} options.easing The easing function used during the animation, defaults to ol.easing.inAndOut).\r\n   */\r\n  setPerspective(angle, options) {\r\n    options = options || {};\r\n    // max angle\r\n    if (angle > 30)\r\n      angle = 30;\r\n    else if (angle < 0)\r\n      angle = 0;\r\n    var fromAngle = this._angle || 0;\r\n    var toAngle = Math.round(angle * 10) / 10;\r\n    var style = this.getTarget().querySelector('.ol-layers').style;\r\n    cancelAnimationFrame(this._animatedPerspective);\r\n    requestAnimationFrame(function (t) {\r\n      this._animatePerpective(t, t, style, fromAngle, toAngle, options.duration, options.easing || ol_easing_inAndOut);\r\n    }.bind(this));\r\n  }\r\n  /** Animate the perspective\r\n   * @param {number} t0 starting timestamp\r\n   * @param {number} t current timestamp\r\n   * @param {CSSStyleDeclaration} style style to modify\r\n   * @param {number} fromAngle starting angle\r\n   * @param {number} toAngle ending angle\r\n   * @param {number} duration The duration of the animation in milliseconds, default 500\r\n   * @param {function} easing The easing function used during the animation, defaults to ol.easing.inAndOut).\r\n   * @private\r\n   */\r\n  _animatePerpective(t0, t, style, fromAngle, toAngle, duration, easing) {\r\n    var dt, end;\r\n    if (duration === 0) {\r\n      dt = 1;\r\n      end = true;\r\n    } else {\r\n      dt = (t - t0) / (duration || 500);\r\n      end = (dt >= 1);\r\n    }\r\n    dt = easing(dt);\r\n    var angle;\r\n    if (end) {\r\n      angle = this._angle = toAngle;\r\n    } else {\r\n      angle = this._angle = fromAngle + (toAngle - fromAngle) * dt;\r\n    }\r\n    var fac = angle / 30;\r\n    // apply transform to the style\r\n    style.transform = 'translateY(-' + (17 * fac) + '%) perspective(200px) rotateX(' + angle + 'deg) scaleY(' + (1 - fac / 2) + ')';\r\n    this.getMatrix3D(true);\r\n    this.render();\r\n    if (!end) {\r\n      requestAnimationFrame(function (t) {\r\n        this._animatePerpective(t0, t, style, fromAngle, toAngle, duration || 500, easing || ol_easing_inAndOut);\r\n      }.bind(this));\r\n    }\r\n    // Dispatch event\r\n    this.dispatchEvent({\r\n      type: 'change:perspective',\r\n      angle: angle,\r\n      animating: !end\r\n    });\r\n  }\r\n  /** Convert to pixel coord according to the perspective\r\n   * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\r\n   */\r\n  handleMapBrowserEvent(e) {\r\n    e.pixel = [\r\n      e.originalEvent.offsetX / this.getPixelRatio(),\r\n      e.originalEvent.offsetY / this.getPixelRatio()\r\n    ];\r\n    e.coordinate = this.getCoordinateFromPixel(e.pixel);\r\n    ol_Map.prototype.handleMapBrowserEvent.call(this, e);\r\n\r\n    // Change perspective on tilt condition\r\n    if (this._tiltCondition(e)) {\r\n      switch (e.type) {\r\n        case 'pointerdown': {\r\n          this._dragging = e.originalEvent.offsetY;\r\n          break;\r\n        }\r\n        case 'pointerup': {\r\n          this._dragging = false;\r\n          break;\r\n        }\r\n        case 'pointerdrag': {\r\n          if (this._dragging !== false) {\r\n            var angle = e.originalEvent.offsetY > this._dragging ? .5 : -.5;\r\n            if (angle) {\r\n              this.setPerspective((this._angle || 0) + angle, { duration: 0 });\r\n            }\r\n            this._dragging = e.originalEvent.offsetY;\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      this._dragging = false;\r\n    }\r\n\r\n  }\r\n  /** Get map full teansform matrix3D\r\n   * @return {Array<Array<number>>}\r\n   */\r\n  getMatrix3D(compute) {\r\n    if (compute) {\r\n      var ele = this.getTarget().querySelector('.ol-layers');\r\n\r\n      // Get transform matrix3D from CSS\r\n      var tx = ol_matrix3D.getTransform(ele);\r\n\r\n      // Get the CSS transform origin from the transformed parent - default is '50% 50%'\r\n      var txOrigin = ol_matrix3D.getTransformOrigin(ele);\r\n\r\n      // Compute the full transform that is applied to the transformed parent (-origin * tx * origin)\r\n      this._matrixTransform = ol_matrix3D.computeTransformMatrix(tx, txOrigin);\r\n    }\r\n    if (!this._matrixTransform)\r\n      this._matrixTransform = ol_matrix3D.identity();\r\n    return this._matrixTransform;\r\n  }\r\n  /** Get pixel at screen from coordinate.\r\n   * The default getPixelFromCoordinate get pixel in the perspective.\r\n   * @param {ol.coordinate} coord\r\n   * @param {ol.pixel}\r\n   */\r\n  getPixelScreenFromCoordinate(coord) {\r\n    // Get pixel in the transform system\r\n    var px = this.getPixelFromCoordinate(coord);\r\n\r\n    // Get transform matrix3D from CSS\r\n    var fullTx = this.getMatrix3D();\r\n\r\n    // Transform the point using full transform\r\n    var pixel = ol_matrix3D.transformVertex(fullTx, px);\r\n    // Perform the homogeneous divide to apply perspective to the points (divide x,y,z by the w component).\r\n    pixel = ol_matrix3D.projectVertex(pixel);\r\n\r\n    return [pixel[0], pixel[1]];\r\n  }\r\n  /** Not working...\r\n   *\r\n   */\r\n  getPixelFromPixelScreen(px) {\r\n    // Get transform matrix3D from CSS\r\n    var fullTx = ol_matrix3D.inverse(this.getMatrix3D());\r\n\r\n    // Transform the point using full transform\r\n    var pixel = ol_matrix3D.transformVertex(fullTx, px);\r\n    // Perform the homogeneous divide to apply perspective to the points (divide x,y,z by the w component).\r\n    pixel = ol_matrix3D.projectVertex(pixel);\r\n\r\n    return [pixel[0], pixel[1]];\r\n  }\r\n}\r\n\r\n/* HACK: Overwrited Overlay function to handle overlay positing in a perspective map */\r\n;(function() {\r\nvar _updatePixelPosition = ol_Overlay.prototype.updatePixelPosition;\r\n\r\n/** Update pixel projection in a perspective map (apply projection to the position)\r\n * @private\r\n */\r\nol_Overlay.prototype.updatePixelPosition = function () {\r\n  var map = this.getMap();\r\n  if (map && map instanceof ol_PerspectiveMap) {\r\n    var position = this.getPosition();\r\n    if (!map || !map.isRendered() || !position) {\r\n      this.setVisible(false);\r\n      return;\r\n    }\r\n    // Get pixel at screen\r\n    \r\n    var pixel = map.getPixelScreenFromCoordinate(position);\r\n    var mapSize = map.getSize();\r\n    pixel[0] -= mapSize[0]/4\r\n    pixel[1] -= mapSize[1]/4\r\n    /* for ol v6.2.x\r\n    // Offset according positioning\r\n    var pos = this.getPositioning();\r\n    if (/bottom/.test(pos)) {\r\n      pixel[1] += mapSize[1]/4\r\n    } else {\r\n      pixel[1] -= mapSize[1]/4\r\n    }\r\n    if (/right/.test(pos)) {\r\n      pixel[0] += mapSize[0]/4\r\n    } else {\r\n      pixel[0] -= mapSize[0]/4\r\n    }\r\n    */\r\n    // Update\r\n    this.updateRenderedPosition(pixel , mapSize);\r\n  } else {\r\n    _updatePixelPosition.call(this);\r\n  }\r\n};\r\n/**/\r\n\r\n})();\r\n\r\nexport default ol_PerspectiveMap\r\n","<script>\r\nimport { useSlots, onBeforeMount, onMounted, onBeforeUnmount, ref, reactive, computed, watch, nextTick, defineAsyncComponent, useCssModule, inject, getCurrentInstance } from 'vue'\r\nimport $ from 'jquery'\r\n\r\nimport { Map, View, Feature } from 'ol'\r\nimport Select from 'ol/interaction/Select';\r\nimport { ScaleLine } from 'ol/control.js';\r\n\r\nimport { ImageArcGISRest, OSM } from 'ol/source.js'\r\nimport TileWMS from 'ol/source/TileWMS'\r\nimport { IGC, WFS, } from 'ol/format'\r\nimport * as ol from 'ol';\r\nimport { TileArcGISRest } from 'ol/source.js'\r\n\r\nimport XYZ from 'ol/source/XYZ'\r\nimport VectorSource from 'ol/source/Vector.js'\r\nimport { Icon, Fill, Stroke, Style } from 'ol/style.js'\r\nimport { Tile, Tile as TileLayer, Image as ImageLayer, Vector, Vector as VectorLayer } from 'ol/layer.js'\r\nimport ImageWMS from 'ol/source/ImageWMS.js';\r\nimport TileGrid from 'ol/layer/Tile.js';\r\n\r\nimport PerspectiveMap from \"ol-ext/map/PerspectiveMap\"\r\n\r\nimport EsriJSON from 'ol/format/EsriJSON.js'\r\nimport { createXYZ } from 'ol/tilegrid.js'\r\nimport { bbox, tile as tileStrategy } from 'ol/loadingstrategy.js'\r\nimport { Circle, Polygon, Point } from 'ol/geom.js'\r\nimport Projection from 'ol/proj/Projection.js'\r\nimport GeoJSON from 'ol/format/GeoJSON.js'\r\n\r\nimport OLCesium from 'olcs/OLCesium.js';\r\nimport VectorImageLayer from 'ol/layer/VectorImage.js';\r\nimport TileState from 'ol/TileState.js';\r\n\r\nimport 'ol/ol.css'\r\n\r\nimport mapLayerList from '@/config/mapLayerList'\r\nimport baseMapList, { getBaseMapAll } from '@/config/baseMapList'\r\n\r\nimport 'ol-ext/dist/ol-ext.css'\r\nimport * as olTilecoord from 'ol/tilecoord'\r\nimport { get as getProjection } from 'ol/proj'\r\nimport WMSGetFeatureInfo from 'ol/format/WMSGetFeatureInfo.js'\r\nimport Overlay from 'ol/Overlay.js'\r\nimport currentPositionImg from '@/assets/img/icon/currentPosition.svg';\r\n\r\nimport { altKeyOnly, click, pointerMove } from 'ol/events/condition.js';\r\n// proj4.defs(\r\n//     'Indiana-East',\r\n//     'PROJCS[\"IN83-EF\",GEOGCS[\"LL83\",DATUM[\"NAD83\",' +\r\n//     'SPHEROID[\"GRS1980\",6378137.000,298.25722210]],PRIMEM[\"Greenwich\",0],' +\r\n//     'UNIT[\"Degree\",0.017453292519943295]],PROJECTION[\"Transverse_Mercator\"],' +\r\n//     'PARAMETER[\"false_easting\",328083.333],' +\r\n//     'PARAMETER[\"false_northing\",820208.333],' +\r\n//     'PARAMETER[\"scale_factor\",0.999966666667],' +\r\n//     'PARAMETER[\"central_meridian\",-85.66666666666670],' +\r\n//     'PARAMETER[\"latitude_of_origin\",37.50000000000000],' +\r\n//     'UNIT[\"Foot_US\",0.30480060960122]]'\r\n// );\r\n// register(proj4);\r\n\r\nexport default {\r\n    props: {\r\n    },\r\n    setup(props, { emit }) {\r\n        let map\r\n        onMounted(async () => {\r\n\r\n            const bgColors = [\r\n                '#261F03',\r\n                '#F49AAF',\r\n                '#A9C4F6',\r\n                '#A5A751',\r\n                '#9C7B37',\r\n                '#ABD172',\r\n                '#6FB7B7',\r\n                '#117800'\r\n            ]\r\n            const vector = new VectorLayer({\r\n                source: new VectorSource({\r\n                    url: 'https://gis.edtest.site/ogc/temp?VERSION=1.3.0&SERVICE=WFS&REQUEST=GetFeature&OUTPUTFORMAT=application/json&TYPENAME=新竹縣原住民部落範圍&STYLE=default',\r\n                    format: new GeoJSON(),\r\n                    strategy: bbox\r\n                }),\r\n                style: function (feature) {\r\n                    var parts = feature.id_.split('.'); // 使用点号进行分割\r\n                    var lastPart = parts[parts.length - 1]; // 获取最后一个部分\r\n                    const style = new Style({\r\n                        fill: new Fill({\r\n                            color: bgColors[lastPart] !== undefined ? bgColors[lastPart] : '#FF0000',\r\n                        }),\r\n                    })\r\n                    return style;\r\n                },\r\n            });\r\n            const osm = new TileLayer({\r\n                source: new OSM(),\r\n            });\r\n\r\n            map = new Map({\r\n                layers: [\r\n                    osm,\r\n                    vector\r\n                ],\r\n                target: 'map',\r\n                view: new View({\r\n                    projection: 'EPSG:4326',\r\n                    center: [121.326776, 24.655499],\r\n                    zoom: 12,\r\n                }),\r\n            });\r\n\r\n            let select = null; // ref to currently selected interaction\r\n\r\n            const selected = new Style({\r\n                fill: new Fill({\r\n                    color: '#eeeeee',\r\n                }),\r\n                stroke: new Stroke({\r\n                    color: 'rgba(255, 255, 255, 0.7)',\r\n                    width: 2,\r\n                }),\r\n            });\r\n\r\n            function selectStyle(feature) {\r\n                const color = feature.get('COLOR') || '#eeeeee';\r\n                selected.getFill().setColor(color);\r\n                return selected;\r\n            }\r\n\r\n            // select interaction working on \"singleclick\"\r\n            const selectSingleClick = new Select({ style: selectStyle });\r\n\r\n            // select interaction working on \"click\"\r\n            const selectClick = new Select({\r\n                condition: click,\r\n                style: selectStyle,\r\n            });\r\n\r\n            // select interaction working on \"pointermove\"\r\n            const selectPointerMove = new Select({\r\n                condition: pointerMove,\r\n                style: selectStyle,\r\n            });\r\n\r\n            const selectAltClick = new Select({\r\n                style: selectStyle,\r\n                condition: function (mapBrowserEvent) {\r\n                    return click(mapBrowserEvent) && altKeyOnly(mapBrowserEvent);\r\n                },\r\n            });\r\n\r\n            const selectElement = document.getElementById('type');\r\n\r\n            const changeInteraction = function () {\r\n                if (select !== null) {\r\n                    map.removeInteraction(select);\r\n                }\r\n                const value = selectElement.value;\r\n                if (value == 'singleclick') {\r\n                    select = selectSingleClick;\r\n                } else if (value == 'click') {\r\n                    select = selectClick;\r\n                } else if (value == 'pointermove') {\r\n                    select = selectPointerMove;\r\n                } else if (value == 'altclick') {\r\n                    select = selectAltClick;\r\n                } else {\r\n                    select = null;\r\n                }\r\n                if (select !== null) {\r\n                    map.addInteraction(select);\r\n                    select.on('select', function (e) {\r\n                        document.getElementById('status').innerHTML =\r\n                            '&nbsp;' +\r\n                            e.target.getFeatures().getLength() +\r\n                            ' selected features (last operation selected ' +\r\n                            e.selected.length +\r\n                            ' and deselected ' +\r\n                            e.deselected.length +\r\n                            ' features)';\r\n                    });\r\n                }\r\n            };\r\n\r\n            /**\r\n             * onchange callback on the select element.\r\n             */\r\n            selectElement.onchange = changeInteraction;\r\n            changeInteraction();\r\n        })\r\n\r\n        return {\r\n            map,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div>\r\n        <div id=\"map\" class=\"map\"></div>\r\n        <form>\r\n            <label for=\"type\">Action type &nbsp;</label>\r\n            <select id=\"type\">\r\n                <option value=\"click\" selected>Click</option>\r\n                <option value=\"singleclick\">Single-click</option>\r\n                <option value=\"pointermove\">Hover</option>\r\n                <option value=\"altclick\">Alt+Click</option>\r\n                <option value=\"none\">None</option>\r\n            </select>\r\n            <span id=\"status\">&nbsp;0 selected features</span>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<style lang=\"sass\" scoped>\r\n#map\r\n    width: 100%\r\n    height: 1000px\r\n</style>\r\n\r\n"],"names":["ol_ext_input_Base","ol_Object","options","input","tout","elt","cback","handle","e","listen","v","ol_ext_input_Checkbox","label","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","tagName","attr","i","opt","element","html","text","eventType","fn","useCapture","el","st","s","styleProp","value","defaultView","str","letter","oldLeft","oldRsLeft","rect","offset","getOffset","parent","r","fixed","gleft","gtop","getRect","pos","speed","d","dt","onmove","page","scroll","moving","scale","isbar","updateCounter","updateMinibar","scrollbar","updateMinibarDelay","pheight","height","scrollContainer","onPointerDown","onPointerMove","onPointerUp","delta","animate","to","step","init","b","onMouseWheel","eventName","event","ol_matrix3D","ele","style","tr","values","mx","j","x","y","z","round","m","mx1","mx2","sum","k","tx","origin","preTx","postTx","temp1","px","vert","out","s0","s1","s2","s3","s4","s5","c5","c4","c3","c2","c1","c0","determinant","ol_PerspectiveMap","ol_Map","divMap","map","opts","ol_events_condition_altKeyOnly","angle","fromAngle","toAngle","t","ol_easing_inAndOut","t0","duration","easing","end","fac","compute","txOrigin","coord","fullTx","pixel","_updatePixelPosition","ol_Overlay","position","mapSize","_sfc_main","props","emit","onMounted","bgColors","GeoJSON","parts","feature","lastPart","Style","OSM","osm","Stroke","color","selected","click","selectStyle","selectPointerMove","Select","pointerMove","selectAltClick","mapBrowserEvent","changeInteraction","select","selectElement","selectClick"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}